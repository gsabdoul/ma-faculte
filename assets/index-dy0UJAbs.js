var CC=n=>{throw TypeError(n)};var A0=(n,e,t)=>e.has(n)||CC("Cannot "+t);var Wt=(n,e,t)=>(A0(n,e,"read from private field"),t?t.call(n):e.get(n)),Xi=(n,e,t)=>e.has(n)?CC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),wr=(n,e,t,r)=>(A0(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ki=(n,e,t)=>(A0(n,e,"access private method"),t);var jC=(n,e,t,r)=>({set _(i){wr(n,e,i,t)},get _(){return Wt(n,e,r)}});function ZS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _t(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function m3(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var E0={exports:{}},od={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC;function c8(){if(NC)return od;NC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:s,ref:i!==void 0?i:null,props:a}}return od.Fragment=e,od.jsx=t,od.jsxs=t,od}var MC;function u8(){return MC||(MC=1,E0.exports=c8()),E0.exports}var v=u8(),T0={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC;function d8(){if(PC)return Ye;PC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),g=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function S(U,G,ee){this.props=U,this.context=G,this.refs=w,this.updater=ee||x}S.prototype.isReactComponent={},S.prototype.setState=function(U,G){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,G,"setState")},S.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function O(){}O.prototype=S.prototype;function T(U,G,ee){this.props=U,this.context=G,this.refs=w,this.updater=ee||x}var M=T.prototype=new O;M.constructor=T,b(M,S.prototype),M.isPureReactComponent=!0;var N=Array.isArray;function j(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function k(U,G,ee){var le=ee.ref;return{$$typeof:n,type:U,key:G,ref:le!==void 0?le:null,props:ee}}function F(U,G){return k(U.type,G,U.props)}function D(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function L(U){var G={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ee){return G[ee]})}var B=/\/+/g;function V(U,G){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):G.toString(36)}function H(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(j,j):(U.status="pending",U.then(function(G){U.status==="pending"&&(U.status="fulfilled",U.value=G)},function(G){U.status==="pending"&&(U.status="rejected",U.reason=G)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function I(U,G,ee,le,ge){var ye=typeof U;(ye==="undefined"||ye==="boolean")&&(U=null);var ve=!1;if(U===null)ve=!0;else switch(ye){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(U.$$typeof){case n:case e:ve=!0;break;case f:return ve=U._init,I(ve(U._payload),G,ee,le,ge)}}if(ve)return ge=ge(U),ve=le===""?"."+V(U,0):le,N(ge)?(ee="",ve!=null&&(ee=ve.replace(B,"$&/")+"/"),I(ge,G,ee,"",function(Se){return Se})):ge!=null&&(D(ge)&&(ge=F(ge,ee+(ge.key==null||U&&U.key===ge.key?"":(""+ge.key).replace(B,"$&/")+"/")+ve)),G.push(ge)),1;ve=0;var Ae=le===""?".":le+":";if(N(U))for(var me=0;me<U.length;me++)le=U[me],ye=Ae+V(le,me),ve+=I(le,G,ee,ye,ge);else if(me=y(U),typeof me=="function")for(U=me.call(U),me=0;!(le=U.next()).done;)le=le.value,ye=Ae+V(le,me++),ve+=I(le,G,ee,ye,ge);else if(ye==="object"){if(typeof U.then=="function")return I(H(U),G,ee,le,ge);throw G=String(U),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ve}function z(U,G,ee){if(U==null)return U;var le=[],ge=0;return I(U,le,"","",function(ye){return G.call(ee,ye,ge++)}),le}function q(U){if(U._status===-1){var G=U._result;G=G(),G.then(function(ee){(U._status===0||U._status===-1)&&(U._status=1,U._result=ee)},function(ee){(U._status===0||U._status===-1)&&(U._status=2,U._result=ee)}),U._status===-1&&(U._status=0,U._result=G)}if(U._status===1)return U._result.default;throw U._result}var J=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},K={map:z,forEach:function(U,G,ee){z(U,function(){G.apply(this,arguments)},ee)},count:function(U){var G=0;return z(U,function(){G++}),G},toArray:function(U){return z(U,function(G){return G})||[]},only:function(U){if(!D(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Ye.Activity=m,Ye.Children=K,Ye.Component=S,Ye.Fragment=t,Ye.Profiler=i,Ye.PureComponent=T,Ye.StrictMode=r,Ye.Suspense=u,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(U){return C.H.useMemoCache(U)}},Ye.cache=function(U){return function(){return U.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(U,G,ee){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var le=b({},U.props),ge=U.key;if(G!=null)for(ye in G.key!==void 0&&(ge=""+G.key),G)!R.call(G,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&G.ref===void 0||(le[ye]=G[ye]);var ye=arguments.length-2;if(ye===1)le.children=ee;else if(1<ye){for(var ve=Array(ye),Ae=0;Ae<ye;Ae++)ve[Ae]=arguments[Ae+2];le.children=ve}return k(U.type,ge,le)},Ye.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},Ye.createElement=function(U,G,ee){var le,ge={},ye=null;if(G!=null)for(le in G.key!==void 0&&(ye=""+G.key),G)R.call(G,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ge[le]=G[le]);var ve=arguments.length-2;if(ve===1)ge.children=ee;else if(1<ve){for(var Ae=Array(ve),me=0;me<ve;me++)Ae[me]=arguments[me+2];ge.children=Ae}if(U&&U.defaultProps)for(le in ve=U.defaultProps,ve)ge[le]===void 0&&(ge[le]=ve[le]);return k(U,ye,ge)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(U){return{$$typeof:l,render:U}},Ye.isValidElement=D,Ye.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:q}},Ye.memo=function(U,G){return{$$typeof:d,type:U,compare:G===void 0?null:G}},Ye.startTransition=function(U){var G=C.T,ee={};C.T=ee;try{var le=U(),ge=C.S;ge!==null&&ge(ee,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(j,J)}catch(ye){J(ye)}finally{G!==null&&ee.types!==null&&(G.types=ee.types),C.T=G}},Ye.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ye.use=function(U){return C.H.use(U)},Ye.useActionState=function(U,G,ee){return C.H.useActionState(U,G,ee)},Ye.useCallback=function(U,G){return C.H.useCallback(U,G)},Ye.useContext=function(U){return C.H.useContext(U)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(U,G){return C.H.useDeferredValue(U,G)},Ye.useEffect=function(U,G){return C.H.useEffect(U,G)},Ye.useEffectEvent=function(U){return C.H.useEffectEvent(U)},Ye.useId=function(){return C.H.useId()},Ye.useImperativeHandle=function(U,G,ee){return C.H.useImperativeHandle(U,G,ee)},Ye.useInsertionEffect=function(U,G){return C.H.useInsertionEffect(U,G)},Ye.useLayoutEffect=function(U,G){return C.H.useLayoutEffect(U,G)},Ye.useMemo=function(U,G){return C.H.useMemo(U,G)},Ye.useOptimistic=function(U,G){return C.H.useOptimistic(U,G)},Ye.useReducer=function(U,G,ee){return C.H.useReducer(U,G,ee)},Ye.useRef=function(U){return C.H.useRef(U)},Ye.useState=function(U){return C.H.useState(U)},Ye.useSyncExternalStore=function(U,G,ee){return C.H.useSyncExternalStore(U,G,ee)},Ye.useTransition=function(){return C.H.useTransition()},Ye.version="19.2.0",Ye}var RC;function JS(){return RC||(RC=1,T0.exports=d8()),T0.exports}var E=JS();const Z=_t(E),h8=ZS({__proto__:null,default:Z},[E]);var O0={exports:{}},ld={},C0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC;function f8(){return kC||(kC=1,(function(n){function e(I,z){var q=I.length;I.push(z);e:for(;0<q;){var J=q-1>>>1,K=I[J];if(0<i(K,z))I[J]=z,I[q]=K,q=J;else break e}}function t(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],q=I.pop();if(q!==z){I[0]=q;e:for(var J=0,K=I.length,U=K>>>1;J<U;){var G=2*(J+1)-1,ee=I[G],le=G+1,ge=I[le];if(0>i(ee,q))le<K&&0>i(ge,ee)?(I[J]=ge,I[le]=q,J=le):(I[J]=ee,I[G]=q,J=G);else if(le<K&&0>i(ge,q))I[J]=ge,I[le]=q,J=le;else break e}}return z}function i(I,z){var q=I.sortIndex-z.sortIndex;return q!==0?q:I.id-z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var u=[],d=[],f=1,m=null,g=3,y=!1,x=!1,b=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(I){for(var z=t(d);z!==null;){if(z.callback===null)r(d);else if(z.startTime<=I)r(d),z.sortIndex=z.expirationTime,e(u,z);else break;z=t(d)}}function N(I){if(b=!1,M(I),!x)if(t(u)!==null)x=!0,j||(j=!0,L());else{var z=t(d);z!==null&&H(N,z.startTime-I)}}var j=!1,C=-1,R=5,k=-1;function F(){return w?!0:!(n.unstable_now()-k<R)}function D(){if(w=!1,j){var I=n.unstable_now();k=I;var z=!0;try{e:{x=!1,b&&(b=!1,O(C),C=-1),y=!0;var q=g;try{t:{for(M(I),m=t(u);m!==null&&!(m.expirationTime>I&&F());){var J=m.callback;if(typeof J=="function"){m.callback=null,g=m.priorityLevel;var K=J(m.expirationTime<=I);if(I=n.unstable_now(),typeof K=="function"){m.callback=K,M(I),z=!0;break t}m===t(u)&&r(u),M(I)}else r(u);m=t(u)}if(m!==null)z=!0;else{var U=t(d);U!==null&&H(N,U.startTime-I),z=!1}}break e}finally{m=null,g=q,y=!1}z=void 0}}finally{z?L():j=!1}}}var L;if(typeof T=="function")L=function(){T(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,V=B.port2;B.port1.onmessage=D,L=function(){V.postMessage(null)}}else L=function(){S(D,0)};function H(I,z){C=S(function(){I(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(I){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var q=g;g=z;try{return I()}finally{g=q}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=g;g=I;try{return z()}finally{g=q}},n.unstable_scheduleCallback=function(I,z,q){var J=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?J+q:J):q=J,I){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=q+K,I={id:f++,callback:z,priorityLevel:I,startTime:q,expirationTime:K,sortIndex:-1},q>J?(I.sortIndex=q,e(d,I),t(u)===null&&I===t(d)&&(b?(O(C),C=-1):b=!0,H(N,q-J))):(I.sortIndex=K,e(u,I),x||y||(x=!0,j||(j=!0,L()))),I},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(I){var z=g;return function(){var q=g;g=z;try{return I.apply(this,arguments)}finally{g=q}}}})(j0)),j0}var DC;function m8(){return DC||(DC=1,C0.exports=f8()),C0.exports}var N0={exports:{}},Jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC;function p8(){if(LC)return Jn;LC=1;var n=JS();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:u,containerInfo:d,implementation:f}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Jn.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,f)},Jn.flushSync=function(u){var d=s.T,f=r.p;try{if(s.T=null,r.p=2,u)return u()}finally{s.T=d,r.p=f,r.d.f()}},Jn.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Jn.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Jn.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,m=l(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:y}):f==="script"&&r.d.X(u,{crossOrigin:m,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Jn.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Jn.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,m=l(f,d.crossOrigin);r.d.L(u,f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Jn.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Jn.requestFormReset=function(u){r.d.r(u)},Jn.unstable_batchedUpdates=function(u,d){return u(d)},Jn.useFormState=function(u,d,f){return s.H.useFormState(u,d,f)},Jn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Jn.version="19.2.0",Jn}var IC;function p3(){if(IC)return N0.exports;IC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),N0.exports=p8(),N0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function g8(){if(BC)return ld;BC=1;var n=m8(),e=JS(),t=p3();function r(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function s(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(a(o)!==o)throw Error(r(188))}function d(o){var c=o.alternate;if(!c){if(c=a(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,p=c;;){var _=h.return;if(_===null)break;var A=_.alternate;if(A===null){if(p=_.return,p!==null){h=p;continue}break}if(_.child===A.child){for(A=_.child;A;){if(A===h)return u(_),o;if(A===p)return u(_),c;A=A.sibling}throw Error(r(188))}if(h.return!==p.return)h=_,p=A;else{for(var P=!1,$=_.child;$;){if($===h){P=!0,h=_,p=A;break}if($===p){P=!0,p=_,h=A;break}$=$.sibling}if(!P){for($=A.child;$;){if($===h){P=!0,h=A,p=_;break}if($===p){P=!0,p=A,h=_;break}$=$.sibling}if(!P)throw Error(r(189))}}if(h.alternate!==p)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),T=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(o){return o===null||typeof o!="object"?null:(o=D&&o[D]||o["@@iterator"],typeof o=="function"?o:null)}var B=Symbol.for("react.client.reference");function V(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===B?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList";case k:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case T:return o.displayName||"Context";case O:return(o._context.displayName||"Context")+".Consumer";case M:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case C:return c=o.displayName||null,c!==null?c:V(o.type)||"Memo";case R:c=o._payload,o=o._init;try{return V(o(c))}catch{}}return null}var H=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},J=[],K=-1;function U(o){return{current:o}}function G(o){0>K||(o.current=J[K],J[K]=null,K--)}function ee(o,c){K++,J[K]=o.current,o.current=c}var le=U(null),ge=U(null),ye=U(null),ve=U(null);function Ae(o,c){switch(ee(ye,c),ee(ge,o),ee(le,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?ZO(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=ZO(c),o=JO(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}G(le),ee(le,o)}function me(){G(le),G(ge),G(ye)}function Se(o){o.memoizedState!==null&&ee(ve,o);var c=le.current,h=JO(c,o.type);c!==h&&(ee(ge,o),ee(le,h))}function De(o){ge.current===o&&(G(le),G(ge)),ve.current===o&&(G(ve),rd._currentValue=q)}var ce,Me;function Te(o){if(ce===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);ce=c&&c[1]||"",Me=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+o+Me}var Ge=!1;function Ue(o,c){if(!o||Ge)return"";Ge=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(se){var ie=se}Reflect.construct(o,[],fe)}else{try{fe.call()}catch(se){ie=se}o.call(fe.prototype)}}else{try{throw Error()}catch(se){ie=se}(fe=o())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(se){if(se&&ie&&typeof se.stack=="string")return[se.stack,ie.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=p.DetermineComponentFrameRoot(),P=A[0],$=A[1];if(P&&$){var W=P.split(`
`),re=$.split(`
`);for(_=p=0;p<W.length&&!W[p].includes("DetermineComponentFrameRoot");)p++;for(;_<re.length&&!re[_].includes("DetermineComponentFrameRoot");)_++;if(p===W.length||_===re.length)for(p=W.length-1,_=re.length-1;1<=p&&0<=_&&W[p]!==re[_];)_--;for(;1<=p&&0<=_;p--,_--)if(W[p]!==re[_]){if(p!==1||_!==1)do if(p--,_--,0>_||W[p]!==re[_]){var ue=`
`+W[p].replace(" at new "," at ");return o.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",o.displayName)),ue}while(1<=p&&0<=_);break}}}finally{Ge=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Te(h):""}function Ft(o,c){switch(o.tag){case 26:case 27:case 5:return Te(o.type);case 16:return Te("Lazy");case 13:return o.child!==c&&c!==null?Te("Suspense Fallback"):Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return Ue(o.type,!1);case 11:return Ue(o.type.render,!1);case 1:return Ue(o.type,!0);case 31:return Te("Activity");default:return""}}function An(o){try{var c="",h=null;do c+=Ft(o,h),h=o,o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Fn=Object.prototype.hasOwnProperty,Kr=n.unstable_scheduleCallback,Pn=n.unstable_cancelCallback,Cr=n.unstable_shouldYield,da=n.unstable_requestPaint,Lt=n.unstable_now,Zr=n.unstable_getCurrentPriorityLevel,Qs=n.unstable_ImmediatePriority,ar=n.unstable_UserBlockingPriority,fn=n.unstable_NormalPriority,mn=n.unstable_LowPriority,ha=n.unstable_IdlePriority,ml=n.log,mv=n.unstable_setDisableYieldValue,hr=null,Kn=null;function _i(o){if(typeof ml=="function"&&mv(o),Kn&&typeof Kn.setStrictMode=="function")try{Kn.setStrictMode(hr,o)}catch{}}var Zn=Math.clz32?Math.clz32:pl,pv=Math.log,lf=Math.LN2;function pl(o){return o>>>=0,o===0?32:31-(pv(o)/lf|0)|0}var eo=256,is=262144,as=4194304;function fa(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function to(o,c,h){var p=o.pendingLanes;if(p===0)return 0;var _=0,A=o.suspendedLanes,P=o.pingedLanes;o=o.warmLanes;var $=p&134217727;return $!==0?(p=$&~A,p!==0?_=fa(p):(P&=$,P!==0?_=fa(P):h||(h=$&~o,h!==0&&(_=fa(h))))):($=p&~A,$!==0?_=fa($):P!==0?_=fa(P):h||(h=p&~o,h!==0&&(_=fa(h)))),_===0?0:c!==0&&c!==_&&(c&A)===0&&(A=_&-_,h=c&-c,A>=h||A===32&&(h&4194048)!==0)?c:_}function no(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function cf(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ro(){var o=as;return as<<=1,(as&62914560)===0&&(as=4194304),o}function ss(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function io(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function gv(o,c,h,p,_,A){var P=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var $=o.entanglements,W=o.expirationTimes,re=o.hiddenUpdates;for(h=P&~h;0<h;){var ue=31-Zn(h),fe=1<<ue;$[ue]=0,W[ue]=-1;var ie=re[ue];if(ie!==null)for(re[ue]=null,ue=0;ue<ie.length;ue++){var se=ie[ue];se!==null&&(se.lane&=-536870913)}h&=~fe}p!==0&&Y(o,p,0),A!==0&&_===0&&o.tag!==0&&(o.suspendedLanes|=A&~(P&~c))}function Y(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var p=31-Zn(c);o.entangledLanes|=c,o.entanglements[p]=o.entanglements[p]|1073741824|h&261930}function te(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var p=31-Zn(h),_=1<<p;_&c|o[p]&c&&(o[p]|=c),h&=~_}}function ae(o,c){var h=c&-c;return h=(h&42)!==0?1:pe(h),(h&(o.suspendedLanes|c))!==0?0:h}function pe(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function we(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Le(){var o=z.p;return o!==0?o:(o=window.event,o===void 0?32:xC(o.type))}function He(o,c){var h=z.p;try{return z.p=o,c()}finally{z.p=h}}var Ee=Math.random().toString(36).slice(2),_e="__reactFiber$"+Ee,xe="__reactProps$"+Ee,Pe="__reactContainer$"+Ee,We="__reactEvents$"+Ee,ot="__reactListeners$"+Ee,En="__reactHandles$"+Ee,St="__reactResources$"+Ee,nt="__reactMarker$"+Ee;function It(o){delete o[_e],delete o[xe],delete o[We],delete o[ot],delete o[En]}function jr(o){var c=o[_e];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Pe]||h[_e]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=aC(o);o!==null;){if(h=o[_e])return h;o=aC(o)}return c}o=h,h=o.parentNode}return null}function Jr(o){if(o=o[_e]||o[Pe]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function sr(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(r(33))}function Un(o){var c=o[St];return c||(c=o[St]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function nn(o){o[nt]=!0}var os=new Set,Hi={};function Qr(o,c){Si(o,c),Si(o+"Capture",c)}function Si(o,c){for(Hi[o]=c,o=0;o<c.length;o++)os.add(c[o])}var mt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},ma={};function ao(o){return Fn.call(ma,o)?!0:Fn.call(Ut,o)?!1:mt.test(o)?ma[o]=!0:(Ut[o]=!0,!1)}function qt(o,c,h){if(ao(c))if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+h)}}function Ai(o,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+h)}}function ei(o,c,h,p){if(p===null)o.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(c,h,""+p)}}function fr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function zE(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function n7(o,c,h){var p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var _=p.get,A=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return _.call(this)},set:function(P){h=""+P,A.call(this,P)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function vv(o){if(!o._valueTracker){var c=zE(o)?"checked":"value";o._valueTracker=n7(o,c,""+o[c])}}function HE(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),p="";return o&&(p=zE(o)?o.checked?"true":"false":o.value),o=p,o!==h?(c.setValue(o),!0):!1}function uf(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var r7=/[\n"\\]/g;function ti(o){return o.replace(r7,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function yv(o,c,h,p,_,A,P,$){o.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?o.type=P:o.removeAttribute("type"),c!=null?P==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+fr(c)):o.value!==""+fr(c)&&(o.value=""+fr(c)):P!=="submit"&&P!=="reset"||o.removeAttribute("value"),c!=null?bv(o,P,fr(c)):h!=null?bv(o,P,fr(h)):p!=null&&o.removeAttribute("value"),_==null&&A!=null&&(o.defaultChecked=!!A),_!=null&&(o.checked=_&&typeof _!="function"&&typeof _!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?o.name=""+fr($):o.removeAttribute("name")}function VE(o,c,h,p,_,A,P,$){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.type=A),c!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||c!=null)){vv(o);return}h=h!=null?""+fr(h):"",c=c!=null?""+fr(c):h,$||c===o.value||(o.value=c),o.defaultValue=c}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=$?o.checked:!!p,o.defaultChecked=!!p,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(o.name=P),vv(o)}function bv(o,c,h){c==="number"&&uf(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function gl(o,c,h,p){if(o=o.options,c){c={};for(var _=0;_<h.length;_++)c["$"+h[_]]=!0;for(h=0;h<o.length;h++)_=c.hasOwnProperty("$"+o[h].value),o[h].selected!==_&&(o[h].selected=_),_&&p&&(o[h].defaultSelected=!0)}else{for(h=""+fr(h),c=null,_=0;_<o.length;_++){if(o[_].value===h){o[_].selected=!0,p&&(o[_].defaultSelected=!0);return}c!==null||o[_].disabled||(c=o[_])}c!==null&&(c.selected=!0)}}function GE(o,c,h){if(c!=null&&(c=""+fr(c),c!==o.value&&(o.value=c),h==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=h!=null?""+fr(h):""}function WE(o,c,h,p){if(c==null){if(p!=null){if(h!=null)throw Error(r(92));if(H(p)){if(1<p.length)throw Error(r(93));p=p[0]}h=p}h==null&&(h=""),c=h}h=fr(c),o.defaultValue=h,p=o.textContent,p===h&&p!==""&&p!==null&&(o.value=p),vv(o)}function vl(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var i7=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function YE(o,c,h){var p=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":p?o.setProperty(c,h):typeof h!="number"||h===0||i7.has(c)?c==="float"?o.cssFloat=h:o[c]=(""+h).trim():o[c]=h+"px"}function XE(o,c,h){if(c!=null&&typeof c!="object")throw Error(r(62));if(o=o.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var _ in c)p=c[_],c.hasOwnProperty(_)&&h[_]!==p&&YE(o,_,p)}else for(var A in c)c.hasOwnProperty(A)&&YE(o,A,c[A])}function wv(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a7=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),s7=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function df(o){return s7.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function pa(){}var xv=null;function _v(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yl=null,bl=null;function KE(o){var c=Jr(o);if(c&&(o=c.stateNode)){var h=o[xe]||null;e:switch(o=c.stateNode,c.type){case"input":if(yv(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ti(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var p=h[c];if(p!==o&&p.form===o.form){var _=p[xe]||null;if(!_)throw Error(r(90));yv(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(c=0;c<h.length;c++)p=h[c],p.form===o.form&&HE(p)}break e;case"textarea":GE(o,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&gl(o,!!h.multiple,c,!1)}}}var Sv=!1;function ZE(o,c,h){if(Sv)return o(c,h);Sv=!0;try{var p=o(c);return p}finally{if(Sv=!1,(yl!==null||bl!==null)&&(Jf(),yl&&(c=yl,o=bl,bl=yl=null,KE(c),o)))for(c=0;c<o.length;c++)KE(o[c])}}function wu(o,c){var h=o.stateNode;if(h===null)return null;var p=h[xe]||null;if(p===null)return null;h=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Av=!1;if(ga)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){Av=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{Av=!1}var ls=null,Ev=null,hf=null;function JE(){if(hf)return hf;var o,c=Ev,h=c.length,p,_="value"in ls?ls.value:ls.textContent,A=_.length;for(o=0;o<h&&c[o]===_[o];o++);var P=h-o;for(p=1;p<=P&&c[h-p]===_[A-p];p++);return hf=_.slice(o,1<p?1-p:void 0)}function ff(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function mf(){return!0}function QE(){return!1}function mr(o){function c(h,p,_,A,P){this._reactName=h,this._targetInst=_,this.type=p,this.nativeEvent=A,this.target=P,this.currentTarget=null;for(var $ in o)o.hasOwnProperty($)&&(h=o[$],this[$]=h?h(A):A[$]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?mf:QE,this.isPropagationStopped=QE,this}return m(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=mf)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=mf)},persist:function(){},isPersistent:mf}),c}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pf=mr(so),_u=m({},so,{view:0,detail:0}),o7=mr(_u),Tv,Ov,Su,gf=m({},_u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jv,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Su&&(Su&&o.type==="mousemove"?(Tv=o.screenX-Su.screenX,Ov=o.screenY-Su.screenY):Ov=Tv=0,Su=o),Tv)},movementY:function(o){return"movementY"in o?o.movementY:Ov}}),e2=mr(gf),l7=m({},gf,{dataTransfer:0}),c7=mr(l7),u7=m({},_u,{relatedTarget:0}),Cv=mr(u7),d7=m({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),h7=mr(d7),f7=m({},so,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),m7=mr(f7),p7=m({},so,{data:0}),t2=mr(p7),g7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b7(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=y7[o])?!!c[o]:!1}function jv(){return b7}var w7=m({},_u,{key:function(o){if(o.key){var c=g7[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=ff(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?v7[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jv,charCode:function(o){return o.type==="keypress"?ff(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ff(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),x7=mr(w7),_7=m({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n2=mr(_7),S7=m({},_u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jv}),A7=mr(S7),E7=m({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),T7=mr(E7),O7=m({},gf,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),C7=mr(O7),j7=m({},so,{newState:0,oldState:0}),N7=mr(j7),M7=[9,13,27,32],Nv=ga&&"CompositionEvent"in window,Au=null;ga&&"documentMode"in document&&(Au=document.documentMode);var P7=ga&&"TextEvent"in window&&!Au,r2=ga&&(!Nv||Au&&8<Au&&11>=Au),i2=" ",a2=!1;function s2(o,c){switch(o){case"keyup":return M7.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o2(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var wl=!1;function R7(o,c){switch(o){case"compositionend":return o2(c);case"keypress":return c.which!==32?null:(a2=!0,i2);case"textInput":return o=c.data,o===i2&&a2?null:o;default:return null}}function k7(o,c){if(wl)return o==="compositionend"||!Nv&&s2(o,c)?(o=JE(),hf=Ev=ls=null,wl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return r2&&c.locale!=="ko"?null:c.data;default:return null}}var D7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l2(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!D7[o.type]:c==="textarea"}function c2(o,c,h,p){yl?bl?bl.push(p):bl=[p]:yl=p,c=am(c,"onChange"),0<c.length&&(h=new pf("onChange","change",null,h,p),o.push({event:h,listeners:c}))}var Eu=null,Tu=null;function L7(o){VO(o,0)}function vf(o){var c=sr(o);if(HE(c))return o}function u2(o,c){if(o==="change")return c}var d2=!1;if(ga){var Mv;if(ga){var Pv="oninput"in document;if(!Pv){var h2=document.createElement("div");h2.setAttribute("oninput","return;"),Pv=typeof h2.oninput=="function"}Mv=Pv}else Mv=!1;d2=Mv&&(!document.documentMode||9<document.documentMode)}function f2(){Eu&&(Eu.detachEvent("onpropertychange",m2),Tu=Eu=null)}function m2(o){if(o.propertyName==="value"&&vf(Tu)){var c=[];c2(c,Tu,o,_v(o)),ZE(L7,c)}}function I7(o,c,h){o==="focusin"?(f2(),Eu=c,Tu=h,Eu.attachEvent("onpropertychange",m2)):o==="focusout"&&f2()}function B7(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return vf(Tu)}function $7(o,c){if(o==="click")return vf(c)}function F7(o,c){if(o==="input"||o==="change")return vf(c)}function U7(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Nr=typeof Object.is=="function"?Object.is:U7;function Ou(o,c){if(Nr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),p=Object.keys(c);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var _=h[p];if(!Fn.call(c,_)||!Nr(o[_],c[_]))return!1}return!0}function p2(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function g2(o,c){var h=p2(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=c&&p>=c)return{node:h,offset:c-o};o=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=p2(h)}}function v2(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?v2(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function y2(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=uf(o.document);c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=uf(o.document)}return c}function Rv(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var q7=ga&&"documentMode"in document&&11>=document.documentMode,xl=null,kv=null,Cu=null,Dv=!1;function b2(o,c,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Dv||xl==null||xl!==uf(p)||(p=xl,"selectionStart"in p&&Rv(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Cu&&Ou(Cu,p)||(Cu=p,p=am(kv,"onSelect"),0<p.length&&(c=new pf("onSelect","select",null,c,h),o.push({event:c,listeners:p}),c.target=xl)))}function oo(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var _l={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionrun:oo("Transition","TransitionRun"),transitionstart:oo("Transition","TransitionStart"),transitioncancel:oo("Transition","TransitionCancel"),transitionend:oo("Transition","TransitionEnd")},Lv={},w2={};ga&&(w2=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function lo(o){if(Lv[o])return Lv[o];if(!_l[o])return o;var c=_l[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in w2)return Lv[o]=c[h];return o}var x2=lo("animationend"),_2=lo("animationiteration"),S2=lo("animationstart"),z7=lo("transitionrun"),H7=lo("transitionstart"),V7=lo("transitioncancel"),A2=lo("transitionend"),E2=new Map,Iv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Iv.push("scrollEnd");function Ei(o,c){E2.set(o,c),Qr(c,[o])}var yf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ni=[],Sl=0,Bv=0;function bf(){for(var o=Sl,c=Bv=Sl=0;c<o;){var h=ni[c];ni[c++]=null;var p=ni[c];ni[c++]=null;var _=ni[c];ni[c++]=null;var A=ni[c];if(ni[c++]=null,p!==null&&_!==null){var P=p.pending;P===null?_.next=_:(_.next=P.next,P.next=_),p.pending=_}A!==0&&T2(h,_,A)}}function wf(o,c,h,p){ni[Sl++]=o,ni[Sl++]=c,ni[Sl++]=h,ni[Sl++]=p,Bv|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function $v(o,c,h,p){return wf(o,c,h,p),xf(o)}function co(o,c){return wf(o,null,null,c),xf(o)}function T2(o,c,h){o.lanes|=h;var p=o.alternate;p!==null&&(p.lanes|=h);for(var _=!1,A=o.return;A!==null;)A.childLanes|=h,p=A.alternate,p!==null&&(p.childLanes|=h),A.tag===22&&(o=A.stateNode,o===null||o._visibility&1||(_=!0)),o=A,A=A.return;return o.tag===3?(A=o.stateNode,_&&c!==null&&(_=31-Zn(h),o=A.hiddenUpdates,p=o[_],p===null?o[_]=[c]:p.push(c),c.lane=h|536870912),A):null}function xf(o){if(50<Ku)throw Ku=0,Yy=null,Error(r(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Al={};function G7(o,c,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(o,c,h,p){return new G7(o,c,h,p)}function Fv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function va(o,c){var h=o.alternate;return h===null?(h=Mr(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function O2(o,c){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function _f(o,c,h,p,_,A){var P=0;if(p=o,typeof o=="function")Fv(o)&&(P=1);else if(typeof o=="string")P=Z$(o,h,le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case k:return o=Mr(31,h,c,_),o.elementType=k,o.lanes=A,o;case b:return uo(h.children,_,A,c);case w:P=8,_|=24;break;case S:return o=Mr(12,h,c,_|2),o.elementType=S,o.lanes=A,o;case N:return o=Mr(13,h,c,_),o.elementType=N,o.lanes=A,o;case j:return o=Mr(19,h,c,_),o.elementType=j,o.lanes=A,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case T:P=10;break e;case O:P=9;break e;case M:P=11;break e;case C:P=14;break e;case R:P=16,p=null;break e}P=29,h=Error(r(130,o===null?"null":typeof o,"")),p=null}return c=Mr(P,h,c,_),c.elementType=o,c.type=p,c.lanes=A,c}function uo(o,c,h,p){return o=Mr(7,o,p,c),o.lanes=h,o}function Uv(o,c,h){return o=Mr(6,o,null,c),o.lanes=h,o}function C2(o){var c=Mr(18,null,null,0);return c.stateNode=o,c}function qv(o,c,h){return c=Mr(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var j2=new WeakMap;function ri(o,c){if(typeof o=="object"&&o!==null){var h=j2.get(o);return h!==void 0?h:(c={value:o,source:c,stack:An(c)},j2.set(o,c),c)}return{value:o,source:c,stack:An(c)}}var El=[],Tl=0,Sf=null,ju=0,ii=[],ai=0,cs=null,Vi=1,Gi="";function ya(o,c){El[Tl++]=ju,El[Tl++]=Sf,Sf=o,ju=c}function N2(o,c,h){ii[ai++]=Vi,ii[ai++]=Gi,ii[ai++]=cs,cs=o;var p=Vi;o=Gi;var _=32-Zn(p)-1;p&=~(1<<_),h+=1;var A=32-Zn(c)+_;if(30<A){var P=_-_%5;A=(p&(1<<P)-1).toString(32),p>>=P,_-=P,Vi=1<<32-Zn(c)+_|h<<_|p,Gi=A+o}else Vi=1<<A|h<<_|p,Gi=o}function zv(o){o.return!==null&&(ya(o,1),N2(o,1,0))}function Hv(o){for(;o===Sf;)Sf=El[--Tl],El[Tl]=null,ju=El[--Tl],El[Tl]=null;for(;o===cs;)cs=ii[--ai],ii[ai]=null,Gi=ii[--ai],ii[ai]=null,Vi=ii[--ai],ii[ai]=null}function M2(o,c){ii[ai++]=Vi,ii[ai++]=Gi,ii[ai++]=cs,Vi=c.id,Gi=c.overflow,cs=o}var qn=null,zt=null,dt=!1,us=null,si=!1,Vv=Error(r(519));function ds(o){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nu(ri(c,o)),Vv}function P2(o){var c=o.stateNode,h=o.type,p=o.memoizedProps;switch(c[_e]=o,c[xe]=p,h){case"dialog":it("cancel",c),it("close",c);break;case"iframe":case"object":case"embed":it("load",c);break;case"video":case"audio":for(h=0;h<Ju.length;h++)it(Ju[h],c);break;case"source":it("error",c);break;case"img":case"image":case"link":it("error",c),it("load",c);break;case"details":it("toggle",c);break;case"input":it("invalid",c),VE(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":it("invalid",c);break;case"textarea":it("invalid",c),WE(c,p.value,p.defaultValue,p.children)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||p.suppressHydrationWarning===!0||XO(c.textContent,h)?(p.popover!=null&&(it("beforetoggle",c),it("toggle",c)),p.onScroll!=null&&it("scroll",c),p.onScrollEnd!=null&&it("scrollend",c),p.onClick!=null&&(c.onclick=pa),c=!0):c=!1,c||ds(o,!0)}function R2(o){for(qn=o.return;qn;)switch(qn.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:qn=qn.return}}function Ol(o){if(o!==qn)return!1;if(!dt)return R2(o),dt=!0,!1;var c=o.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||c0(o.type,o.memoizedProps)),h=!h),h&&zt&&ds(o),R2(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));zt=iC(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));zt=iC(o)}else c===27?(c=zt,Es(o.type)?(o=m0,m0=null,zt=o):zt=c):zt=qn?li(o.stateNode.nextSibling):null;return!0}function ho(){zt=qn=null,dt=!1}function Gv(){var o=us;return o!==null&&(yr===null?yr=o:yr.push.apply(yr,o),us=null),o}function Nu(o){us===null?us=[o]:us.push(o)}var Wv=U(null),fo=null,ba=null;function hs(o,c,h){ee(Wv,c._currentValue),c._currentValue=h}function wa(o){o._currentValue=Wv.current,G(Wv)}function Yv(o,c,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),o===h)break;o=o.return}}function Xv(o,c,h,p){var _=o.child;for(_!==null&&(_.return=o);_!==null;){var A=_.dependencies;if(A!==null){var P=_.child;A=A.firstContext;e:for(;A!==null;){var $=A;A=_;for(var W=0;W<c.length;W++)if($.context===c[W]){A.lanes|=h,$=A.alternate,$!==null&&($.lanes|=h),Yv(A.return,h,o),p||(P=null);break e}A=$.next}}else if(_.tag===18){if(P=_.return,P===null)throw Error(r(341));P.lanes|=h,A=P.alternate,A!==null&&(A.lanes|=h),Yv(P,h,o),P=null}else P=_.child;if(P!==null)P.return=_;else for(P=_;P!==null;){if(P===o){P=null;break}if(_=P.sibling,_!==null){_.return=P.return,P=_;break}P=P.return}_=P}}function Cl(o,c,h,p){o=null;for(var _=c,A=!1;_!==null;){if(!A){if((_.flags&524288)!==0)A=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var P=_.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var $=_.type;Nr(_.pendingProps.value,P.value)||(o!==null?o.push($):o=[$])}}else if(_===ve.current){if(P=_.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(o!==null?o.push(rd):o=[rd])}_=_.return}o!==null&&Xv(c,o,h,p),c.flags|=262144}function Af(o){for(o=o.firstContext;o!==null;){if(!Nr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function mo(o){fo=o,ba=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function zn(o){return k2(fo,o)}function Ef(o,c){return fo===null&&mo(o),k2(o,c)}function k2(o,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},ba===null){if(o===null)throw Error(r(308));ba=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else ba=ba.next=c;return h}var W7=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,p){o.push(p)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},Y7=n.unstable_scheduleCallback,X7=n.unstable_NormalPriority,pn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kv(){return{controller:new W7,data:new Map,refCount:0}}function Mu(o){o.refCount--,o.refCount===0&&Y7(X7,function(){o.controller.abort()})}var Pu=null,Zv=0,jl=0,Nl=null;function K7(o,c){if(Pu===null){var h=Pu=[];Zv=0,jl=e0(),Nl={status:"pending",value:void 0,then:function(p){h.push(p)}}}return Zv++,c.then(D2,D2),c}function D2(){if(--Zv===0&&Pu!==null){Nl!==null&&(Nl.status="fulfilled");var o=Pu;Pu=null,jl=0,Nl=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function Z7(o,c){var h=[],p={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return o.then(function(){p.status="fulfilled",p.value=c;for(var _=0;_<h.length;_++)(0,h[_])(c)},function(_){for(p.status="rejected",p.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),p}var L2=I.S;I.S=function(o,c){bO=Lt(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&K7(o,c),L2!==null&&L2(o,c)};var po=U(null);function Jv(){var o=po.current;return o!==null?o:Rt.pooledCache}function Tf(o,c){c===null?ee(po,po.current):ee(po,c.pool)}function I2(){var o=Jv();return o===null?null:{parent:pn._currentValue,pool:o}}var Ml=Error(r(460)),Qv=Error(r(474)),Of=Error(r(542)),Cf={then:function(){}};function B2(o){return o=o.status,o==="fulfilled"||o==="rejected"}function $2(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(pa,pa),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,U2(o),o;default:if(typeof c.status=="string")c.then(pa,pa);else{if(o=Rt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=c,o.status="pending",o.then(function(p){if(c.status==="pending"){var _=c;_.status="fulfilled",_.value=p}},function(p){if(c.status==="pending"){var _=c;_.status="rejected",_.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,U2(o),o}throw vo=c,Ml}}function go(o){try{var c=o._init;return c(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(vo=h,Ml):h}}var vo=null;function F2(){if(vo===null)throw Error(r(459));var o=vo;return vo=null,o}function U2(o){if(o===Ml||o===Of)throw Error(r(483))}var Pl=null,Ru=0;function jf(o){var c=Ru;return Ru+=1,Pl===null&&(Pl=[]),$2(Pl,o,c)}function ku(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Nf(o,c){throw c.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function q2(o){function c(Q,X){if(o){var ne=Q.deletions;ne===null?(Q.deletions=[X],Q.flags|=16):ne.push(X)}}function h(Q,X){if(!o)return null;for(;X!==null;)c(Q,X),X=X.sibling;return null}function p(Q){for(var X=new Map;Q!==null;)Q.key!==null?X.set(Q.key,Q):X.set(Q.index,Q),Q=Q.sibling;return X}function _(Q,X){return Q=va(Q,X),Q.index=0,Q.sibling=null,Q}function A(Q,X,ne){return Q.index=ne,o?(ne=Q.alternate,ne!==null?(ne=ne.index,ne<X?(Q.flags|=67108866,X):ne):(Q.flags|=67108866,X)):(Q.flags|=1048576,X)}function P(Q){return o&&Q.alternate===null&&(Q.flags|=67108866),Q}function $(Q,X,ne,he){return X===null||X.tag!==6?(X=Uv(ne,Q.mode,he),X.return=Q,X):(X=_(X,ne),X.return=Q,X)}function W(Q,X,ne,he){var Be=ne.type;return Be===b?ue(Q,X,ne.props.children,he,ne.key):X!==null&&(X.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===R&&go(Be)===X.type)?(X=_(X,ne.props),ku(X,ne),X.return=Q,X):(X=_f(ne.type,ne.key,ne.props,null,Q.mode,he),ku(X,ne),X.return=Q,X)}function re(Q,X,ne,he){return X===null||X.tag!==4||X.stateNode.containerInfo!==ne.containerInfo||X.stateNode.implementation!==ne.implementation?(X=qv(ne,Q.mode,he),X.return=Q,X):(X=_(X,ne.children||[]),X.return=Q,X)}function ue(Q,X,ne,he,Be){return X===null||X.tag!==7?(X=uo(ne,Q.mode,he,Be),X.return=Q,X):(X=_(X,ne),X.return=Q,X)}function fe(Q,X,ne){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Uv(""+X,Q.mode,ne),X.return=Q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case y:return ne=_f(X.type,X.key,X.props,null,Q.mode,ne),ku(ne,X),ne.return=Q,ne;case x:return X=qv(X,Q.mode,ne),X.return=Q,X;case R:return X=go(X),fe(Q,X,ne)}if(H(X)||L(X))return X=uo(X,Q.mode,ne,null),X.return=Q,X;if(typeof X.then=="function")return fe(Q,jf(X),ne);if(X.$$typeof===T)return fe(Q,Ef(Q,X),ne);Nf(Q,X)}return null}function ie(Q,X,ne,he){var Be=X!==null?X.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Be!==null?null:$(Q,X,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return ne.key===Be?W(Q,X,ne,he):null;case x:return ne.key===Be?re(Q,X,ne,he):null;case R:return ne=go(ne),ie(Q,X,ne,he)}if(H(ne)||L(ne))return Be!==null?null:ue(Q,X,ne,he,null);if(typeof ne.then=="function")return ie(Q,X,jf(ne),he);if(ne.$$typeof===T)return ie(Q,X,Ef(Q,ne),he);Nf(Q,ne)}return null}function se(Q,X,ne,he,Be){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Q=Q.get(ne)||null,$(X,Q,""+he,Be);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case y:return Q=Q.get(he.key===null?ne:he.key)||null,W(X,Q,he,Be);case x:return Q=Q.get(he.key===null?ne:he.key)||null,re(X,Q,he,Be);case R:return he=go(he),se(Q,X,ne,he,Be)}if(H(he)||L(he))return Q=Q.get(ne)||null,ue(X,Q,he,Be,null);if(typeof he.then=="function")return se(Q,X,ne,jf(he),Be);if(he.$$typeof===T)return se(Q,X,ne,Ef(X,he),Be);Nf(X,he)}return null}function Ne(Q,X,ne,he){for(var Be=null,gt=null,Re=X,Je=X=0,ct=null;Re!==null&&Je<ne.length;Je++){Re.index>Je?(ct=Re,Re=null):ct=Re.sibling;var vt=ie(Q,Re,ne[Je],he);if(vt===null){Re===null&&(Re=ct);break}o&&Re&&vt.alternate===null&&c(Q,Re),X=A(vt,X,Je),gt===null?Be=vt:gt.sibling=vt,gt=vt,Re=ct}if(Je===ne.length)return h(Q,Re),dt&&ya(Q,Je),Be;if(Re===null){for(;Je<ne.length;Je++)Re=fe(Q,ne[Je],he),Re!==null&&(X=A(Re,X,Je),gt===null?Be=Re:gt.sibling=Re,gt=Re);return dt&&ya(Q,Je),Be}for(Re=p(Re);Je<ne.length;Je++)ct=se(Re,Q,Je,ne[Je],he),ct!==null&&(o&&ct.alternate!==null&&Re.delete(ct.key===null?Je:ct.key),X=A(ct,X,Je),gt===null?Be=ct:gt.sibling=ct,gt=ct);return o&&Re.forEach(function(Ns){return c(Q,Ns)}),dt&&ya(Q,Je),Be}function Fe(Q,X,ne,he){if(ne==null)throw Error(r(151));for(var Be=null,gt=null,Re=X,Je=X=0,ct=null,vt=ne.next();Re!==null&&!vt.done;Je++,vt=ne.next()){Re.index>Je?(ct=Re,Re=null):ct=Re.sibling;var Ns=ie(Q,Re,vt.value,he);if(Ns===null){Re===null&&(Re=ct);break}o&&Re&&Ns.alternate===null&&c(Q,Re),X=A(Ns,X,Je),gt===null?Be=Ns:gt.sibling=Ns,gt=Ns,Re=ct}if(vt.done)return h(Q,Re),dt&&ya(Q,Je),Be;if(Re===null){for(;!vt.done;Je++,vt=ne.next())vt=fe(Q,vt.value,he),vt!==null&&(X=A(vt,X,Je),gt===null?Be=vt:gt.sibling=vt,gt=vt);return dt&&ya(Q,Je),Be}for(Re=p(Re);!vt.done;Je++,vt=ne.next())vt=se(Re,Q,Je,vt.value,he),vt!==null&&(o&&vt.alternate!==null&&Re.delete(vt.key===null?Je:vt.key),X=A(vt,X,Je),gt===null?Be=vt:gt.sibling=vt,gt=vt);return o&&Re.forEach(function(l8){return c(Q,l8)}),dt&&ya(Q,Je),Be}function Nt(Q,X,ne,he){if(typeof ne=="object"&&ne!==null&&ne.type===b&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:e:{for(var Be=ne.key;X!==null;){if(X.key===Be){if(Be=ne.type,Be===b){if(X.tag===7){h(Q,X.sibling),he=_(X,ne.props.children),he.return=Q,Q=he;break e}}else if(X.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===R&&go(Be)===X.type){h(Q,X.sibling),he=_(X,ne.props),ku(he,ne),he.return=Q,Q=he;break e}h(Q,X);break}else c(Q,X);X=X.sibling}ne.type===b?(he=uo(ne.props.children,Q.mode,he,ne.key),he.return=Q,Q=he):(he=_f(ne.type,ne.key,ne.props,null,Q.mode,he),ku(he,ne),he.return=Q,Q=he)}return P(Q);case x:e:{for(Be=ne.key;X!==null;){if(X.key===Be)if(X.tag===4&&X.stateNode.containerInfo===ne.containerInfo&&X.stateNode.implementation===ne.implementation){h(Q,X.sibling),he=_(X,ne.children||[]),he.return=Q,Q=he;break e}else{h(Q,X);break}else c(Q,X);X=X.sibling}he=qv(ne,Q.mode,he),he.return=Q,Q=he}return P(Q);case R:return ne=go(ne),Nt(Q,X,ne,he)}if(H(ne))return Ne(Q,X,ne,he);if(L(ne)){if(Be=L(ne),typeof Be!="function")throw Error(r(150));return ne=Be.call(ne),Fe(Q,X,ne,he)}if(typeof ne.then=="function")return Nt(Q,X,jf(ne),he);if(ne.$$typeof===T)return Nt(Q,X,Ef(Q,ne),he);Nf(Q,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,X!==null&&X.tag===6?(h(Q,X.sibling),he=_(X,ne),he.return=Q,Q=he):(h(Q,X),he=Uv(ne,Q.mode,he),he.return=Q,Q=he),P(Q)):h(Q,X)}return function(Q,X,ne,he){try{Ru=0;var Be=Nt(Q,X,ne,he);return Pl=null,Be}catch(Re){if(Re===Ml||Re===Of)throw Re;var gt=Mr(29,Re,null,Q.mode);return gt.lanes=he,gt.return=Q,gt}finally{}}}var yo=q2(!0),z2=q2(!1),fs=!1;function ey(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ty(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ms(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ps(o,c,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(bt&2)!==0){var _=p.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),p.pending=c,c=xf(o),T2(o,null,h),c}return wf(o,p,c,h),xf(o)}function Du(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var p=c.lanes;p&=o.pendingLanes,h|=p,c.lanes=h,te(o,h)}}function ny(o,c){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var _=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var P={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?_=A=P:A=A.next=P,h=h.next}while(h!==null);A===null?_=A=c:A=A.next=c}else _=A=c;h={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:A,shared:p.shared,callbacks:p.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}var ry=!1;function Lu(){if(ry){var o=Nl;if(o!==null)throw o}}function Iu(o,c,h,p){ry=!1;var _=o.updateQueue;fs=!1;var A=_.firstBaseUpdate,P=_.lastBaseUpdate,$=_.shared.pending;if($!==null){_.shared.pending=null;var W=$,re=W.next;W.next=null,P===null?A=re:P.next=re,P=W;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,$=ue.lastBaseUpdate,$!==P&&($===null?ue.firstBaseUpdate=re:$.next=re,ue.lastBaseUpdate=W))}if(A!==null){var fe=_.baseState;P=0,ue=re=W=null,$=A;do{var ie=$.lane&-536870913,se=ie!==$.lane;if(se?(lt&ie)===ie:(p&ie)===ie){ie!==0&&ie===jl&&(ry=!0),ue!==null&&(ue=ue.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Ne=o,Fe=$;ie=c;var Nt=h;switch(Fe.tag){case 1:if(Ne=Fe.payload,typeof Ne=="function"){fe=Ne.call(Nt,fe,ie);break e}fe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Fe.payload,ie=typeof Ne=="function"?Ne.call(Nt,fe,ie):Ne,ie==null)break e;fe=m({},fe,ie);break e;case 2:fs=!0}}ie=$.callback,ie!==null&&(o.flags|=64,se&&(o.flags|=8192),se=_.callbacks,se===null?_.callbacks=[ie]:se.push(ie))}else se={lane:ie,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ue===null?(re=ue=se,W=fe):ue=ue.next=se,P|=ie;if($=$.next,$===null){if($=_.shared.pending,$===null)break;se=$,$=se.next,se.next=null,_.lastBaseUpdate=se,_.shared.pending=null}}while(!0);ue===null&&(W=fe),_.baseState=W,_.firstBaseUpdate=re,_.lastBaseUpdate=ue,A===null&&(_.shared.lanes=0),ws|=P,o.lanes=P,o.memoizedState=fe}}function H2(o,c){if(typeof o!="function")throw Error(r(191,o));o.call(c)}function V2(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)H2(h[o],c)}var Rl=U(null),Mf=U(0);function G2(o,c){o=ja,ee(Mf,o),ee(Rl,c),ja=o|c.baseLanes}function iy(){ee(Mf,ja),ee(Rl,Rl.current)}function ay(){ja=Mf.current,G(Rl),G(Mf)}var Pr=U(null),oi=null;function gs(o){var c=o.alternate;ee(on,on.current&1),ee(Pr,o),oi===null&&(c===null||Rl.current!==null||c.memoizedState!==null)&&(oi=o)}function sy(o){ee(on,on.current),ee(Pr,o),oi===null&&(oi=o)}function W2(o){o.tag===22?(ee(on,on.current),ee(Pr,o),oi===null&&(oi=o)):vs()}function vs(){ee(on,on.current),ee(Pr,Pr.current)}function Rr(o){G(Pr),oi===o&&(oi=null),G(on)}var on=U(0);function Pf(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h0(h)||f0(h)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var xa=0,Ze=null,Ct=null,gn=null,Rf=!1,kl=!1,bo=!1,kf=0,Bu=0,Dl=null,J7=0;function rn(){throw Error(r(321))}function oy(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Nr(o[h],c[h]))return!1;return!0}function ly(o,c,h,p,_,A){return xa=A,Ze=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,I.H=o===null||o.memoizedState===null?NT:Sy,bo=!1,A=h(p,_),bo=!1,kl&&(A=X2(c,h,p,_)),Y2(o),A}function Y2(o){I.H=Uu;var c=Ct!==null&&Ct.next!==null;if(xa=0,gn=Ct=Ze=null,Rf=!1,Bu=0,Dl=null,c)throw Error(r(300));o===null||vn||(o=o.dependencies,o!==null&&Af(o)&&(vn=!0))}function X2(o,c,h,p){Ze=o;var _=0;do{if(kl&&(Dl=null),Bu=0,kl=!1,25<=_)throw Error(r(301));if(_+=1,gn=Ct=null,o.updateQueue!=null){var A=o.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}I.H=MT,A=c(h,p)}while(kl);return A}function Q7(){var o=I.H,c=o.useState()[0];return c=typeof c.then=="function"?$u(c):c,o=o.useState()[0],(Ct!==null?Ct.memoizedState:null)!==o&&(Ze.flags|=1024),c}function cy(){var o=kf!==0;return kf=0,o}function uy(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function dy(o){if(Rf){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Rf=!1}xa=0,gn=Ct=Ze=null,kl=!1,Bu=kf=0,Dl=null}function or(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Ze.memoizedState=gn=o:gn=gn.next=o,gn}function ln(){if(Ct===null){var o=Ze.alternate;o=o!==null?o.memoizedState:null}else o=Ct.next;var c=gn===null?Ze.memoizedState:gn.next;if(c!==null)gn=c,Ct=o;else{if(o===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));Ct=o,o={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},gn===null?Ze.memoizedState=gn=o:gn=gn.next=o}return gn}function Df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $u(o){var c=Bu;return Bu+=1,Dl===null&&(Dl=[]),o=$2(Dl,o,c),c=Ze,(gn===null?c.memoizedState:gn.next)===null&&(c=c.alternate,I.H=c===null||c.memoizedState===null?NT:Sy),o}function Lf(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return $u(o);if(o.$$typeof===T)return zn(o)}throw Error(r(438,String(o)))}function hy(o){var c=null,h=Ze.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var p=Ze.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(_){return _.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=Df(),Ze.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),p=0;p<o;p++)h[p]=F;return c.index++,h}function _a(o,c){return typeof c=="function"?c(o):c}function If(o){var c=ln();return fy(c,Ct,o)}function fy(o,c,h){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=h;var _=o.baseQueue,A=p.pending;if(A!==null){if(_!==null){var P=_.next;_.next=A.next,A.next=P}c.baseQueue=_=A,p.pending=null}if(A=o.baseState,_===null)o.memoizedState=A;else{c=_.next;var $=P=null,W=null,re=c,ue=!1;do{var fe=re.lane&-536870913;if(fe!==re.lane?(lt&fe)===fe:(xa&fe)===fe){var ie=re.revertLane;if(ie===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),fe===jl&&(ue=!0);else if((xa&ie)===ie){re=re.next,ie===jl&&(ue=!0);continue}else fe={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},W===null?($=W=fe,P=A):W=W.next=fe,Ze.lanes|=ie,ws|=ie;fe=re.action,bo&&h(A,fe),A=re.hasEagerState?re.eagerState:h(A,fe)}else ie={lane:fe,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},W===null?($=W=ie,P=A):W=W.next=ie,Ze.lanes|=fe,ws|=fe;re=re.next}while(re!==null&&re!==c);if(W===null?P=A:W.next=$,!Nr(A,o.memoizedState)&&(vn=!0,ue&&(h=Nl,h!==null)))throw h;o.memoizedState=A,o.baseState=P,o.baseQueue=W,p.lastRenderedState=A}return _===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function my(o){var c=ln(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var p=h.dispatch,_=h.pending,A=c.memoizedState;if(_!==null){h.pending=null;var P=_=_.next;do A=o(A,P.action),P=P.next;while(P!==_);Nr(A,c.memoizedState)||(vn=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),h.lastRenderedState=A}return[A,p]}function K2(o,c,h){var p=Ze,_=ln(),A=dt;if(A){if(h===void 0)throw Error(r(407));h=h()}else h=c();var P=!Nr((Ct||_).memoizedState,h);if(P&&(_.memoizedState=h,vn=!0),_=_.queue,vy(Q2.bind(null,p,_,o),[o]),_.getSnapshot!==c||P||gn!==null&&gn.memoizedState.tag&1){if(p.flags|=2048,Ll(9,{destroy:void 0},J2.bind(null,p,_,h,c),null),Rt===null)throw Error(r(349));A||(xa&127)!==0||Z2(p,c,h)}return h}function Z2(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Ze.updateQueue,c===null?(c=Df(),Ze.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function J2(o,c,h,p){c.value=h,c.getSnapshot=p,eT(c)&&tT(o)}function Q2(o,c,h){return h(function(){eT(c)&&tT(o)})}function eT(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Nr(o,h)}catch{return!0}}function tT(o){var c=co(o,2);c!==null&&br(c,o,2)}function py(o){var c=or();if(typeof o=="function"){var h=o;if(o=h(),bo){_i(!0);try{h()}finally{_i(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:o},c}function nT(o,c,h,p){return o.baseState=h,fy(o,Ct,typeof p=="function"?p:_a)}function e$(o,c,h,p,_){if(Ff(o))throw Error(r(485));if(o=c.action,o!==null){var A={payload:_,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){A.listeners.push(P)}};I.T!==null?h(!0):A.isTransition=!1,p(A),h=c.pending,h===null?(A.next=c.pending=A,rT(c,A)):(A.next=h.next,c.pending=h.next=A)}}function rT(o,c){var h=c.action,p=c.payload,_=o.state;if(c.isTransition){var A=I.T,P={};I.T=P;try{var $=h(_,p),W=I.S;W!==null&&W(P,$),iT(o,c,$)}catch(re){gy(o,c,re)}finally{A!==null&&P.types!==null&&(A.types=P.types),I.T=A}}else try{A=h(_,p),iT(o,c,A)}catch(re){gy(o,c,re)}}function iT(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){aT(o,c,p)},function(p){return gy(o,c,p)}):aT(o,c,h)}function aT(o,c,h){c.status="fulfilled",c.value=h,sT(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,rT(o,h)))}function gy(o,c,h){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=h,sT(c),c=c.next;while(c!==p)}o.action=null}function sT(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function oT(o,c){return c}function lT(o,c){if(dt){var h=Rt.formState;if(h!==null){e:{var p=Ze;if(dt){if(zt){t:{for(var _=zt,A=si;_.nodeType!==8;){if(!A){_=null;break t}if(_=li(_.nextSibling),_===null){_=null;break t}}A=_.data,_=A==="F!"||A==="F"?_:null}if(_){zt=li(_.nextSibling),p=_.data==="F!";break e}}ds(p)}p=!1}p&&(c=h[0])}}return h=or(),h.memoizedState=h.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oT,lastRenderedState:c},h.queue=p,h=OT.bind(null,Ze,p),p.dispatch=h,p=py(!1),A=_y.bind(null,Ze,!1,p.queue),p=or(),_={state:c,dispatch:null,action:o,pending:null},p.queue=_,h=e$.bind(null,Ze,_,A,h),_.dispatch=h,p.memoizedState=o,[c,h,!1]}function cT(o){var c=ln();return uT(c,Ct,o)}function uT(o,c,h){if(c=fy(o,c,oT)[0],o=If(_a)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=$u(c)}catch(P){throw P===Ml?Of:P}else p=c;c=ln();var _=c.queue,A=_.dispatch;return h!==c.memoizedState&&(Ze.flags|=2048,Ll(9,{destroy:void 0},t$.bind(null,_,h),null)),[p,A,o]}function t$(o,c){o.action=c}function dT(o){var c=ln(),h=Ct;if(h!==null)return uT(c,h,o);ln(),c=c.memoizedState,h=ln();var p=h.queue.dispatch;return h.memoizedState=o,[c,p,!1]}function Ll(o,c,h,p){return o={tag:o,create:h,deps:p,inst:c,next:null},c=Ze.updateQueue,c===null&&(c=Df(),Ze.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,c.lastEffect=o),o}function hT(){return ln().memoizedState}function Bf(o,c,h,p){var _=or();Ze.flags|=o,_.memoizedState=Ll(1|c,{destroy:void 0},h,p===void 0?null:p)}function $f(o,c,h,p){var _=ln();p=p===void 0?null:p;var A=_.memoizedState.inst;Ct!==null&&p!==null&&oy(p,Ct.memoizedState.deps)?_.memoizedState=Ll(c,A,h,p):(Ze.flags|=o,_.memoizedState=Ll(1|c,A,h,p))}function fT(o,c){Bf(8390656,8,o,c)}function vy(o,c){$f(2048,8,o,c)}function n$(o){Ze.flags|=4;var c=Ze.updateQueue;if(c===null)c=Df(),Ze.updateQueue=c,c.events=[o];else{var h=c.events;h===null?c.events=[o]:h.push(o)}}function mT(o){var c=ln().memoizedState;return n$({ref:c,nextImpl:o}),function(){if((bt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function pT(o,c){return $f(4,2,o,c)}function gT(o,c){return $f(4,4,o,c)}function vT(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function yT(o,c,h){h=h!=null?h.concat([o]):null,$f(4,4,vT.bind(null,c,o),h)}function yy(){}function bT(o,c){var h=ln();c=c===void 0?null:c;var p=h.memoizedState;return c!==null&&oy(c,p[1])?p[0]:(h.memoizedState=[o,c],o)}function wT(o,c){var h=ln();c=c===void 0?null:c;var p=h.memoizedState;if(c!==null&&oy(c,p[1]))return p[0];if(p=o(),bo){_i(!0);try{o()}finally{_i(!1)}}return h.memoizedState=[p,c],p}function by(o,c,h){return h===void 0||(xa&1073741824)!==0&&(lt&261930)===0?o.memoizedState=c:(o.memoizedState=h,o=xO(),Ze.lanes|=o,ws|=o,h)}function xT(o,c,h,p){return Nr(h,c)?h:Rl.current!==null?(o=by(o,h,p),Nr(o,c)||(vn=!0),o):(xa&42)===0||(xa&1073741824)!==0&&(lt&261930)===0?(vn=!0,o.memoizedState=h):(o=xO(),Ze.lanes|=o,ws|=o,c)}function _T(o,c,h,p,_){var A=z.p;z.p=A!==0&&8>A?A:8;var P=I.T,$={};I.T=$,_y(o,!1,c,h);try{var W=_(),re=I.S;if(re!==null&&re($,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ue=Z7(W,p);Fu(o,c,ue,Lr(o))}else Fu(o,c,p,Lr(o))}catch(fe){Fu(o,c,{then:function(){},status:"rejected",reason:fe},Lr())}finally{z.p=A,P!==null&&$.types!==null&&(P.types=$.types),I.T=P}}function r$(){}function wy(o,c,h,p){if(o.tag!==5)throw Error(r(476));var _=ST(o).queue;_T(o,_,c,q,h===null?r$:function(){return AT(o),h(p)})}function ST(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:q},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function AT(o){var c=ST(o);c.next===null&&(c=o.alternate.memoizedState),Fu(o,c.next.queue,{},Lr())}function xy(){return zn(rd)}function ET(){return ln().memoizedState}function TT(){return ln().memoizedState}function i$(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=Lr();o=ms(h);var p=ps(c,o,h);p!==null&&(br(p,c,h),Du(p,c,h)),c={cache:Kv()},o.payload=c;return}c=c.return}}function a$(o,c,h){var p=Lr();h={lane:p,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ff(o)?CT(c,h):(h=$v(o,c,h,p),h!==null&&(br(h,o,p),jT(h,c,p)))}function OT(o,c,h){var p=Lr();Fu(o,c,h,p)}function Fu(o,c,h,p){var _={lane:p,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Ff(o))CT(c,_);else{var A=o.alternate;if(o.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var P=c.lastRenderedState,$=A(P,h);if(_.hasEagerState=!0,_.eagerState=$,Nr($,P))return wf(o,c,_,0),Rt===null&&bf(),!1}catch{}finally{}if(h=$v(o,c,_,p),h!==null)return br(h,o,p),jT(h,c,p),!0}return!1}function _y(o,c,h,p){if(p={lane:2,revertLane:e0(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ff(o)){if(c)throw Error(r(479))}else c=$v(o,h,p,2),c!==null&&br(c,o,2)}function Ff(o){var c=o.alternate;return o===Ze||c!==null&&c===Ze}function CT(o,c){kl=Rf=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function jT(o,c,h){if((h&4194048)!==0){var p=c.lanes;p&=o.pendingLanes,h|=p,c.lanes=h,te(o,h)}}var Uu={readContext:zn,use:Lf,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};Uu.useEffectEvent=rn;var NT={readContext:zn,use:Lf,useCallback:function(o,c){return or().memoizedState=[o,c===void 0?null:c],o},useContext:zn,useEffect:fT,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,Bf(4194308,4,vT.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Bf(4194308,4,o,c)},useInsertionEffect:function(o,c){Bf(4,2,o,c)},useMemo:function(o,c){var h=or();c=c===void 0?null:c;var p=o();if(bo){_i(!0);try{o()}finally{_i(!1)}}return h.memoizedState=[p,c],p},useReducer:function(o,c,h){var p=or();if(h!==void 0){var _=h(c);if(bo){_i(!0);try{h(c)}finally{_i(!1)}}}else _=c;return p.memoizedState=p.baseState=_,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:_},p.queue=o,o=o.dispatch=a$.bind(null,Ze,o),[p.memoizedState,o]},useRef:function(o){var c=or();return o={current:o},c.memoizedState=o},useState:function(o){o=py(o);var c=o.queue,h=OT.bind(null,Ze,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:yy,useDeferredValue:function(o,c){var h=or();return by(h,o,c)},useTransition:function(){var o=py(!1);return o=_T.bind(null,Ze,o.queue,!0,!1),or().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var p=Ze,_=or();if(dt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Rt===null)throw Error(r(349));(lt&127)!==0||Z2(p,c,h)}_.memoizedState=h;var A={value:h,getSnapshot:c};return _.queue=A,fT(Q2.bind(null,p,A,o),[o]),p.flags|=2048,Ll(9,{destroy:void 0},J2.bind(null,p,A,h,c),null),h},useId:function(){var o=or(),c=Rt.identifierPrefix;if(dt){var h=Gi,p=Vi;h=(p&~(1<<32-Zn(p)-1)).toString(32)+h,c="_"+c+"R_"+h,h=kf++,0<h&&(c+="H"+h.toString(32)),c+="_"}else h=J7++,c="_"+c+"r_"+h.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:xy,useFormState:lT,useActionState:lT,useOptimistic:function(o){var c=or();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=_y.bind(null,Ze,!0,h),h.dispatch=c,[o,c]},useMemoCache:hy,useCacheRefresh:function(){return or().memoizedState=i$.bind(null,Ze)},useEffectEvent:function(o){var c=or(),h={impl:o};return c.memoizedState=h,function(){if((bt&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},Sy={readContext:zn,use:Lf,useCallback:bT,useContext:zn,useEffect:vy,useImperativeHandle:yT,useInsertionEffect:pT,useLayoutEffect:gT,useMemo:wT,useReducer:If,useRef:hT,useState:function(){return If(_a)},useDebugValue:yy,useDeferredValue:function(o,c){var h=ln();return xT(h,Ct.memoizedState,o,c)},useTransition:function(){var o=If(_a)[0],c=ln().memoizedState;return[typeof o=="boolean"?o:$u(o),c]},useSyncExternalStore:K2,useId:ET,useHostTransitionStatus:xy,useFormState:cT,useActionState:cT,useOptimistic:function(o,c){var h=ln();return nT(h,Ct,o,c)},useMemoCache:hy,useCacheRefresh:TT};Sy.useEffectEvent=mT;var MT={readContext:zn,use:Lf,useCallback:bT,useContext:zn,useEffect:vy,useImperativeHandle:yT,useInsertionEffect:pT,useLayoutEffect:gT,useMemo:wT,useReducer:my,useRef:hT,useState:function(){return my(_a)},useDebugValue:yy,useDeferredValue:function(o,c){var h=ln();return Ct===null?by(h,o,c):xT(h,Ct.memoizedState,o,c)},useTransition:function(){var o=my(_a)[0],c=ln().memoizedState;return[typeof o=="boolean"?o:$u(o),c]},useSyncExternalStore:K2,useId:ET,useHostTransitionStatus:xy,useFormState:dT,useActionState:dT,useOptimistic:function(o,c){var h=ln();return Ct!==null?nT(h,Ct,o,c):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:hy,useCacheRefresh:TT};MT.useEffectEvent=mT;function Ay(o,c,h,p){c=o.memoizedState,h=h(p,c),h=h==null?c:m({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Ey={enqueueSetState:function(o,c,h){o=o._reactInternals;var p=Lr(),_=ms(p);_.payload=c,h!=null&&(_.callback=h),c=ps(o,_,p),c!==null&&(br(c,o,p),Du(c,o,p))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var p=Lr(),_=ms(p);_.tag=1,_.payload=c,h!=null&&(_.callback=h),c=ps(o,_,p),c!==null&&(br(c,o,p),Du(c,o,p))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Lr(),p=ms(h);p.tag=2,c!=null&&(p.callback=c),c=ps(o,p,h),c!==null&&(br(c,o,h),Du(c,o,h))}};function PT(o,c,h,p,_,A,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,A,P):c.prototype&&c.prototype.isPureReactComponent?!Ou(h,p)||!Ou(_,A):!0}function RT(o,c,h,p){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,p),c.state!==o&&Ey.enqueueReplaceState(c,c.state,null)}function wo(o,c){var h=c;if("ref"in c){h={};for(var p in c)p!=="ref"&&(h[p]=c[p])}if(o=o.defaultProps){h===c&&(h=m({},h));for(var _ in o)h[_]===void 0&&(h[_]=o[_])}return h}function kT(o){yf(o)}function DT(o){console.error(o)}function LT(o){yf(o)}function Uf(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function IT(o,c,h){try{var p=o.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Ty(o,c,h){return h=ms(h),h.tag=3,h.payload={element:null},h.callback=function(){Uf(o,c)},h}function BT(o){return o=ms(o),o.tag=3,o}function $T(o,c,h,p){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var A=p.value;o.payload=function(){return _(A)},o.callback=function(){IT(c,h,p)}}var P=h.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(o.callback=function(){IT(c,h,p),typeof _!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var $=p.stack;this.componentDidCatch(p.value,{componentStack:$!==null?$:""})})}function s$(o,c,h,p,_){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=h.alternate,c!==null&&Cl(c,h,_,!0),h=Pr.current,h!==null){switch(h.tag){case 31:case 13:return oi===null?Qf():h.alternate===null&&an===0&&(an=3),h.flags&=-257,h.flags|=65536,h.lanes=_,p===Cf?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([p]):c.add(p),Zy(o,p,_)),!1;case 22:return h.flags|=65536,p===Cf?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([p]):h.add(p)),Zy(o,p,_)),!1}throw Error(r(435,h.tag))}return Zy(o,p,_),Qf(),!1}if(dt)return c=Pr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=_,p!==Vv&&(o=Error(r(422),{cause:p}),Nu(ri(o,h)))):(p!==Vv&&(c=Error(r(423),{cause:p}),Nu(ri(c,h))),o=o.current.alternate,o.flags|=65536,_&=-_,o.lanes|=_,p=ri(p,h),_=Ty(o.stateNode,p,_),ny(o,_),an!==4&&(an=2)),!1;var A=Error(r(520),{cause:p});if(A=ri(A,h),Xu===null?Xu=[A]:Xu.push(A),an!==4&&(an=2),c===null)return!0;p=ri(p,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=_&-_,h.lanes|=o,o=Ty(h.stateNode,p,o),ny(h,o),!1;case 1:if(c=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(xs===null||!xs.has(A))))return h.flags|=65536,_&=-_,h.lanes|=_,_=BT(_),$T(_,o,h,p),ny(h,_),!1}h=h.return}while(h!==null);return!1}var Oy=Error(r(461)),vn=!1;function Hn(o,c,h,p){c.child=o===null?z2(c,null,h,p):yo(c,o.child,h,p)}function FT(o,c,h,p,_){h=h.render;var A=c.ref;if("ref"in p){var P={};for(var $ in p)$!=="ref"&&(P[$]=p[$])}else P=p;return mo(c),p=ly(o,c,h,P,A,_),$=cy(),o!==null&&!vn?(uy(o,c,_),Sa(o,c,_)):(dt&&$&&zv(c),c.flags|=1,Hn(o,c,p,_),c.child)}function UT(o,c,h,p,_){if(o===null){var A=h.type;return typeof A=="function"&&!Fv(A)&&A.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=A,qT(o,c,A,p,_)):(o=_f(h.type,null,p,c,c.mode,_),o.ref=c.ref,o.return=c,c.child=o)}if(A=o.child,!Dy(o,_)){var P=A.memoizedProps;if(h=h.compare,h=h!==null?h:Ou,h(P,p)&&o.ref===c.ref)return Sa(o,c,_)}return c.flags|=1,o=va(A,p),o.ref=c.ref,o.return=c,c.child=o}function qT(o,c,h,p,_){if(o!==null){var A=o.memoizedProps;if(Ou(A,p)&&o.ref===c.ref)if(vn=!1,c.pendingProps=p=A,Dy(o,_))(o.flags&131072)!==0&&(vn=!0);else return c.lanes=o.lanes,Sa(o,c,_)}return Cy(o,c,h,p,_)}function zT(o,c,h,p){var _=p.children,A=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((c.flags&128)!==0){if(A=A!==null?A.baseLanes|h:h,o!==null){for(p=c.child=o.child,_=0;p!==null;)_=_|p.lanes|p.childLanes,p=p.sibling;p=_&~A}else p=0,c.child=null;return HT(o,c,A,h,p)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Tf(c,A!==null?A.cachePool:null),A!==null?G2(c,A):iy(),W2(c);else return p=c.lanes=536870912,HT(o,c,A!==null?A.baseLanes|h:h,h,p)}else A!==null?(Tf(c,A.cachePool),G2(c,A),vs(),c.memoizedState=null):(o!==null&&Tf(c,null),iy(),vs());return Hn(o,c,_,h),c.child}function qu(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function HT(o,c,h,p,_){var A=Jv();return A=A===null?null:{parent:pn._currentValue,pool:A},c.memoizedState={baseLanes:h,cachePool:A},o!==null&&Tf(c,null),iy(),W2(c),o!==null&&Cl(o,c,p,!0),c.childLanes=_,null}function qf(o,c){return c=Hf({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function VT(o,c,h){return yo(c,o.child,null,h),o=qf(c,c.pendingProps),o.flags|=2,Rr(c),c.memoizedState=null,o}function o$(o,c,h){var p=c.pendingProps,_=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(dt){if(p.mode==="hidden")return o=qf(c,p),c.lanes=536870912,qu(null,o);if(sy(c),(o=zt)?(o=rC(o,si),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:cs!==null?{id:Vi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},h=C2(o),h.return=c,c.child=h,qn=c,zt=null)):o=null,o===null)throw ds(c);return c.lanes=536870912,null}return qf(c,p)}var A=o.memoizedState;if(A!==null){var P=A.dehydrated;if(sy(c),_)if(c.flags&256)c.flags&=-257,c=VT(o,c,h);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(r(558));else if(vn||Cl(o,c,h,!1),_=(h&o.childLanes)!==0,vn||_){if(p=Rt,p!==null&&(P=ae(p,h),P!==0&&P!==A.retryLane))throw A.retryLane=P,co(o,P),br(p,o,P),Oy;Qf(),c=VT(o,c,h)}else o=A.treeContext,zt=li(P.nextSibling),qn=c,dt=!0,us=null,si=!1,o!==null&&M2(c,o),c=qf(c,p),c.flags|=4096;return c}return o=va(o.child,{mode:p.mode,children:p.children}),o.ref=c.ref,c.child=o,o.return=c,o}function zf(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(o===null||o.ref!==h)&&(c.flags|=4194816)}}function Cy(o,c,h,p,_){return mo(c),h=ly(o,c,h,p,void 0,_),p=cy(),o!==null&&!vn?(uy(o,c,_),Sa(o,c,_)):(dt&&p&&zv(c),c.flags|=1,Hn(o,c,h,_),c.child)}function GT(o,c,h,p,_,A){return mo(c),c.updateQueue=null,h=X2(c,p,h,_),Y2(o),p=cy(),o!==null&&!vn?(uy(o,c,A),Sa(o,c,A)):(dt&&p&&zv(c),c.flags|=1,Hn(o,c,h,A),c.child)}function WT(o,c,h,p,_){if(mo(c),c.stateNode===null){var A=Al,P=h.contextType;typeof P=="object"&&P!==null&&(A=zn(P)),A=new h(p,A),c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Ey,c.stateNode=A,A._reactInternals=c,A=c.stateNode,A.props=p,A.state=c.memoizedState,A.refs={},ey(c),P=h.contextType,A.context=typeof P=="object"&&P!==null?zn(P):Al,A.state=c.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(Ay(c,h,P,p),A.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(P=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),P!==A.state&&Ey.enqueueReplaceState(A,A.state,null),Iu(c,p,A,_),Lu(),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(o===null){A=c.stateNode;var $=c.memoizedProps,W=wo(h,$);A.props=W;var re=A.context,ue=h.contextType;P=Al,typeof ue=="object"&&ue!==null&&(P=zn(ue));var fe=h.getDerivedStateFromProps;ue=typeof fe=="function"||typeof A.getSnapshotBeforeUpdate=="function",$=c.pendingProps!==$,ue||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||($||re!==P)&&RT(c,A,p,P),fs=!1;var ie=c.memoizedState;A.state=ie,Iu(c,p,A,_),Lu(),re=c.memoizedState,$||ie!==re||fs?(typeof fe=="function"&&(Ay(c,h,fe,p),re=c.memoizedState),(W=fs||PT(c,h,W,p,ie,re,P))?(ue||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=re),A.props=p,A.state=re,A.context=P,p=W):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{A=c.stateNode,ty(o,c),P=c.memoizedProps,ue=wo(h,P),A.props=ue,fe=c.pendingProps,ie=A.context,re=h.contextType,W=Al,typeof re=="object"&&re!==null&&(W=zn(re)),$=h.getDerivedStateFromProps,(re=typeof $=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(P!==fe||ie!==W)&&RT(c,A,p,W),fs=!1,ie=c.memoizedState,A.state=ie,Iu(c,p,A,_),Lu();var se=c.memoizedState;P!==fe||ie!==se||fs||o!==null&&o.dependencies!==null&&Af(o.dependencies)?(typeof $=="function"&&(Ay(c,h,$,p),se=c.memoizedState),(ue=fs||PT(c,h,ue,p,ie,se,W)||o!==null&&o.dependencies!==null&&Af(o.dependencies))?(re||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(p,se,W),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(p,se,W)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||P===o.memoizedProps&&ie===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===o.memoizedProps&&ie===o.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=se),A.props=p,A.state=se,A.context=W,p=ue):(typeof A.componentDidUpdate!="function"||P===o.memoizedProps&&ie===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===o.memoizedProps&&ie===o.memoizedState||(c.flags|=1024),p=!1)}return A=p,zf(o,c),p=(c.flags&128)!==0,A||p?(A=c.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:A.render(),c.flags|=1,o!==null&&p?(c.child=yo(c,o.child,null,_),c.child=yo(c,null,h,_)):Hn(o,c,h,_),c.memoizedState=A.state,o=c.child):o=Sa(o,c,_),o}function YT(o,c,h,p){return ho(),c.flags|=256,Hn(o,c,h,p),c.child}var jy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ny(o){return{baseLanes:o,cachePool:I2()}}function My(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=Dr),o}function XT(o,c,h){var p=c.pendingProps,_=!1,A=(c.flags&128)!==0,P;if((P=A)||(P=o!==null&&o.memoizedState===null?!1:(on.current&2)!==0),P&&(_=!0,c.flags&=-129),P=(c.flags&32)!==0,c.flags&=-33,o===null){if(dt){if(_?gs(c):vs(),(o=zt)?(o=rC(o,si),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:cs!==null?{id:Vi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},h=C2(o),h.return=c,c.child=h,qn=c,zt=null)):o=null,o===null)throw ds(c);return f0(o)?c.lanes=32:c.lanes=536870912,null}var $=p.children;return p=p.fallback,_?(vs(),_=c.mode,$=Hf({mode:"hidden",children:$},_),p=uo(p,_,h,null),$.return=c,p.return=c,$.sibling=p,c.child=$,p=c.child,p.memoizedState=Ny(h),p.childLanes=My(o,P,h),c.memoizedState=jy,qu(null,p)):(gs(c),Py(c,$))}var W=o.memoizedState;if(W!==null&&($=W.dehydrated,$!==null)){if(A)c.flags&256?(gs(c),c.flags&=-257,c=Ry(o,c,h)):c.memoizedState!==null?(vs(),c.child=o.child,c.flags|=128,c=null):(vs(),$=p.fallback,_=c.mode,p=Hf({mode:"visible",children:p.children},_),$=uo($,_,h,null),$.flags|=2,p.return=c,$.return=c,p.sibling=$,c.child=p,yo(c,o.child,null,h),p=c.child,p.memoizedState=Ny(h),p.childLanes=My(o,P,h),c.memoizedState=jy,c=qu(null,p));else if(gs(c),f0($)){if(P=$.nextSibling&&$.nextSibling.dataset,P)var re=P.dgst;P=re,p=Error(r(419)),p.stack="",p.digest=P,Nu({value:p,source:null,stack:null}),c=Ry(o,c,h)}else if(vn||Cl(o,c,h,!1),P=(h&o.childLanes)!==0,vn||P){if(P=Rt,P!==null&&(p=ae(P,h),p!==0&&p!==W.retryLane))throw W.retryLane=p,co(o,p),br(P,o,p),Oy;h0($)||Qf(),c=Ry(o,c,h)}else h0($)?(c.flags|=192,c.child=o.child,c=null):(o=W.treeContext,zt=li($.nextSibling),qn=c,dt=!0,us=null,si=!1,o!==null&&M2(c,o),c=Py(c,p.children),c.flags|=4096);return c}return _?(vs(),$=p.fallback,_=c.mode,W=o.child,re=W.sibling,p=va(W,{mode:"hidden",children:p.children}),p.subtreeFlags=W.subtreeFlags&65011712,re!==null?$=va(re,$):($=uo($,_,h,null),$.flags|=2),$.return=c,p.return=c,p.sibling=$,c.child=p,qu(null,p),p=c.child,$=o.child.memoizedState,$===null?$=Ny(h):(_=$.cachePool,_!==null?(W=pn._currentValue,_=_.parent!==W?{parent:W,pool:W}:_):_=I2(),$={baseLanes:$.baseLanes|h,cachePool:_}),p.memoizedState=$,p.childLanes=My(o,P,h),c.memoizedState=jy,qu(o.child,p)):(gs(c),h=o.child,o=h.sibling,h=va(h,{mode:"visible",children:p.children}),h.return=c,h.sibling=null,o!==null&&(P=c.deletions,P===null?(c.deletions=[o],c.flags|=16):P.push(o)),c.child=h,c.memoizedState=null,h)}function Py(o,c){return c=Hf({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Hf(o,c){return o=Mr(22,o,null,c),o.lanes=0,o}function Ry(o,c,h){return yo(c,o.child,null,h),o=Py(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function KT(o,c,h){o.lanes|=c;var p=o.alternate;p!==null&&(p.lanes|=c),Yv(o.return,c,h)}function ky(o,c,h,p,_,A){var P=o.memoizedState;P===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:_,treeForkCount:A}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=p,P.tail=h,P.tailMode=_,P.treeForkCount=A)}function ZT(o,c,h){var p=c.pendingProps,_=p.revealOrder,A=p.tail;p=p.children;var P=on.current,$=(P&2)!==0;if($?(P=P&1|2,c.flags|=128):P&=1,ee(on,P),Hn(o,c,p,h),p=dt?ju:0,!$&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&KT(o,h,c);else if(o.tag===19)KT(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(_){case"forwards":for(h=c.child,_=null;h!==null;)o=h.alternate,o!==null&&Pf(o)===null&&(_=h),h=h.sibling;h=_,h===null?(_=c.child,c.child=null):(_=h.sibling,h.sibling=null),ky(c,!1,_,h,A,p);break;case"backwards":case"unstable_legacy-backwards":for(h=null,_=c.child,c.child=null;_!==null;){if(o=_.alternate,o!==null&&Pf(o)===null){c.child=_;break}o=_.sibling,_.sibling=h,h=_,_=o}ky(c,!0,h,null,A,p);break;case"together":ky(c,!1,null,null,void 0,p);break;default:c.memoizedState=null}return c.child}function Sa(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),ws|=c.lanes,(h&c.childLanes)===0)if(o!==null){if(Cl(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=va(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=va(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function Dy(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Af(o)))}function l$(o,c,h){switch(c.tag){case 3:Ae(c,c.stateNode.containerInfo),hs(c,pn,o.memoizedState.cache),ho();break;case 27:case 5:Se(c);break;case 4:Ae(c,c.stateNode.containerInfo);break;case 10:hs(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,sy(c),null;break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(gs(c),c.flags|=128,null):(h&c.child.childLanes)!==0?XT(o,c,h):(gs(c),o=Sa(o,c,h),o!==null?o.sibling:null);gs(c);break;case 19:var _=(o.flags&128)!==0;if(p=(h&c.childLanes)!==0,p||(Cl(o,c,h,!1),p=(h&c.childLanes)!==0),_){if(p)return ZT(o,c,h);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ee(on,on.current),p)break;return null;case 22:return c.lanes=0,zT(o,c,h,c.pendingProps);case 24:hs(c,pn,o.memoizedState.cache)}return Sa(o,c,h)}function JT(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)vn=!0;else{if(!Dy(o,h)&&(c.flags&128)===0)return vn=!1,l$(o,c,h);vn=(o.flags&131072)!==0}else vn=!1,dt&&(c.flags&1048576)!==0&&N2(c,ju,c.index);switch(c.lanes=0,c.tag){case 16:e:{var p=c.pendingProps;if(o=go(c.elementType),c.type=o,typeof o=="function")Fv(o)?(p=wo(o,p),c.tag=1,c=WT(null,c,o,p,h)):(c.tag=0,c=Cy(null,c,o,p,h));else{if(o!=null){var _=o.$$typeof;if(_===M){c.tag=11,c=FT(null,c,o,p,h);break e}else if(_===C){c.tag=14,c=UT(null,c,o,p,h);break e}}throw c=V(o)||o,Error(r(306,c,""))}}return c;case 0:return Cy(o,c,c.type,c.pendingProps,h);case 1:return p=c.type,_=wo(p,c.pendingProps),WT(o,c,p,_,h);case 3:e:{if(Ae(c,c.stateNode.containerInfo),o===null)throw Error(r(387));p=c.pendingProps;var A=c.memoizedState;_=A.element,ty(o,c),Iu(c,p,null,h);var P=c.memoizedState;if(p=P.cache,hs(c,pn,p),p!==A.cache&&Xv(c,[pn],h,!0),Lu(),p=P.element,A.isDehydrated)if(A={element:p,isDehydrated:!1,cache:P.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=YT(o,c,p,h);break e}else if(p!==_){_=ri(Error(r(424)),c),Nu(_),c=YT(o,c,p,h);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(zt=li(o.firstChild),qn=c,dt=!0,us=null,si=!0,h=z2(c,null,p,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(ho(),p===_){c=Sa(o,c,h);break e}Hn(o,c,p,h)}c=c.child}return c;case 26:return zf(o,c),o===null?(h=cC(c.type,null,c.pendingProps,null))?c.memoizedState=h:dt||(h=c.type,o=c.pendingProps,p=sm(ye.current).createElement(h),p[_e]=c,p[xe]=o,Vn(p,h,o),nn(p),c.stateNode=p):c.memoizedState=cC(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Se(c),o===null&&dt&&(p=c.stateNode=sC(c.type,c.pendingProps,ye.current),qn=c,si=!0,_=zt,Es(c.type)?(m0=_,zt=li(p.firstChild)):zt=_),Hn(o,c,c.pendingProps.children,h),zf(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&dt&&((_=p=zt)&&(p=B$(p,c.type,c.pendingProps,si),p!==null?(c.stateNode=p,qn=c,zt=li(p.firstChild),si=!1,_=!0):_=!1),_||ds(c)),Se(c),_=c.type,A=c.pendingProps,P=o!==null?o.memoizedProps:null,p=A.children,c0(_,A)?p=null:P!==null&&c0(_,P)&&(c.flags|=32),c.memoizedState!==null&&(_=ly(o,c,Q7,null,null,h),rd._currentValue=_),zf(o,c),Hn(o,c,p,h),c.child;case 6:return o===null&&dt&&((o=h=zt)&&(h=$$(h,c.pendingProps,si),h!==null?(c.stateNode=h,qn=c,zt=null,o=!0):o=!1),o||ds(c)),null;case 13:return XT(o,c,h);case 4:return Ae(c,c.stateNode.containerInfo),p=c.pendingProps,o===null?c.child=yo(c,null,p,h):Hn(o,c,p,h),c.child;case 11:return FT(o,c,c.type,c.pendingProps,h);case 7:return Hn(o,c,c.pendingProps,h),c.child;case 8:return Hn(o,c,c.pendingProps.children,h),c.child;case 12:return Hn(o,c,c.pendingProps.children,h),c.child;case 10:return p=c.pendingProps,hs(c,c.type,p.value),Hn(o,c,p.children,h),c.child;case 9:return _=c.type._context,p=c.pendingProps.children,mo(c),_=zn(_),p=p(_),c.flags|=1,Hn(o,c,p,h),c.child;case 14:return UT(o,c,c.type,c.pendingProps,h);case 15:return qT(o,c,c.type,c.pendingProps,h);case 19:return ZT(o,c,h);case 31:return o$(o,c,h);case 22:return zT(o,c,h,c.pendingProps);case 24:return mo(c),p=zn(pn),o===null?(_=Jv(),_===null&&(_=Rt,A=Kv(),_.pooledCache=A,A.refCount++,A!==null&&(_.pooledCacheLanes|=h),_=A),c.memoizedState={parent:p,cache:_},ey(c),hs(c,pn,_)):((o.lanes&h)!==0&&(ty(o,c),Iu(c,null,null,h),Lu()),_=o.memoizedState,A=c.memoizedState,_.parent!==p?(_={parent:p,cache:p},c.memoizedState=_,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=_),hs(c,pn,p)):(p=A.cache,hs(c,pn,p),p!==_.cache&&Xv(c,[pn],h,!0))),Hn(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Aa(o){o.flags|=4}function Ly(o,c,h,p,_){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(_&335544128)===_)if(o.stateNode.complete)o.flags|=8192;else if(EO())o.flags|=8192;else throw vo=Cf,Qv}else o.flags&=-16777217}function QT(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!mC(c))if(EO())o.flags|=8192;else throw vo=Cf,Qv}function Vf(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ro():536870912,o.lanes|=c,Fl|=c)}function zu(o,c){if(!dt)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Ht(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(c)for(var _=o.child;_!==null;)h|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)h|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=p,o.childLanes=h,c}function c$(o,c,h){var p=c.pendingProps;switch(Hv(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(c),null;case 1:return Ht(c),null;case 3:return h=c.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),wa(pn),me(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Ol(c)?Aa(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Gv())),Ht(c),null;case 26:var _=c.type,A=c.memoizedState;return o===null?(Aa(c),A!==null?(Ht(c),QT(c,A)):(Ht(c),Ly(c,_,null,p,h))):A?A!==o.memoizedState?(Aa(c),Ht(c),QT(c,A)):(Ht(c),c.flags&=-16777217):(o=o.memoizedProps,o!==p&&Aa(c),Ht(c),Ly(c,_,o,p,h)),null;case 27:if(De(c),h=ye.current,_=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Aa(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return Ht(c),null}o=le.current,Ol(c)?P2(c):(o=sC(_,p,h),c.stateNode=o,Aa(c))}return Ht(c),null;case 5:if(De(c),_=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Aa(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return Ht(c),null}if(A=le.current,Ol(c))P2(c);else{var P=sm(ye.current);switch(A){case 1:A=P.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:A=P.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":A=P.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":A=P.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":A=P.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof p.is=="string"?P.createElement("select",{is:p.is}):P.createElement("select"),p.multiple?A.multiple=!0:p.size&&(A.size=p.size);break;default:A=typeof p.is=="string"?P.createElement(_,{is:p.is}):P.createElement(_)}}A[_e]=c,A[xe]=p;e:for(P=c.child;P!==null;){if(P.tag===5||P.tag===6)A.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===c)break e;for(;P.sibling===null;){if(P.return===null||P.return===c)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}c.stateNode=A;e:switch(Vn(A,_,p),_){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Aa(c)}}return Ht(c),Ly(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,h),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==p&&Aa(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(r(166));if(o=ye.current,Ol(c)){if(o=c.stateNode,h=c.memoizedProps,p=null,_=qn,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}o[_e]=c,o=!!(o.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||XO(o.nodeValue,h)),o||ds(c,!0)}else o=sm(o).createTextNode(p),o[_e]=c,c.stateNode=o}return Ht(c),null;case 31:if(h=c.memoizedState,o===null||o.memoizedState!==null){if(p=Ol(c),h!==null){if(o===null){if(!p)throw Error(r(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[_e]=c}else ho(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ht(c),o=!1}else h=Gv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return c.flags&256?(Rr(c),c):(Rr(c),null);if((c.flags&128)!==0)throw Error(r(558))}return Ht(c),null;case 13:if(p=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_=Ol(c),p!==null&&p.dehydrated!==null){if(o===null){if(!_)throw Error(r(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[_e]=c}else ho(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ht(c),_=!1}else _=Gv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=_),_=!0;if(!_)return c.flags&256?(Rr(c),c):(Rr(c),null)}return Rr(c),(c.flags&128)!==0?(c.lanes=h,c):(h=p!==null,o=o!==null&&o.memoizedState!==null,h&&(p=c.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==_&&(p.flags|=2048)),h!==o&&h&&(c.child.flags|=8192),Vf(c,c.updateQueue),Ht(c),null);case 4:return me(),o===null&&i0(c.stateNode.containerInfo),Ht(c),null;case 10:return wa(c.type),Ht(c),null;case 19:if(G(on),p=c.memoizedState,p===null)return Ht(c),null;if(_=(c.flags&128)!==0,A=p.rendering,A===null)if(_)zu(p,!1);else{if(an!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(A=Pf(o),A!==null){for(c.flags|=128,zu(p,!1),o=A.updateQueue,c.updateQueue=o,Vf(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)O2(h,o),h=h.sibling;return ee(on,on.current&1|2),dt&&ya(c,p.treeForkCount),c.child}o=o.sibling}p.tail!==null&&Lt()>Kf&&(c.flags|=128,_=!0,zu(p,!1),c.lanes=4194304)}else{if(!_)if(o=Pf(A),o!==null){if(c.flags|=128,_=!0,o=o.updateQueue,c.updateQueue=o,Vf(c,o),zu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!A.alternate&&!dt)return Ht(c),null}else 2*Lt()-p.renderingStartTime>Kf&&h!==536870912&&(c.flags|=128,_=!0,zu(p,!1),c.lanes=4194304);p.isBackwards?(A.sibling=c.child,c.child=A):(o=p.last,o!==null?o.sibling=A:c.child=A,p.last=A)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=Lt(),o.sibling=null,h=on.current,ee(on,_?h&1|2:h&1),dt&&ya(c,p.treeForkCount),o):(Ht(c),null);case 22:case 23:return Rr(c),ay(),p=c.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(h&536870912)!==0&&(c.flags&128)===0&&(Ht(c),c.subtreeFlags&6&&(c.flags|=8192)):Ht(c),h=c.updateQueue,h!==null&&Vf(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==h&&(c.flags|=2048),o!==null&&G(po),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),wa(pn),Ht(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function u$(o,c){switch(Hv(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return wa(pn),me(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return De(c),null;case 31:if(c.memoizedState!==null){if(Rr(c),c.alternate===null)throw Error(r(340));ho()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if(Rr(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));ho()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return G(on),null;case 4:return me(),null;case 10:return wa(c.type),null;case 22:case 23:return Rr(c),ay(),o!==null&&G(po),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return wa(pn),null;case 25:return null;default:return null}}function eO(o,c){switch(Hv(c),c.tag){case 3:wa(pn),me();break;case 26:case 27:case 5:De(c);break;case 4:me();break;case 31:c.memoizedState!==null&&Rr(c);break;case 13:Rr(c);break;case 19:G(on);break;case 10:wa(c.type);break;case 22:case 23:Rr(c),ay(),o!==null&&G(po);break;case 24:wa(pn)}}function Hu(o,c){try{var h=c.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var _=p.next;h=_;do{if((h.tag&o)===o){p=void 0;var A=h.create,P=h.inst;p=A(),P.destroy=p}h=h.next}while(h!==_)}}catch($){Et(c,c.return,$)}}function ys(o,c,h){try{var p=c.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var A=_.next;p=A;do{if((p.tag&o)===o){var P=p.inst,$=P.destroy;if($!==void 0){P.destroy=void 0,_=c;var W=h,re=$;try{re()}catch(ue){Et(_,W,ue)}}}p=p.next}while(p!==A)}}catch(ue){Et(c,c.return,ue)}}function tO(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{V2(c,h)}catch(p){Et(o,o.return,p)}}}function nO(o,c,h){h.props=wo(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(p){Et(o,c,p)}}function Vu(o,c){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof h=="function"?o.refCleanup=h(p):h.current=p}}catch(_){Et(o,c,_)}}function Wi(o,c){var h=o.ref,p=o.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(_){Et(o,c,_)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){Et(o,c,_)}else h.current=null}function rO(o){var c=o.type,h=o.memoizedProps,p=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break e;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(_){Et(o,o.return,_)}}function Iy(o,c,h){try{var p=o.stateNode;P$(p,o.type,h,c),p[xe]=c}catch(_){Et(o,o.return,_)}}function iO(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Es(o.type)||o.tag===4}function By(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||iO(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Es(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function $y(o,c,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(o),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=pa));else if(p!==4&&(p===27&&Es(o.type)&&(h=o.stateNode,c=null),o=o.child,o!==null))for($y(o,c,h),o=o.sibling;o!==null;)$y(o,c,h),o=o.sibling}function Gf(o,c,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(p!==4&&(p===27&&Es(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(Gf(o,c,h),o=o.sibling;o!==null;)Gf(o,c,h),o=o.sibling}function aO(o){var c=o.stateNode,h=o.memoizedProps;try{for(var p=o.type,_=c.attributes;_.length;)c.removeAttributeNode(_[0]);Vn(c,p,h),c[_e]=o,c[xe]=h}catch(A){Et(o,o.return,A)}}var Ea=!1,yn=!1,Fy=!1,sO=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function d$(o,c){if(o=o.containerInfo,o0=fm,o=y2(o),Rv(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var _=p.anchorOffset,A=p.focusNode;p=p.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break e}var P=0,$=-1,W=-1,re=0,ue=0,fe=o,ie=null;t:for(;;){for(var se;fe!==h||_!==0&&fe.nodeType!==3||($=P+_),fe!==A||p!==0&&fe.nodeType!==3||(W=P+p),fe.nodeType===3&&(P+=fe.nodeValue.length),(se=fe.firstChild)!==null;)ie=fe,fe=se;for(;;){if(fe===o)break t;if(ie===h&&++re===_&&($=P),ie===A&&++ue===p&&(W=P),(se=fe.nextSibling)!==null)break;fe=ie,ie=fe.parentNode}fe=se}h=$===-1||W===-1?null:{start:$,end:W}}else h=null}h=h||{start:0,end:0}}else h=null;for(l0={focusedElem:o,selectionRange:h},fm=!1,Rn=c;Rn!==null;)if(c=Rn,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Rn=o;else for(;Rn!==null;){switch(c=Rn,A=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)_=o[h],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&A!==null){o=void 0,h=c,_=A.memoizedProps,A=A.memoizedState,p=h.stateNode;try{var Ne=wo(h.type,_);o=p.getSnapshotBeforeUpdate(Ne,A),p.__reactInternalSnapshotBeforeUpdate=o}catch(Fe){Et(h,h.return,Fe)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,h=o.nodeType,h===9)d0(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":d0(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=c.sibling,o!==null){o.return=c.return,Rn=o;break}Rn=c.return}}function oO(o,c,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:Oa(o,h),p&4&&Hu(5,h);break;case 1:if(Oa(o,h),p&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(P){Et(h,h.return,P)}else{var _=wo(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(_,c,o.__reactInternalSnapshotBeforeUpdate)}catch(P){Et(h,h.return,P)}}p&64&&tO(h),p&512&&Vu(h,h.return);break;case 3:if(Oa(o,h),p&64&&(o=h.updateQueue,o!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{V2(o,c)}catch(P){Et(h,h.return,P)}}break;case 27:c===null&&p&4&&aO(h);case 26:case 5:Oa(o,h),c===null&&p&4&&rO(h),p&512&&Vu(h,h.return);break;case 12:Oa(o,h);break;case 31:Oa(o,h),p&4&&uO(o,h);break;case 13:Oa(o,h),p&4&&dO(o,h),p&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=w$.bind(null,h),F$(o,h))));break;case 22:if(p=h.memoizedState!==null||Ea,!p){c=c!==null&&c.memoizedState!==null||yn,_=Ea;var A=yn;Ea=p,(yn=c)&&!A?Ca(o,h,(h.subtreeFlags&8772)!==0):Oa(o,h),Ea=_,yn=A}break;case 30:break;default:Oa(o,h)}}function lO(o){var c=o.alternate;c!==null&&(o.alternate=null,lO(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&It(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Gt=null,pr=!1;function Ta(o,c,h){for(h=h.child;h!==null;)cO(o,c,h),h=h.sibling}function cO(o,c,h){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(hr,h)}catch{}switch(h.tag){case 26:yn||Wi(h,c),Ta(o,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:yn||Wi(h,c);var p=Gt,_=pr;Es(h.type)&&(Gt=h.stateNode,pr=!1),Ta(o,c,h),ed(h.stateNode),Gt=p,pr=_;break;case 5:yn||Wi(h,c);case 6:if(p=Gt,_=pr,Gt=null,Ta(o,c,h),Gt=p,pr=_,Gt!==null)if(pr)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(h.stateNode)}catch(A){Et(h,c,A)}else try{Gt.removeChild(h.stateNode)}catch(A){Et(h,c,A)}break;case 18:Gt!==null&&(pr?(o=Gt,tC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Yl(o)):tC(Gt,h.stateNode));break;case 4:p=Gt,_=pr,Gt=h.stateNode.containerInfo,pr=!0,Ta(o,c,h),Gt=p,pr=_;break;case 0:case 11:case 14:case 15:ys(2,h,c),yn||ys(4,h,c),Ta(o,c,h);break;case 1:yn||(Wi(h,c),p=h.stateNode,typeof p.componentWillUnmount=="function"&&nO(h,c,p)),Ta(o,c,h);break;case 21:Ta(o,c,h);break;case 22:yn=(p=yn)||h.memoizedState!==null,Ta(o,c,h),yn=p;break;default:Ta(o,c,h)}}function uO(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Yl(o)}catch(h){Et(c,c.return,h)}}}function dO(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Yl(o)}catch(h){Et(c,c.return,h)}}function h$(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new sO),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new sO),c;default:throw Error(r(435,o.tag))}}function Wf(o,c){var h=h$(o);c.forEach(function(p){if(!h.has(p)){h.add(p);var _=x$.bind(null,o,p);p.then(_,_)}})}function gr(o,c){var h=c.deletions;if(h!==null)for(var p=0;p<h.length;p++){var _=h[p],A=o,P=c,$=P;e:for(;$!==null;){switch($.tag){case 27:if(Es($.type)){Gt=$.stateNode,pr=!1;break e}break;case 5:Gt=$.stateNode,pr=!1;break e;case 3:case 4:Gt=$.stateNode.containerInfo,pr=!0;break e}$=$.return}if(Gt===null)throw Error(r(160));cO(A,P,_),Gt=null,pr=!1,A=_.alternate,A!==null&&(A.return=null),_.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)hO(c,o),c=c.sibling}var Ti=null;function hO(o,c){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:gr(c,o),vr(o),p&4&&(ys(3,o,o.return),Hu(3,o),ys(5,o,o.return));break;case 1:gr(c,o),vr(o),p&512&&(yn||h===null||Wi(h,h.return)),p&64&&Ea&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var _=Ti;if(gr(c,o),vr(o),p&512&&(yn||h===null||Wi(h,h.return)),p&4){var A=h!==null?h.memoizedState:null;if(p=o.memoizedState,h===null)if(p===null)if(o.stateNode===null){e:{p=o.type,h=o.memoizedProps,_=_.ownerDocument||_;t:switch(p){case"title":A=_.getElementsByTagName("title")[0],(!A||A[nt]||A[_e]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=_.createElement(p),_.head.insertBefore(A,_.querySelector("head > title"))),Vn(A,p,h),A[_e]=o,nn(A),p=A;break e;case"link":var P=hC("link","href",_).get(p+(h.href||""));if(P){for(var $=0;$<P.length;$++)if(A=P[$],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){P.splice($,1);break t}}A=_.createElement(p),Vn(A,p,h),_.head.appendChild(A);break;case"meta":if(P=hC("meta","content",_).get(p+(h.content||""))){for($=0;$<P.length;$++)if(A=P[$],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){P.splice($,1);break t}}A=_.createElement(p),Vn(A,p,h),_.head.appendChild(A);break;default:throw Error(r(468,p))}A[_e]=o,nn(A),p=A}o.stateNode=p}else fC(_,o.type,o.stateNode);else o.stateNode=dC(_,p,o.memoizedProps);else A!==p?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,p===null?fC(_,o.type,o.stateNode):dC(_,p,o.memoizedProps)):p===null&&o.stateNode!==null&&Iy(o,o.memoizedProps,h.memoizedProps)}break;case 27:gr(c,o),vr(o),p&512&&(yn||h===null||Wi(h,h.return)),h!==null&&p&4&&Iy(o,o.memoizedProps,h.memoizedProps);break;case 5:if(gr(c,o),vr(o),p&512&&(yn||h===null||Wi(h,h.return)),o.flags&32){_=o.stateNode;try{vl(_,"")}catch(Ne){Et(o,o.return,Ne)}}p&4&&o.stateNode!=null&&(_=o.memoizedProps,Iy(o,_,h!==null?h.memoizedProps:_)),p&1024&&(Fy=!0);break;case 6:if(gr(c,o),vr(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,h=o.stateNode;try{h.nodeValue=p}catch(Ne){Et(o,o.return,Ne)}}break;case 3:if(cm=null,_=Ti,Ti=om(c.containerInfo),gr(c,o),Ti=_,vr(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Yl(c.containerInfo)}catch(Ne){Et(o,o.return,Ne)}Fy&&(Fy=!1,fO(o));break;case 4:p=Ti,Ti=om(o.stateNode.containerInfo),gr(c,o),vr(o),Ti=p;break;case 12:gr(c,o),vr(o);break;case 31:gr(c,o),vr(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Wf(o,p)));break;case 13:gr(c,o),vr(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Xf=Lt()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Wf(o,p)));break;case 22:_=o.memoizedState!==null;var W=h!==null&&h.memoizedState!==null,re=Ea,ue=yn;if(Ea=re||_,yn=ue||W,gr(c,o),yn=ue,Ea=re,vr(o),p&8192)e:for(c=o.stateNode,c._visibility=_?c._visibility&-2:c._visibility|1,_&&(h===null||W||Ea||yn||xo(o)),h=null,c=o;;){if(c.tag===5||c.tag===26){if(h===null){W=h=c;try{if(A=W.stateNode,_)P=A.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{$=W.stateNode;var fe=W.memoizedProps.style,ie=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;$.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Ne){Et(W,W.return,Ne)}}}else if(c.tag===6){if(h===null){W=c;try{W.stateNode.nodeValue=_?"":W.memoizedProps}catch(Ne){Et(W,W.return,Ne)}}}else if(c.tag===18){if(h===null){W=c;try{var se=W.stateNode;_?nC(se,!0):nC(W.stateNode,!1)}catch(Ne){Et(W,W.return,Ne)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=o.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,Wf(o,h))));break;case 19:gr(c,o),vr(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Wf(o,p)));break;case 30:break;case 21:break;default:gr(c,o),vr(o)}}function vr(o){var c=o.flags;if(c&2){try{for(var h,p=o.return;p!==null;){if(iO(p)){h=p;break}p=p.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var _=h.stateNode,A=By(o);Gf(o,A,_);break;case 5:var P=h.stateNode;h.flags&32&&(vl(P,""),h.flags&=-33);var $=By(o);Gf(o,$,P);break;case 3:case 4:var W=h.stateNode.containerInfo,re=By(o);$y(o,re,W);break;default:throw Error(r(161))}}catch(ue){Et(o,o.return,ue)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function fO(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;fO(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Oa(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)oO(o,c.alternate,c),c=c.sibling}function xo(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:ys(4,c,c.return),xo(c);break;case 1:Wi(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&nO(c,c.return,h),xo(c);break;case 27:ed(c.stateNode);case 26:case 5:Wi(c,c.return),xo(c);break;case 22:c.memoizedState===null&&xo(c);break;case 30:xo(c);break;default:xo(c)}o=o.sibling}}function Ca(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,_=o,A=c,P=A.flags;switch(A.tag){case 0:case 11:case 15:Ca(_,A,h),Hu(4,A);break;case 1:if(Ca(_,A,h),p=A,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(re){Et(p,p.return,re)}if(p=A,_=p.updateQueue,_!==null){var $=p.stateNode;try{var W=_.shared.hiddenCallbacks;if(W!==null)for(_.shared.hiddenCallbacks=null,_=0;_<W.length;_++)H2(W[_],$)}catch(re){Et(p,p.return,re)}}h&&P&64&&tO(A),Vu(A,A.return);break;case 27:aO(A);case 26:case 5:Ca(_,A,h),h&&p===null&&P&4&&rO(A),Vu(A,A.return);break;case 12:Ca(_,A,h);break;case 31:Ca(_,A,h),h&&P&4&&uO(_,A);break;case 13:Ca(_,A,h),h&&P&4&&dO(_,A);break;case 22:A.memoizedState===null&&Ca(_,A,h),Vu(A,A.return);break;case 30:break;default:Ca(_,A,h)}c=c.sibling}}function Uy(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Mu(h))}function qy(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Mu(o))}function Oi(o,c,h,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)mO(o,c,h,p),c=c.sibling}function mO(o,c,h,p){var _=c.flags;switch(c.tag){case 0:case 11:case 15:Oi(o,c,h,p),_&2048&&Hu(9,c);break;case 1:Oi(o,c,h,p);break;case 3:Oi(o,c,h,p),_&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Mu(o)));break;case 12:if(_&2048){Oi(o,c,h,p),o=c.stateNode;try{var A=c.memoizedProps,P=A.id,$=A.onPostCommit;typeof $=="function"&&$(P,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(W){Et(c,c.return,W)}}else Oi(o,c,h,p);break;case 31:Oi(o,c,h,p);break;case 13:Oi(o,c,h,p);break;case 23:break;case 22:A=c.stateNode,P=c.alternate,c.memoizedState!==null?A._visibility&2?Oi(o,c,h,p):Gu(o,c):A._visibility&2?Oi(o,c,h,p):(A._visibility|=2,Il(o,c,h,p,(c.subtreeFlags&10256)!==0||!1)),_&2048&&Uy(P,c);break;case 24:Oi(o,c,h,p),_&2048&&qy(c.alternate,c);break;default:Oi(o,c,h,p)}}function Il(o,c,h,p,_){for(_=_&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var A=o,P=c,$=h,W=p,re=P.flags;switch(P.tag){case 0:case 11:case 15:Il(A,P,$,W,_),Hu(8,P);break;case 23:break;case 22:var ue=P.stateNode;P.memoizedState!==null?ue._visibility&2?Il(A,P,$,W,_):Gu(A,P):(ue._visibility|=2,Il(A,P,$,W,_)),_&&re&2048&&Uy(P.alternate,P);break;case 24:Il(A,P,$,W,_),_&&re&2048&&qy(P.alternate,P);break;default:Il(A,P,$,W,_)}c=c.sibling}}function Gu(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,p=c,_=p.flags;switch(p.tag){case 22:Gu(h,p),_&2048&&Uy(p.alternate,p);break;case 24:Gu(h,p),_&2048&&qy(p.alternate,p);break;default:Gu(h,p)}c=c.sibling}}var Wu=8192;function Bl(o,c,h){if(o.subtreeFlags&Wu)for(o=o.child;o!==null;)pO(o,c,h),o=o.sibling}function pO(o,c,h){switch(o.tag){case 26:Bl(o,c,h),o.flags&Wu&&o.memoizedState!==null&&J$(h,Ti,o.memoizedState,o.memoizedProps);break;case 5:Bl(o,c,h);break;case 3:case 4:var p=Ti;Ti=om(o.stateNode.containerInfo),Bl(o,c,h),Ti=p;break;case 22:o.memoizedState===null&&(p=o.alternate,p!==null&&p.memoizedState!==null?(p=Wu,Wu=16777216,Bl(o,c,h),Wu=p):Bl(o,c,h));break;default:Bl(o,c,h)}}function gO(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Yu(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];Rn=p,yO(p,o)}gO(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)vO(o),o=o.sibling}function vO(o){switch(o.tag){case 0:case 11:case 15:Yu(o),o.flags&2048&&ys(9,o,o.return);break;case 3:Yu(o);break;case 12:Yu(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Yf(o)):Yu(o);break;default:Yu(o)}}function Yf(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];Rn=p,yO(p,o)}gO(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:ys(8,c,c.return),Yf(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Yf(c));break;default:Yf(c)}o=o.sibling}}function yO(o,c){for(;Rn!==null;){var h=Rn;switch(h.tag){case 0:case 11:case 15:ys(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Mu(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,Rn=p;else e:for(h=o;Rn!==null;){p=Rn;var _=p.sibling,A=p.return;if(lO(p),p===h){Rn=null;break e}if(_!==null){_.return=A,Rn=_;break e}Rn=A}}}var f$={getCacheForType:function(o){var c=zn(pn),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h},cacheSignal:function(){return zn(pn).controller.signal}},m$=typeof WeakMap=="function"?WeakMap:Map,bt=0,Rt=null,rt=null,lt=0,At=0,kr=null,bs=!1,$l=!1,zy=!1,ja=0,an=0,ws=0,_o=0,Hy=0,Dr=0,Fl=0,Xu=null,yr=null,Vy=!1,Xf=0,bO=0,Kf=1/0,Zf=null,xs=null,Tn=0,_s=null,Ul=null,Na=0,Gy=0,Wy=null,wO=null,Ku=0,Yy=null;function Lr(){return(bt&2)!==0&&lt!==0?lt&-lt:I.T!==null?e0():Le()}function xO(){if(Dr===0)if((lt&536870912)===0||dt){var o=is;is<<=1,(is&3932160)===0&&(is=262144),Dr=o}else Dr=536870912;return o=Pr.current,o!==null&&(o.flags|=32),Dr}function br(o,c,h){(o===Rt&&(At===2||At===9)||o.cancelPendingCommit!==null)&&(ql(o,0),Ss(o,lt,Dr,!1)),io(o,h),((bt&2)===0||o!==Rt)&&(o===Rt&&((bt&2)===0&&(_o|=h),an===4&&Ss(o,lt,Dr,!1)),Yi(o))}function _O(o,c,h){if((bt&6)!==0)throw Error(r(327));var p=!h&&(c&127)===0&&(c&o.expiredLanes)===0||no(o,c),_=p?v$(o,c):Ky(o,c,!0),A=p;do{if(_===0){$l&&!p&&Ss(o,c,0,!1);break}else{if(h=o.current.alternate,A&&!p$(h)){_=Ky(o,c,!1),A=!1;continue}if(_===2){if(A=c,o.errorRecoveryDisabledLanes&A)var P=0;else P=o.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){c=P;e:{var $=o;_=Xu;var W=$.current.memoizedState.isDehydrated;if(W&&(ql($,P).flags|=256),P=Ky($,P,!1),P!==2){if(zy&&!W){$.errorRecoveryDisabledLanes|=A,_o|=A,_=4;break e}A=yr,yr=_,A!==null&&(yr===null?yr=A:yr.push.apply(yr,A))}_=P}if(A=!1,_!==2)continue}}if(_===1){ql(o,0),Ss(o,c,0,!0);break}e:{switch(p=o,A=_,A){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Ss(p,c,Dr,!bs);break e;case 2:yr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(_=Xf+300-Lt(),10<_)){if(Ss(p,c,Dr,!bs),to(p,0,!0)!==0)break e;Na=c,p.timeoutHandle=QO(SO.bind(null,p,h,yr,Zf,Vy,c,Dr,_o,Fl,bs,A,"Throttled",-0,0),_);break e}SO(p,h,yr,Zf,Vy,c,Dr,_o,Fl,bs,A,null,-0,0)}}break}while(!0);Yi(o)}function SO(o,c,h,p,_,A,P,$,W,re,ue,fe,ie,se){if(o.timeoutHandle=-1,fe=c.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},pO(c,A,fe);var Ne=(A&62914560)===A?Xf-Lt():(A&4194048)===A?bO-Lt():0;if(Ne=Q$(fe,Ne),Ne!==null){Na=A,o.cancelPendingCommit=Ne(MO.bind(null,o,c,A,h,p,_,P,$,W,ue,fe,null,ie,se)),Ss(o,A,P,!re);return}}MO(o,c,A,h,p,_,P,$,W)}function p$(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var _=h[p],A=_.getSnapshot;_=_.value;try{if(!Nr(A(),_))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ss(o,c,h,p){c&=~Hy,c&=~_o,o.suspendedLanes|=c,o.pingedLanes&=~c,p&&(o.warmLanes|=c),p=o.expirationTimes;for(var _=c;0<_;){var A=31-Zn(_),P=1<<A;p[A]=-1,_&=~P}h!==0&&Y(o,h,c)}function Jf(){return(bt&6)===0?(Zu(0),!1):!0}function Xy(){if(rt!==null){if(At===0)var o=rt.return;else o=rt,ba=fo=null,dy(o),Pl=null,Ru=0,o=rt;for(;o!==null;)eO(o.alternate,o),o=o.return;rt=null}}function ql(o,c){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,D$(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Na=0,Xy(),Rt=o,rt=h=va(o.current,null),lt=c,At=0,kr=null,bs=!1,$l=no(o,c),zy=!1,Fl=Dr=Hy=_o=ws=an=0,yr=Xu=null,Vy=!1,(c&8)!==0&&(c|=c&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=c;0<p;){var _=31-Zn(p),A=1<<_;c|=o[_],p&=~A}return ja=c,bf(),h}function AO(o,c){Ze=null,I.H=Uu,c===Ml||c===Of?(c=F2(),At=3):c===Qv?(c=F2(),At=4):At=c===Oy?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,kr=c,rt===null&&(an=1,Uf(o,ri(c,o.current)))}function EO(){var o=Pr.current;return o===null?!0:(lt&4194048)===lt?oi===null:(lt&62914560)===lt||(lt&536870912)!==0?o===oi:!1}function TO(){var o=I.H;return I.H=Uu,o===null?Uu:o}function OO(){var o=I.A;return I.A=f$,o}function Qf(){an=4,bs||(lt&4194048)!==lt&&Pr.current!==null||($l=!0),(ws&134217727)===0&&(_o&134217727)===0||Rt===null||Ss(Rt,lt,Dr,!1)}function Ky(o,c,h){var p=bt;bt|=2;var _=TO(),A=OO();(Rt!==o||lt!==c)&&(Zf=null,ql(o,c)),c=!1;var P=an;e:do try{if(At!==0&&rt!==null){var $=rt,W=kr;switch(At){case 8:Xy(),P=6;break e;case 3:case 2:case 9:case 6:Pr.current===null&&(c=!0);var re=At;if(At=0,kr=null,zl(o,$,W,re),h&&$l){P=0;break e}break;default:re=At,At=0,kr=null,zl(o,$,W,re)}}g$(),P=an;break}catch(ue){AO(o,ue)}while(!0);return c&&o.shellSuspendCounter++,ba=fo=null,bt=p,I.H=_,I.A=A,rt===null&&(Rt=null,lt=0,bf()),P}function g$(){for(;rt!==null;)CO(rt)}function v$(o,c){var h=bt;bt|=2;var p=TO(),_=OO();Rt!==o||lt!==c?(Zf=null,Kf=Lt()+500,ql(o,c)):$l=no(o,c);e:do try{if(At!==0&&rt!==null){c=rt;var A=kr;t:switch(At){case 1:At=0,kr=null,zl(o,c,A,1);break;case 2:case 9:if(B2(A)){At=0,kr=null,jO(c);break}c=function(){At!==2&&At!==9||Rt!==o||(At=7),Yi(o)},A.then(c,c);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:B2(A)?(At=0,kr=null,jO(c)):(At=0,kr=null,zl(o,c,A,7));break;case 5:var P=null;switch(rt.tag){case 26:P=rt.memoizedState;case 5:case 27:var $=rt;if(P?mC(P):$.stateNode.complete){At=0,kr=null;var W=$.sibling;if(W!==null)rt=W;else{var re=$.return;re!==null?(rt=re,em(re)):rt=null}break t}}At=0,kr=null,zl(o,c,A,5);break;case 6:At=0,kr=null,zl(o,c,A,6);break;case 8:Xy(),an=6;break e;default:throw Error(r(462))}}y$();break}catch(ue){AO(o,ue)}while(!0);return ba=fo=null,I.H=p,I.A=_,bt=h,rt!==null?0:(Rt=null,lt=0,bf(),an)}function y$(){for(;rt!==null&&!Cr();)CO(rt)}function CO(o){var c=JT(o.alternate,o,ja);o.memoizedProps=o.pendingProps,c===null?em(o):rt=c}function jO(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=GT(h,c,c.pendingProps,c.type,void 0,lt);break;case 11:c=GT(h,c,c.pendingProps,c.type.render,c.ref,lt);break;case 5:dy(c);default:eO(h,c),c=rt=O2(c,ja),c=JT(h,c,ja)}o.memoizedProps=o.pendingProps,c===null?em(o):rt=c}function zl(o,c,h,p){ba=fo=null,dy(c),Pl=null,Ru=0;var _=c.return;try{if(s$(o,_,c,h,lt)){an=1,Uf(o,ri(h,o.current)),rt=null;return}}catch(A){if(_!==null)throw rt=_,A;an=1,Uf(o,ri(h,o.current)),rt=null;return}c.flags&32768?(dt||p===1?o=!0:$l||(lt&536870912)!==0?o=!1:(bs=o=!0,(p===2||p===9||p===3||p===6)&&(p=Pr.current,p!==null&&p.tag===13&&(p.flags|=16384))),NO(c,o)):em(c)}function em(o){var c=o;do{if((c.flags&32768)!==0){NO(c,bs);return}o=c.return;var h=c$(c.alternate,c,ja);if(h!==null){rt=h;return}if(c=c.sibling,c!==null){rt=c;return}rt=c=o}while(c!==null);an===0&&(an=5)}function NO(o,c){do{var h=u$(o.alternate,o);if(h!==null){h.flags&=32767,rt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){rt=o;return}rt=o=h}while(o!==null);an=6,rt=null}function MO(o,c,h,p,_,A,P,$,W){o.cancelPendingCommit=null;do tm();while(Tn!==0);if((bt&6)!==0)throw Error(r(327));if(c!==null){if(c===o.current)throw Error(r(177));if(A=c.lanes|c.childLanes,A|=Bv,gv(o,h,A,P,$,W),o===Rt&&(rt=Rt=null,lt=0),Ul=c,_s=o,Na=h,Gy=A,Wy=_,wO=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,_$(fn,function(){return LO(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=I.T,I.T=null,_=z.p,z.p=2,P=bt,bt|=4;try{d$(o,c,h)}finally{bt=P,z.p=_,I.T=p}}Tn=1,PO(),RO(),kO()}}function PO(){if(Tn===1){Tn=0;var o=_s,c=Ul,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=I.T,I.T=null;var p=z.p;z.p=2;var _=bt;bt|=4;try{hO(c,o);var A=l0,P=y2(o.containerInfo),$=A.focusedElem,W=A.selectionRange;if(P!==$&&$&&$.ownerDocument&&v2($.ownerDocument.documentElement,$)){if(W!==null&&Rv($)){var re=W.start,ue=W.end;if(ue===void 0&&(ue=re),"selectionStart"in $)$.selectionStart=re,$.selectionEnd=Math.min(ue,$.value.length);else{var fe=$.ownerDocument||document,ie=fe&&fe.defaultView||window;if(ie.getSelection){var se=ie.getSelection(),Ne=$.textContent.length,Fe=Math.min(W.start,Ne),Nt=W.end===void 0?Fe:Math.min(W.end,Ne);!se.extend&&Fe>Nt&&(P=Nt,Nt=Fe,Fe=P);var Q=g2($,Fe),X=g2($,Nt);if(Q&&X&&(se.rangeCount!==1||se.anchorNode!==Q.node||se.anchorOffset!==Q.offset||se.focusNode!==X.node||se.focusOffset!==X.offset)){var ne=fe.createRange();ne.setStart(Q.node,Q.offset),se.removeAllRanges(),Fe>Nt?(se.addRange(ne),se.extend(X.node,X.offset)):(ne.setEnd(X.node,X.offset),se.addRange(ne))}}}}for(fe=[],se=$;se=se.parentNode;)se.nodeType===1&&fe.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<fe.length;$++){var he=fe[$];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}fm=!!o0,l0=o0=null}finally{bt=_,z.p=p,I.T=h}}o.current=c,Tn=2}}function RO(){if(Tn===2){Tn=0;var o=_s,c=Ul,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=I.T,I.T=null;var p=z.p;z.p=2;var _=bt;bt|=4;try{oO(o,c.alternate,c)}finally{bt=_,z.p=p,I.T=h}}Tn=3}}function kO(){if(Tn===4||Tn===3){Tn=0,da();var o=_s,c=Ul,h=Na,p=wO;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Tn=5:(Tn=0,Ul=_s=null,DO(o,o.pendingLanes));var _=o.pendingLanes;if(_===0&&(xs=null),we(h),c=c.stateNode,Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(hr,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=I.T,_=z.p,z.p=2,I.T=null;try{for(var A=o.onRecoverableError,P=0;P<p.length;P++){var $=p[P];A($.value,{componentStack:$.stack})}}finally{I.T=c,z.p=_}}(Na&3)!==0&&tm(),Yi(o),_=o.pendingLanes,(h&261930)!==0&&(_&42)!==0?o===Yy?Ku++:(Ku=0,Yy=o):Ku=0,Zu(0)}}function DO(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Mu(c)))}function tm(){return PO(),RO(),kO(),LO()}function LO(){if(Tn!==5)return!1;var o=_s,c=Gy;Gy=0;var h=we(Na),p=I.T,_=z.p;try{z.p=32>h?32:h,I.T=null,h=Wy,Wy=null;var A=_s,P=Na;if(Tn=0,Ul=_s=null,Na=0,(bt&6)!==0)throw Error(r(331));var $=bt;if(bt|=4,vO(A.current),mO(A,A.current,P,h),bt=$,Zu(0,!1),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(hr,A)}catch{}return!0}finally{z.p=_,I.T=p,DO(o,c)}}function IO(o,c,h){c=ri(h,c),c=Ty(o.stateNode,c,2),o=ps(o,c,2),o!==null&&(io(o,2),Yi(o))}function Et(o,c,h){if(o.tag===3)IO(o,o,h);else for(;c!==null;){if(c.tag===3){IO(c,o,h);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(xs===null||!xs.has(p))){o=ri(h,o),h=BT(2),p=ps(c,h,2),p!==null&&($T(h,p,c,o),io(p,2),Yi(p));break}}c=c.return}}function Zy(o,c,h){var p=o.pingCache;if(p===null){p=o.pingCache=new m$;var _=new Set;p.set(c,_)}else _=p.get(c),_===void 0&&(_=new Set,p.set(c,_));_.has(h)||(zy=!0,_.add(h),o=b$.bind(null,o,c,h),c.then(o,o))}function b$(o,c,h){var p=o.pingCache;p!==null&&p.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Rt===o&&(lt&h)===h&&(an===4||an===3&&(lt&62914560)===lt&&300>Lt()-Xf?(bt&2)===0&&ql(o,0):Hy|=h,Fl===lt&&(Fl=0)),Yi(o)}function BO(o,c){c===0&&(c=ro()),o=co(o,c),o!==null&&(io(o,c),Yi(o))}function w$(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),BO(o,h)}function x$(o,c){var h=0;switch(o.tag){case 31:case 13:var p=o.stateNode,_=o.memoizedState;_!==null&&(h=_.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(c),BO(o,h)}function _$(o,c){return Kr(o,c)}var nm=null,Hl=null,Jy=!1,rm=!1,Qy=!1,As=0;function Yi(o){o!==Hl&&o.next===null&&(Hl===null?nm=Hl=o:Hl=Hl.next=o),rm=!0,Jy||(Jy=!0,A$())}function Zu(o,c){if(!Qy&&rm){Qy=!0;do for(var h=!1,p=nm;p!==null;){if(o!==0){var _=p.pendingLanes;if(_===0)var A=0;else{var P=p.suspendedLanes,$=p.pingedLanes;A=(1<<31-Zn(42|o)+1)-1,A&=_&~(P&~$),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,qO(p,A))}else A=lt,A=to(p,p===Rt?A:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(A&3)===0||no(p,A)||(h=!0,qO(p,A));p=p.next}while(h);Qy=!1}}function S$(){$O()}function $O(){rm=Jy=!1;var o=0;As!==0&&k$()&&(o=As);for(var c=Lt(),h=null,p=nm;p!==null;){var _=p.next,A=FO(p,c);A===0?(p.next=null,h===null?nm=_:h.next=_,_===null&&(Hl=h)):(h=p,(o!==0||(A&3)!==0)&&(rm=!0)),p=_}Tn!==0&&Tn!==5||Zu(o),As!==0&&(As=0)}function FO(o,c){for(var h=o.suspendedLanes,p=o.pingedLanes,_=o.expirationTimes,A=o.pendingLanes&-62914561;0<A;){var P=31-Zn(A),$=1<<P,W=_[P];W===-1?(($&h)===0||($&p)!==0)&&(_[P]=cf($,c)):W<=c&&(o.expiredLanes|=$),A&=~$}if(c=Rt,h=lt,h=to(o,o===c?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,h===0||o===c&&(At===2||At===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&Pn(p),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||no(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(p!==null&&Pn(p),we(h)){case 2:case 8:h=ar;break;case 32:h=fn;break;case 268435456:h=ha;break;default:h=fn}return p=UO.bind(null,o),h=Kr(h,p),o.callbackPriority=c,o.callbackNode=h,c}return p!==null&&p!==null&&Pn(p),o.callbackPriority=2,o.callbackNode=null,2}function UO(o,c){if(Tn!==0&&Tn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(tm()&&o.callbackNode!==h)return null;var p=lt;return p=to(o,o===Rt?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(_O(o,p,c),FO(o,Lt()),o.callbackNode!=null&&o.callbackNode===h?UO.bind(null,o):null)}function qO(o,c){if(tm())return null;_O(o,c,!0)}function A$(){L$(function(){(bt&6)!==0?Kr(Qs,S$):$O()})}function e0(){if(As===0){var o=jl;o===0&&(o=eo,eo<<=1,(eo&261888)===0&&(eo=256)),As=o}return As}function zO(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:df(""+o)}function HO(o,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,o.id&&h.setAttribute("form",o.id),c.parentNode.insertBefore(h,c),o=new FormData(o),h.parentNode.removeChild(h),o}function E$(o,c,h,p,_){if(c==="submit"&&h&&h.stateNode===_){var A=zO((_[xe]||null).action),P=p.submitter;P&&(c=(c=P[xe]||null)?zO(c.formAction):P.getAttribute("formAction"),c!==null&&(A=c,P=null));var $=new pf("action","action",null,p,_);o.push({event:$,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(As!==0){var W=P?HO(_,P):new FormData(_);wy(h,{pending:!0,data:W,method:_.method,action:A},null,W)}}else typeof A=="function"&&($.preventDefault(),W=P?HO(_,P):new FormData(_),wy(h,{pending:!0,data:W,method:_.method,action:A},A,W))},currentTarget:_}]})}}for(var t0=0;t0<Iv.length;t0++){var n0=Iv[t0],T$=n0.toLowerCase(),O$=n0[0].toUpperCase()+n0.slice(1);Ei(T$,"on"+O$)}Ei(x2,"onAnimationEnd"),Ei(_2,"onAnimationIteration"),Ei(S2,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(z7,"onTransitionRun"),Ei(H7,"onTransitionStart"),Ei(V7,"onTransitionCancel"),Ei(A2,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ju));function VO(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],_=p.event;p=p.listeners;e:{var A=void 0;if(c)for(var P=p.length-1;0<=P;P--){var $=p[P],W=$.instance,re=$.currentTarget;if($=$.listener,W!==A&&_.isPropagationStopped())break e;A=$,_.currentTarget=re;try{A(_)}catch(ue){yf(ue)}_.currentTarget=null,A=W}else for(P=0;P<p.length;P++){if($=p[P],W=$.instance,re=$.currentTarget,$=$.listener,W!==A&&_.isPropagationStopped())break e;A=$,_.currentTarget=re;try{A(_)}catch(ue){yf(ue)}_.currentTarget=null,A=W}}}}function it(o,c){var h=c[We];h===void 0&&(h=c[We]=new Set);var p=o+"__bubble";h.has(p)||(GO(c,o,2,!1),h.add(p))}function r0(o,c,h){var p=0;c&&(p|=4),GO(h,o,p,c)}var im="_reactListening"+Math.random().toString(36).slice(2);function i0(o){if(!o[im]){o[im]=!0,os.forEach(function(h){h!=="selectionchange"&&(C$.has(h)||r0(h,!1,o),r0(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[im]||(c[im]=!0,r0("selectionchange",!1,c))}}function GO(o,c,h,p){switch(xC(c)){case 2:var _=n8;break;case 8:_=r8;break;default:_=b0}h=_.bind(null,c,h,o),_=void 0,!Av||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),p?_!==void 0?o.addEventListener(c,h,{capture:!0,passive:_}):o.addEventListener(c,h,!0):_!==void 0?o.addEventListener(c,h,{passive:_}):o.addEventListener(c,h,!1)}function a0(o,c,h,p,_){var A=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var P=p.tag;if(P===3||P===4){var $=p.stateNode.containerInfo;if($===_)break;if(P===4)for(P=p.return;P!==null;){var W=P.tag;if((W===3||W===4)&&P.stateNode.containerInfo===_)return;P=P.return}for(;$!==null;){if(P=jr($),P===null)return;if(W=P.tag,W===5||W===6||W===26||W===27){p=A=P;continue e}$=$.parentNode}}p=p.return}ZE(function(){var re=A,ue=_v(h),fe=[];e:{var ie=E2.get(o);if(ie!==void 0){var se=pf,Ne=o;switch(o){case"keypress":if(ff(h)===0)break e;case"keydown":case"keyup":se=x7;break;case"focusin":Ne="focus",se=Cv;break;case"focusout":Ne="blur",se=Cv;break;case"beforeblur":case"afterblur":se=Cv;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=e2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=c7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=A7;break;case x2:case _2:case S2:se=h7;break;case A2:se=T7;break;case"scroll":case"scrollend":se=o7;break;case"wheel":se=C7;break;case"copy":case"cut":case"paste":se=m7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=n2;break;case"toggle":case"beforetoggle":se=N7}var Fe=(c&4)!==0,Nt=!Fe&&(o==="scroll"||o==="scrollend"),Q=Fe?ie!==null?ie+"Capture":null:ie;Fe=[];for(var X=re,ne;X!==null;){var he=X;if(ne=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ne===null||Q===null||(he=wu(X,Q),he!=null&&Fe.push(Qu(X,he,ne))),Nt)break;X=X.return}0<Fe.length&&(ie=new se(ie,Ne,null,h,ue),fe.push({event:ie,listeners:Fe}))}}if((c&7)===0){e:{if(ie=o==="mouseover"||o==="pointerover",se=o==="mouseout"||o==="pointerout",ie&&h!==xv&&(Ne=h.relatedTarget||h.fromElement)&&(jr(Ne)||Ne[Pe]))break e;if((se||ie)&&(ie=ue.window===ue?ue:(ie=ue.ownerDocument)?ie.defaultView||ie.parentWindow:window,se?(Ne=h.relatedTarget||h.toElement,se=re,Ne=Ne?jr(Ne):null,Ne!==null&&(Nt=a(Ne),Fe=Ne.tag,Ne!==Nt||Fe!==5&&Fe!==27&&Fe!==6)&&(Ne=null)):(se=null,Ne=re),se!==Ne)){if(Fe=e2,he="onMouseLeave",Q="onMouseEnter",X="mouse",(o==="pointerout"||o==="pointerover")&&(Fe=n2,he="onPointerLeave",Q="onPointerEnter",X="pointer"),Nt=se==null?ie:sr(se),ne=Ne==null?ie:sr(Ne),ie=new Fe(he,X+"leave",se,h,ue),ie.target=Nt,ie.relatedTarget=ne,he=null,jr(ue)===re&&(Fe=new Fe(Q,X+"enter",Ne,h,ue),Fe.target=ne,Fe.relatedTarget=Nt,he=Fe),Nt=he,se&&Ne)t:{for(Fe=j$,Q=se,X=Ne,ne=0,he=Q;he;he=Fe(he))ne++;he=0;for(var Be=X;Be;Be=Fe(Be))he++;for(;0<ne-he;)Q=Fe(Q),ne--;for(;0<he-ne;)X=Fe(X),he--;for(;ne--;){if(Q===X||X!==null&&Q===X.alternate){Fe=Q;break t}Q=Fe(Q),X=Fe(X)}Fe=null}else Fe=null;se!==null&&WO(fe,ie,se,Fe,!1),Ne!==null&&Nt!==null&&WO(fe,Nt,Ne,Fe,!0)}}e:{if(ie=re?sr(re):window,se=ie.nodeName&&ie.nodeName.toLowerCase(),se==="select"||se==="input"&&ie.type==="file")var gt=u2;else if(l2(ie))if(d2)gt=F7;else{gt=B7;var Re=I7}else se=ie.nodeName,!se||se.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?re&&wv(re.elementType)&&(gt=u2):gt=$7;if(gt&&(gt=gt(o,re))){c2(fe,gt,h,ue);break e}Re&&Re(o,ie,re),o==="focusout"&&re&&ie.type==="number"&&re.memoizedProps.value!=null&&bv(ie,"number",ie.value)}switch(Re=re?sr(re):window,o){case"focusin":(l2(Re)||Re.contentEditable==="true")&&(xl=Re,kv=re,Cu=null);break;case"focusout":Cu=kv=xl=null;break;case"mousedown":Dv=!0;break;case"contextmenu":case"mouseup":case"dragend":Dv=!1,b2(fe,h,ue);break;case"selectionchange":if(q7)break;case"keydown":case"keyup":b2(fe,h,ue)}var Je;if(Nv)e:{switch(o){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else wl?s2(o,h)&&(ct="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(ct="onCompositionStart");ct&&(r2&&h.locale!=="ko"&&(wl||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&wl&&(Je=JE()):(ls=ue,Ev="value"in ls?ls.value:ls.textContent,wl=!0)),Re=am(re,ct),0<Re.length&&(ct=new t2(ct,o,null,h,ue),fe.push({event:ct,listeners:Re}),Je?ct.data=Je:(Je=o2(h),Je!==null&&(ct.data=Je)))),(Je=P7?R7(o,h):k7(o,h))&&(ct=am(re,"onBeforeInput"),0<ct.length&&(Re=new t2("onBeforeInput","beforeinput",null,h,ue),fe.push({event:Re,listeners:ct}),Re.data=Je)),E$(fe,o,re,h,ue)}VO(fe,c)})}function Qu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function am(o,c){for(var h=c+"Capture",p=[];o!==null;){var _=o,A=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||A===null||(_=wu(o,h),_!=null&&p.unshift(Qu(o,_,A)),_=wu(o,c),_!=null&&p.push(Qu(o,_,A))),o.tag===3)return p;o=o.return}return[]}function j$(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function WO(o,c,h,p,_){for(var A=c._reactName,P=[];h!==null&&h!==p;){var $=h,W=$.alternate,re=$.stateNode;if($=$.tag,W!==null&&W===p)break;$!==5&&$!==26&&$!==27||re===null||(W=re,_?(re=wu(h,A),re!=null&&P.unshift(Qu(h,re,W))):_||(re=wu(h,A),re!=null&&P.push(Qu(h,re,W)))),h=h.return}P.length!==0&&o.push({event:c,listeners:P})}var N$=/\r\n?/g,M$=/\u0000|\uFFFD/g;function YO(o){return(typeof o=="string"?o:""+o).replace(N$,`
`).replace(M$,"")}function XO(o,c){return c=YO(c),YO(o)===c}function jt(o,c,h,p,_,A){switch(h){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||vl(o,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&vl(o,""+p);break;case"className":Ai(o,"class",p);break;case"tabIndex":Ai(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(o,h,p);break;case"style":XE(o,p,A);break;case"data":if(c!=="object"){Ai(o,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||h!=="href")){o.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=df(""+p),o.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(c!=="input"&&jt(o,c,"name",_.name,_,null),jt(o,c,"formEncType",_.formEncType,_,null),jt(o,c,"formMethod",_.formMethod,_,null),jt(o,c,"formTarget",_.formTarget,_,null)):(jt(o,c,"encType",_.encType,_,null),jt(o,c,"method",_.method,_,null),jt(o,c,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=df(""+p),o.setAttribute(h,p);break;case"onClick":p!=null&&(o.onclick=pa);break;case"onScroll":p!=null&&it("scroll",o);break;case"onScrollEnd":p!=null&&it("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(h=p.__html,h!=null){if(_.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}h=df(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""+p):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":p===!0?o.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,p):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(h,p):o.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(h):o.setAttribute(h,p);break;case"popover":it("beforetoggle",o),it("toggle",o),qt(o,"popover",p);break;case"xlinkActuate":ei(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ei(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ei(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ei(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ei(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ei(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ei(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ei(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ei(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":qt(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=a7.get(h)||h,qt(o,h,p))}}function s0(o,c,h,p,_,A){switch(h){case"style":XE(o,p,A);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(h=p.__html,h!=null){if(_.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"children":typeof p=="string"?vl(o,p):(typeof p=="number"||typeof p=="bigint")&&vl(o,""+p);break;case"onScroll":p!=null&&it("scroll",o);break;case"onScrollEnd":p!=null&&it("scrollend",o);break;case"onClick":p!=null&&(o.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hi.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),c=h.slice(2,_?h.length-7:void 0),A=o[xe]||null,A=A!=null?A[h]:null,typeof A=="function"&&o.removeEventListener(c,A,_),typeof p=="function")){typeof A!="function"&&A!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(c,p,_);break e}h in o?o[h]=p:p===!0?o.setAttribute(h,""):qt(o,h,p)}}}function Vn(o,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",o),it("load",o);var p=!1,_=!1,A;for(A in h)if(h.hasOwnProperty(A)){var P=h[A];if(P!=null)switch(A){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:jt(o,c,A,P,h,null)}}_&&jt(o,c,"srcSet",h.srcSet,h,null),p&&jt(o,c,"src",h.src,h,null);return;case"input":it("invalid",o);var $=A=P=_=null,W=null,re=null;for(p in h)if(h.hasOwnProperty(p)){var ue=h[p];if(ue!=null)switch(p){case"name":_=ue;break;case"type":P=ue;break;case"checked":W=ue;break;case"defaultChecked":re=ue;break;case"value":A=ue;break;case"defaultValue":$=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:jt(o,c,p,ue,h,null)}}VE(o,A,$,W,re,P,_,!1);return;case"select":it("invalid",o),p=P=A=null;for(_ in h)if(h.hasOwnProperty(_)&&($=h[_],$!=null))switch(_){case"value":A=$;break;case"defaultValue":P=$;break;case"multiple":p=$;default:jt(o,c,_,$,h,null)}c=A,h=P,o.multiple=!!p,c!=null?gl(o,!!p,c,!1):h!=null&&gl(o,!!p,h,!0);return;case"textarea":it("invalid",o),A=_=p=null;for(P in h)if(h.hasOwnProperty(P)&&($=h[P],$!=null))switch(P){case"value":p=$;break;case"defaultValue":_=$;break;case"children":A=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(r(91));break;default:jt(o,c,P,$,h,null)}WE(o,p,_,A);return;case"option":for(W in h)if(h.hasOwnProperty(W)&&(p=h[W],p!=null))switch(W){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:jt(o,c,W,p,h,null)}return;case"dialog":it("beforetoggle",o),it("toggle",o),it("cancel",o),it("close",o);break;case"iframe":case"object":it("load",o);break;case"video":case"audio":for(p=0;p<Ju.length;p++)it(Ju[p],o);break;case"image":it("error",o),it("load",o);break;case"details":it("toggle",o);break;case"embed":case"source":case"link":it("error",o),it("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in h)if(h.hasOwnProperty(re)&&(p=h[re],p!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:jt(o,c,re,p,h,null)}return;default:if(wv(c)){for(ue in h)h.hasOwnProperty(ue)&&(p=h[ue],p!==void 0&&s0(o,c,ue,p,h,void 0));return}}for($ in h)h.hasOwnProperty($)&&(p=h[$],p!=null&&jt(o,c,$,p,h,null))}function P$(o,c,h,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,A=null,P=null,$=null,W=null,re=null,ue=null;for(se in h){var fe=h[se];if(h.hasOwnProperty(se)&&fe!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":W=fe;default:p.hasOwnProperty(se)||jt(o,c,se,null,p,fe)}}for(var ie in p){var se=p[ie];if(fe=h[ie],p.hasOwnProperty(ie)&&(se!=null||fe!=null))switch(ie){case"type":A=se;break;case"name":_=se;break;case"checked":re=se;break;case"defaultChecked":ue=se;break;case"value":P=se;break;case"defaultValue":$=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,c));break;default:se!==fe&&jt(o,c,ie,se,p,fe)}}yv(o,P,$,W,re,ue,A,_);return;case"select":se=P=$=ie=null;for(A in h)if(W=h[A],h.hasOwnProperty(A)&&W!=null)switch(A){case"value":break;case"multiple":se=W;default:p.hasOwnProperty(A)||jt(o,c,A,null,p,W)}for(_ in p)if(A=p[_],W=h[_],p.hasOwnProperty(_)&&(A!=null||W!=null))switch(_){case"value":ie=A;break;case"defaultValue":$=A;break;case"multiple":P=A;default:A!==W&&jt(o,c,_,A,p,W)}c=$,h=P,p=se,ie!=null?gl(o,!!h,ie,!1):!!p!=!!h&&(c!=null?gl(o,!!h,c,!0):gl(o,!!h,h?[]:"",!1));return;case"textarea":se=ie=null;for($ in h)if(_=h[$],h.hasOwnProperty($)&&_!=null&&!p.hasOwnProperty($))switch($){case"value":break;case"children":break;default:jt(o,c,$,null,p,_)}for(P in p)if(_=p[P],A=h[P],p.hasOwnProperty(P)&&(_!=null||A!=null))switch(P){case"value":ie=_;break;case"defaultValue":se=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==A&&jt(o,c,P,_,p,A)}GE(o,ie,se);return;case"option":for(var Ne in h)if(ie=h[Ne],h.hasOwnProperty(Ne)&&ie!=null&&!p.hasOwnProperty(Ne))switch(Ne){case"selected":o.selected=!1;break;default:jt(o,c,Ne,null,p,ie)}for(W in p)if(ie=p[W],se=h[W],p.hasOwnProperty(W)&&ie!==se&&(ie!=null||se!=null))switch(W){case"selected":o.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:jt(o,c,W,ie,p,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in h)ie=h[Fe],h.hasOwnProperty(Fe)&&ie!=null&&!p.hasOwnProperty(Fe)&&jt(o,c,Fe,null,p,ie);for(re in p)if(ie=p[re],se=h[re],p.hasOwnProperty(re)&&ie!==se&&(ie!=null||se!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,c));break;default:jt(o,c,re,ie,p,se)}return;default:if(wv(c)){for(var Nt in h)ie=h[Nt],h.hasOwnProperty(Nt)&&ie!==void 0&&!p.hasOwnProperty(Nt)&&s0(o,c,Nt,void 0,p,ie);for(ue in p)ie=p[ue],se=h[ue],!p.hasOwnProperty(ue)||ie===se||ie===void 0&&se===void 0||s0(o,c,ue,ie,p,se);return}}for(var Q in h)ie=h[Q],h.hasOwnProperty(Q)&&ie!=null&&!p.hasOwnProperty(Q)&&jt(o,c,Q,null,p,ie);for(fe in p)ie=p[fe],se=h[fe],!p.hasOwnProperty(fe)||ie===se||ie==null&&se==null||jt(o,c,fe,ie,p,se)}function KO(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R$(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,h=performance.getEntriesByType("resource"),p=0;p<h.length;p++){var _=h[p],A=_.transferSize,P=_.initiatorType,$=_.duration;if(A&&$&&KO(P)){for(P=0,$=_.responseEnd,p+=1;p<h.length;p++){var W=h[p],re=W.startTime;if(re>$)break;var ue=W.transferSize,fe=W.initiatorType;ue&&KO(fe)&&(W=W.responseEnd,P+=ue*(W<$?1:($-re)/(W-re)))}if(--p,c+=8*(A+P)/(_.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var o0=null,l0=null;function sm(o){return o.nodeType===9?o:o.ownerDocument}function ZO(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JO(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function c0(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var u0=null;function k$(){var o=window.event;return o&&o.type==="popstate"?o===u0?!1:(u0=o,!0):(u0=null,!1)}var QO=typeof setTimeout=="function"?setTimeout:void 0,D$=typeof clearTimeout=="function"?clearTimeout:void 0,eC=typeof Promise=="function"?Promise:void 0,L$=typeof queueMicrotask=="function"?queueMicrotask:typeof eC<"u"?function(o){return eC.resolve(null).then(o).catch(I$)}:QO;function I$(o){setTimeout(function(){throw o})}function Es(o){return o==="head"}function tC(o,c){var h=c,p=0;do{var _=h.nextSibling;if(o.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"||h==="/&"){if(p===0){o.removeChild(_),Yl(c);return}p--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")p++;else if(h==="html")ed(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,ed(h);for(var A=h.firstChild;A;){var P=A.nextSibling,$=A.nodeName;A[nt]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&A.rel.toLowerCase()==="stylesheet"||h.removeChild(A),A=P}}else h==="body"&&ed(o.ownerDocument.body);h=_}while(h);Yl(c)}function nC(o,c){var h=o;o=0;do{var p=h.nextSibling;if(h.nodeType===1?c?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(c?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),p&&p.nodeType===8)if(h=p.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=p}while(h)}function d0(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":d0(h),It(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function B$(o,c,h,p){for(;o.nodeType===1;){var _=h;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[nt])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(A=o.getAttribute("rel"),A==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(A!==_.rel||o.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||o.getAttribute("title")!==(_.title==null?null:_.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(A=o.getAttribute("src"),(A!==(_.src==null?null:_.src)||o.getAttribute("type")!==(_.type==null?null:_.type)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&A&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var A=_.name==null?null:""+_.name;if(_.type==="hidden"&&o.getAttribute("name")===A)return o}else return o;if(o=li(o.nextSibling),o===null)break}return null}function $$(o,c,h){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=li(o.nextSibling),o===null))return null;return o}function rC(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=li(o.nextSibling),o===null))return null;return o}function h0(o){return o.data==="$?"||o.data==="$~"}function f0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function F$(o,c){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||h.readyState!=="loading")c();else{var p=function(){c(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function li(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var m0=null;function iC(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(c===0)return li(o.nextSibling);c--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||c++}o=o.nextSibling}return null}function aC(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(c===0)return o;c--}else h!=="/$"&&h!=="/&"||c++}o=o.previousSibling}return null}function sC(o,c,h){switch(c=sm(h),o){case"html":if(o=c.documentElement,!o)throw Error(r(452));return o;case"head":if(o=c.head,!o)throw Error(r(453));return o;case"body":if(o=c.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function ed(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);It(o)}var ci=new Map,oC=new Set;function om(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ma=z.d;z.d={f:U$,r:q$,D:z$,C:H$,L:V$,m:G$,X:Y$,S:W$,M:X$};function U$(){var o=Ma.f(),c=Jf();return o||c}function q$(o){var c=Jr(o);c!==null&&c.tag===5&&c.type==="form"?AT(c):Ma.r(o)}var Vl=typeof document>"u"?null:document;function lC(o,c,h){var p=Vl;if(p&&typeof c=="string"&&c){var _=ti(c);_='link[rel="'+o+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),oC.has(_)||(oC.add(_),o={rel:o,crossOrigin:h,href:c},p.querySelector(_)===null&&(c=p.createElement("link"),Vn(c,"link",o),nn(c),p.head.appendChild(c)))}}function z$(o){Ma.D(o),lC("dns-prefetch",o,null)}function H$(o,c){Ma.C(o,c),lC("preconnect",o,c)}function V$(o,c,h){Ma.L(o,c,h);var p=Vl;if(p&&o&&c){var _='link[rel="preload"][as="'+ti(c)+'"]';c==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+ti(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+ti(h.imageSizes)+'"]')):_+='[href="'+ti(o)+'"]';var A=_;switch(c){case"style":A=Gl(o);break;case"script":A=Wl(o)}ci.has(A)||(o=m({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:o,as:c},h),ci.set(A,o),p.querySelector(_)!==null||c==="style"&&p.querySelector(td(A))||c==="script"&&p.querySelector(nd(A))||(c=p.createElement("link"),Vn(c,"link",o),nn(c),p.head.appendChild(c)))}}function G$(o,c){Ma.m(o,c);var h=Vl;if(h&&o){var p=c&&typeof c.as=="string"?c.as:"script",_='link[rel="modulepreload"][as="'+ti(p)+'"][href="'+ti(o)+'"]',A=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Wl(o)}if(!ci.has(A)&&(o=m({rel:"modulepreload",href:o},c),ci.set(A,o),h.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(nd(A)))return}p=h.createElement("link"),Vn(p,"link",o),nn(p),h.head.appendChild(p)}}}function W$(o,c,h){Ma.S(o,c,h);var p=Vl;if(p&&o){var _=Un(p).hoistableStyles,A=Gl(o);c=c||"default";var P=_.get(A);if(!P){var $={loading:0,preload:null};if(P=p.querySelector(td(A)))$.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":c},h),(h=ci.get(A))&&p0(o,h);var W=P=p.createElement("link");nn(W),Vn(W,"link",o),W._p=new Promise(function(re,ue){W.onload=re,W.onerror=ue}),W.addEventListener("load",function(){$.loading|=1}),W.addEventListener("error",function(){$.loading|=2}),$.loading|=4,lm(P,c,p)}P={type:"stylesheet",instance:P,count:1,state:$},_.set(A,P)}}}function Y$(o,c){Ma.X(o,c);var h=Vl;if(h&&o){var p=Un(h).hoistableScripts,_=Wl(o),A=p.get(_);A||(A=h.querySelector(nd(_)),A||(o=m({src:o,async:!0},c),(c=ci.get(_))&&g0(o,c),A=h.createElement("script"),nn(A),Vn(A,"link",o),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},p.set(_,A))}}function X$(o,c){Ma.M(o,c);var h=Vl;if(h&&o){var p=Un(h).hoistableScripts,_=Wl(o),A=p.get(_);A||(A=h.querySelector(nd(_)),A||(o=m({src:o,async:!0,type:"module"},c),(c=ci.get(_))&&g0(o,c),A=h.createElement("script"),nn(A),Vn(A,"link",o),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},p.set(_,A))}}function cC(o,c,h,p){var _=(_=ye.current)?om(_):null;if(!_)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=Gl(h.href),h=Un(_).hoistableStyles,p=h.get(c),p||(p={type:"style",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Gl(h.href);var A=Un(_).hoistableStyles,P=A.get(o);if(P||(_=_.ownerDocument||_,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(o,P),(A=_.querySelector(td(o)))&&!A._p&&(P.instance=A,P.state.loading=5),ci.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ci.set(o,h),A||K$(_,o,h,P.state))),c&&p===null)throw Error(r(528,""));return P}if(c&&p!==null)throw Error(r(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Wl(h),h=Un(_).hoistableScripts,p=h.get(c),p||(p={type:"script",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Gl(o){return'href="'+ti(o)+'"'}function td(o){return'link[rel="stylesheet"]['+o+"]"}function uC(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function K$(o,c,h,p){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=o.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),Vn(c,"link",h),nn(c),o.head.appendChild(c))}function Wl(o){return'[src="'+ti(o)+'"]'}function nd(o){return"script[async]"+o}function dC(o,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var p=o.querySelector('style[data-href~="'+ti(h.href)+'"]');if(p)return c.instance=p,nn(p),p;var _=m({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),nn(p),Vn(p,"style",_),lm(p,h.precedence,o),c.instance=p;case"stylesheet":_=Gl(h.href);var A=o.querySelector(td(_));if(A)return c.state.loading|=4,c.instance=A,nn(A),A;p=uC(h),(_=ci.get(_))&&p0(p,_),A=(o.ownerDocument||o).createElement("link"),nn(A);var P=A;return P._p=new Promise(function($,W){P.onload=$,P.onerror=W}),Vn(A,"link",p),c.state.loading|=4,lm(A,h.precedence,o),c.instance=A;case"script":return A=Wl(h.src),(_=o.querySelector(nd(A)))?(c.instance=_,nn(_),_):(p=h,(_=ci.get(A))&&(p=m({},h),g0(p,_)),o=o.ownerDocument||o,_=o.createElement("script"),nn(_),Vn(_,"link",p),o.head.appendChild(_),c.instance=_);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,lm(p,h.precedence,o));return c.instance}function lm(o,c,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,A=_,P=0;P<p.length;P++){var $=p[P];if($.dataset.precedence===c)A=$;else if(A!==_)break}A?A.parentNode.insertBefore(o,A.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(o,c.firstChild))}function p0(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function g0(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var cm=null;function hC(o,c,h){if(cm===null){var p=new Map,_=cm=new Map;_.set(h,p)}else _=cm,p=_.get(h),p||(p=new Map,_.set(h,p));if(p.has(o))return p;for(p.set(o,null),h=h.getElementsByTagName(o),_=0;_<h.length;_++){var A=h[_];if(!(A[nt]||A[_e]||o==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var P=A.getAttribute(c)||"";P=o+P;var $=p.get(P);$?$.push(A):p.set(P,[A])}}return p}function fC(o,c,h){o=o.ownerDocument||o,o.head.insertBefore(h,c==="title"?o.querySelector("head > title"):null)}function Z$(o,c,h){if(h===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function mC(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function J$(o,c,h,p){if(h.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var _=Gl(p.href),A=c.querySelector(td(_));if(A){c=A._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=um.bind(o),c.then(o,o)),h.state.loading|=4,h.instance=A,nn(A);return}A=c.ownerDocument||c,p=uC(p),(_=ci.get(_))&&p0(p,_),A=A.createElement("link"),nn(A);var P=A;P._p=new Promise(function($,W){P.onload=$,P.onerror=W}),Vn(A,"link",p),h.instance=A}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=um.bind(o),c.addEventListener("load",h),c.addEventListener("error",h))}}var v0=0;function Q$(o,c){return o.stylesheets&&o.count===0&&hm(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var p=setTimeout(function(){if(o.stylesheets&&hm(o,o.stylesheets),o.unsuspend){var A=o.unsuspend;o.unsuspend=null,A()}},6e4+c);0<o.imgBytes&&v0===0&&(v0=62500*R$());var _=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&hm(o,o.stylesheets),o.unsuspend)){var A=o.unsuspend;o.unsuspend=null,A()}},(o.imgBytes>v0?50:800)+c);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(p),clearTimeout(_)}}:null}function um(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hm(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var dm=null;function hm(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,dm=new Map,c.forEach(e8,o),dm=null,um.call(o))}function e8(o,c){if(!(c.state.loading&4)){var h=dm.get(o);if(h)var p=h.get(null);else{h=new Map,dm.set(o,h);for(var _=o.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<_.length;A++){var P=_[A];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(h.set(P.dataset.precedence,P),p=P)}p&&h.set(null,p)}_=c.instance,P=_.getAttribute("data-precedence"),A=h.get(P)||p,A===p&&h.set(null,_),h.set(P,_),this.count++,p=um.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),A?A.parentNode.insertBefore(_,A.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(_,o.firstChild)),c.state.loading|=4}}var rd={$$typeof:T,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function t8(o,c,h,p,_,A,P,$,W){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ss(0),this.hiddenUpdates=ss(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=A,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function pC(o,c,h,p,_,A,P,$,W,re,ue,fe){return o=new t8(o,c,h,P,W,re,ue,fe,$),c=1,A===!0&&(c|=24),A=Mr(3,null,null,c),o.current=A,A.stateNode=o,c=Kv(),c.refCount++,o.pooledCache=c,c.refCount++,A.memoizedState={element:p,isDehydrated:h,cache:c},ey(A),o}function gC(o){return o?(o=Al,o):Al}function vC(o,c,h,p,_,A){_=gC(_),p.context===null?p.context=_:p.pendingContext=_,p=ms(c),p.payload={element:h},A=A===void 0?null:A,A!==null&&(p.callback=A),h=ps(o,p,c),h!==null&&(br(h,o,c),Du(h,o,c))}function yC(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function y0(o,c){yC(o,c),(o=o.alternate)&&yC(o,c)}function bC(o){if(o.tag===13||o.tag===31){var c=co(o,67108864);c!==null&&br(c,o,67108864),y0(o,67108864)}}function wC(o){if(o.tag===13||o.tag===31){var c=Lr();c=pe(c);var h=co(o,c);h!==null&&br(h,o,c),y0(o,c)}}var fm=!0;function n8(o,c,h,p){var _=I.T;I.T=null;var A=z.p;try{z.p=2,b0(o,c,h,p)}finally{z.p=A,I.T=_}}function r8(o,c,h,p){var _=I.T;I.T=null;var A=z.p;try{z.p=8,b0(o,c,h,p)}finally{z.p=A,I.T=_}}function b0(o,c,h,p){if(fm){var _=w0(p);if(_===null)a0(o,c,p,mm,h),_C(o,p);else if(a8(_,o,c,h,p))p.stopPropagation();else if(_C(o,p),c&4&&-1<i8.indexOf(o)){for(;_!==null;){var A=Jr(_);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var P=fa(A.pendingLanes);if(P!==0){var $=A;for($.pendingLanes|=2,$.entangledLanes|=2;P;){var W=1<<31-Zn(P);$.entanglements[1]|=W,P&=~W}Yi(A),(bt&6)===0&&(Kf=Lt()+500,Zu(0))}}break;case 31:case 13:$=co(A,2),$!==null&&br($,A,2),Jf(),y0(A,2)}if(A=w0(p),A===null&&a0(o,c,p,mm,h),A===_)break;_=A}_!==null&&p.stopPropagation()}else a0(o,c,p,null,h)}}function w0(o){return o=_v(o),x0(o)}var mm=null;function x0(o){if(mm=null,o=jr(o),o!==null){var c=a(o);if(c===null)o=null;else{var h=c.tag;if(h===13){if(o=s(c),o!==null)return o;o=null}else if(h===31){if(o=l(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return mm=o,null}function xC(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case Qs:return 2;case ar:return 8;case fn:case mn:return 32;case ha:return 268435456;default:return 32}default:return 32}}var _0=!1,Ts=null,Os=null,Cs=null,id=new Map,ad=new Map,js=[],i8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _C(o,c){switch(o){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":id.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ad.delete(c.pointerId)}}function sd(o,c,h,p,_,A){return o===null||o.nativeEvent!==A?(o={blockedOn:c,domEventName:h,eventSystemFlags:p,nativeEvent:A,targetContainers:[_]},c!==null&&(c=Jr(c),c!==null&&bC(c)),o):(o.eventSystemFlags|=p,c=o.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),o)}function a8(o,c,h,p,_){switch(c){case"focusin":return Ts=sd(Ts,o,c,h,p,_),!0;case"dragenter":return Os=sd(Os,o,c,h,p,_),!0;case"mouseover":return Cs=sd(Cs,o,c,h,p,_),!0;case"pointerover":var A=_.pointerId;return id.set(A,sd(id.get(A)||null,o,c,h,p,_)),!0;case"gotpointercapture":return A=_.pointerId,ad.set(A,sd(ad.get(A)||null,o,c,h,p,_)),!0}return!1}function SC(o){var c=jr(o.target);if(c!==null){var h=a(c);if(h!==null){if(c=h.tag,c===13){if(c=s(h),c!==null){o.blockedOn=c,He(o.priority,function(){wC(h)});return}}else if(c===31){if(c=l(h),c!==null){o.blockedOn=c,He(o.priority,function(){wC(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function pm(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=w0(o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);xv=p,h.target.dispatchEvent(p),xv=null}else return c=Jr(h),c!==null&&bC(c),o.blockedOn=h,!1;c.shift()}return!0}function AC(o,c,h){pm(o)&&h.delete(c)}function s8(){_0=!1,Ts!==null&&pm(Ts)&&(Ts=null),Os!==null&&pm(Os)&&(Os=null),Cs!==null&&pm(Cs)&&(Cs=null),id.forEach(AC),ad.forEach(AC)}function gm(o,c){o.blockedOn===c&&(o.blockedOn=null,_0||(_0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,s8)))}var vm=null;function EC(o){vm!==o&&(vm=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vm===o&&(vm=null);for(var c=0;c<o.length;c+=3){var h=o[c],p=o[c+1],_=o[c+2];if(typeof p!="function"){if(x0(p||h)===null)continue;break}var A=Jr(h);A!==null&&(o.splice(c,3),c-=3,wy(A,{pending:!0,data:_,method:h.method,action:p},p,_))}}))}function Yl(o){function c(W){return gm(W,o)}Ts!==null&&gm(Ts,o),Os!==null&&gm(Os,o),Cs!==null&&gm(Cs,o),id.forEach(c),ad.forEach(c);for(var h=0;h<js.length;h++){var p=js[h];p.blockedOn===o&&(p.blockedOn=null)}for(;0<js.length&&(h=js[0],h.blockedOn===null);)SC(h),h.blockedOn===null&&js.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var _=h[p],A=h[p+1],P=_[xe]||null;if(typeof A=="function")P||EC(h);else if(P){var $=null;if(A&&A.hasAttribute("formAction")){if(_=A,P=A[xe]||null)$=P.formAction;else if(x0(_)!==null)continue}else $=P.action;typeof $=="function"?h[p+1]=$:(h.splice(p,3),p-=3),EC(h)}}}function TC(){function o(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(P){return _=P})},focusReset:"manual",scroll:"manual"})}function c(){_!==null&&(_(),_=null),p||setTimeout(h,20)}function h(){if(!p&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,_=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(h,100),function(){p=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),_!==null&&(_(),_=null)}}}function S0(o){this._internalRoot=o}ym.prototype.render=S0.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));var h=c.current,p=Lr();vC(h,p,o,c,null,null)},ym.prototype.unmount=S0.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;vC(o.current,2,null,o,null,null),Jf(),c[Pe]=null}};function ym(o){this._internalRoot=o}ym.prototype.unstable_scheduleHydration=function(o){if(o){var c=Le();o={blockedOn:null,target:o,priority:c};for(var h=0;h<js.length&&c!==0&&c<js[h].priority;h++);js.splice(h,0,o),h===0&&SC(o)}};var OC=e.version;if(OC!=="19.2.0")throw Error(r(527,OC,"19.2.0"));z.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=d(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var o8={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bm.isDisabled&&bm.supportsFiber)try{hr=bm.inject(o8),Kn=bm}catch{}}return ld.createRoot=function(o,c){if(!i(o))throw Error(r(299));var h=!1,p="",_=kT,A=DT,P=LT;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError)),c=pC(o,1,!1,null,null,h,p,null,_,A,P,TC),o[Pe]=c.current,i0(o),new S0(c)},ld.hydrateRoot=function(o,c,h){if(!i(o))throw Error(r(299));var p=!1,_="",A=kT,P=DT,$=LT,W=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(P=h.onCaughtError),h.onRecoverableError!==void 0&&($=h.onRecoverableError),h.formState!==void 0&&(W=h.formState)),c=pC(o,1,!0,c,h??null,p,_,W,A,P,$,TC),c.context=gC(null),h=c.current,p=Lr(),p=pe(p),_=ms(p),_.callback=null,ps(h,_,p),h=p,c.current.lanes=h,io(c,h),Yi(c),o[Pe]=c.current,i0(o),new ym(c)},ld.version="19.2.0",ld}var $C;function v8(){if($C)return O0.exports;$C=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),O0.exports=g8(),O0.exports}var y8=v8(),e_=function(n,e){return e_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},e_(n,e)};function g3(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");e_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var sp=function(){return sp=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},sp.apply(this,arguments)};function iu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function v3(n,e,t,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,e,t,r);else for(var l=n.length-1;l>=0;l--)(s=n[l])&&(a=(i<3?s(a):i>3?s(e,t,a):s(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}function y3(n,e){return function(t,r){e(t,r,n)}}function b3(n,e,t,r,i,a){function s(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var l=r.kind,u=l==="getter"?"get":l==="setter"?"set":"value",d=!e&&n?r.static?n:n.prototype:null,f=e||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),m,g=!1,y=t.length-1;y>=0;y--){var x={};for(var b in r)x[b]=b==="access"?{}:r[b];for(var b in r.access)x.access[b]=r.access[b];x.addInitializer=function(S){if(g)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(S||null))};var w=(0,t[y])(l==="accessor"?{get:f.get,set:f.set}:f[u],x);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(m=s(w.get))&&(f.get=m),(m=s(w.set))&&(f.set=m),(m=s(w.init))&&i.unshift(m)}else(m=s(w))&&(l==="field"?i.unshift(m):f[u]=m)}d&&Object.defineProperty(d,r.name,f),g=!0}function w3(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function x3(n){return typeof n=="symbol"?n:"".concat(n)}function _3(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function S3(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function ke(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(r.next(f))}catch(m){s(m)}}function u(f){try{d(r.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):i(f.value).then(l,u)}d((r=r.apply(n,e||[])).next())})}function A3(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(f){return u([d,f])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(t=0)),t;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,i=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(f){d=[6,f],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var xg=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function E3(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xg(e,n,t)}function op(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function QS(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a}function T3(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(QS(arguments[e]));return n}function O3(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],s=0,l=a.length;s<l;s++,i++)r[i]=a[s];return r}function C3(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function jc(n){return this instanceof jc?(this.v=n,this):new jc(n)}function j3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(x){return Promise.resolve(x).then(y,m)}}function l(y,x){r[y]&&(i[y]=function(b){return new Promise(function(w,S){a.push([y,b,w,S])>1||u(y,b)})},x&&(i[y]=x(i[y])))}function u(y,x){try{d(r[y](x))}catch(b){g(a[0][3],b)}}function d(y){y.value instanceof jc?Promise.resolve(y.value.v).then(f,m):g(a[0][2],y)}function f(y){u("next",y)}function m(y){u("throw",y)}function g(y,x){y(x),a.shift(),a.length&&u(a[0][0],a[0][1])}}function N3(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,a){e[i]=n[i]?function(s){return(t=!t)?{value:jc(n[i](s)),done:!1}:a?a(s):s}:a}}function M3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof op=="function"?op(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(s){return new Promise(function(l,u){s=n[a](s),i(l,u,s.done,s.value)})}}function i(a,s,l,u){Promise.resolve(u).then(function(d){a({value:d,done:l})},s)}}function P3(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var b8=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},t_=function(n){return t_=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},t_(n)};function R3(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=t_(n),r=0;r<t.length;r++)t[r]!=="default"&&xg(e,n,t[r]);return b8(e,n),e}function k3(n){return n&&n.__esModule?n:{default:n}}function D3(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function L3(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function I3(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function B3(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var w8=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function $3(n){function e(a){n.error=n.hasError?new w8(a,n.error,"An error was suppressed during disposal."):a,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var a=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(a).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function F3(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,a,s){return r?e?".jsx":".js":i&&(!a||!s)?t:i+a+"."+s.toLowerCase()+"js"}):n}const x8={__extends:g3,__assign:sp,__rest:iu,__decorate:v3,__param:y3,__esDecorate:b3,__runInitializers:w3,__propKey:x3,__setFunctionName:_3,__metadata:S3,__awaiter:ke,__generator:A3,__createBinding:xg,__exportStar:E3,__values:op,__read:QS,__spread:T3,__spreadArrays:O3,__spreadArray:C3,__await:jc,__asyncGenerator:j3,__asyncDelegator:N3,__asyncValues:M3,__makeTemplateObject:P3,__importStar:R3,__importDefault:k3,__classPrivateFieldGet:D3,__classPrivateFieldSet:L3,__classPrivateFieldIn:I3,__addDisposableResource:B3,__disposeResources:$3,__rewriteRelativeImportExtension:F3},_8=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:B3,get __assign(){return sp},__asyncDelegator:N3,__asyncGenerator:j3,__asyncValues:M3,__await:jc,__awaiter:ke,__classPrivateFieldGet:D3,__classPrivateFieldIn:I3,__classPrivateFieldSet:L3,__createBinding:xg,__decorate:v3,__disposeResources:$3,__esDecorate:b3,__exportStar:E3,__extends:g3,__generator:A3,__importDefault:k3,__importStar:R3,__makeTemplateObject:P3,__metadata:S3,__param:y3,__propKey:x3,__read:QS,__rest:iu,__rewriteRelativeImportExtension:F3,__runInitializers:w3,__setFunctionName:_3,__spread:T3,__spreadArray:C3,__spreadArrays:O3,__values:op,default:x8},Symbol.toStringTag,{value:"Module"})),S8="modulepreload",A8=function(n){return"/ma-faculte/"+n},FC={},al=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");i=u(t.map(d=>{if(d=A8(d),d in FC)return;FC[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":S8,f||(g.as="script"),g.crossOrigin="",g.href=d,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((y,x)=>{g.addEventListener("load",y),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},E8=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>sl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class eA extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class UC extends eA{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qC extends eA{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zC extends eA{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var n_;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(n_||(n_={}));class T8{constructor(e,{headers:t={},customFetch:r,region:i=n_.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=E8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ke(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:a,method:s,body:l,signal:u}=r;let d={},{region:f}=r;f||(f=this.region);const m=new URL(`${this.url}/${t}`);f&&f!=="any"&&(d["x-region"]=f,m.searchParams.set("forceFunctionRegion",f));let g;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(d["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(d["Content-Type"]="application/json",g=JSON.stringify(l)):g=l;const y=yield this.fetch(m.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:g,signal:u}).catch(S=>{throw S.name==="AbortError"?S:new UC(S)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new qC(y);if(!y.ok)throw new zC(y);let b=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield y.json():b==="application/octet-stream"||b==="application/pdf"?w=yield y.blob():b==="text/event-stream"?w=y:b==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new UC(a)}:{data:null,error:a,response:a instanceof zC||a instanceof qC?a.context:void 0}}})}}var Qn={};const au=m3(_8);var xm={},_m={},Sm={},Am={},Em={},O8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Nc=O8();const C8=Nc.fetch,U3=Nc.fetch.bind(Nc),q3=Nc.Headers,j8=Nc.Request,N8=Nc.Response,sl=Object.freeze(Object.defineProperty({__proto__:null,Headers:q3,Request:j8,Response:N8,default:U3,fetch:C8},Symbol.toStringTag,{value:"Module"})),M8=m3(sl);var Tm={},HC;function z3(){if(HC)return Tm;HC=1,Object.defineProperty(Tm,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Tm.default=n,Tm}var VC;function H3(){if(VC)return Em;VC=1,Object.defineProperty(Em,"__esModule",{value:!0});const n=au,e=n.__importDefault(M8),t=n.__importDefault(z3());class r{constructor(a){var s,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(s=a.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,s){return this.headers=new Headers(this.headers),this.headers.set(a,s),this}then(a,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var f,m,g,y;let x=null,b=null,w=null,S=d.status,O=d.statusText;if(d.ok){if(this.method!=="HEAD"){const j=await d.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?b=j:b=JSON.parse(j))}const M=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),N=(g=d.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");M&&N&&N.length>1&&(w=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(x={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,w=null,S=406,O="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const M=await d.text();try{x=JSON.parse(M),Array.isArray(x)&&d.status===404&&(b=[],x=null,S=200,O="OK")}catch{d.status===404&&M===""?(S=204,O="No Content"):x={message:M}}if(x&&this.isMaybeSingle&&(!((y=x?.details)===null||y===void 0)&&y.includes("0 rows"))&&(x=null,S=200,O="OK"),x&&this.shouldThrowOnError)throw new t.default(x)}return{error:x,data:b,count:w,status:S,statusText:O}});return this.shouldThrowOnError||(u=u.catch(d=>{var f,m,g;return{error:{message:`${(f=d?.name)!==null&&f!==void 0?f:"FetchError"}: ${d?.message}`,details:`${(m=d?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(g=d?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),u.then(a,s)}returns(){return this}overrideTypes(){return this}}return Em.default=r,Em}var GC;function V3(){if(GC)return Am;GC=1,Object.defineProperty(Am,"__esModule",{value:!0});const e=au.__importDefault(H3());class t extends e.default{select(i){let a=!1;const s=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:l=s}={}){const u=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:l=!1,wal:u=!1,format:d="text"}={}){var f;const m=[i?"analyze":null,a?"verbose":null,s?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Am.default=t,Am}var WC;function tA(){if(WC)return Sm;WC=1,Object.defineProperty(Sm,"__esModule",{value:!0});const e=au.__importDefault(V3()),t=new RegExp("[,()]");class r extends e.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}in(a,s){const l=Array.from(new Set(s)).map(u=>typeof u=="string"&&t.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${f}.${s}`),this}match(a){return Object.entries(a).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(a,s,l){return this.url.searchParams.append(a,`not.${s}.${l}`),this}or(a,{foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,s,l){return this.url.searchParams.append(a,`${s}.${l}`),this}}return Sm.default=r,Sm}var YC;function G3(){if(YC)return _m;YC=1,Object.defineProperty(_m,"__esModule",{value:!0});const e=au.__importDefault(tA());class t{constructor(i,{headers:a={},schema:s,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=l}select(i,a){const{head:s=!1,count:l}=a??{},u=s?"HEAD":"GET";let d=!1;const f=(i??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var l;const u="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(d.length>0){const f=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:l,defaultToNull:u=!0}={}){var d;const f="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(m.length>0){const g=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:a}={}){var s;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return _m.default=t,_m}var XC;function P8(){if(XC)return xm;XC=1,Object.defineProperty(xm,"__esModule",{value:!0});const n=au,e=n.__importDefault(G3()),t=n.__importDefault(tA());class r{constructor(a,{headers:s={},schema:l,fetch:u}={}){this.url=a,this.headers=new Headers(s),this.schemaName=l,this.fetch=u}from(a){const s=new URL(`${this.url}/${a}`);return new e.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:l=!1,get:u=!1,count:d}={}){var f;let m;const g=new URL(`${this.url}/rpc/${a}`);let y;l||u?(m=l?"HEAD":"GET",Object.entries(s).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{g.searchParams.append(b,w)})):(m="POST",y=s);const x=new Headers(this.headers);return d&&x.set("Prefer",`count=${d}`),new t.default({method:m,url:g,headers:x,schema:this.schemaName,body:y,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return xm.default=r,xm}var KC;function R8(){if(KC)return Qn;KC=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.PostgrestError=Qn.PostgrestBuilder=Qn.PostgrestTransformBuilder=Qn.PostgrestFilterBuilder=Qn.PostgrestQueryBuilder=Qn.PostgrestClient=void 0;const n=au,e=n.__importDefault(P8());Qn.PostgrestClient=e.default;const t=n.__importDefault(G3());Qn.PostgrestQueryBuilder=t.default;const r=n.__importDefault(tA());Qn.PostgrestFilterBuilder=r.default;const i=n.__importDefault(V3());Qn.PostgrestTransformBuilder=i.default;const a=n.__importDefault(H3());Qn.PostgrestBuilder=a.default;const s=n.__importDefault(z3());return Qn.PostgrestError=s.default,Qn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:s.default},Qn}var W3=R8();const Y3=_t(W3),k8=ZS({__proto__:null,default:Y3},[W3]),{PostgrestClient:D8,PostgrestQueryBuilder:qhe,PostgrestFilterBuilder:zhe,PostgrestTransformBuilder:Hhe,PostgrestBuilder:Vhe,PostgrestError:Ghe}=Y3||k8;class L8{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const I8="2.78.0",B8=`realtime-js/${I8}`,$8="1.0.0",r_=1e4,F8=1e3,U8=100;var kd;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(kd||(kd={}));var jn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(jn||(jn={}));var Ri;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ri||(Ri={}));var i_;(function(n){n.websocket="websocket"})(i_||(i_={}));var Mo;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Mo||(Mo={}));class q8{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const l=r.decode(e.slice(s,s+i));s=s+i;const u=r.decode(e.slice(s,s+a));s=s+a;const d=JSON.parse(r.decode(e.slice(s,e.byteLength)));return{ref:null,topic:l,event:u,payload:d}}}class X3{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Bt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Bt||(Bt={}));const ZC=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,s)=>(a[s]=z8(s,n,e,i),a),{}):{}},z8=(n,e,t,r)=>{const i=e.find(l=>l.name===n),a=i?.type,s=t[n];return a&&!r.includes(a)?K3(a,s):a_(s)},K3=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return W8(e,t)}switch(n){case Bt.bool:return H8(e);case Bt.float4:case Bt.float8:case Bt.int2:case Bt.int4:case Bt.int8:case Bt.numeric:case Bt.oid:return V8(e);case Bt.json:case Bt.jsonb:return G8(e);case Bt.timestamp:return Y8(e);case Bt.abstime:case Bt.date:case Bt.daterange:case Bt.int4range:case Bt.int8range:case Bt.money:case Bt.reltime:case Bt.text:case Bt.time:case Bt.timestamptz:case Bt.timetz:case Bt.tsrange:case Bt.tstzrange:return a_(e);default:return a_(e)}},a_=n=>n,H8=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},V8=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},G8=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},W8=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const s=n.slice(1,t);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(l=>K3(e,l))}return n},Y8=n=>typeof n=="string"?n.replace(" ","T"):n,Z3=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class M0{constructor(e,t,r={},i=r_){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var JC;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(JC||(JC={}));class Dd{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dd.syncState(this.state,i,a,s),this.pendingDiffs.forEach(u=>{this.state=Dd.syncDiff(this.state,u,a,s)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Dd.syncDiff(this.state,i,a,s),l())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const a=this.cloneDeep(e),s=this.transformState(t),l={},u={};return this.map(a,(d,f)=>{s[d]||(u[d]=f)}),this.map(s,(d,f)=>{const m=a[d];if(m){const g=f.map(w=>w.presence_ref),y=m.map(w=>w.presence_ref),x=f.filter(w=>y.indexOf(w.presence_ref)<0),b=m.filter(w=>g.indexOf(w.presence_ref)<0);x.length>0&&(l[d]=x),b.length>0&&(u[d]=b)}else l[d]=f}),this.syncDiff(a,{joins:l,leaves:u},r,i)}static syncDiff(e,t,r,i){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(l,u)=>{var d;const f=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(u),f.length>0){const m=e[l].map(y=>y.presence_ref),g=f.filter(y=>m.indexOf(y.presence_ref)<0);e[l].unshift(...g)}r(l,f,u)}),this.map(s,(l,u)=>{let d=e[l];if(!d)return;const f=u.map(m=>m.presence_ref);d=d.filter(m=>f.indexOf(m.presence_ref)<0),e[l]=d,i(l,d,u),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var QC;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(QC||(QC={}));var Ld;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ld||(Ld={}));var ka;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ka||(ka={}));class nA{constructor(e,t={config:{}},r){var i,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=jn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new M0(this,Ri.join,this.params,this.timeout),this.rejoinTimer=new X3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ri.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new Dd(this),this.broadcastEndpointURL=Z3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==jn.closed){const{config:{broadcast:s,presence:l,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(y=>y.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[Ld.PRESENCE]&&this.bindings[Ld.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},g={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(ka.CHANNEL_ERROR,y)),this._onClose(()=>e?.(ka.CLOSED)),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){e?.(ka.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(x=b?.length)!==null&&x!==void 0?x:0,S=[];for(let O=0;O<w;O++){const T=b[O],{filter:{event:M,schema:N,table:j,filter:C}}=T,R=y&&y[O];if(R&&R.event===M&&R.schema===N&&R.table===j&&R.filter===C)S.push(Object.assign(Object.assign({},T),{id:R.id}));else{this.unsubscribe(),this.state=jn.errored,e?.(ka.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(ka.SUBSCRIBED);return}}).receive("error",y=>{this.state=jn.errored,e?.(ka.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(ka.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===jn.joined&&e===Ld.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,l,u;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ri.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new M0(this,Ri.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new M0(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>U8){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,a;const s=e.toLocaleLowerCase(),{close:l,error:u,leave:d,join:f}=Ri;if(r&&[l,u,d,f].indexOf(s)>=0&&r!==this._joinRef())return;let g=this._onMessage(s,t,r);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var x,b,w;return((x=y.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(b=y.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===s}).map(y=>y.callback(g,r)):(a=this.bindings[s])===null||a===void 0||a.filter(y=>{var x,b,w,S,O,T;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in y){const M=y.id,N=(x=y.filter)===null||x===void 0?void 0:x.event;return M&&((b=t.ids)===null||b===void 0?void 0:b.includes(M))&&(N==="*"||N?.toLocaleLowerCase()===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const M=(O=(S=y?.filter)===null||S===void 0?void 0:S.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return M==="*"||M===((T=t?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===s}).map(y=>{if(typeof g=="object"&&"ids"in g){const x=g.data,{schema:b,table:w,commit_timestamp:S,type:O,errors:T}=x;g=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:S,eventType:O,new:{},old:{},errors:T}),this._getPayloadRecords(x))}y.callback(g,r)})}_isClosed(){return this.state===jn.closed}_isJoined(){return this.state===jn.joined}_isJoining(){return this.state===jn.joining}_isLeaving(){return this.state===jn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&nA.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ri.close,{},e)}_onError(e){this._on(Ri.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ZC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ZC(e.columns,e.old_record)),t}}const P0=()=>{},Om={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},X8=[1e3,2e3,5e3,1e4],K8=1e4,Z8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class J8{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=r_,this.transport=null,this.heartbeatIntervalMs=Om.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=P0,this.ref=0,this.reconnectTimer=null,this.logger=P0,this.conn=null,this.sendBuffer=[],this.serializer=new q8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...s)=>al(async()=>{const{default:l}=await Promise.resolve().then(()=>sl);return{default:l}},void 0).then(({default:l})=>l(...s)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...s)=>a(...s)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${i_.websocket}`,this.httpEndpoint=Z3(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=L8.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$8}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case kd.connecting:return Mo.Connecting;case kd.open:return Mo.Open;case kd.closing:return Mo.Closing;default:return Mo.Closed}}isConnected(){return this.connectionState()===Mo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new nA(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:i,ref:a}=e,s=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${t} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(F8,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Om.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:s}=t,l=s?`(${s})`:"",u=a.status||"";this.log("receive",`${u} ${r} ${i} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ri.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Z8],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:B8};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ri.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new X3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Om.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,a,s,l,u,d,f;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:r_,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Om.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:P0,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(m=>X8[m-1]||K8),this.encode=(d=e?.encode)!==null&&d!==void 0?d:((m,g)=>g(JSON.stringify(m))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class rA extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Jt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Q8 extends rA{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class s_ extends rA{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const iA=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>sl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},eF=()=>ke(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield al(()=>Promise.resolve().then(()=>sl),void 0)).Response:Response}),o_=n=>{if(Array.isArray(n))return n.map(t=>o_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=o_(r)}),e},tF=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},R0=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},nF=(n,e,t)=>ke(void 0,void 0,void 0,function*(){const r=yield eF();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const a=n.status||500,s=i?.statusCode||a+"";e(new Q8(R0(i),a,s))}).catch(i=>{e(new s_(R0(i),i))}):e(new s_(R0(n),n))}),rF=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(tF(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function $h(n,e,t,r,i,a){return ke(this,void 0,void 0,function*(){return new Promise((s,l)=>{n(t,rF(e,r,i,a)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>s(u)).catch(u=>nF(u,l,r))})})}function Hd(n,e,t,r){return ke(this,void 0,void 0,function*(){return $h(n,"GET",e,t,r)})}function Mi(n,e,t,r,i){return ke(this,void 0,void 0,function*(){return $h(n,"POST",e,r,i,t)})}function l_(n,e,t,r,i){return ke(this,void 0,void 0,function*(){return $h(n,"PUT",e,r,i,t)})}function iF(n,e,t,r){return ke(this,void 0,void 0,function*(){return $h(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function aA(n,e,t,r,i){return ke(this,void 0,void 0,function*(){return $h(n,"DELETE",e,r,i,t)})}class aF{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ke(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Jt(e))return{data:null,error:e};throw e}})}}var J3;class sF{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[J3]="BlobDownloadBuilder",this.promise=null}asStream(){return new aF(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ke(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Jt(e))return{data:null,error:e};throw e}})}}J3=Symbol.toStringTag;const oF={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ej={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lF{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=iA(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return ke(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},ej),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const u=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),u&&a.append("metadata",this.encodeMetadata(u)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",s.cacheControl),u&&a.append("metadata",this.encodeMetadata(u))):(a=r,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(t),f=this._getFinalPath(d),m=yield(e=="PUT"?l_:Mi)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:l},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Jt(a))return{data:null,error:a};throw a}})}upload(e,t,r){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return ke(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",t);try{let u;const d=Object.assign({upsert:ej.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const m=yield l_(this.fetch,l.toString(),u,{headers:f});return{data:{path:a,fullPath:m.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Jt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,t){return ke(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const a=yield Mi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+a.url),l=s.searchParams.get("token");if(!l)throw new rA("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}update(e,t,r){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ke(this,void 0,void 0,function*(){try{return{data:yield Mi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}})}copy(e,t,r){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield Mi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return ke(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Mi(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return ke(this,void 0,void 0,function*(){try{const i=yield Mi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),s=a?`?${a}`:"",l=this._getFinalPath(e),u=()=>Hd(this.fetch,`${this.url}/${i}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new sF(u,this.shouldThrowOnError)}info(e){return ke(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Hd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:o_(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}exists(e){return ke(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield iF(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r)&&r instanceof s_){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const l=typeof t?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(t?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return ke(this,void 0,void 0,function*(){try{return{data:yield aA(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jt(t))return{data:null,error:t};throw t}})}list(e,t,r){return ke(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},oF),t),{prefix:e||""});return{data:yield Mi(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}})}listV2(e,t){return ke(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Mi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Q3="2.78.0",eL={"X-Client-Info":`storage-js/${Q3}`};class cF{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},eL),t),this.fetch=iA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ke(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Hd(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jt(t))return{data:null,error:t};throw t}})}getBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Hd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jt(t))return{data:null,error:t};throw t}})}createBucket(e){return ke(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield Mi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Jt(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return ke(this,void 0,void 0,function*(){try{return{data:yield l_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Mi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield aA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class uF{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},eL),t),this.fetch=iA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Mi(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jt(t))return{data:null,error:t};throw t}})}listBuckets(e){return ke(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Hd(this.fetch,i,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield aA(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Jt(t))return{data:null,error:t};throw t}})}}const sA={"X-Client-Info":`storage-js/${Q3}`,"Content-Type":"application/json"};class tL extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Hr(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class k0 extends tL{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dF extends tL{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var tj;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(tj||(tj={}));const oA=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>sl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},hF=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},nj=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),fF=(n,e,t)=>ke(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!t?.noResolveJson){const i=n.status||500,a=n;if(typeof a.json=="function")a.json().then(s=>{const l=s?.statusCode||s?.code||i+"";e(new k0(nj(s),i,l))}).catch(()=>{const s=i+"",l=a.statusText||`HTTP ${i} error`;e(new k0(l,i,s))});else{const s=i+"",l=a.statusText||`HTTP ${i} error`;e(new k0(l,i,s))}}else e(new dF(nj(n),n))}),mF=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return r?(hF(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function pF(n,e,t,r,i,a){return ke(this,void 0,void 0,function*(){return new Promise((s,l)=>{n(t,mF(e,r,i,a)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>s(u)).catch(u=>fF(u,l,r))})})}function Vr(n,e,t,r,i){return ke(this,void 0,void 0,function*(){return pF(n,"POST",e,r,i,t)})}class gF{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sA),t),this.fetch=oA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ke(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}getIndex(e,t){return ke(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}})}listIndexes(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return ke(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}})}}class vF{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sA),t),this.fetch=oA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ke(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}getVectors(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}listVectors(e){return ke(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Vr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}queryVectors(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}deleteVectors(e){return ke(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}}class yF{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sA),t),this.fetch=oA(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}getBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}listBuckets(){return ke(this,arguments,void 0,function*(e={}){try{return{data:yield Vr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:(yield Vr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hr(t))return{data:null,error:t};throw t}})}}class bF extends yF{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new wF(this.url,this.headers,e,this.fetch)}}class wF extends gF{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ke(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ke(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ke(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ke(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new xF(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class xF extends vF{constructor(e,t,r,i,a){super(e,t,a),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ke(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ke(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ke(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ke(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ke(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class _F extends cF{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new lF(this.url,this.headers,e,this.fetch)}get vectors(){return new bF(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new uF(this.url+"/iceberg",this.headers,this.fetch)}}const SF="2.78.0";let Td="";typeof Deno<"u"?Td="deno":typeof document<"u"?Td="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Td="react-native":Td="node";const AF={"X-Client-Info":`supabase-js-${Td}/${SF}`},EF={headers:AF},TF={schema:"public"},OF={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CF={},jF=n=>{let e;return n?e=n:typeof fetch>"u"?e=U3:e=fetch,(...t)=>e(...t)},NF=()=>typeof Headers>"u"?q3:Headers,MF=(n,e,t)=>{const r=jF(t),i=NF();return async(a,s)=>{var l;const u=(l=await e())!==null&&l!==void 0?l:n;let d=new i(s?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),r(a,Object.assign(Object.assign({},s),{headers:d}))}};function PF(n){return n.endsWith("/")?n:n+"/"}function RF(n,e){var t,r;const{db:i,auth:a,realtime:s,global:l}=n,{db:u,auth:d,realtime:f,global:m}=e,g={db:Object.assign(Object.assign({},u),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(r=l?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}function kF(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(PF(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const nL="2.78.0",oc=30*1e3,c_=3,D0=c_*oc,DF="http://localhost:9999",LF="supabase.auth.token",IF={"X-Client-Info":`gotrue-js/${nL}`},u_="X-Supabase-Api-Version",rL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BF=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$F=600*1e3;class Vd extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Ie(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class FF extends Vd{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function UF(n){return Ie(n)&&n.name==="AuthApiError"}class Po extends Vd{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Vs extends Vd{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class ji extends Vs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function qF(n){return Ie(n)&&n.name==="AuthSessionMissingError"}class Xl extends Vs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cm extends Vs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class jm extends Vs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zF(n){return Ie(n)&&n.name==="AuthImplicitGrantRedirectError"}class rj extends Vs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class d_ extends Vs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function L0(n){return Ie(n)&&n.name==="AuthRetryableFetchError"}class ij extends Vs{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class h_ extends Vs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),aj=` 	
\r=`.split(""),HF=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<aj.length;e+=1)n[aj[e].charCodeAt(0)]=-2;for(let e=0;e<lp.length;e+=1)n[lp[e].charCodeAt(0)]=e;return n})();function sj(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(lp[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(lp[r]),e.queuedBits-=6}}function iL(n,e,t){const r=HF[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function oj(n){const e=[],t=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{WF(s,r,t)};for(let s=0;s<n.length;s+=1)iL(n.charCodeAt(s),i,a);return e.join("")}function VF(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function GF(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}VF(r,e)}}function WF(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function vc(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)iL(n.charCodeAt(i),t,r);return new Uint8Array(e)}function YF(n){const e=[];return GF(n,t=>e.push(t)),new Uint8Array(e)}function Lo(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>sj(i,t,r)),sj(null,t,r),e.join("")}function XF(n){return Math.round(Date.now()/1e3)+n}function KF(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const lr=()=>typeof window<"u"&&typeof document<"u",So={tested:!1,writable:!1},aL=()=>{if(!lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(So.tested)return So.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),So.tested=!0,So.writable=!0}catch{So.tested=!0,So.writable=!1}return So.writable};function ZF(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const sL=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>al(async()=>{const{default:r}=await Promise.resolve().then(()=>sl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},JF=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",lc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ao=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ms=async(n,e)=>{await n.removeItem(e)};let oL=class lL{constructor(){this.promise=new lL.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};oL.promiseConstructor=Promise;function I0(n){const e=n.split(".");if(e.length!==3)throw new h_("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!BF.test(e[r]))throw new h_("JWT not in base64url format");return{header:JSON.parse(oj(e[0])),payload:JSON.parse(oj(e[1])),signature:vc(e[2]),raw:{header:e[0],payload:e[1]}}}async function QF(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function eU(n,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await n(a);if(!e(a,null,s)){r(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function tU(n){return("0"+n.toString(16)).substr(-2)}function nU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,tU).join("")}async function rU(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function iU(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await rU(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kl(n,e,t=!1){const r=nU();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await lc(n,`${e}-code-verifier`,i);const a=await iU(r);return[a,r===a?"plain":"s256"]}const aU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sU(n){const e=n.headers.get(u_);if(!e||!e.match(aU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function oU(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function lU(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zl(n){if(!cU.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function B0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uU(n,e){return new Proxy(n,{get:(t,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,i)}})}function lj(n){return JSON.parse(JSON.stringify(n))}const Oo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),dU=[502,503,504];async function cj(n){var e;if(!JF(n))throw new d_(Oo(n),0);if(dU.includes(n.status))throw new d_(Oo(n),n.status);let t;try{t=await n.json()}catch(a){throw new Po(Oo(a),a)}let r;const i=sU(n);if(i&&i.getTime()>=rL["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new ij(Oo(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ji}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new ij(Oo(t),n.status,t.weak_password.reasons);throw new FF(Oo(t),n.status||500,r)}const hU=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Ve(n,e,t,r){var i;const a=Object.assign({},r?.headers);a[u_]||(a[u_]=rL["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",u=await fU(n,e,t+l,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}}async function fU(n,e,t,r,i,a){const s=hU(e,r,i,a);let l;try{l=await n(t,Object.assign({},s))}catch(u){throw console.error(u),new d_(Oo(u),0)}if(l.ok||await cj(l),r?.noResolveJson)return l;try{return await l.json()}catch(u){await cj(u)}}function Ni(n){var e;let t=null;gU(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=XF(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function uj(n){const e=Ni(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ds(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function mU(n){return{data:n,error:null}}function pU(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a}=n,s=iu(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a},u=Object.assign({},s);return{data:{properties:l,user:u},error:null}}function dj(n){return n}function gU(n){return n.access_token&&n.refresh_token&&n.expires_in}const $0=["global","local","others"];class vU{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=sL(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=$0[0]){if($0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$0.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ds})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=iu(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:pU,redirectTo:t?.redirectTo})}catch(t){if(Ie(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ds})}catch(t){if(Ie(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,a,s,l,u;try{const d={nextPage:null,lastPage:0,total:0},f=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:dj});if(f.error)throw f.error;const m=await f.json(),g=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,y=(u=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);d[`${w}Page`]=b}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Ie(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Zl(e);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ds})}catch(t){if(Ie(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Zl(e);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ds})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Zl(e);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ds})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Zl(e.userId);try{const{data:t,error:r}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Zl(e.userId),Zl(e.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,a,s,l,u;try{const d={nextPage:null,lastPage:0,total:0},f=await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:dj});if(f.error)throw f.error;const m=await f.json(),g=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,y=(u=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);d[`${w}Page`]=b}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(Ie(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}}function hj(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Jl={debug:!!(globalThis&&aL()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yU extends cL{}async function bU(n,e,t){Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new yU(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Jl.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function wU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function uL(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function xU(n){return parseInt(n,16)}function _U(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function SU(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:l,requestId:u,resources:d,scheme:f,uri:m,version:g}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const y=uL(n.address),x=f?`${f}://${r}`:r,b=n.statement?`${n.statement}
`:"",w=`${x} wants you to sign in with your Ethereum account:
${y}

${b}`;let S=`URI: ${m}
Version: ${g}
Chain ID: ${t}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(S+=`
Expiration Time: ${i.toISOString()}`),l&&(S+=`
Not Before: ${l.toISOString()}`),u&&(S+=`
Request ID: ${u}`),d){let O=`
Resources:`;for(const T of d){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);O+=`
- ${T}`}S+=O}return`${w}
${S}`}class xn extends Error{constructor({message:e,code:t,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class cp extends xn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function AU({error:n,options:e}){var t,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new xn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new xn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new xn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new xn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new xn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new xn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new xn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(dL(s)){if(a.rp.id!==s)return new xn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new xn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new xn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new xn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new xn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function EU({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new xn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(dL(r)){if(t.rpId!==r)return new xn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new xn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new xn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new xn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class TU{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const OU=new TU;function CU(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=iu(n,["challenge","user","excludeCredentials"]),a=vc(e).buffer,s=Object.assign(Object.assign({},t),{id:vc(t.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:s});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:vc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function jU(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=iu(n,["challenge","allowCredentials"]),i=vc(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let s=0;s<t.length;s++){const l=t[s];a.allowCredentials[s]=Object.assign(Object.assign({},l),{id:vc(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function NU(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Lo(new Uint8Array(n.response.attestationObject)),clientDataJSON:Lo(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function MU(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Lo(new Uint8Array(i.authenticatorData)),clientDataJSON:Lo(new Uint8Array(i.clientDataJSON)),signature:Lo(new Uint8Array(i.signature)),userHandle:i.userHandle?Lo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dL(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function fj(){var n,e;return!!(lr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function PU(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cp("Browser returned unexpected credential type",e)}:{data:null,error:new cp("Empty credential response",e)}}catch(e){return{data:null,error:AU({error:e,options:n})}}}async function RU(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cp("Browser returned unexpected credential type",e)}:{data:null,error:new cp("Empty credential response",e)}}catch(e){return{data:null,error:EU({error:e,options:n})}}}const kU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},DU={userVerification:"preferred",hints:["security-key"]};function up(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))r[a]=s;else if(t(s))r[a]=s;else if(e(s)){const l=r[a];e(l)?r[a]=up(l,s):r[a]=up(s)}else r[a]=s}return r}function LU(n,e){return up(kU,n,e||{})}function IU(n,e){return up(DU,n,e||{})}class BU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},a){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!s)return{data:null,error:l};const u=i??OU.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:d}=s.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(s.webauthn.type){case"create":{const d=LU(s.webauthn.credential_options.publicKey,a?.create),{data:f,error:m}=await PU({publicKey:d,signal:u});return f?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}case"request":{const d=IU(s.webauthn.credential_options.publicKey,a?.request),{data:f,error:m}=await RU(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:d,signal:u}));return f?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:m}}}}catch(s){return Ie(s)?{data:null,error:s}:{data:null,error:new Po("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!t)return{data:null,error:new Vd("rpId is required for WebAuthn authentication")};try{if(!fj())return{data:null,error:new Po("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:a});if(!s)return{data:null,error:l};const{webauthn:u}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:u.type,rpId:t,rpOrigins:r,credential_response:u.credential_response}})}catch(s){return Ie(s)?{data:null,error:s}:{data:null,error:new Po("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!t)return{data:null,error:new Vd("rpId is required for WebAuthn registration")};try{if(!fj())return{data:null,error:new Po("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(f=>{var m;return(m=f.data)===null||m===void 0?void 0:m.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f?.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:a});return u?this._verify({factorId:s.id,challengeId:u.challengeId,webauthn:{rpId:t,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(s){return Ie(s)?{data:null,error:s}:{data:null,error:new Po("Unexpected error in register",s)}}}}wU();const $U={url:DF,storageKey:LF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mj(n,e,t){return await t()}const Ql={};class Gd{get jwks(){var e,t;return(t=(e=Ql[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ql[this.storageKey]=Object.assign(Object.assign({},Ql[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ql[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ql[this.storageKey]=Object.assign(Object.assign({},Ql[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gd.nextInstanceID,Gd.nextInstanceID+=1,this.instanceID>0&&lr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},$U),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new vU({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=sL(i.fetch),this.lock=i.lock||mj,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:lr()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=bU:this.lock=mj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new BU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:aL()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hj(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=hj(this.memoryStorage)),lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nL}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=ZF(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),lr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),zF(a)){const u=(e=a.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ie(t)?{error:t}:{error:new Po("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ni}),{data:s,error:l}=a;if(l||!s)return{data:{user:null,session:null},error:l};const u=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,i;try{let a;if("email"in e){const{email:f,password:m,options:g}=e;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await Kl(this.storage,this.storageKey)),a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:f,password:m,data:(t=g?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:y,code_challenge_method:x},xform:Ni})}else if("phone"in e){const{phone:f,password:m,options:g}=e;a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(r=g?.data)!==null&&r!==void 0?r:{},channel:(i=g?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ni})}else throw new Cm("You must provide either an email or phone number and a password");const{data:s,error:l}=a;if(l||!s)return{data:{user:null,session:null},error:l};const u=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:s,options:l}=e;t=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:uj})}else if("phone"in e){const{phone:a,password:s,options:l}=e;t=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:uj})}else throw new Cm("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Xl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,a,s,l,u,d,f,m,g;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:b,wallet:w,statement:S,options:O}=e;let T;if(lr())if(typeof w=="object")T=w;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")T=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=w}const M=new URL((t=O?.url)!==null&&t!==void 0?t:window.location.href),N=await T.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=uL(N[0]);let C=(r=O?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const k=await T.request({method:"eth_chainId"});C=xU(k)}const R={domain:M.host,address:j,statement:S,uri:M.href,version:"1",chainId:C,nonce:(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=O?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=O?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=O?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(f=O?.signInWithEthereum)===null||f===void 0?void 0:f.resources};y=SU(R),x=await T.request({method:"personal_sign",params:[_U(y),j]})}try{const{data:b,error:w}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:x},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ni});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Xl}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if(Ie(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(e){var t,r,i,a,s,l,u,d,f,m,g,y;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:w,wallet:S,statement:O,options:T}=e;let M;if(lr())if(typeof S=="object")M=S;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))M=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const N=new URL((t=T?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in M&&M.signIn){const j=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),O?{statement:O}:null));let C;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")C=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)C=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)x=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),b=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${N.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(r=T?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=T?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((s=T?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((d=T?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((m=(f=T?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...T.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const j=await M.signMessage(new TextEncoder().encode(x),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=j}}try{const{data:w,error:S}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Lo(b)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ni});if(S)throw S;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Xl}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:S})}catch(w){if(Ie(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await Ao(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:a,error:s}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ni});if(await Ms(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Xl}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(Ie(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:a,nonce:s}=e,l=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Ni}),{data:u,error:d}=l;return d?{data:{user:null,session:null},error:d}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Xl}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:d})}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,a,s;try{if("email"in e){const{email:l,options:u}=e;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Kl(this.storage,this.storageKey));const{error:m}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=u?.data)!==null&&t!==void 0?t:{},create_user:(r=u?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:u}=e,{data:d,error:f}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(a=u?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(s=u?.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:f}}throw new Cm("You must provide either an email or phone number.")}catch(l){if(Ie(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:l}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Ni});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const u=s.session,d=s.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let a=null,s=null;return this.flowType==="pkce"&&([a,s]=await Kl(this.storage,this.storageKey)),await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:mU})}catch(a){if(Ie(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ji;const{error:i}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:s}=await Ve(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:s,error:l}=await Ve(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:s?.message_id},error:l}}throw new Cm("You must provide either an email or phone number and a type")}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ao(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<D0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await Ao(this.userStorage,this.storageKey+"-user");s?.user?e.user=s.user:e.user=B0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};e.user=uU(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ds}):await this._useSession(async t=>{var r,i,a;const{data:s,error:l}=t;if(l)throw l;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ji}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ds})})}catch(t){if(Ie(t))return qF(t)&&(await this._removeSession(),await Ms(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new ji;const s=i.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await Kl(this.storage,this.storageKey));const{data:d,error:f}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:s.access_token,xform:Ds});if(f)throw f;return s.user=d.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ji;const t=Date.now()/1e3;let r=t,i=!0,a=null;const{payload:s}=I0(e.access_token);if(s.exp&&(r=s.exp,i=r<=t),i){const{data:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Ie(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:l}=t;if(l)throw l;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ji;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ie(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lr())throw new jm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new jm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new rj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jm("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new rj("No code detected.");const{data:O,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:l,expires_at:u,token_type:d}=e;if(!a||!l||!s||!d)throw new jm("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(l);let g=f+m;u&&(g=parseInt(u));const y=g-f;y*1e3<=oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const x=g-m;f-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,g,f):f-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,g,f);const{data:b,error:w}=await this._getUser(a);if(w)throw w;const S={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:g,refresh_token:s,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ao(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{error:a};const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:l}=await this.admin.signOut(s,e);if(l&&!(UF(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ms(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=KF(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:a},error:s}=t;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Kl(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Ie(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async a=>{var s,l,u,d,f;const{data:m,error:g}=a;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",y,{headers:this.headers,jwt:(f=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return lr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(Ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:a}}=t;if(i)throw i;const{options:s,provider:l,token:u,access_token:d,nonce:f}=e,m=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:u,access_token:d,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Ni}),{data:g,error:y}=m;return y?{data:{user:null,session:null},error:y}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Xl}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),{data:g,error:y})}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:s}=t;if(s)throw s;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await eU(async i=>(i>0&&await QF(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ni})),(i,a)=>{const s=200*Math.pow(2,i);return a&&L0(a)&&Date.now()+s-r<oc})}catch(r){if(this._debug(t,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),lr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ao(this.storage,this.storageKey);if(i&&this.userStorage){let s=await Ao(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await lc(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s?.user)!==null&&e!==void 0?e:B0()}else if(i&&!i.user&&!i.user){const s=await Ao(this.storage,this.storageKey+"-user");s&&s?.user?(i.user=s.user,await Ms(this.storage,this.storageKey+"-user"),await lc(this.storage,this.storageKey,i)):i.user=B0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<D0;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${D0}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),L0(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(i.access_token);!l&&s?.user?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ji;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new oL;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new ji;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),Ie(a)){const s={data:null,error:a};return L0(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(u){a.push(u)}});if(await Promise.all(s),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await lc(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const a=lj(i);await lc(this.storage,this.storageKey,a)}else{const i=lj(t);await lc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ms(this.storage,this.storageKey),await Ms(this.storage,this.storageKey+"-code-verifier"),await Ms(this.storage,this.storageKey+"-user"),this.userStorage&&await Ms(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),oc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${oc}ms, refresh threshold is ${c_} ticks`),i<=c_&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await Kl(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(l.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await Ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:s}=t;if(s)return{data:null,error:s};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:d}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?NU(e.webauthn.credential_response):MU(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:u}=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(t){if(Ie(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const s=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:CU(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:jU(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ie(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=I0(r.access_token);let s=null;a.aal&&(s=a.aal);let l=s;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(f=>f.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;return i?{data:null,error:i}:r?await Ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new ji}})}catch(t){if(Ie(t))return{data:null,error:t};throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return{data:null,error:a};if(!i)return{data:null,error:new ji};const s=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&lr()&&!t?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return{data:null,error:a};if(!i)return{data:null,error:new ji};const s=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&lr()&&!t?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s})}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+$F>i)return r;const{data:a,error:s}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:y,error:x}=await this.getSession();if(x||!y.session)return{data:null,error:x};r=y.session.access_token}const{header:i,payload:a,signature:s,raw:{header:l,payload:u}}=I0(r);t?.allowExpired||oU(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:a,header:i,signature:s},error:null}}const f=lU(i.alg),m=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,m,s,YF(`${l}.${u}`)))throw new h_("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}Gd.nextInstanceID=0;const FU=Gd;class UU extends FU{constructor(e){super(e)}}class qU{constructor(e,t,r){var i,a,s;this.supabaseUrl=e,this.supabaseKey=t;const l=kF(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:TF,realtime:CF,auth:Object.assign(Object.assign({},OF),{storageKey:u}),global:EF},f=RF(r??{},d);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=MF(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new D8(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new _F(this.storageUrl.href,this.headers,this.fetch,r?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new T8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:s,flowType:l,lock:u,debug:d},f,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UU({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),f),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:a,flowType:l,lock:u,debug:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new J8(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zU=(n,e,t)=>new qU(n,e,t);function HU(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}HU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const VU="https://qbrpefuxlzgtrntxdtwk.supabase.co",GU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFicnBlZnV4bHpndHJudHhkdHdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMzA3NjcsImV4cCI6MjA3NzYwNjc2N30.FT9H2vu5p8moNYAlQdQ1AJ1t3q_eD-9vC42s0rDysS4",oe=zU(VU,GU),hL=E.createContext(void 0),F0=10,WU=({children:n})=>{const[e,t]=E.useState([]),[r,i]=E.useState(!0),[a,s]=E.useState(null),[l,u]=E.useState(!0),[d,f]=E.useState(0),m=E.useMemo(()=>e.filter(S=>!S.lue).length,[e]),g=async(S=0,O=!0)=>{try{const{data:T}=await oe.auth.getSession();if(!T?.session?.user?.id){t([]),i(!1);return}const M=S*F0,N=M+F0-1,{data:j,error:C,count:R}=await oe.from("notifications").select("*",{count:"exact"}).eq("user_id",T.session.user.id).order("created_at",{ascending:!1}).range(M,N);if(C)throw C;const k=(j||[]).map(F=>({...F,isNew:!1}));t(F=>O?k:[...F,...k]),u(R?M+F0<R:!1),s(null)}catch(T){s(T.message),O&&t([])}finally{i(!1)}},y=async()=>{if(r||!l)return;i(!0);const S=d+1;await g(S,!1),f(S)};E.useEffect(()=>{g(0,!0);const S=oe.channel("notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`user_id=eq.${oe.auth.getSession()?.then(O=>O.data.session?.user?.id)}`},async()=>{f(0),await g(0,!0)}).subscribe();return()=>{S.unsubscribe()}},[]);const w={notifications:e,unreadCount:m,markAsRead:async S=>{try{const{error:O}=await oe.from("notifications").update({lue:!0}).eq("id",S);if(O)throw O;t(T=>T.map(M=>M.id===S?{...M,lue:!0}:M))}catch(O){throw s(O.message),O}},markAllAsRead:async()=>{try{const{data:S}=await oe.auth.getSession();if(!S?.session?.user?.id)return;const{error:O}=await oe.from("notifications").update({lue:!0}).eq("user_id",S.session.user.id).eq("lue",!1);if(O)throw O;t(T=>T.map(M=>({...M,lue:!0})))}catch(S){throw s(S.message),S}},loading:r,error:a,hasMore:l,loadMore:y};return v.jsx(hL.Provider,{value:w,children:n})},fL=()=>{const n=E.useContext(hL);if(n===void 0)throw new Error("useNotifications must be used within a NotificationsProvider");return n},mL=E.createContext(void 0);function YU({children:n}){const[e,t]=E.useState(null),[r,i]=E.useState(null),[a,s]=E.useState(null),[l,u]=E.useState(!0);E.useEffect(()=>{oe.auth.getSession().then(({data:{session:y}})=>{t(y),i(y?.user??null),y?.user?d(y.user.id):u(!1)});const{data:{subscription:g}}=oe.auth.onAuthStateChange((y,x)=>{t(x),i(x?.user??null),x?.user?d(x.user.id):(s(null),u(!1))});return()=>{g.unsubscribe()}},[]);async function d(g){try{u(!0);const{data:y,error:x}=await oe.from("profiles").select(`
          *,
          universites:universite_id (nom),
          facultes:faculte_id (nom),
          niveaux:niveau_id (nom)
        `).eq("id",g).single();if(x)throw x;if(y){const b={...y,universite_nom:y.universites?.nom,faculte_nom:y.facultes?.nom,niveau_nom:y.niveaux?.nom};s(b)}}catch(y){console.error("Erreur lors de la rcupration du profil:",y)}finally{u(!1)}}const m={session:e,user:r,profile:a,loading:l,refreshProfile:async()=>{r&&await d(r.id)}};return v.jsx(mL.Provider,{value:m,children:n})}function Ui(){const n=E.useContext(mL);if(n===void 0)throw new Error("useUser doit tre utilis  l'intrieur d'un UserProvider");return n}var pL=p3();const XU=_t(pL),KU=ZS({__proto__:null,default:XU},[pL]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xt(){return Xt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xt.apply(this,arguments)}var _n;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(_n||(_n={}));const pj="popstate";function ZU(n){n===void 0&&(n={});function e(r,i){let{pathname:a,search:s,hash:l}=r.location;return Wd("",{pathname:a,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Yo(i)}return QU(e,t,null,n)}function tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Mc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JU(){return Math.random().toString(36).substr(2,8)}function gj(n,e){return{usr:n.state,key:n.key,idx:e}}function Wd(n,e,t,r){return t===void 0&&(t=null),Xt({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Gs(e):e,{state:t,key:e&&e.key||r||JU()})}function Yo(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function QU(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,l=_n.Pop,u=null,d=f();d==null&&(d=0,s.replaceState(Xt({},s.state,{idx:d}),""));function f(){return(s.state||{idx:null}).idx}function m(){l=_n.Pop;let w=f(),S=w==null?null:w-d;d=w,u&&u({action:l,location:b.location,delta:S})}function g(w,S){l=_n.Push;let O=Wd(b.location,w,S);d=f()+1;let T=gj(O,d),M=b.createHref(O);try{s.pushState(T,"",M)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(M)}a&&u&&u({action:l,location:b.location,delta:1})}function y(w,S){l=_n.Replace;let O=Wd(b.location,w,S);d=f();let T=gj(O,d),M=b.createHref(O);s.replaceState(T,"",M),a&&u&&u({action:l,location:b.location,delta:0})}function x(w){let S=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof w=="string"?w:Yo(w);return O=O.replace(/ $/,"%20"),tt(S,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,S)}let b={get action(){return l},get location(){return n(i,s)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(pj,m),u=w,()=>{i.removeEventListener(pj,m),u=null}},createHref(w){return e(i,w)},createURL:x,encodeLocation(w){let S=x(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:y,go(w){return s.go(w)}};return b}var Ot;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Ot||(Ot={}));const eq=new Set(["lazy","caseSensitive","path","id","index","children"]);function tq(n){return n.index===!0}function dp(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((i,a)=>{let s=[...t,String(a)],l=typeof i.id=="string"?i.id:s.join("-");if(tt(i.index!==!0||!i.children,"Cannot specify children on an index route"),tt(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),tq(i)){let u=Xt({},i,e(i),{id:l});return r[l]=u,u}else{let u=Xt({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=dp(i.children,e,s,r)),u}})}function Ro(n,e,t){return t===void 0&&(t="/"),np(n,e,t,!1)}function np(n,e,t,r){let i=typeof e=="string"?Gs(e):e,a=Ha(i.pathname||"/",t);if(a==null)return null;let s=gL(n);rq(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let d=mq(a);l=hq(s[u],d,r)}return l}function nq(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function gL(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,s,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};u.relativePath.startsWith("/")&&(tt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=$a([r,u.relativePath]),f=t.concat(u);a.children&&a.children.length>0&&(tt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),gL(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:uq(d,a.index),routesMeta:f})};return n.forEach((a,s)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,s);else for(let u of vL(a.path))i(a,s,u)}),e}function vL(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=vL(r.join("/")),l=[];return l.push(...s.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...s),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function rq(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:dq(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const iq=/^:[\w-]+$/,aq=3,sq=2,oq=1,lq=10,cq=-2,vj=n=>n==="*";function uq(n,e){let t=n.split("/"),r=t.length;return t.some(vj)&&(r+=cq),e&&(r+=sq),t.filter(i=>!vj(i)).reduce((i,a)=>i+(iq.test(a)?aq:a===""?oq:lq),r)}function dq(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function hq(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,i={},a="/",s=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=hp({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&t&&!r[r.length-1].route.index&&(m=hp({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(i,m.params),s.push({params:i,pathname:$a([a,m.pathname]),pathnameBase:vq($a([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=$a([a,m.pathnameBase]))}return s}function hp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=fq(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:y}=f;if(g==="*"){let b=l[m]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const x=l[m];return y&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:n}}function fq(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Mc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mq(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mc(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Ha(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function pq(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Gs(n):n;return{pathname:t?t.startsWith("/")?t:gq(t,e):e,search:yq(r),hash:bq(i)}}function gq(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function U0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _g(n,e){let t=yL(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Sg(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Gs(n):(i=Xt({},n),tt(!i.pathname||!i.pathname.includes("?"),U0("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),U0("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),U0("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,l;if(s==null)l=t;else{let m=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=pq(i,l),d=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const $a=n=>n.join("/").replace(/\/\/+/g,"/"),vq=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yq=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bq=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class fp{constructor(e,t,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=t||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Yd(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const bL=["post","put","patch","delete"],wq=new Set(bL),xq=["get",...bL],_q=new Set(xq),Sq=new Set([301,302,303,307,308]),Aq=new Set([307,308]),q0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Eq={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},lA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tq=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),wL="remix-router-transitions";function Oq(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;tt(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(n.mapRouteProperties)i=n.mapRouteProperties;else if(n.detectErrorBoundary){let Y=n.detectErrorBoundary;i=te=>({hasErrorBoundary:Y(te)})}else i=Tq;let a={},s=dp(n.routes,i,void 0,a),l,u=n.basename||"/",d=n.dataStrategy||Mq,f=n.patchRoutesOnNavigation,m=Xt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),g=null,y=new Set,x=null,b=null,w=null,S=n.hydrationData!=null,O=Ro(s,n.history.location,u),T=!1,M=null;if(O==null&&!f){let Y=_r(404,{pathname:n.history.location.pathname}),{matches:te,route:ae}=Cj(s);O=te,M={[ae.id]:Y}}O&&!n.hydrationData&&ro(O,s,n.history.location.pathname).active&&(O=null);let N;if(O)if(O.some(Y=>Y.route.lazy))N=!1;else if(!O.some(Y=>Y.route.loader))N=!0;else if(m.v7_partialHydration){let Y=n.hydrationData?n.hydrationData.loaderData:null,te=n.hydrationData?n.hydrationData.errors:null;if(te){let ae=O.findIndex(pe=>te[pe.route.id]!==void 0);N=O.slice(0,ae+1).every(pe=>!m_(pe.route,Y,te))}else N=O.every(ae=>!m_(ae.route,Y,te))}else N=n.hydrationData!=null;else if(N=!1,O=[],m.v7_partialHydration){let Y=ro(null,s,n.history.location.pathname);Y.active&&Y.matches&&(T=!0,O=Y.matches)}let j,C={historyAction:n.history.action,location:n.history.location,matches:O,initialized:N,navigation:q0,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||M,fetchers:new Map,blockers:new Map},R=_n.Pop,k=!1,F,D=!1,L=new Map,B=null,V=!1,H=!1,I=[],z=new Set,q=new Map,J=0,K=-1,U=new Map,G=new Set,ee=new Map,le=new Map,ge=new Set,ye=new Map,ve=new Map,Ae;function me(){if(g=n.history.listen(Y=>{let{action:te,location:ae,delta:pe}=Y;if(Ae){Ae(),Ae=void 0;return}Mc(ve.size===0||pe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let we=eo({currentLocation:C.location,nextLocation:ae,historyAction:te});if(we&&pe!=null){let Le=new Promise(He=>{Ae=He});n.history.go(pe*-1),pl(we,{state:"blocked",location:ae,proceed(){pl(we,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),Le.then(()=>n.history.go(pe))},reset(){let He=new Map(C.blockers);He.set(we,cd),ce({blockers:He})}});return}return Ue(te,ae)}),t){Vq(e,L);let Y=()=>Gq(e,L);e.addEventListener("pagehide",Y),B=()=>e.removeEventListener("pagehide",Y)}return C.initialized||Ue(_n.Pop,C.location,{initialHydration:!0}),j}function Se(){g&&g(),B&&B(),y.clear(),F&&F.abort(),C.fetchers.forEach((Y,te)=>ml(te)),C.blockers.forEach((Y,te)=>lf(te))}function De(Y){return y.add(Y),()=>y.delete(Y)}function ce(Y,te){te===void 0&&(te={}),C=Xt({},C,Y);let ae=[],pe=[];m.v7_fetcherPersist&&C.fetchers.forEach((we,Le)=>{we.state==="idle"&&(ge.has(Le)?pe.push(Le):ae.push(Le))}),ge.forEach(we=>{!C.fetchers.has(we)&&!q.has(we)&&pe.push(we)}),[...y].forEach(we=>we(C,{deletedFetchers:pe,viewTransitionOpts:te.viewTransitionOpts,flushSync:te.flushSync===!0})),m.v7_fetcherPersist?(ae.forEach(we=>C.fetchers.delete(we)),pe.forEach(we=>ml(we))):pe.forEach(we=>ge.delete(we))}function Me(Y,te,ae){var pe,we;let{flushSync:Le}=ae===void 0?{}:ae,He=C.actionData!=null&&C.navigation.formMethod!=null&&ki(C.navigation.formMethod)&&C.navigation.state==="loading"&&((pe=Y.state)==null?void 0:pe._isRedirect)!==!0,Ee;te.actionData?Object.keys(te.actionData).length>0?Ee=te.actionData:Ee=null:He?Ee=C.actionData:Ee=null;let _e=te.loaderData?Tj(C.loaderData,te.loaderData,te.matches||[],te.errors):C.loaderData,xe=C.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((ot,En)=>xe.set(En,cd)));let Pe=k===!0||C.navigation.formMethod!=null&&ki(C.navigation.formMethod)&&((we=Y.state)==null?void 0:we._isRedirect)!==!0;l&&(s=l,l=void 0),V||R===_n.Pop||(R===_n.Push?n.history.push(Y,Y.state):R===_n.Replace&&n.history.replace(Y,Y.state));let We;if(R===_n.Pop){let ot=L.get(C.location.pathname);ot&&ot.has(Y.pathname)?We={currentLocation:C.location,nextLocation:Y}:L.has(Y.pathname)&&(We={currentLocation:Y,nextLocation:C.location})}else if(D){let ot=L.get(C.location.pathname);ot?ot.add(Y.pathname):(ot=new Set([Y.pathname]),L.set(C.location.pathname,ot)),We={currentLocation:C.location,nextLocation:Y}}ce(Xt({},te,{actionData:Ee,loaderData:_e,historyAction:R,location:Y,initialized:!0,navigation:q0,revalidation:"idle",restoreScrollPosition:cf(Y,te.matches||C.matches),preventScrollReset:Pe,blockers:xe}),{viewTransitionOpts:We,flushSync:Le===!0}),R=_n.Pop,k=!1,D=!1,V=!1,H=!1,I=[]}async function Te(Y,te){if(typeof Y=="number"){n.history.go(Y);return}let ae=f_(C.location,C.matches,u,m.v7_prependBasename,Y,m.v7_relativeSplatPath,te?.fromRouteId,te?.relative),{path:pe,submission:we,error:Le}=yj(m.v7_normalizeFormMethod,!1,ae,te),He=C.location,Ee=Wd(C.location,pe,te&&te.state);Ee=Xt({},Ee,n.history.encodeLocation(Ee));let _e=te&&te.replace!=null?te.replace:void 0,xe=_n.Push;_e===!0?xe=_n.Replace:_e===!1||we!=null&&ki(we.formMethod)&&we.formAction===C.location.pathname+C.location.search&&(xe=_n.Replace);let Pe=te&&"preventScrollReset"in te?te.preventScrollReset===!0:void 0,We=(te&&te.flushSync)===!0,ot=eo({currentLocation:He,nextLocation:Ee,historyAction:xe});if(ot){pl(ot,{state:"blocked",location:Ee,proceed(){pl(ot,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),Te(Y,te)},reset(){let En=new Map(C.blockers);En.set(ot,cd),ce({blockers:En})}});return}return await Ue(xe,Ee,{submission:we,pendingError:Le,preventScrollReset:Pe,replace:te&&te.replace,enableViewTransition:te&&te.viewTransition,flushSync:We})}function Ge(){if(ar(),ce({revalidation:"loading"}),C.navigation.state!=="submitting"){if(C.navigation.state==="idle"){Ue(C.historyAction,C.location,{startUninterruptedRevalidation:!0});return}Ue(R||C.historyAction,C.navigation.location,{overrideNavigation:C.navigation,enableViewTransition:D===!0})}}async function Ue(Y,te,ae){F&&F.abort(),F=null,R=Y,V=(ae&&ae.startUninterruptedRevalidation)===!0,no(C.location,C.matches),k=(ae&&ae.preventScrollReset)===!0,D=(ae&&ae.enableViewTransition)===!0;let pe=l||s,we=ae&&ae.overrideNavigation,Le=ae!=null&&ae.initialHydration&&C.matches&&C.matches.length>0&&!T?C.matches:Ro(pe,te,u),He=(ae&&ae.flushSync)===!0;if(Le&&C.initialized&&!H&&Iq(C.location,te)&&!(ae&&ae.submission&&ki(ae.submission.formMethod))){Me(te,{matches:Le},{flushSync:He});return}let Ee=ro(Le,pe,te.pathname);if(Ee.active&&Ee.matches&&(Le=Ee.matches),!Le){let{error:St,notFoundMatches:nt,route:It}=is(te.pathname);Me(te,{matches:nt,loaderData:{},errors:{[It.id]:St}},{flushSync:He});return}F=new AbortController;let _e=ec(n.history,te,F.signal,ae&&ae.submission),xe;if(ae&&ae.pendingError)xe=[ko(Le).route.id,{type:Ot.error,error:ae.pendingError}];else if(ae&&ae.submission&&ki(ae.submission.formMethod)){let St=await Ft(_e,te,ae.submission,Le,Ee.active,{replace:ae.replace,flushSync:He});if(St.shortCircuited)return;if(St.pendingActionResult){let[nt,It]=St.pendingActionResult;if(qr(It)&&Yd(It.error)&&It.error.status===404){F=null,Me(te,{matches:St.matches,loaderData:{},errors:{[nt]:It.error}});return}}Le=St.matches||Le,xe=St.pendingActionResult,we=z0(te,ae.submission),He=!1,Ee.active=!1,_e=ec(n.history,_e.url,_e.signal)}let{shortCircuited:Pe,matches:We,loaderData:ot,errors:En}=await An(_e,te,Le,Ee.active,we,ae&&ae.submission,ae&&ae.fetcherSubmission,ae&&ae.replace,ae&&ae.initialHydration===!0,He,xe);Pe||(F=null,Me(te,Xt({matches:We||Le},Oj(xe),{loaderData:ot,errors:En})))}async function Ft(Y,te,ae,pe,we,Le){Le===void 0&&(Le={}),ar();let He=zq(te,ae);if(ce({navigation:He},{flushSync:Le.flushSync===!0}),we){let xe=await ss(pe,te.pathname,Y.signal);if(xe.type==="aborted")return{shortCircuited:!0};if(xe.type==="error"){let Pe=ko(xe.partialMatches).route.id;return{matches:xe.partialMatches,pendingActionResult:[Pe,{type:Ot.error,error:xe.error}]}}else if(xe.matches)pe=xe.matches;else{let{notFoundMatches:Pe,error:We,route:ot}=is(te.pathname);return{matches:Pe,pendingActionResult:[ot.id,{type:Ot.error,error:We}]}}}let Ee,_e=Od(pe,te);if(!_e.route.action&&!_e.route.lazy)Ee={type:Ot.error,error:_r(405,{method:Y.method,pathname:te.pathname,routeId:_e.route.id})};else if(Ee=(await Zr("action",C,Y,[_e],pe,null))[_e.route.id],Y.signal.aborted)return{shortCircuited:!0};if(Io(Ee)){let xe;return Le&&Le.replace!=null?xe=Le.replace:xe=Sj(Ee.response.headers.get("Location"),new URL(Y.url),u)===C.location.pathname+C.location.search,await Lt(Y,Ee,!0,{submission:ae,replace:xe}),{shortCircuited:!0}}if(Bs(Ee))throw _r(400,{type:"defer-action"});if(qr(Ee)){let xe=ko(pe,_e.route.id);return(Le&&Le.replace)!==!0&&(R=_n.Push),{matches:pe,pendingActionResult:[xe.route.id,Ee]}}return{matches:pe,pendingActionResult:[_e.route.id,Ee]}}async function An(Y,te,ae,pe,we,Le,He,Ee,_e,xe,Pe){let We=we||z0(te,Le),ot=Le||He||Nj(We),En=!V&&(!m.v7_partialHydration||!_e);if(pe){if(En){let Ut=Fn(Pe);ce(Xt({navigation:We},Ut!==void 0?{actionData:Ut}:{}),{flushSync:xe})}let mt=await ss(ae,te.pathname,Y.signal);if(mt.type==="aborted")return{shortCircuited:!0};if(mt.type==="error"){let Ut=ko(mt.partialMatches).route.id;return{matches:mt.partialMatches,loaderData:{},errors:{[Ut]:mt.error}}}else if(mt.matches)ae=mt.matches;else{let{error:Ut,notFoundMatches:ma,route:ao}=is(te.pathname);return{matches:ma,loaderData:{},errors:{[ao.id]:Ut}}}}let St=l||s,[nt,It]=wj(n.history,C,ae,ot,te,m.v7_partialHydration&&_e===!0,m.v7_skipActionErrorRevalidation,H,I,z,ge,ee,G,St,u,Pe);if(as(mt=>!(ae&&ae.some(Ut=>Ut.route.id===mt))||nt&&nt.some(Ut=>Ut.route.id===mt)),K=++J,nt.length===0&&It.length===0){let mt=_i();return Me(te,Xt({matches:ae,loaderData:{},errors:Pe&&qr(Pe[1])?{[Pe[0]]:Pe[1].error}:null},Oj(Pe),mt?{fetchers:new Map(C.fetchers)}:{}),{flushSync:xe}),{shortCircuited:!0}}if(En){let mt={};if(!pe){mt.navigation=We;let Ut=Fn(Pe);Ut!==void 0&&(mt.actionData=Ut)}It.length>0&&(mt.fetchers=Kr(It)),ce(mt,{flushSync:xe})}It.forEach(mt=>{hr(mt.key),mt.controller&&q.set(mt.key,mt.controller)});let jr=()=>It.forEach(mt=>hr(mt.key));F&&F.signal.addEventListener("abort",jr);let{loaderResults:Jr,fetcherResults:sr}=await Qs(C,ae,nt,It,Y);if(Y.signal.aborted)return{shortCircuited:!0};F&&F.signal.removeEventListener("abort",jr),It.forEach(mt=>q.delete(mt.key));let Un=Nm(Jr);if(Un)return await Lt(Y,Un.result,!0,{replace:Ee}),{shortCircuited:!0};if(Un=Nm(sr),Un)return G.add(Un.key),await Lt(Y,Un.result,!0,{replace:Ee}),{shortCircuited:!0};let{loaderData:nn,errors:os}=Ej(C,ae,Jr,Pe,It,sr,ye);ye.forEach((mt,Ut)=>{mt.subscribe(ma=>{(ma||mt.done)&&ye.delete(Ut)})}),m.v7_partialHydration&&_e&&C.errors&&(os=Xt({},C.errors,os));let Hi=_i(),Qr=Zn(K),Si=Hi||Qr||It.length>0;return Xt({matches:ae,loaderData:nn,errors:os},Si?{fetchers:new Map(C.fetchers)}:{})}function Fn(Y){if(Y&&!qr(Y[1]))return{[Y[0]]:Y[1].data};if(C.actionData)return Object.keys(C.actionData).length===0?null:C.actionData}function Kr(Y){return Y.forEach(te=>{let ae=C.fetchers.get(te.key),pe=ud(void 0,ae?ae.data:void 0);C.fetchers.set(te.key,pe)}),new Map(C.fetchers)}function Pn(Y,te,ae,pe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");hr(Y);let we=(pe&&pe.flushSync)===!0,Le=l||s,He=f_(C.location,C.matches,u,m.v7_prependBasename,ae,m.v7_relativeSplatPath,te,pe?.relative),Ee=Ro(Le,He,u),_e=ro(Ee,Le,He);if(_e.active&&_e.matches&&(Ee=_e.matches),!Ee){mn(Y,te,_r(404,{pathname:He}),{flushSync:we});return}let{path:xe,submission:Pe,error:We}=yj(m.v7_normalizeFormMethod,!0,He,pe);if(We){mn(Y,te,We,{flushSync:we});return}let ot=Od(Ee,xe),En=(pe&&pe.preventScrollReset)===!0;if(Pe&&ki(Pe.formMethod)){Cr(Y,te,xe,ot,Ee,_e.active,we,En,Pe);return}ee.set(Y,{routeId:te,path:xe}),da(Y,te,xe,ot,Ee,_e.active,we,En,Pe)}async function Cr(Y,te,ae,pe,we,Le,He,Ee,_e){ar(),ee.delete(Y);function xe(qt){if(!qt.route.action&&!qt.route.lazy){let Ai=_r(405,{method:_e.formMethod,pathname:ae,routeId:te});return mn(Y,te,Ai,{flushSync:He}),!0}return!1}if(!Le&&xe(pe))return;let Pe=C.fetchers.get(Y);fn(Y,Hq(_e,Pe),{flushSync:He});let We=new AbortController,ot=ec(n.history,ae,We.signal,_e);if(Le){let qt=await ss(we,new URL(ot.url).pathname,ot.signal,Y);if(qt.type==="aborted")return;if(qt.type==="error"){mn(Y,te,qt.error,{flushSync:He});return}else if(qt.matches){if(we=qt.matches,pe=Od(we,ae),xe(pe))return}else{mn(Y,te,_r(404,{pathname:ae}),{flushSync:He});return}}q.set(Y,We);let En=J,nt=(await Zr("action",C,ot,[pe],we,Y))[pe.route.id];if(ot.signal.aborted){q.get(Y)===We&&q.delete(Y);return}if(m.v7_fetcherPersist&&ge.has(Y)){if(Io(nt)||qr(nt)){fn(Y,Rs(void 0));return}}else{if(Io(nt))if(q.delete(Y),K>En){fn(Y,Rs(void 0));return}else return G.add(Y),fn(Y,ud(_e)),Lt(ot,nt,!1,{fetcherSubmission:_e,preventScrollReset:Ee});if(qr(nt)){mn(Y,te,nt.error);return}}if(Bs(nt))throw _r(400,{type:"defer-action"});let It=C.navigation.location||C.location,jr=ec(n.history,It,We.signal),Jr=l||s,sr=C.navigation.state!=="idle"?Ro(Jr,C.navigation.location,u):C.matches;tt(sr,"Didn't find any matches after fetcher action");let Un=++J;U.set(Y,Un);let nn=ud(_e,nt.data);C.fetchers.set(Y,nn);let[os,Hi]=wj(n.history,C,sr,_e,It,!1,m.v7_skipActionErrorRevalidation,H,I,z,ge,ee,G,Jr,u,[pe.route.id,nt]);Hi.filter(qt=>qt.key!==Y).forEach(qt=>{let Ai=qt.key,ei=C.fetchers.get(Ai),fr=ud(void 0,ei?ei.data:void 0);C.fetchers.set(Ai,fr),hr(Ai),qt.controller&&q.set(Ai,qt.controller)}),ce({fetchers:new Map(C.fetchers)});let Qr=()=>Hi.forEach(qt=>hr(qt.key));We.signal.addEventListener("abort",Qr);let{loaderResults:Si,fetcherResults:mt}=await Qs(C,sr,os,Hi,jr);if(We.signal.aborted)return;We.signal.removeEventListener("abort",Qr),U.delete(Y),q.delete(Y),Hi.forEach(qt=>q.delete(qt.key));let Ut=Nm(Si);if(Ut)return Lt(jr,Ut.result,!1,{preventScrollReset:Ee});if(Ut=Nm(mt),Ut)return G.add(Ut.key),Lt(jr,Ut.result,!1,{preventScrollReset:Ee});let{loaderData:ma,errors:ao}=Ej(C,sr,Si,void 0,Hi,mt,ye);if(C.fetchers.has(Y)){let qt=Rs(nt.data);C.fetchers.set(Y,qt)}Zn(Un),C.navigation.state==="loading"&&Un>K?(tt(R,"Expected pending action"),F&&F.abort(),Me(C.navigation.location,{matches:sr,loaderData:ma,errors:ao,fetchers:new Map(C.fetchers)})):(ce({errors:ao,loaderData:Tj(C.loaderData,ma,sr,ao),fetchers:new Map(C.fetchers)}),H=!1)}async function da(Y,te,ae,pe,we,Le,He,Ee,_e){let xe=C.fetchers.get(Y);fn(Y,ud(_e,xe?xe.data:void 0),{flushSync:He});let Pe=new AbortController,We=ec(n.history,ae,Pe.signal);if(Le){let nt=await ss(we,new URL(We.url).pathname,We.signal,Y);if(nt.type==="aborted")return;if(nt.type==="error"){mn(Y,te,nt.error,{flushSync:He});return}else if(nt.matches)we=nt.matches,pe=Od(we,ae);else{mn(Y,te,_r(404,{pathname:ae}),{flushSync:He});return}}q.set(Y,Pe);let ot=J,St=(await Zr("loader",C,We,[pe],we,Y))[pe.route.id];if(Bs(St)&&(St=await cA(St,We.signal,!0)||St),q.get(Y)===Pe&&q.delete(Y),!We.signal.aborted){if(ge.has(Y)){fn(Y,Rs(void 0));return}if(Io(St))if(K>ot){fn(Y,Rs(void 0));return}else{G.add(Y),await Lt(We,St,!1,{preventScrollReset:Ee});return}if(qr(St)){mn(Y,te,St.error);return}tt(!Bs(St),"Unhandled fetcher deferred data"),fn(Y,Rs(St.data))}}async function Lt(Y,te,ae,pe){let{submission:we,fetcherSubmission:Le,preventScrollReset:He,replace:Ee}=pe===void 0?{}:pe;te.response.headers.has("X-Remix-Revalidate")&&(H=!0);let _e=te.response.headers.get("Location");tt(_e,"Expected a Location header on the redirect Response"),_e=Sj(_e,new URL(Y.url),u);let xe=Wd(C.location,_e,{_isRedirect:!0});if(t){let nt=!1;if(te.response.headers.has("X-Remix-Reload-Document"))nt=!0;else if(lA.test(_e)){const It=n.history.createURL(_e);nt=It.origin!==e.location.origin||Ha(It.pathname,u)==null}if(nt){Ee?e.location.replace(_e):e.location.assign(_e);return}}F=null;let Pe=Ee===!0||te.response.headers.has("X-Remix-Replace")?_n.Replace:_n.Push,{formMethod:We,formAction:ot,formEncType:En}=C.navigation;!we&&!Le&&We&&ot&&En&&(we=Nj(C.navigation));let St=we||Le;if(Aq.has(te.response.status)&&St&&ki(St.formMethod))await Ue(Pe,xe,{submission:Xt({},St,{formAction:_e}),preventScrollReset:He||k,enableViewTransition:ae?D:void 0});else{let nt=z0(xe,we);await Ue(Pe,xe,{overrideNavigation:nt,fetcherSubmission:Le,preventScrollReset:He||k,enableViewTransition:ae?D:void 0})}}async function Zr(Y,te,ae,pe,we,Le){let He,Ee={};try{He=await Pq(d,Y,te,ae,pe,we,Le,a,i)}catch(_e){return pe.forEach(xe=>{Ee[xe.route.id]={type:Ot.error,error:_e}}),Ee}for(let[_e,xe]of Object.entries(He))if(Bq(xe)){let Pe=xe.result;Ee[_e]={type:Ot.redirect,response:Dq(Pe,ae,_e,we,u,m.v7_relativeSplatPath)}}else Ee[_e]=await kq(xe);return Ee}async function Qs(Y,te,ae,pe,we){let Le=Y.matches,He=Zr("loader",Y,we,ae,te,null),Ee=Promise.all(pe.map(async Pe=>{if(Pe.matches&&Pe.match&&Pe.controller){let ot=(await Zr("loader",Y,ec(n.history,Pe.path,Pe.controller.signal),[Pe.match],Pe.matches,Pe.key))[Pe.match.route.id];return{[Pe.key]:ot}}else return Promise.resolve({[Pe.key]:{type:Ot.error,error:_r(404,{pathname:Pe.path})}})})),_e=await He,xe=(await Ee).reduce((Pe,We)=>Object.assign(Pe,We),{});return await Promise.all([Uq(te,_e,we.signal,Le,Y.loaderData),qq(te,xe,pe)]),{loaderResults:_e,fetcherResults:xe}}function ar(){H=!0,I.push(...as()),ee.forEach((Y,te)=>{q.has(te)&&z.add(te),hr(te)})}function fn(Y,te,ae){ae===void 0&&(ae={}),C.fetchers.set(Y,te),ce({fetchers:new Map(C.fetchers)},{flushSync:(ae&&ae.flushSync)===!0})}function mn(Y,te,ae,pe){pe===void 0&&(pe={});let we=ko(C.matches,te);ml(Y),ce({errors:{[we.route.id]:ae},fetchers:new Map(C.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function ha(Y){return le.set(Y,(le.get(Y)||0)+1),ge.has(Y)&&ge.delete(Y),C.fetchers.get(Y)||Eq}function ml(Y){let te=C.fetchers.get(Y);q.has(Y)&&!(te&&te.state==="loading"&&U.has(Y))&&hr(Y),ee.delete(Y),U.delete(Y),G.delete(Y),m.v7_fetcherPersist&&ge.delete(Y),z.delete(Y),C.fetchers.delete(Y)}function mv(Y){let te=(le.get(Y)||0)-1;te<=0?(le.delete(Y),ge.add(Y),m.v7_fetcherPersist||ml(Y)):le.set(Y,te),ce({fetchers:new Map(C.fetchers)})}function hr(Y){let te=q.get(Y);te&&(te.abort(),q.delete(Y))}function Kn(Y){for(let te of Y){let ae=ha(te),pe=Rs(ae.data);C.fetchers.set(te,pe)}}function _i(){let Y=[],te=!1;for(let ae of G){let pe=C.fetchers.get(ae);tt(pe,"Expected fetcher: "+ae),pe.state==="loading"&&(G.delete(ae),Y.push(ae),te=!0)}return Kn(Y),te}function Zn(Y){let te=[];for(let[ae,pe]of U)if(pe<Y){let we=C.fetchers.get(ae);tt(we,"Expected fetcher: "+ae),we.state==="loading"&&(hr(ae),U.delete(ae),te.push(ae))}return Kn(te),te.length>0}function pv(Y,te){let ae=C.blockers.get(Y)||cd;return ve.get(Y)!==te&&ve.set(Y,te),ae}function lf(Y){C.blockers.delete(Y),ve.delete(Y)}function pl(Y,te){let ae=C.blockers.get(Y)||cd;tt(ae.state==="unblocked"&&te.state==="blocked"||ae.state==="blocked"&&te.state==="blocked"||ae.state==="blocked"&&te.state==="proceeding"||ae.state==="blocked"&&te.state==="unblocked"||ae.state==="proceeding"&&te.state==="unblocked","Invalid blocker state transition: "+ae.state+" -> "+te.state);let pe=new Map(C.blockers);pe.set(Y,te),ce({blockers:pe})}function eo(Y){let{currentLocation:te,nextLocation:ae,historyAction:pe}=Y;if(ve.size===0)return;ve.size>1&&Mc(!1,"A router only supports one blocker at a time");let we=Array.from(ve.entries()),[Le,He]=we[we.length-1],Ee=C.blockers.get(Le);if(!(Ee&&Ee.state==="proceeding")&&He({currentLocation:te,nextLocation:ae,historyAction:pe}))return Le}function is(Y){let te=_r(404,{pathname:Y}),ae=l||s,{matches:pe,route:we}=Cj(ae);return as(),{notFoundMatches:pe,route:we,error:te}}function as(Y){let te=[];return ye.forEach((ae,pe)=>{(!Y||Y(pe))&&(ae.cancel(),te.push(pe),ye.delete(pe))}),te}function fa(Y,te,ae){if(x=Y,w=te,b=ae||null,!S&&C.navigation===q0){S=!0;let pe=cf(C.location,C.matches);pe!=null&&ce({restoreScrollPosition:pe})}return()=>{x=null,w=null,b=null}}function to(Y,te){return b&&b(Y,te.map(pe=>nq(pe,C.loaderData)))||Y.key}function no(Y,te){if(x&&w){let ae=to(Y,te);x[ae]=w()}}function cf(Y,te){if(x){let ae=to(Y,te),pe=x[ae];if(typeof pe=="number")return pe}return null}function ro(Y,te,ae){if(f)if(Y){if(Object.keys(Y[0].params).length>0)return{active:!0,matches:np(te,ae,u,!0)}}else return{active:!0,matches:np(te,ae,u,!0)||[]};return{active:!1,matches:null}}async function ss(Y,te,ae,pe){if(!f)return{type:"success",matches:Y};let we=Y;for(;;){let Le=l==null,He=l||s,Ee=a;try{await f({signal:ae,path:te,matches:we,fetcherKey:pe,patch:(Pe,We)=>{ae.aborted||_j(Pe,We,He,Ee,i)}})}catch(Pe){return{type:"error",error:Pe,partialMatches:we}}finally{Le&&!ae.aborted&&(s=[...s])}if(ae.aborted)return{type:"aborted"};let _e=Ro(He,te,u);if(_e)return{type:"success",matches:_e};let xe=np(He,te,u,!0);if(!xe||we.length===xe.length&&we.every((Pe,We)=>Pe.route.id===xe[We].route.id))return{type:"success",matches:null};we=xe}}function io(Y){a={},l=dp(Y,i,void 0,a)}function gv(Y,te){let ae=l==null;_j(Y,te,l||s,a,i),ae&&(s=[...s],ce({}))}return j={get basename(){return u},get future(){return m},get state(){return C},get routes(){return s},get window(){return e},initialize:me,subscribe:De,enableScrollRestoration:fa,navigate:Te,fetch:Pn,revalidate:Ge,createHref:Y=>n.history.createHref(Y),encodeLocation:Y=>n.history.encodeLocation(Y),getFetcher:ha,deleteFetcher:mv,dispose:Se,getBlocker:pv,deleteBlocker:lf,patchRoutes:gv,_internalFetchControllers:q,_internalActiveDeferreds:ye,_internalSetRoutes:io},j}function Cq(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function f_(n,e,t,r,i,a,s,l){let u,d;if(s){u=[];for(let m of e)if(u.push(m),m.route.id===s){d=m;break}}else u=e,d=e[e.length-1];let f=Sg(i||".",_g(u,a),Ha(n.pathname,t)||n.pathname,l==="path");if(i==null&&(f.search=n.search,f.hash=n.hash),(i==null||i===""||i===".")&&d){let m=uA(f.search);if(d.route.index&&!m)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&m){let g=new URLSearchParams(f.search),y=g.getAll("index");g.delete("index"),y.filter(b=>b).forEach(b=>g.append("index",b));let x=g.toString();f.search=x?"?"+x:""}}return r&&t!=="/"&&(f.pathname=f.pathname==="/"?t:$a([t,f.pathname])),Yo(f)}function yj(n,e,t,r){if(!r||!Cq(r))return{path:t};if(r.formMethod&&!Fq(r.formMethod))return{path:t,error:_r(405,{method:r.formMethod})};let i=()=>({path:t,error:_r(400,{type:"invalid-body"})}),a=r.formMethod||"get",s=n?a.toUpperCase():a.toLowerCase(),l=SL(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ki(s))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,x)=>{let[b,w]=x;return""+y+b+"="+w+`
`},""):String(r.body);return{path:t,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!ki(s))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}tt(typeof FormData=="function","FormData is not available in this environment");let u,d;if(r.formData)u=p_(r.formData),d=r.formData;else if(r.body instanceof FormData)u=p_(r.body),d=r.body;else if(r.body instanceof URLSearchParams)u=r.body,d=Aj(u);else if(r.body==null)u=new URLSearchParams,d=new FormData;else try{u=new URLSearchParams(r.body),d=Aj(u)}catch{return i()}let f={formMethod:s,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(ki(f.formMethod))return{path:t,submission:f};let m=Gs(t);return e&&m.search&&uA(m.search)&&u.append("index",""),m.search="?"+u,{path:Yo(m),submission:f}}function bj(n,e,t){t===void 0&&(t=!1);let r=n.findIndex(i=>i.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function wj(n,e,t,r,i,a,s,l,u,d,f,m,g,y,x,b){let w=b?qr(b[1])?b[1].error:b[1].data:void 0,S=n.createURL(e.location),O=n.createURL(i),T=t;a&&e.errors?T=bj(t,Object.keys(e.errors)[0],!0):b&&qr(b[1])&&(T=bj(t,b[0]));let M=b?b[1].statusCode:void 0,N=s&&M&&M>=400,j=T.filter((R,k)=>{let{route:F}=R;if(F.lazy)return!0;if(F.loader==null)return!1;if(a)return m_(F,e.loaderData,e.errors);if(jq(e.loaderData,e.matches[k],R)||u.some(B=>B===R.route.id))return!0;let D=e.matches[k],L=R;return xj(R,Xt({currentUrl:S,currentParams:D.params,nextUrl:O,nextParams:L.params},r,{actionResult:w,actionStatus:M,defaultShouldRevalidate:N?!1:l||S.pathname+S.search===O.pathname+O.search||S.search!==O.search||xL(D,L)}))}),C=[];return m.forEach((R,k)=>{if(a||!t.some(V=>V.route.id===R.routeId)||f.has(k))return;let F=Ro(y,R.path,x);if(!F){C.push({key:k,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(k),L=Od(F,R.path),B=!1;g.has(k)?B=!1:d.has(k)?(d.delete(k),B=!0):D&&D.state!=="idle"&&D.data===void 0?B=l:B=xj(L,Xt({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:O,nextParams:t[t.length-1].params},r,{actionResult:w,actionStatus:M,defaultShouldRevalidate:N?!1:l})),B&&C.push({key:k,routeId:R.routeId,path:R.path,matches:F,match:L,controller:new AbortController})}),[j,C]}function m_(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function jq(n,e,t){let r=!e||t.route.id!==e.route.id,i=n[t.route.id]===void 0;return r||i}function xL(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function xj(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function _j(n,e,t,r,i){var a;let s;if(n){let d=r[n];tt(d,"No route found to patch children into: routeId = "+n),d.children||(d.children=[]),s=d.children}else s=t;let l=e.filter(d=>!s.some(f=>_L(d,f))),u=dp(l,i,[n||"_","patch",String(((a=s)==null?void 0:a.length)||"0")],r);s.push(...u)}function _L(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(a=>_L(t,a))}):!1}async function Nq(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let i=t[n.id];tt(i,"No route found in manifest");let a={};for(let s in r){let u=i[s]!==void 0&&s!=="hasErrorBoundary";Mc(!u,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!u&&!eq.has(s)&&(a[s]=r[s])}Object.assign(i,a),Object.assign(i,Xt({},e(i),{lazy:void 0}))}async function Mq(n){let{matches:e}=n,t=e.filter(i=>i.shouldLoad);return(await Promise.all(t.map(i=>i.resolve()))).reduce((i,a,s)=>Object.assign(i,{[t[s].route.id]:a}),{})}async function Pq(n,e,t,r,i,a,s,l,u,d){let f=a.map(y=>y.route.lazy?Nq(y.route,u,l):void 0),m=a.map((y,x)=>{let b=f[x],w=i.some(O=>O.route.id===y.route.id);return Xt({},y,{shouldLoad:w,resolve:async O=>(O&&r.method==="GET"&&(y.route.lazy||y.route.loader)&&(w=!0),w?Rq(e,r,y,b,O,d):Promise.resolve({type:Ot.data,result:void 0}))})}),g=await n({matches:m,request:r,params:a[0].params,fetcherKey:s,context:d});try{await Promise.all(f)}catch{}return g}async function Rq(n,e,t,r,i,a){let s,l,u=d=>{let f,m=new Promise((x,b)=>f=b);l=()=>f(),e.signal.addEventListener("abort",l);let g=x=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):d({request:e,params:t.params,context:a},...x!==void 0?[x]:[]),y=(async()=>{try{return{type:"data",result:await(i?i(b=>g(b)):g())}}catch(x){return{type:"error",result:x}}})();return Promise.race([y,m])};try{let d=t.route[n];if(r)if(d){let f,[m]=await Promise.all([u(d).catch(g=>{f=g}),r]);if(f!==void 0)throw f;s=m}else if(await r,d=t.route[n],d)s=await u(d);else if(n==="action"){let f=new URL(e.url),m=f.pathname+f.search;throw _r(405,{method:e.method,pathname:m,routeId:t.route.id})}else return{type:Ot.data,result:void 0};else if(d)s=await u(d);else{let f=new URL(e.url),m=f.pathname+f.search;throw _r(404,{pathname:m})}tt(s.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Ot.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return s}async function kq(n){let{result:e,type:t}=n;if(AL(e)){let m;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?m=null:m=await e.json():m=await e.text()}catch(g){return{type:Ot.error,error:g}}return t===Ot.error?{type:Ot.error,error:new fp(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:Ot.data,data:m,statusCode:e.status,headers:e.headers}}if(t===Ot.error){if(jj(e)){var r,i;if(e.data instanceof Error){var a,s;return{type:Ot.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Ot.error,error:new fp(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Yd(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Ot.error,error:e,statusCode:Yd(e)?e.status:void 0}}if($q(e)){var l,u;return{type:Ot.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(jj(e)){var d,f;return{type:Ot.data,data:e.data,statusCode:(d=e.init)==null?void 0:d.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:Ot.data,data:e}}function Dq(n,e,t,r,i,a){let s=n.headers.get("Location");if(tt(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!lA.test(s)){let l=r.slice(0,r.findIndex(u=>u.route.id===t)+1);s=f_(new URL(e.url),l,i,!0,s,a),n.headers.set("Location",s)}return n}function Sj(n,e,t){if(lA.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=Ha(i.pathname,t)!=null;if(i.origin===e.origin&&a)return i.pathname+i.search+i.hash}return n}function ec(n,e,t,r){let i=n.createURL(SL(e)).toString(),a={signal:t};if(r&&ki(r.formMethod)){let{formMethod:s,formEncType:l}=r;a.method=s.toUpperCase(),l==="application/json"?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(r.json)):l==="text/plain"?a.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?a.body=p_(r.formData):a.body=r.formData}return new Request(i,a)}function p_(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function Aj(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function Lq(n,e,t,r,i){let a={},s=null,l,u=!1,d={},f=t&&qr(t[1])?t[1].error:void 0;return n.forEach(m=>{if(!(m.route.id in e))return;let g=m.route.id,y=e[g];if(tt(!Io(y),"Cannot handle redirect results in processLoaderData"),qr(y)){let x=y.error;f!==void 0&&(x=f,f=void 0),s=s||{};{let b=ko(n,g);s[b.route.id]==null&&(s[b.route.id]=x)}a[g]=void 0,u||(u=!0,l=Yd(y.error)?y.error.status:500),y.headers&&(d[g]=y.headers)}else Bs(y)?(r.set(g,y.deferredData),a[g]=y.deferredData.data,y.statusCode!=null&&y.statusCode!==200&&!u&&(l=y.statusCode),y.headers&&(d[g]=y.headers)):(a[g]=y.data,y.statusCode&&y.statusCode!==200&&!u&&(l=y.statusCode),y.headers&&(d[g]=y.headers))}),f!==void 0&&t&&(s={[t[0]]:f},a[t[0]]=void 0),{loaderData:a,errors:s,statusCode:l||200,loaderHeaders:d}}function Ej(n,e,t,r,i,a,s){let{loaderData:l,errors:u}=Lq(e,t,r,s);return i.forEach(d=>{let{key:f,match:m,controller:g}=d,y=a[f];if(tt(y,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(qr(y)){let x=ko(n.matches,m?.route.id);u&&u[x.route.id]||(u=Xt({},u,{[x.route.id]:y.error})),n.fetchers.delete(f)}else if(Io(y))tt(!1,"Unhandled fetcher revalidation redirect");else if(Bs(y))tt(!1,"Unhandled fetcher deferred data");else{let x=Rs(y.data);n.fetchers.set(f,x)}}),{loaderData:l,errors:u}}function Tj(n,e,t,r){let i=Xt({},e);for(let a of t){let s=a.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):n[s]!==void 0&&a.route.loader&&(i[s]=n[s]),r&&r.hasOwnProperty(s))break}return i}function Oj(n){return n?qr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function ko(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function Cj(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function _r(n,e){let{pathname:t,routeId:r,method:i,type:a,message:s}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return n===400?(l="Bad Request",i&&t&&r?u="You made a "+i+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?u="defer() is not supported in actions":a==="invalid-body"&&(u="Unable to encode submission body")):n===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+t+'"'):n===404?(l="Not Found",u='No route matches URL "'+t+'"'):n===405&&(l="Method Not Allowed",i&&t&&r?u="You made a "+i.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new fp(n||500,l,new Error(u),!0)}function Nm(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(Io(i))return{key:r,result:i}}}function SL(n){let e=typeof n=="string"?Gs(n):n;return Yo(Xt({},e,{hash:""}))}function Iq(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function Bq(n){return AL(n.result)&&Sq.has(n.result.status)}function Bs(n){return n.type===Ot.deferred}function qr(n){return n.type===Ot.error}function Io(n){return(n&&n.type)===Ot.redirect}function jj(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function $q(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function AL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function Fq(n){return _q.has(n.toLowerCase())}function ki(n){return wq.has(n.toLowerCase())}async function Uq(n,e,t,r,i){let a=Object.entries(e);for(let s=0;s<a.length;s++){let[l,u]=a[s],d=n.find(g=>g?.route.id===l);if(!d)continue;let f=r.find(g=>g.route.id===d.route.id),m=f!=null&&!xL(f,d)&&(i&&i[d.route.id])!==void 0;Bs(u)&&m&&await cA(u,t,!1).then(g=>{g&&(e[l]=g)})}}async function qq(n,e,t){for(let r=0;r<t.length;r++){let{key:i,routeId:a,controller:s}=t[r],l=e[i];n.find(d=>d?.route.id===a)&&Bs(l)&&(tt(s,"Expected an AbortController for revalidating fetcher deferred result"),await cA(l,s.signal,!0).then(d=>{d&&(e[i]=d)}))}}async function cA(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Ot.data,data:n.deferredData.unwrappedData}}catch(i){return{type:Ot.error,error:i}}return{type:Ot.data,data:n.deferredData.data}}}function uA(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Od(n,e){let t=typeof e=="string"?Gs(e).search:e.search;if(n[n.length-1].route.index&&uA(t||""))return n[n.length-1];let r=yL(n);return r[r.length-1]}function Nj(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:a,json:s}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:s,text:void 0}}}function z0(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function zq(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ud(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Hq(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Rs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Vq(n,e){try{let t=n.sessionStorage.getItem(wL);if(t){let r=JSON.parse(t);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function Gq(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(wL,JSON.stringify(t))}catch(r){Mc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mp.apply(this,arguments)}const Fh=E.createContext(null),dA=E.createContext(null),Ja=E.createContext(null),hA=E.createContext(null),ca=E.createContext({outlet:null,matches:[],isDataRoute:!1}),EL=E.createContext(null);function Wq(n,e){let{relative:t}=e===void 0?{}:e;su()||tt(!1);let{basename:r,navigator:i}=E.useContext(Ja),{hash:a,pathname:s,search:l}=Ag(n,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:$a([r,s])),i.createHref({pathname:u,search:l,hash:a})}function su(){return E.useContext(hA)!=null}function Qa(){return su()||tt(!1),E.useContext(hA).location}function TL(n){E.useContext(Ja).static||E.useLayoutEffect(n)}function hn(){let{isDataRoute:n}=E.useContext(ca);return n?oz():Yq()}function Yq(){su()||tt(!1);let n=E.useContext(Fh),{basename:e,future:t,navigator:r}=E.useContext(Ja),{matches:i}=E.useContext(ca),{pathname:a}=Qa(),s=JSON.stringify(_g(i,t.v7_relativeSplatPath)),l=E.useRef(!1);return TL(()=>{l.current=!0}),E.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Sg(d,JSON.parse(s),a,f.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:$a([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,s,a,n])}const Xq=E.createContext(null);function Kq(n){let e=E.useContext(ca).outlet;return e&&E.createElement(Xq.Provider,{value:n},e)}function ou(){let{matches:n}=E.useContext(ca),e=n[n.length-1];return e?e.params:{}}function Ag(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=E.useContext(Ja),{matches:i}=E.useContext(ca),{pathname:a}=Qa(),s=JSON.stringify(_g(i,r.v7_relativeSplatPath));return E.useMemo(()=>Sg(n,JSON.parse(s),a,t==="path"),[n,s,a,t])}function Zq(n,e,t,r){su()||tt(!1);let{navigator:i}=E.useContext(Ja),{matches:a}=E.useContext(ca),s=a[a.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let d=Qa(),f;f=d;let m=f.pathname||"/",g=m;if(u!=="/"){let b=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=Ro(n,{pathname:g});return nz(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:$a([u,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:$a([u,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,t,r)}function Jq(){let n=sz(),e=Yd(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:i},t):null,null)}const Qq=E.createElement(Jq,null);class ez extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?E.createElement(ca.Provider,{value:this.props.routeContext},E.createElement(EL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tz(n){let{routeContext:e,match:t,children:r}=n,i=E.useContext(Fh);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(ca.Provider,{value:e},r)}function nz(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,l=(i=t)==null?void 0:i.errors;if(l!=null){let f=s.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);f>=0||tt(!1),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let m=s[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:y}=t,x=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||x){u=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,m,g)=>{let y,x=!1,b=null,w=null;t&&(y=l&&m.route.id?l[m.route.id]:void 0,b=m.route.errorElement||Qq,u&&(d<0&&g===0?(lz("route-fallback"),x=!0,w=null):d===g&&(x=!0,w=m.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,g+1)),O=()=>{let T;return y?T=b:x?T=w:m.route.Component?T=E.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=f,E.createElement(tz,{match:m,routeContext:{outlet:f,matches:S,isDataRoute:t!=null},children:T})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?E.createElement(ez,{location:t.location,revalidation:t.revalidation,component:b,error:y,children:O(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):O()},null)}var OL=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(OL||{}),CL=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(CL||{});function rz(n){let e=E.useContext(Fh);return e||tt(!1),e}function iz(n){let e=E.useContext(dA);return e||tt(!1),e}function az(n){let e=E.useContext(ca);return e||tt(!1),e}function jL(n){let e=az(),t=e.matches[e.matches.length-1];return t.route.id||tt(!1),t.route.id}function sz(){var n;let e=E.useContext(EL),t=iz(CL.UseRouteError),r=jL();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function oz(){let{router:n}=rz(OL.UseNavigateStable),e=jL(),t=E.useRef(!1);return TL(()=>{t.current=!0}),E.useCallback(function(i,a){a===void 0&&(a={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,mp({fromRouteId:e},a)))},[n,e])}const Mj={};function lz(n,e,t){Mj[n]||(Mj[n]=!0)}function cz(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function NL(n){let{to:e,replace:t,state:r,relative:i}=n;su()||tt(!1);let{future:a,static:s}=E.useContext(Ja),{matches:l}=E.useContext(ca),{pathname:u}=Qa(),d=hn(),f=Sg(e,_g(l,a.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(f);return E.useEffect(()=>d(JSON.parse(m),{replace:t,state:r,relative:i}),[d,m,i,t,r]),null}function fA(n){return Kq(n.context)}function uz(n){let{basename:e="/",children:t=null,location:r,navigationType:i=_n.Pop,navigator:a,static:s=!1,future:l}=n;su()&&tt(!1);let u=e.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:u,navigator:a,static:s,future:mp({v7_relativeSplatPath:!1},l)}),[u,l,a,s]);typeof r=="string"&&(r=Gs(r));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:x="default"}=r,b=E.useMemo(()=>{let w=Ha(f,u);return w==null?null:{location:{pathname:w,search:m,hash:g,state:y,key:x},navigationType:i}},[u,f,m,g,y,x,i]);return b==null?null:E.createElement(Ja.Provider,{value:d},E.createElement(hA.Provider,{children:t,value:b}))}new Promise(()=>{});function dz(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:E.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:E.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:E.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pc.apply(this,arguments)}function ML(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function hz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function fz(n,e){return n.button===0&&(!e||e==="_self")&&!hz(n)}const mz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pz=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gz="6";try{window.__reactRouterVersion=gz}catch{}function vz(n,e){return Oq({basename:void 0,future:Pc({},void 0,{v7_prependBasename:!0}),history:ZU({window:void 0}),hydrationData:yz(),routes:n,mapRouteProperties:dz,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function yz(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Pc({},e,{errors:bz(e.errors)})),e}function bz(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new fp(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",t[r]=s}catch{}}if(t[r]==null){let a=new Error(i.message);a.stack="",t[r]=a}}else t[r]=i;return t}const PL=E.createContext({isTransitioning:!1}),wz=E.createContext(new Map),xz="startTransition",Pj=h8[xz],_z="flushSync",Rj=KU[_z];function Sz(n){Pj?Pj(n):n()}function dd(n){Rj?Rj(n):n()}class Az{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}}function Ez(n){let{fallbackElement:e,router:t,future:r}=n,[i,a]=E.useState(t.state),[s,l]=E.useState(),[u,d]=E.useState({isTransitioning:!1}),[f,m]=E.useState(),[g,y]=E.useState(),[x,b]=E.useState(),w=E.useRef(new Map),{v7_startTransition:S}=r||{},O=E.useCallback(R=>{S?Sz(R):R()},[S]),T=E.useCallback((R,k)=>{let{deletedFetchers:F,flushSync:D,viewTransitionOpts:L}=k;R.fetchers.forEach((V,H)=>{V.data!==void 0&&w.current.set(H,V.data)}),F.forEach(V=>w.current.delete(V));let B=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!L||B){D?dd(()=>a(R)):O(()=>a(R));return}if(D){dd(()=>{g&&(f&&f.resolve(),g.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let V=t.window.document.startViewTransition(()=>{dd(()=>a(R))});V.finished.finally(()=>{dd(()=>{m(void 0),y(void 0),l(void 0),d({isTransitioning:!1})})}),dd(()=>y(V));return}g?(f&&f.resolve(),g.skipTransition(),b({state:R,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(l(R),d({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[t.window,g,f,w,O]);E.useLayoutEffect(()=>t.subscribe(T),[t,T]),E.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new Az)},[u]),E.useEffect(()=>{if(f&&s&&t.window){let R=s,k=f.promise,F=t.window.document.startViewTransition(async()=>{O(()=>a(R)),await k});F.finished.finally(()=>{m(void 0),y(void 0),l(void 0),d({isTransitioning:!1})}),y(F)}},[O,s,f,t.window]),E.useEffect(()=>{f&&s&&i.location.key===s.location.key&&f.resolve()},[f,g,i.location,s]),E.useEffect(()=>{!u.isTransitioning&&x&&(l(x.state),d({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),b(void 0))},[u.isTransitioning,x]),E.useEffect(()=>{},[]);let M=E.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:R=>t.navigate(R),push:(R,k,F)=>t.navigate(R,{state:k,preventScrollReset:F?.preventScrollReset}),replace:(R,k,F)=>t.navigate(R,{replace:!0,state:k,preventScrollReset:F?.preventScrollReset})}),[t]),N=t.basename||"/",j=E.useMemo(()=>({router:t,navigator:M,static:!1,basename:N}),[t,M,N]),C=E.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return E.useEffect(()=>cz(r,t.future),[r,t.future]),E.createElement(E.Fragment,null,E.createElement(Fh.Provider,{value:j},E.createElement(dA.Provider,{value:i},E.createElement(wz.Provider,{value:w.current},E.createElement(PL.Provider,{value:u},E.createElement(uz,{basename:N,location:i.location,navigationType:i.historyAction,navigator:M,future:C},i.initialized||t.future.v7_partialHydration?E.createElement(Tz,{routes:t.routes,future:t.future,state:i}):e))))),null)}const Tz=E.memo(Oz);function Oz(n){let{routes:e,future:t,state:r}=n;return Zq(e,void 0,r,t)}const Cz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,en=E.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:a,replace:s,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=ML(e,mz),{basename:y}=E.useContext(Ja),x,b=!1;if(typeof d=="string"&&jz.test(d)&&(x=d,Cz))try{let T=new URL(window.location.href),M=d.startsWith("//")?new URL(T.protocol+d):new URL(d),N=Ha(M.pathname,y);M.origin===T.origin&&N!=null?d=N+M.search+M.hash:b=!0}catch{}let w=Wq(d,{relative:i}),S=Mz(d,{replace:s,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:m});function O(T){r&&r(T),T.defaultPrevented||S(T)}return E.createElement("a",Pc({},g,{href:x||w,onClick:b||a?r:O,ref:t,target:u}))}),g_=E.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:s=!1,style:l,to:u,viewTransition:d,children:f}=e,m=ML(e,pz),g=Ag(u,{relative:m.relative}),y=Qa(),x=E.useContext(dA),{navigator:b,basename:w}=E.useContext(Ja),S=x!=null&&Pz(g)&&d===!0,O=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,T=y.pathname,M=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(T=T.toLowerCase(),M=M?M.toLowerCase():null,O=O.toLowerCase()),M&&w&&(M=Ha(M,w)||M);const N=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let j=T===O||!s&&T.startsWith(O)&&T.charAt(N)==="/",C=M!=null&&(M===O||!s&&M.startsWith(O)&&M.charAt(O.length)==="/"),R={isActive:j,isPending:C,isTransitioning:S},k=j?r:void 0,F;typeof a=="function"?F=a(R):F=[a,j?"active":null,C?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(R):l;return E.createElement(en,Pc({},m,{"aria-current":k,className:F,ref:t,style:D,to:u,viewTransition:d}),typeof f=="function"?f(R):f)});var v_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(v_||(v_={}));var kj;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(kj||(kj={}));function Nz(n){let e=E.useContext(Fh);return e||tt(!1),e}function Mz(n,e){let{target:t,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:l}=e===void 0?{}:e,u=hn(),d=Qa(),f=Ag(n,{relative:s});return E.useCallback(m=>{if(fz(m,t)){m.preventDefault();let g=r!==void 0?r:Yo(d)===Yo(f);u(n,{replace:g,state:i,preventScrollReset:a,relative:s,viewTransition:l})}},[d,u,f,r,i,t,n,a,s,l])}function Pz(n,e){e===void 0&&(e={});let t=E.useContext(PL);t==null&&tt(!1);let{basename:r}=Nz(v_.useViewTransitionState),i=Ag(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Ha(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=Ha(t.nextLocation.pathname,r)||t.nextLocation.pathname;return hp(i.pathname,s)!=null||hp(i.pathname,a)!=null}function Rz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 1.987 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z"}),E.createElement("path",{fillRule:"evenodd",d:"M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z",clipRule:"evenodd"}))}const kz=E.forwardRef(Rz);function Dz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const RL=E.forwardRef(Dz);function Lz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z",clipRule:"evenodd"}))}const Iz=E.forwardRef(Lz);function Bz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M11.584 2.376a.75.75 0 0 1 .832 0l9 6a.75.75 0 1 1-.832 1.248L12 3.901 3.416 9.624a.75.75 0 0 1-.832-1.248l9-6Z"}),E.createElement("path",{fillRule:"evenodd",d:"M20.25 10.332v9.918H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h.75v-9.918a.75.75 0 0 1 .634-.74A49.109 49.109 0 0 1 12 9c2.59 0 5.134.202 7.616.592a.75.75 0 0 1 .634.74Zm-7.5 2.418a.75.75 0 0 0-1.5 0v6.75a.75.75 0 0 0 1.5 0v-6.75Zm3-.75a.75.75 0 0 1 .75.75v6.75a.75.75 0 0 1-1.5 0v-6.75a.75.75 0 0 1 .75-.75ZM9 12.75a.75.75 0 0 0-1.5 0v6.75a.75.75 0 0 0 1.5 0v-6.75Z",clipRule:"evenodd"}),E.createElement("path",{d:"M12 7.875a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Z"}))}const $z=E.forwardRef(Bz);function Fz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M3 2.25a.75.75 0 0 0 0 1.5v16.5h-.75a.75.75 0 0 0 0 1.5H15v-18a.75.75 0 0 0 0-1.5H3ZM6.75 19.5v-2.25a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1-.75-.75ZM6 6.75A.75.75 0 0 1 6.75 6h.75a.75.75 0 0 1 0 1.5h-.75A.75.75 0 0 1 6 6.75ZM6.75 9a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75ZM6 12.75a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 0 1.5h-.75a.75.75 0 0 1-.75-.75ZM10.5 6a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75Zm-.75 3.75A.75.75 0 0 1 10.5 9h.75a.75.75 0 0 1 0 1.5h-.75a.75.75 0 0 1-.75-.75ZM10.5 12a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75ZM16.5 6.75v15h5.25a.75.75 0 0 0 0-1.5H21v-12a.75.75 0 0 0 0-1.5h-4.5Zm1.5 4.5a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Zm.75 2.25a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75v-.008a.75.75 0 0 0-.75-.75h-.008ZM18 17.25a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1-.75-.75v-.008Z",clipRule:"evenodd"}))}const Uz=E.forwardRef(Fz);function qz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75ZM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 0 1-1.875-1.875V8.625ZM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 0 1 3 19.875v-6.75Z"}))}const zz=E.forwardRef(qz);function Hz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))}const Xo=E.forwardRef(Hz);function Vz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M12.378 1.602a.75.75 0 0 0-.756 0L3 6.632l9 5.25 9-5.25-8.622-5.03ZM21.75 7.93l-9 5.25v9l8.628-5.032a.75.75 0 0 0 .372-.648V7.93ZM11.25 22.18v-9l-9-5.25v8.57a.75.75 0 0 0 .372.648l8.628 5.033Z"}))}const Gz=E.forwardRef(Vz);function Wz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 0 1-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004ZM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 0 1-.921.42Z"}),E.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v.816a3.836 3.836 0 0 0-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 0 1-.921-.421l-.879-.66a.75.75 0 0 0-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 0 0 1.5 0v-.81a4.124 4.124 0 0 0 1.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 0 0-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 0 0 .933-1.175l-.415-.33a3.836 3.836 0 0 0-1.719-.755V6Z",clipRule:"evenodd"}))}const Yz=E.forwardRef(Wz);function Xz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm5.845 17.03a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06l-1.72 1.72V12a.75.75 0 0 0-1.5 0v4.19l-1.72-1.72a.75.75 0 0 0-1.06 1.06l3 3Z",clipRule:"evenodd"}),E.createElement("path",{d:"M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"}))}const kL=E.forwardRef(Xz);function Kz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),E.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const DL=E.forwardRef(Kz);function Zz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M10.5 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm0 6a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z",clipRule:"evenodd"}))}const Jz=E.forwardRef(Zz);function Qz({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const eH=E.forwardRef(Qz);function tH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M3 2.25a.75.75 0 0 1 .75.75v.54l1.838-.46a9.75 9.75 0 0 1 6.725.738l.108.054A8.25 8.25 0 0 0 18 4.524l3.11-.732a.75.75 0 0 1 .917.81 47.784 47.784 0 0 0 .005 10.337.75.75 0 0 1-.574.812l-3.114.733a9.75 9.75 0 0 1-6.594-.77l-.108-.054a8.25 8.25 0 0 0-5.69-.625l-2.202.55V21a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 3 2.25Z",clipRule:"evenodd"}))}const mA=E.forwardRef(tH);function nH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"}))}const LL=E.forwardRef(nH);function rH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),E.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const iH=E.forwardRef(rH);function aH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))}const Eg=E.forwardRef(aH);function sH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const oH=E.forwardRef(sH);function lH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const cH=E.forwardRef(lH),uH=[{path:"/",label:"Accueil",icon:iH},{path:"/drives",label:"Drives",icon:LL},{path:"/livres",label:"Livres",icon:RL},{path:"/profil",label:"Profil",icon:oH}];function dH(){const n=({isActive:e})=>`flex flex-col items-center gap-1 p-2 transition-colors duration-200 ${e?"text-blue-600":"text-gray-500 hover:text-blue-500"}`;return v.jsx("nav",{className:"fixed bottom-0 left-0 right-0 h-16 bg-white border-t border-gray-200 shadow-t-md",children:v.jsx("div",{className:"flex justify-around items-center h-full max-w-lg mx-auto",children:uH.map(e=>v.jsxs(g_,{to:e.path,className:n,end:!0,children:[v.jsx(e.icon,{className:"h-6 w-6"}),v.jsx("span",{className:"text-xs font-medium",children:e.label})]},e.path))})})}function hH(){return v.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[v.jsxs("main",{className:"pb-20",children:[" ",v.jsx(fA,{})]}),v.jsx(dH,{})]})}function fH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const IL=E.forwardRef(fH);function mH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0-3-3m3 3 3-3M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const pH=E.forwardRef(mH);function gH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const vH=E.forwardRef(gH);function yH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const bH=E.forwardRef(yH);function wH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const xH=E.forwardRef(wH);function _H({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25"}))}const BL=E.forwardRef(_H);function SH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const AH=E.forwardRef(SH);function EH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const TH=E.forwardRef(EH);function OH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const Tg=E.forwardRef(OH);function CH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"}))}const jH=E.forwardRef(CH);function NH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const MH=E.forwardRef(NH);function PH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const RH=E.forwardRef(PH);function kH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const $L=E.forwardRef(kH);function DH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Er=E.forwardRef(DH);function LH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Fs=E.forwardRef(LH);function IH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"}))}const Xd=E.forwardRef(IH);function BH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const y_=E.forwardRef(BH);function $H({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const FH=E.forwardRef($H);function UH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const qH=E.forwardRef(UH);function zH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const HH=E.forwardRef(zH);function VH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const GH=E.forwardRef(VH);function WH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Kd=E.forwardRef(WH);function YH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const b_=E.forwardRef(YH);function XH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const pp=E.forwardRef(XH);function KH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const pA=E.forwardRef(KH);function ZH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const JH=E.forwardRef(ZH);function QH({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const gp=E.forwardRef(QH);function e9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Uh=E.forwardRef(e9);function t9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const n9=E.forwardRef(t9);function r9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const es=E.forwardRef(r9);function i9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const lu=E.forwardRef(i9);function a9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const s9=E.forwardRef(a9);function o9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const l9=E.forwardRef(o9);function c9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const u9=E.forwardRef(c9);function d9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const FL=E.forwardRef(d9);function h9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const f9=E.forwardRef(h9);function m9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const p9=E.forwardRef(m9);function g9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const v9=E.forwardRef(g9);function y9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ws=E.forwardRef(y9);function b9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const gA=E.forwardRef(b9);function w9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const UL=E.forwardRef(w9);function x9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const _9=E.forwardRef(x9);function S9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Dj=E.forwardRef(S9);function A9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const E9=E.forwardRef(A9);function T9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const O9=E.forwardRef(T9);function C9({title:n,titleId:e,...t},r){return E.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?E.createElement("title",{id:e},n):null,E.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const vA=E.forwardRef(C9);function j9({items:n}){const[e,t]=E.useState(0);return E.useEffect(()=>{if(n.length<=1)return;const r=setInterval(()=>{t(i=>(i+1)%n.length)},3e3);return()=>clearInterval(r)},[n.length]),v.jsxs("div",{className:"relative w-full h-40 overflow-hidden rounded-lg shadow-lg",children:[n.map((r,i)=>v.jsxs("div",{className:`absolute inset-0 w-full h-full transition-opacity duration-700 ease-in-out ${i===e?"opacity-100 z-10":"opacity-0 z-0"}`,children:[v.jsx("img",{src:r.imageUrl,alt:r.alt,className:"w-full h-full object-cover"}),v.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent p-4 flex flex-col justify-end",children:[v.jsx("h3",{className:"text-white font-bold text-lg leading-tight",children:r.title}),r.learnMoreUrl&&r.learnMoreUrl!=="#"&&v.jsx("a",{href:r.learnMoreUrl,target:"_blank",rel:"noopener noreferrer",className:"text-white font-semibold text-sm mt-2 self-start bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full hover:bg-white/30 transition-colors",children:"Savoir plus"})]})]},r.id)),n.length>1&&v.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-2",children:n.map((r,i)=>v.jsx("div",{className:`h-2 w-2 rounded-full transition-all duration-300 ${i===e?"bg-white scale-125":"bg-white/50"}`},i))})]})}const N9=()=>v.jsxs("div",{className:"bg-gray-200 p-4 rounded-xl animate-pulse",children:[v.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-md mb-2"}),v.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"})]}),M9=()=>v.jsx("div",{className:"aspect-video w-full bg-gray-200 rounded-xl animate-pulse"});function P9(){const n=hn(),{unreadCount:e}=fL(),{profile:t}=Ui(),[r,i]=E.useState([]),[a,s]=E.useState([]),[l,u]=E.useState(!0);E.useEffect(()=>{(async()=>{u(!0);try{if(t?.faculte_id&&t?.niveau_id){const{data:m,error:g}=await oe.from("module_faculte_niveau").select("modules(id, nom, icone_url, is_free)").eq("faculte_id",t.faculte_id).eq("niveau_id",t.niveau_id);if(g)console.error("Erreur lors du chargement des modules (filtrs):",g),i([]);else{const y=(m??[]).map(b=>b.modules).filter(Boolean),x=Object.values(y.reduce((b,w)=>(b[w.id]={...w,isLocked:t?.role!=="admin"&&!t?.is_premium&&!w.is_free},b),{}));i(x)}}else{const{data:m,error:g}=await oe.from("modules").select("id, nom, icone_url, is_free");if(g)console.error("Erreur lors du chargement des modules:",g),i([]);else{const y=(m||[]).map(x=>({...x,isLocked:t?.role!=="admin"&&!t?.is_premium&&!x.is_free}));i(y)}}}catch(m){console.error("Erreur inattendue lors du chargement des modules:",m)}finally{u(!1)}})()},[t]),E.useEffect(()=>{(async()=>{try{const{data:m,error:g}=await oe.from("infos_carrousel").select("id, titre, image_url, lien").eq("active",!0).order("ordre",{ascending:!0});if(g)throw g;const y=m.map(x=>({id:x.id,imageUrl:x.image_url,alt:x.titre,title:x.titre,learnMoreUrl:x.lien||"#"}));s(y)}catch(m){console.error("Erreur lors du chargement du carrousel:",m)}})()},[]);const d=f=>{if(f.isLocked){n("/profil/abonnement");return}const m=encodeURIComponent(f.nom);n(`/modules/${m}/universites`)};return v.jsxs("div",{children:[v.jsx("header",{className:"bg-gradient-to-br from-blue-600 to-blue-800 text-white px-4 sm:px-6 py-4 rounded-b-3xl shadow-lg",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx(en,{to:"/profil",className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center border-2 border-white/30 hover:bg-white/30 transition-colors flex-shrink-0",children:v.jsx("span",{className:"text-3xl",children:""})}),v.jsxs("div",{className:"ml-4",children:[v.jsx("p",{className:"text-blue-200 text-sm",children:"Bienvenue,"}),v.jsx("h1",{className:"text-xl font-bold tracking-tight",children:t?.prenom||"tudiant"})]})]}),v.jsxs(en,{to:"/notifications",className:"relative p-2 hover:bg-white/10 rounded-full transition-colors flex-shrink-0",children:[v.jsx(TH,{className:"w-7 h-7"}),e>0&&v.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]})]})}),v.jsxs("div",{className:"px-4 py-6 space-y-8",children:[v.jsxs("section",{children:[v.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Infos"}),l?v.jsx(M9,{}):v.jsx(j9,{items:a})]}),v.jsxs("section",{children:[v.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Anciens sujets par module"}),l?v.jsx("div",{className:"grid grid-cols-2 gap-4",children:[...Array(4)].map((f,m)=>v.jsx(N9,{},m))}):v.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.map(f=>v.jsxs("button",{onClick:()=>d(f),className:`relative p-4 rounded-xl shadow-md transition-all text-left bg-white hover:shadow-lg hover:-translate-y-1 active:scale-95 ${f.isLocked?"cursor-not-allowed bg-gray-100":""}`,children:[f.isLocked&&v.jsx("div",{className:"absolute top-2 right-2 bg-gray-200 p-1 rounded-full",children:v.jsx(gp,{className:"w-4 h-4 text-gray-500"})}),f.icone_url?v.jsx("img",{src:f.icone_url,alt:f.nom,className:"w-10 h-10 mb-2"}):v.jsx("div",{className:"text-4xl mb-2",children:""}),v.jsx("p",{className:"text-sm font-medium text-gray-800",children:f.nom})]},f.id))})]})]})]})}function Wr({isOpen:n,onClose:e,title:t,children:r}){return n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex justify-center items-center p-4",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md transform transition-all",onClick:i=>i.stopPropagation(),children:[v.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[v.jsx("h2",{className:"text-lg font-bold text-gray-800",children:t}),v.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-800 transition-colors",children:v.jsx(vA,{className:"w-6 h-6"})})]}),v.jsx("div",{className:"p-6",children:r})]})}):null}const R9=()=>v.jsxs("div",{className:"flex items-start p-4 bg-white rounded-lg shadow-md animate-pulse",children:[v.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-md flex-shrink-0"}),v.jsxs("div",{className:"ml-4 flex-grow",children:[v.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),v.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]});function k9(){const[n,e]=E.useState(""),[t,r]=E.useState([]),[i,a]=E.useState(!0),[s,l]=E.useState(null),{profile:u,user:d}=Ui(),[f,m]=E.useState(null),[g,y]=E.useState(!1),[x,b]=E.useState(""),[w,S]=E.useState(!1);E.useEffect(()=>{(async()=>{if(u){a(!0),l(null);try{const{data:C,error:R}=await oe.from("drives").select("id, titre, description, url, faculte_id, niveau_id").eq("faculte_id",u.faculte_id).eq("niveau_id",u.niveau_id);if(R)throw R;r(C||[])}catch(C){l(C.message||"Une erreur est survenue.")}finally{a(!1)}}})()},[u]);const O=E.useMemo(()=>n?t.filter(j=>j.titre.toLowerCase().includes(n.toLowerCase())||j.description&&j.description.toLowerCase().includes(n.toLowerCase())):t,[n,t]),T=j=>{m(j),y(!0)},M=()=>{m(null),y(!1),b(""),S(!1)},N=async j=>{if(j.preventDefault(),!(!f||!d||!x.trim())){S(!0);try{const{error:C}=await oe.from("signalements").insert({user_id:d.id,item_id:f.id,type:"drive",description:x.trim()});if(C)throw C;alert("Votre signalement a t envoy avec succs. Merci !"),M()}catch(C){alert(`Erreur lors de l'envoi du signalement : ${C.message}`),S(!1)}}};return v.jsxs("div",{children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Drives Partags"}),v.jsxs("div",{className:"relative mt-4",children:[v.jsx(Eg,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),v.jsx("input",{type:"text",placeholder:"Rechercher dans les drives...",value:n,onChange:j=>e(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),v.jsx("main",{className:"p-4 space-y-4",children:i?v.jsx("div",{className:"space-y-4",children:[...Array(5)].map((j,C)=>v.jsx(R9,{},C))}):s?v.jsxs("div",{className:"text-center py-8 text-red-500",children:["Erreur: ",s]}):O.length===0?v.jsx("div",{className:"text-center py-8 text-gray-600",children:"Aucun drive partag disponible pour votre niveau."}):O.map(j=>v.jsxs("div",{className:"flex items-start p-4 bg-white rounded-lg shadow-md transition-shadow group",children:[v.jsxs("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-start flex-grow",children:[v.jsx("img",{src:"/google-drive.png",alt:"Drive",className:"w-12 h-12 flex-shrink-0"}),v.jsxs("div",{className:"ml-4",children:[v.jsx("h2",{className:"font-semibold text-gray-800 group-hover:text-blue-600",children:j.titre}),v.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.description})]})]}),v.jsx("button",{onClick:()=>T(j),className:"ml-4 p-2 rounded-full text-gray-400 hover:bg-red-50 hover:text-red-500 transition-colors",title:"Signaler un lien mort",children:v.jsx(mA,{className:"w-5 h-5"})})]},j.id))}),v.jsx(Wr,{isOpen:g,onClose:M,title:`Signaler un problme sur "${f?.titre}"`,children:v.jsxs("form",{onSubmit:N,children:[v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dcrivez le problme que vous avez rencontr (ex: lien mort, accs refus, mauvais contenu, etc.)."}),v.jsx("textarea",{value:x,onChange:j=>b(j.target.value),className:"w-full h-32 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Votre message...",required:!0}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:M,className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Annuler"}),v.jsx("button",{type:"submit",disabled:w,className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:w?"Envoi en cours...":"Envoyer le signalement"})]})]})})]})}function qL(n){const[e,t]=E.useState(!1);return E.useEffect(()=>{let r=!0;const i=async()=>{if(!n){r&&t(!1);return}try{const s=await caches.match(n);r&&t(!!s)}catch{r&&t(!1)}};i();const a=()=>i();return navigator.serviceWorker?.addEventListener("controllerchange",a),()=>{r=!1,navigator.serviceWorker?.removeEventListener("controllerchange",a)}},[n]),e}const D9=()=>v.jsx("div",{className:"group block bg-gray-200 rounded-lg shadow-md animate-pulse aspect-[2/3]"});function L9(){const[n,e]=E.useState(""),[t,r]=E.useState("all"),[i,a]=E.useState([]),[s,l]=E.useState([]),[u,d]=E.useState(!0),{user:f}=Ui(),[m,g]=E.useState(null),[y,x]=E.useState(!1),[b,w]=E.useState(""),[S,O]=E.useState(!1),[T,M]=E.useState(null);E.useEffect(()=>{(async()=>{try{d(!0),M(null);const{data:B,error:V}=await oe.from("modules").select("id,nom,description,icone_url,is_free,created_at,updated_at").order("nom");if(V)throw V;const{data:H,error:I}=await oe.from("livres").select("id,titre,module_id,couverture_url,fichier_url,created_at,updated_at,created_by").order("titre");if(I)throw I;l(B??[]),a(H??[])}catch(B){M(B?.message??"Erreur lors du chargement des donnes")}finally{d(!1)}})()},[]);const N=E.useMemo(()=>{const L=new Set(i.map(B=>B.module_id));return s.filter(B=>L.has(B.id))},[s,i]),j=E.useMemo(()=>{let L=i;return t!=="all"&&(L=L.filter(B=>B.module_id===t)),n&&(L=L.filter(B=>B.titre.toLowerCase().includes(n.toLowerCase()))),L},[i,n,t]),C=(L,B)=>{L.preventDefault(),L.stopPropagation(),g(B),x(!0)},R=()=>{g(null),x(!1),w(""),O(!1)},k=async L=>{if(L.preventDefault(),!(!m||!f||!b.trim())){O(!0);try{const{error:B}=await oe.from("signalements").insert({user_id:f.id,item_id:m.id,type:"livre",description:b.trim()});if(B)throw B;alert("Votre signalement a t envoy avec succs. Merci !"),R()}catch(B){alert(`Erreur lors de l'envoi du signalement : ${B.message}`)}finally{O(!1)}}},F=L=>{try{const B=L.match(/drive\.google\.com\/file\/d\/([^/]+)/);if(B?.[1])return`https://drive.google.com/uc?export=download&id=${B[1]}`;const H=new URL(L).searchParams.get("id");return H?`https://drive.google.com/uc?export=download&id=${H}`:L}catch{return L}},D=({url:L,title:B})=>qL(L)?null:v.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-2 left-2 p-2 bg-black/40 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:B?`Tlcharger ${B}`:"Tlcharger",children:v.jsx(kL,{className:"w-5 h-5"})});return v.jsxs("div",{children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Bibliothque"}),v.jsxs("div",{className:"relative mt-4",children:[v.jsx(Eg,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),v.jsx("input",{type:"text",placeholder:"Rechercher un livre...",value:n,onChange:L=>e(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),v.jsx("div",{className:"px-4 pt-4 overflow-x-auto",children:v.jsxs("div",{className:"flex space-x-2 pb-2",children:[v.jsx("button",{onClick:()=>r("all"),className:`px-4 py-2 text-sm font-semibold rounded-full transition-colors ${t==="all"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Tous"}),N.map(L=>v.jsx("button",{onClick:()=>r(L.id),className:`px-4 py-2 text-sm font-semibold rounded-full transition-colors flex-shrink-0 ${t===L.id?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:L.nom},L.id))]})}),v.jsx("main",{className:"p-4",children:u?v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[...Array(12)].map((L,B)=>v.jsx(D9,{},B))}):T?v.jsxs("div",{className:"text-center py-8 text-red-500",children:["Erreur: ",T]}):i.length===0?v.jsx("div",{className:"text-center py-8 text-gray-600",children:"Aucun livre disponible."}):j.length===0?v.jsx("div",{className:"text-center py-8 text-gray-600",children:"Aucun livre ne correspond  votre recherche."}):v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:j.map(L=>{const B=F(L.fichier_url);return v.jsxs("div",{className:"relative group",children:[v.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"block bg-gray-100 rounded-lg shadow-md overflow-hidden transition-all hover:shadow-xl hover:-translate-y-1 aspect-[2/3]",children:v.jsx("img",{src:L.couverture_url||"/placeholder-book.png",alt:`Couverture de ${L.titre}`,className:"w-full h-full object-cover"})}),v.jsx(D,{url:B,title:L.titre}),v.jsx("button",{onClick:V=>C(V,L),className:"absolute top-2 right-2 p-1.5 bg-black/40 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Signaler un problme",children:v.jsx(mA,{className:"w-4 h-4"})})]},L.id)})})}),v.jsx(Wr,{isOpen:y,onClose:R,title:`Signaler un problme sur "${m?.titre}"`,children:v.jsxs("form",{onSubmit:k,children:[v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dcrivez le problme que vous avez rencontr (ex: lien mort, mauvais livre, etc.)."}),v.jsx("textarea",{value:b,onChange:L=>w(L.target.value),className:"w-full h-32 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Votre message...",required:!0}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:R,className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Annuler"}),v.jsx("button",{type:"submit",disabled:S,className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:S?"Envoi en cours...":"Envoyer"})]})]})})]})}const zL=()=>{const[n,e]=E.useState({isOpen:!1}),t=E.useCallback(i=>{e({isOpen:!0,...i})},[]),r=E.useCallback(()=>{e({isOpen:!1})},[]);return{modalProps:{...n,onClose:r},showModal:t,hideModal:r}},qi=({isOpen:n,onClose:e,onConfirm:t,title:r,message:i,confirmText:a="Confirmer",cancelText:s="Annuler",isDestructive:l=!1})=>{if(!n)return null;const u=()=>{t?.(),e()},d=l?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700";return v.jsxs(Wr,{isOpen:n,onClose:e,title:r??"",children:[v.jsx("div",{className:"space-y-4",children:v.jsx("p",{className:"text-gray-600",children:i??""})}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[t&&v.jsx("button",{type:"button",onClick:e,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300",children:s}),v.jsx("button",{type:"button",onClick:u,className:`text-white px-4 py-2 rounded-md ${t?d:"bg-blue-600 hover:bg-blue-700"}`,children:t?a:"OK"})]})]})},Lj=({icon:n,text:e,onClick:t,href:r,isDestructive:i=!1})=>{const a=v.jsxs("div",{className:"flex items-center p-4",children:[v.jsx(n,{className:`w-6 h-6 mr-4 ${i?"text-red-500":"text-gray-500"}`}),v.jsx("span",{className:`flex-grow font-medium ${i?"text-red-600":"text-gray-700"}`,children:e}),!i&&v.jsx(Fs,{className:"w-5 h-5 text-gray-400"})]}),s="block w-full text-left bg-white hover:bg-gray-50 transition-colors";return r?v.jsx(en,{to:r,className:s,children:a}):v.jsx("button",{onClick:t,className:s,children:a})};function I9(){const{profile:n,user:e,loading:t}=Ui(),r=hn(),{modalProps:i,showModal:a}=zL(),s=async()=>{const f={title:"Ma Facult",text:"Dcouvre Ma Facult, l'application indispensable pour les tudiants du Burkina Faso !",url:window.location.origin};if(navigator.share)try{await navigator.share(f)}catch(m){m.name!=="AbortError"&&console.error("Erreur lors du partage :",m)}else await navigator.clipboard.writeText(f.url),a({title:"Partage",message:"Lien de l'application copi dans le presse-papiers !"})},l=E.useCallback(()=>{a({title:"Dconnexion",message:"tes-vous sr de vouloir vous dconnecter ?",isDestructive:!0,onConfirm:async()=>{await oe.auth.signOut(),r("/welcome")}})},[r]);if(t)return v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:v.jsx("div",{className:"text-gray-600",children:"Chargement du profil..."})});const d=[{icon:f9,text:"Mon tableau de bord",href:"/writer/dashboard",roles:["writer"]},{icon:qH,text:"Mon abonnement",href:"/profil/abonnement",hiddenRoles:["admin","writer"]},{icon:UL,text:"Notre quipe",href:"/profil/equipe"},{icon:s9,text:"Obtenir de l'aide",onClick:()=>window.open("https://wa.me/22656658808","_blank")},{icon:Kd,text:"Politique de confidentialit",onClick:()=>window.open("https://docs.google.com/document/d/1CGbmt8EEZ3USSWFNftSb6yroNZbL50bHOS3sC9O-bro/edit?usp=sharing","_blank")},{icon:Kd,text:"Termes et conditions d'utilisation",onClick:()=>window.open("https://drive.google.com/file/d/VOTRE_ID_DE_FICHIER_TERMES/preview","_blank")},{icon:l9,text:"Partager l'application",onClick:s},{icon:u9,text:"Panneau admin",href:"/admin",roles:["admin"]}].filter(f=>{const m=n?.role;return m?f.roles?f.roles.includes(m):f.hiddenRoles?!f.hiddenRoles.includes(m):!0:!f.roles&&!f.hiddenRoles});return v.jsxs("div",{className:"bg-gray-100 min-h-full",children:[v.jsx("header",{className:"bg-white p-4 shadow-sm",children:v.jsx("h1",{className:"text-2xl font-bold text-gray-800 text-center",children:"Mon Profil"})}),v.jsxs("main",{className:"p-4 space-y-6",children:[v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[v.jsxs("div",{className:"flex flex-col items-center sm:flex-row sm:items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[v.jsxs("div",{className:"relative",children:[v.jsx(gA,{className:"w-24 h-24 text-gray-300"}),v.jsx(en,{to:"/profil/modifier",className:"absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full text-white transform hover:scale-110 transition-transform",children:v.jsx(n9,{className:"w-5 h-5"})})]}),v.jsxs("div",{className:"text-center sm:text-left flex-grow",children:[v.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:[n?.prenom," ",n?.nom]}),v.jsx("p",{className:"text-md text-gray-600",children:n?.faculte_nom}),v.jsx("p",{className:"text-sm text-gray-500",children:n?.niveau_nom})]})]}),v.jsxs("div",{className:"border-t border-gray-200 mt-6 pt-4",children:[v.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Adresse mail"}),v.jsx("p",{className:"font-medium text-gray-800",children:e?.email})]})]}),v.jsx("section",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:v.jsx("div",{className:"divide-y divide-gray-200",children:d.map(f=>v.jsx(Lj,{...f},f.text))})}),v.jsx("section",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:v.jsx(Lj,{icon:bH,text:"Dconnexion",onClick:l,isDestructive:!0})})]}),v.jsx(qi,{...i})]})}function B9(){const{moduleId:n}=ou(),e=hn(),[t,r]=E.useState(""),[i,a]=E.useState(null),[s,l]=E.useState([]),[u,d]=E.useState(!0),[f,m]=E.useState(null);E.useEffect(()=>{if(!n){a(null),l([]),d(!1);return}let y=!1;return(async()=>{d(!0),m(null);try{let w=(await oe.from("modules").select("*").eq("id",n).maybeSingle()).data||null;if(w||(w=(await oe.from("modules").select("*").ilike("nom",`${n}%`).limit(1).maybeSingle()).data||null),y)return;if(a(w),!w){l([]),d(!1);return}const S=await oe.from("universites").select(`
                        *,
                        sujets:sujets(count),
                        sujet_preview:sujets(*)
                    `).eq("sujets.module_id",w.id);if(S&&S.error)throw S.error;const O=(S.data||[]).filter(T=>T.sujets&&T.sujets[0]&&T.sujets[0].count>0).map(T=>({...T,subjectCount:T.sujets[0].count}));if(O.length===0){l([]),d(!1);return}if(y)return;l(O)}catch(b){m(b?.message||String(b)),l([])}finally{y||d(!1)}})(),()=>{y=!0}},[n]);const g=E.useMemo(()=>t?s.filter(y=>y.nom.toLowerCase().includes(t.toLowerCase())):s,[t,s]);return u?v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:v.jsx("div",{className:"text-gray-600",children:"Chargement des universits..."})}):f?v.jsxs("div",{className:"p-4 text-center text-red-500",children:["Erreur : ",f]}):i?v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>e(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Xo,{className:"w-6 h-6 text-gray-700"})}),v.jsxs("h1",{className:"text-xl font-bold text-gray-800",children:['Universits pour "',i?.nom||i?.name||"",'"']})]}),v.jsxs("div",{className:"relative mt-4",children:[v.jsx(Eg,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),v.jsx("input",{type:"text",placeholder:"Rechercher une universit...",value:t,onChange:y=>r(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),v.jsx("main",{className:"p-4 space-y-3",children:g.length>0?g.map(y=>v.jsxs(en,{to:`/modules/${n}/universites/${y.id}/sujets`,className:"flex items-center p-4 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[v.jsx("img",{src:y.logo_url||"https://via.placeholder.com/100",alt:`Logo de ${y.nom||y.name}`,className:"w-12 h-12 rounded-md mr-4 object-cover bg-gray-200"}),v.jsxs("div",{className:"flex-grow",children:[v.jsx("h2",{className:"font-semibold text-gray-800",children:y.nom||y.name}),v.jsxs("p",{className:"text-sm text-gray-500",children:[y.subjectCount," ",y.subjectCount>1?"sujets disponibles":"sujet disponible"]})]}),v.jsx(Xo,{className:"w-5 h-5 text-gray-400 transform -rotate-180"})]},y.id)):v.jsx("p",{className:"text-center text-gray-500 mt-8",children:t?"Aucune universit ne correspond  votre recherche.":"Aucune universit n'a de sujets pour ce module."})})]}):v.jsx("div",{className:"p-4 text-center text-red-500",children:"Module non trouv."})}const $9=({url:n})=>{const e=qL(n);return!n||e?null:v.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full hover:bg-blue-50",title:"Tlcharger le sujet",children:v.jsx(kL,{className:"w-6 h-6 text-blue-600"})})};function F9(){const{moduleId:n,universityId:e}=ou(),t=hn(),[r,i]=E.useState(""),[a,s]=E.useState(null),[l,u]=E.useState(null),[d,f]=E.useState([]),[m,g]=E.useState(!0),[y,x]=E.useState(null);E.useEffect(()=>{if(!n||!e){s(null),u(null),f([]),g(!1);return}let w=!1;return(async()=>{g(!0),x(null);try{let T=(await oe.from("modules").select("*").eq("id",n).maybeSingle()).data||null;if(T||(T=(await oe.from("modules").select("*").ilike("nom",`${n}%`).limit(1).maybeSingle()).data||null),w)return;s(T);let N=(await oe.from("universites").select("*").eq("id",e).maybeSingle()).data||null;if(N||(N=(await oe.from("universites").select("*").ilike("nom",`${e}%`).limit(1).maybeSingle()).data||null),w)return;if(u(N),!T||!N){f([]),g(!1);return}const j=await oe.from("sujets").select("*").eq("module_id",T.id).eq("universite_id",N.id);if(j.error)throw j.error;if(w)return;const C=k=>{if(!k)return k;const F=k.match(/\/d\/([a-zA-Z0-9_-]+)/),D=k.match(/[?&]id=([a-zA-Z0-9_-]+)/),L=F?.[1]||D?.[1];return L?`https://drive.google.com/uc?export=download&id=${L}`:k},R=(j.data||[]).map(k=>({...k,pdfUrlResolved:C(k.fichier_url||k.pdfUrl)}));f(R)}catch(O){x(O?.message||String(O)),f([])}finally{w||g(!1)}})(),()=>{w=!0}},[n,e]);const b=E.useMemo(()=>r?d.filter(w=>(w.titre||w.title||"").toLowerCase().includes(r.toLowerCase())):d,[r,d]);return m?v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:v.jsx("div",{className:"text-gray-600",children:"Chargement des sujets..."})}):y?v.jsxs("div",{className:"p-4 text-center text-red-500",children:["Erreur : ",y]}):!a||!l?v.jsx("div",{className:"p-4 text-center text-red-500",children:"Module ou universit non trouv."}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>t(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Xo,{className:"w-6 h-6 text-gray-700"})}),v.jsxs("div",{className:"flex-grow",children:[v.jsx("h1",{className:"text-xl font-bold text-gray-800 truncate",children:l.nom||l.name}),v.jsx("p",{className:"text-sm text-gray-500",children:a.nom||a.name})]})]}),v.jsxs("div",{className:"relative mt-4",children:[v.jsx(Eg,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),v.jsx("input",{type:"text",placeholder:"Rechercher un sujet...",value:r,onChange:w=>i(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),v.jsx("main",{className:"p-4 space-y-3",children:b.length>0?b.map(w=>v.jsxs(en,{to:`/sujets/${w.id}`,className:"flex items-center p-4 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[v.jsx(DL,{className:"w-10 h-10 text-blue-500 mr-4"}),v.jsxs("div",{className:"flex-grow",children:[v.jsx("h2",{className:"font-semibold text-gray-800 leading-tight",children:w.titre||w.title}),v.jsx("p",{className:"text-sm text-gray-500",children:w.annee?`Anne ${w.annee}`:""})]}),v.jsx($9,{url:w.pdfUrlResolved||w.fichier_url||w.pdfUrl})]},w.id)):v.jsx("p",{className:"text-center text-gray-500 mt-8",children:r?"Aucun sujet ne correspond  votre recherche.":"Aucun sujet disponible pour le moment."})})]})}const cr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),w_=[.001,0,0,.001,0,0],H0=1.35,$r={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},na={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Zd="pdfjs_internal_editor_",Xe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ut={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},HL={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Gn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Id={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},cn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},cc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qh={ERRORS:0,WARNINGS:1,INFOS:5},Rc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Mm={moveTo:0,lineTo:1,curveTo:2,closePath:3},VL={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Og=qh.WARNINGS;function U9(n){Number.isInteger(n)&&(Og=n)}function q9(){return Og}function Cg(n){Og>=qh.INFOS&&console.info(`Info: ${n}`)}function Ke(n){Og>=qh.WARNINGS&&console.warn(`Warning: ${n}`)}function kt(n){throw new Error(n)}function ht(n,e){n||kt(e)}function z9(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function yA(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=Y9(n)}catch{}const r=e?URL.parse(n,e):URL.parse(n);return z9(r)?r:null}function bA(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&yA(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Qe(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const ol=(function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class Ij extends ol{constructor(e,t){super(e,"PasswordException"),this.code=t}}class V0 extends ol{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class vp extends ol{constructor(e){super(e,"InvalidPDFException")}}class Jd extends ol{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class H9 extends ol{constructor(e){super(e,"FormatError")}}class Va extends ol{constructor(e){super(e,"AbortException")}}function GL(n){(typeof n!="object"||n?.length===void 0)&&kt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),s=n.subarray(i,a);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function zh(n){typeof n!="string"&&kt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function V9(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function G9(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function W9(){try{return new Function(""),!0}catch{return!1}}class In{static get isLittleEndian(){return Qe(this,"isLittleEndian",G9())}static get isEvalSupported(){return Qe(this,"isEvalSupported",W9())}static get isOffscreenCanvasSupported(){return Qe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Qe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Qe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Qe(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const G0=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Ce{static makeHexColor(e,t,r){return`#${G0[e]}${G0[t]}${G0[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const i=e[r],a=e[r+1];e[r]=i*t[0]+a*t[2]+t[4],e[r+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],d=t[5];for(let f=0;f<6;f+=2){const m=e[r+f],g=e[r+f+1];e[r+f]=m*i+g*s+u,e[r+f+1]=m*a+g*l+d}}static applyInverseTransform(e,t){const r=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-r*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,r){const i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],d=t[5],f=e[0],m=e[1],g=e[2],y=e[3];let x=i*f+u,b=x,w=i*g+u,S=w,O=l*m+d,T=O,M=l*y+d,N=M;if(a!==0||s!==0){const j=a*f,C=a*g,R=s*m,k=s*y;x+=R,S+=R,w+=k,b+=k,O+=j,N+=j,M+=C,T+=C}r[0]=Math.min(r[0],x,w,b,S),r[1]=Math.min(r[1],O,M,T,N),r[2]=Math.max(r[2],x,w,b,S),r[3]=Math.max(r[3],O,M,T,N)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],i=e[1],a=e[2],s=e[3],l=r**2+i**2,u=r*a+i*s,d=a**2+s**2,f=(l+d)/2,m=Math.sqrt(f**2-(l*d-u**2));t[0]=Math.sqrt(f+m||1),t[1]=Math.sqrt(f-m||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>s?null:[r,a,i,s]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,i,a){a[0]=Math.min(a[0],e,r),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,r),a[3]=Math.max(a[3],t,i)}static#e(e,t,r,i,a,s,l,u,d,f){if(d<=0||d>=1)return;const m=1-d,g=d*d,y=g*d,x=m*(m*(m*e+3*d*t)+3*g*r)+y*i,b=m*(m*(m*a+3*d*s)+3*g*l)+y*u;f[0]=Math.min(f[0],x),f[1]=Math.min(f[1],b),f[2]=Math.max(f[2],x),f[3]=Math.max(f[3],b)}static#t(e,t,r,i,a,s,l,u,d,f,m,g){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,r,i,a,s,l,u,-m/f,g);return}const y=f**2-4*m*d;if(y<0)return;const x=Math.sqrt(y),b=2*d;this.#e(e,t,r,i,a,s,l,u,(-f+x)/b,g),this.#e(e,t,r,i,a,s,l,u,(-f-x)/b,g)}static bezierBoundingBox(e,t,r,i,a,s,l,u,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,u),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,u),this.#t(e,r,a,l,t,i,s,u,3*(-e+3*(r-a)+l),6*(e-2*r+a),3*(r-e),d),this.#t(e,r,a,l,t,i,s,u,3*(-t+3*(i-s)+u),6*(t-2*i+s),3*(i-t),d)}}function Y9(n){return decodeURIComponent(escape(n))}let W0=null,Bj=null;function WL(n){return W0||(W0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Bj=new Map([["","t"]])),n.replaceAll(W0,(e,t,r)=>t?t.normalize("NFKC"):Bj.get(r))}function wA(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),GL(n)}const xA="pdfjs_internal_id_";function X9(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...a]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const s=a.length;let l=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;l=!1;break;default:return!1}for(const u of a)if(!(typeof u=="number"||l&&u===null))return!1;return!0}function er(n,e,t){return Math.min(Math.max(n,e),t)}function YL(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(GL(n))}function K9(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):zh(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Qd{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(a){if(!a)return;let s=null;const l=a.name;if(l==="#text")s=a.value;else if(Qd.shouldBuildText(l))a?.attributes?.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&t.push({str:s}),!!a.children)for(const u of a.children)i(u)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class _A{static setupStorage(e,t,r,i,a){const s=i.getValue(t,{value:null});switch(r.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(s.value===r.attributes.xfaOn?e.setAttribute("checked",!0):s.value===r.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const l of r.children)l.attributes.value===s.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const u=l.target.options,d=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:a}){const{attributes:s}=t,l=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[u,d]of Object.entries(s))if(d!=null)switch(u){case"class":d.length&&e.setAttribute(u,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,d)}l&&a.addLinkAttributes(e,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(e,s.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:r});const l=a!=="richText",u=e.div;if(u.append(s),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=m}l&&u.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);s.append(m),l&&Qd.shouldBuildText(i.name)&&d.push(m)}return{textDivs:d}}const f=[[i,-1,s]];for(;f.length>0;){const[m,g,y]=f.at(-1);if(g+1===m.children.length){f.pop();continue}const x=m.children[++f.at(-1)[1]];if(x===null)continue;const{name:b}=x;if(b==="#text"){const S=document.createTextNode(x.value);d.push(S),y.append(S);continue}const w=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,b):document.createElement(b);if(y.append(w),x.attributes&&this.setAttributes({html:w,element:x,storage:t,intent:a,linkService:r}),x.children?.length>0)f.push([x,-1,w]);else if(x.value){const S=document.createTextNode(x.value);l&&Qd.shouldBuildText(b)&&d.push(S),w.append(S)}}for(const m of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ra="http://www.w3.org/2000/svg";class Ko{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function cu(n,e="text"){if(Cd(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class Hh{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=s,r*=t;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let f,m,g,y;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,m=0,g=0,y=1;break;case 90:f=0,m=1,g=1,y=0;break;case 270:f=0,m=-1,g=-1,y=0;break;case 0:f=1,m=0,g=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(g=-g,y=-y);let x,b,w,S;f===0?(x=Math.abs(d-e[1])*r+a,b=Math.abs(u-e[0])*r+s,w=(e[3]-e[1])*r,S=(e[2]-e[0])*r):(x=Math.abs(u-e[0])*r+a,b=Math.abs(d-e[1])*r+s,w=(e[2]-e[0])*r,S=(e[3]-e[1])*r),this.transform=[f*r,m*r,g*r,y*r,x-f*r*u-g*r*d,b-m*r*u-y*r*d],this.width=w,this.height=S}get rawDims(){const e=this.viewBox;return Qe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new Hh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const r=[e,t];return Ce.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];Ce.applyTransform(t,this.transform);const r=[e[2],e[3]];return Ce.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return Ce.applyInverseTransform(r,this.transform),r}}class jg extends ol{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Vh(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Ng(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function XL(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function KL(n,e="document.pdf"){if(typeof n!="string")return e;if(Vh(n))return Ke('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const i=l=>{try{let u=decodeURIComponent(l);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:l):u}catch{return l}},a=/\.pdf$/i,s=r.pathname.split("/").at(-1);if(a.test(s))return i(s);if(r.searchParams.size>0){const l=Array.from(r.searchParams.values()).reverse();for(const d of l)if(a.test(d))return i(d);const u=Array.from(r.searchParams.keys()).reverse();for(const d of u)if(a.test(d))return i(d)}if(r.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(u)return i(u[0])}return e}class $j{started=Object.create(null);times=[];time(e){e in this.started&&Ke(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ke(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:a}of this.times)e.push(`${r.padEnd(t)} ${a-i}ms
`);return e.join("")}}function Cd(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function Yr(n){n.preventDefault()}function Qt(n){n.preventDefault(),n.stopPropagation()}function Z9(n){console.log("Deprecated API usage: "+n)}class yp{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const d=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,d==="-"?(s+=f,l+=m):d==="+"&&(s-=f,l-=m),new Date(Date.UTC(r,i,a,s,l,u))}}function ZL(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new Hh({viewBox:a,userUnit:1,scale:e,rotation:t})}function uu(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ke(`Not a valid color format: "${n}"`),[0,0,0])}function J9(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,uu(r))}e.remove()}function Zt(n){const{a:e,b:t,c:r,d:i,e:a,f:s}=n.getTransform();return[e,t,r,i,a,s]}function Zi(n){const{a:e,b:t,c:r,d:i,e:a,f:s}=n.getTransform().invertSelf();return[e,t,r,i,a,s]}function Hs(n,e,t=!1,r=!0){if(e instanceof Hh){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=n,l=In.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${a}px`,f=l?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,m=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(s.width=f,s.height=m):(s.width=m,s.height=f)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Fi{constructor(){const{pixelRatio:e}=Fi;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i,a=-1){let s=1/0,l=1/0,u=1/0;r=Fi.capPixels(r,a),r>0&&(s=Math.sqrt(r/(e*t))),i!==-1&&(l=i/e,u=i/t);const d=Math.min(s,l,u);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const bp=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Q9{static get isDarkMode(){return Qe(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class JL{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),Qe(this,"commentForegroundColor",uu(r))}}function QL(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return n=Math.round(n*r+i),e=Math.round(e*r+i),t=Math.round(t*r+i),[n,e,t]}function Fj(n,e){const t=n[0]/255,r=n[1]/255,i=n[2]/255,a=Math.max(t,r,i),s=Math.min(t,r,i),l=(a+s)/2;if(a===s)e[0]=e[1]=0;else{const u=a-s;switch(e[1]=l<.5?u/(a+s):u/(2-a-s),a){case t:e[0]=((r-i)/u+(r<i?6:0))*60;break;case r:e[0]=((i-t)/u+2)*60;break;case i:e[0]=((t-r)/u+4)*60;break}}e[2]=l}function x_(n,e){const t=n[0],r=n[1],i=n[2],a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(t/60%2-1)),l=i-a/2;switch(Math.floor(t/60)){case 0:e[0]=a+l,e[1]=s+l,e[2]=l;break;case 1:e[0]=s+l,e[1]=a+l,e[2]=l;break;case 2:e[0]=l,e[1]=a+l,e[2]=s+l;break;case 3:e[0]=l,e[1]=s+l,e[2]=a+l;break;case 4:e[0]=s+l,e[1]=l,e[2]=a+l;break;case 5:case 6:e[0]=a+l,e[1]=l,e[2]=s+l;break}}function Uj(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function qj(n,e,t){x_(n,t),t.map(Uj);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];x_(e,t),t.map(Uj);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const zj=new Map;function eI(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=zj.get(t);if(r)return r;const i=new Float32Array(9),a=i.subarray(0,3),s=i.subarray(3,6);Fj(n,s);const l=i.subarray(6,9);Fj(e,l);const u=l[2]<.5,d=u?12:4.5;if(s[2]=u?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),qj(s,l,a)<d){let f,m;u?(f=s[2],m=1):(f=0,m=s[2]);const g=.005;for(;m-f>g;){const y=s[2]=(f+m)/2;u===qj(s,l,a)<d?f=y:m=y}s[2]=u?m:f}return x_(s,a),r=Ce.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),zj.set(t,r),r}function SA({html:n,dir:e,className:t},r){const i=document.createDocumentFragment();if(typeof n=="string"){const a=document.createElement("p");a.dir=e||"auto";const s=n.split(/(?:\r\n?|\n)/);for(let l=0,u=s.length;l<u;++l){const d=s[l];a.append(document.createTextNode(d)),l<u-1&&a.append(document.createElement("br"))}i.append(a)}else _A.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),r.append(i)}class Bd{#e=null;#t=null;#r;#n=null;#s=null;#i=null;#a=null;#o=null;static#c=null;constructor(e){this.#r=e,Bd.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#r._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Yr,{signal:t}),e.addEventListener("pointerdown",Bd.#l,{signal:t}));const r=this.#n=document.createElement("div");r.className="buttons",e.append(r);const i=this.#r.toolbarPosition;if(i){const{style:a}=e,s=this.#r._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#r._focusEventsAllowed=!1,Qt(e)}#d(e){this.#r._focusEventsAllowed=!0,Qt(e)}#f(e){const t=this.#r._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Yr,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#r,r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",Bd.#c[e]),this.#f(r)&&r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(r)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#s=e}addComment(e,t=null){if(this.#i)return;const r=e.renderForToolbar();if(!r)return;this.#f(r);const i=this.#a=this.#g;t?(this.#n.insertBefore(r,t),this.#n.insertBefore(i,t)):this.#n.append(r,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#r);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){switch(e){case"comment":this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null;break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,r){const i=this.#n.querySelector(r);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class eV{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#r._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Yr,{signal:t});const r=this.#e=document.createElement("div");return r.className="buttons",e.append(r),this.#r.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#r.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#r.highlightSelection("floating_button")}),e}#s(e,t){let r=0,i=0;for(const a of e){const s=a.y+a.height;if(s<r)continue;const l=a.x+(t?a.width:0);if(s>r){i=l,r=s;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,r]}show(e,t,r){const[i,a]=this.#s(t,r),{style:s}=this.#t||=this.#n();e.append(this.#t),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,r,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",r);const l=this.#r._signal;l instanceof AbortSignal&&!l.aborted&&(a.addEventListener("contextmenu",Yr,{signal:l}),a.addEventListener("click",i,{signal:l})),this.#e.append(a)}}function tI(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}class tV{#e=0;get id(){return`${Zd}${this.#e++}`}}class AA{#e=wA();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Qe(this,"_isSVGFittingCanvas",a)}async#n(e,t){this.#r||=new Map;let r=this.#r.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(r.url=t,i=await cu(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=AA._isSVGFittingCanvas,s=new FileReader,l=new Image,u=new Promise((d,f)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,d()},s.onload=async()=>{const m=r.svgUrl=s.result;l.src=await a?`${m}#svgView(preserveAspectRatio(none))`:m},l.onerror=s.onerror=f});s.readAsDataURL(i),await u}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){Ke(i),r=null}return this.#r.set(e,r),r&&this.#r.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:i,type:a}=e;return this.#n(`${t}_${r}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const r=await t;return this.#n(e,r)}async getFromId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#r||=new Map;let r=this.#r.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,r),this.#r.set(r.id,r),r}getSvgUrl(e){const t=this.#r.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#r||=new Map;const t=this.#r.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class nV{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:t,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:l=!1}){if(i&&e(),this.#t)return;const u={cmd:e,undo:t,post:r,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(u);return}if(s&&this.#e[this.#n].type===a){l&&(u.undo=this.#e[this.#n].undo),this.#e[this.#n]=u;return}const d=this.#n+1;d===this.#r?this.#e.splice(0,1):(this.#n=d,d<this.#e.length&&this.#e.splice(d)),this.#e.push(u)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class Gh{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=In.platform;for(const[r,i,a={}]of e)for(const s of r){const l=s.startsWith("mac+");t&&l?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!t&&!l&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:l=null}}=r;l&&!l(e,t)||(i.bind(e,...s,t)(),a||Qt(t))}}class EA{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return J9(e),Qe(this,"_colors",e)}convert(e){const t=uu(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((a,s)=>a===t[s]))return EA._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Ce.makeHexColor(...t):e}}class Ga{#e=new AbortController;#t=null;#r=null;#n=new Map;#s=new Map;#i=null;#a=null;#o=null;#c=new nV;#l=null;#h=null;#d=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#v=!1;#b=!1;#y=!1;#E=null;#S=null;#w=null;#O=null;#_=!1;#A=null;#N=new tV;#C=!1;#j=!1;#I=!1;#P=null;#k=null;#B=null;#D=null;#H=null;#T=Xe.NONE;#x=new Set;#R=null;#$=null;#U=null;#W=null;#G=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#q=[0,0];#L=null;#V=null;#J=null;#Q=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Ga.prototype,t=s=>s.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),r=(s,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Qe(this,"_keyboardManager",new Gh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:l})=>!(l instanceof HTMLButtonElement)&&s.#V.contains(l)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:l})=>!(l instanceof HTMLButtonElement)&&s.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,r,i,a,s,l,u,d,f,m,g,y,x,b,w){const S=this._signal=this.#e.signal;this.#V=e,this.#J=t,this.#Q=r,this.#i=i,this.#l=a,this.#$=s,this.#G=u,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:S}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),l._on("setpreference",this.onSetPreference.bind(this),{signal:S}),l._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:S}),window.addEventListener("pointerdown",()=>{this.#j=!0},{capture:!0,signal:S}),window.addEventListener("pointerup",()=>{this.#j=!1},{capture:!0,signal:S}),this.#le(),this.#he(),this.#te(),this.#a=u.annotationStorage,this.#E=u.filterFactory,this.#U=d,this.#O=f||null,this.#v=m,this.#b=g,this.#y=y,this.#H=x||null,this.viewParameters={realScale:Ko.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=w!==!1,a?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#n.clear(),this.#p.clear(),this.#D?.clear(),this.#t=null,this.#x.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#$?.destroy(),this.#A?.hide(),this.#A=null,this.#B?.destroy(),this.#B=null,this.#r=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#G=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#H}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Qe(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Qe(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Qe(this,"_highlightColors",this.#O?new Map(this.#O.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Qe(this,"highlightColors",null);const t=new Map,r=!!this.#U;for(const[i,a]of e){const s=i.endsWith("_HCM");if(r&&s){t.set(i.replace("_HCM",""),a);continue}!r&&!s&&t.set(i,a)}return Qe(this,"highlightColors",t)}get highlightColorNames(){return Qe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,r,i){this.#l?.showDialog(this,e,t,r,i)}selectComment(e,t){this.#s.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,r=void 0){this.#l?.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#s.has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){this.#$?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#$}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#y=t;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#V.focus()}findParent(e,t){for(const r of this.#s.values()){const{x:i,y:a,width:s,height:l}=r.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=a&&t<=a+l)return r}return null}disableUserSelect(e=!1){this.#J.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ko.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Z({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#s.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:l}=r,u=r.toString(),f=this.#Z(r).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;r.empty();const g=this.#ee(f),y=this.#T===Xe.NONE,x=()=>{const b=g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:l,text:u});y&&this.showAllEditors("highlight",!0,!0),t&&b?.editComment()};if(y){this.switchToMode(Xe.HIGHLIGHT,x);return}x()}commentSelection(e=""){this.highlightSelection(e,!0)}#se(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#Z(e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#A||=new eV(this),this.#A.show(r,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${Zd}${e}`,r=this.#a.getRawValue(t);return r&&this.#a.remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const r=this.#Q;r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#R&&(this.#A?.hide(),this.#R=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#R)return;const i=this.#Z(e).closest(".textLayer");if(!i){this.#R&&(this.#A?.hide(),this.#R=null,this.#M({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#R=t,this.#M({hasSelectedText:!0}),!(this.#T!==Xe.HIGHLIGHT&&this.#T!==Xe.NONE)&&(this.#T===Xe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#_=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#T===Xe.HIGHLIGHT?this.#ee(i):null;if(a?.toggleDrawing(),this.#j){const s=new AbortController,l=this.combinedSignal(s),u=d=>{d.type==="pointerup"&&d.button!==0||(s.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",u,{signal:l}),window.addEventListener("blur",u,{signal:l})}else a?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#T===Xe.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#se()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#x)if(t.div.contains(e)){this.#k=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[e,t]=this.#k;this.#k=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#P)return;this.#P=new AbortController;const e=this.combinedSignal(this.#P);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#P?.abort(),this.#P=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#re(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#re()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#u)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#u)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#x){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){Ke(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const u of r){const d=await i.deserialize(u);if(!d)return;a.push(d)}const s=()=>{for(const u of a)this.#ie(u);this.#ae(a)},l=()=>{for(const u of a)u.remove()};this.addCommands({cmd:s,undo:l,mustExec:!0})}catch(a){Ke(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Xe.NONE&&!this.isEditorHandlingKeyboard&&Ga._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#M(e){Object.entries(e).some(([r,i])=>this.#Y[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#T===Xe.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#z([[ut.HIGHLIGHT_FREE,!0]]))}#z(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#M({isEditing:this.#T!==Xe.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#re(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#z(t.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#s.set(e.pageIndex,e),this.#C?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,t=null,r=!1,i=!1,a=!1){if(this.#T!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===Xe.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===Xe.NONE){this.setEditingState(!1),this.#me();for(const s of this.#n.values())s.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const s of this.#n.values())s.addStandaloneCommentButton();e===Xe.SIGNATURE&&await this.#$?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const s of this.#s.values())s.updateMode(e);if(e===Xe.POPUP){this.#r||=await this.#G.getAnnotationsByType(new Set(this.#u.map(u=>u._editorType)));const s=new Set,l=[];for(const u of this.#n.values()){const{annotationElementId:d,hasComment:f,deleted:m}=u;d&&s.add(d),f&&!m&&l.push(u.getData())}for(const u of this.#r){const{id:d,popupRef:f,contentsObj:m}=u;f&&m?.str&&!s.has(d)&&!this.#g.has(d)&&l.push(u)}this.#l?.showSidebar(l)}if(!t){r&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const s of this.#n.values())s.uid===t?(this.setSelected(s),a?s.editComment():i?s.enterInEditMode():s.focus()):s.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case ut.CREATE:this.currentLayer.addNewEditor(t);return;case ut.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of this.#x)r.updateParams(e,t);else for(const r of this.#u)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const a of this.#n.values())a.editorType===e&&a.show(t);(this.#W?.get(ut.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#z([[ut.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#I!==e){this.#I=e;for(const t of this.#s.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#C){this.#C=!0;const e=[];for(const t of this.#s.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#me(){if(this.unselectAll(),this.#C){this.#C=!1;for(const e of this.#s.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#D?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#s.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#z(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#x);return e}updateUI(e){this.#pe===e&&this.#z(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#z(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#x.has(e)){this.#x.delete(e),e.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#x.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#x)t!==e&&t.unselect();this.#x.clear(),this.#x.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(e){return this.#x.has(e)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(e){e.unselect(),this.#x.delete(e),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#M({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#x],r=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const a of t)this.#ie(a)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ae(e){for(const t of this.#x)t.unselect();this.#x.clear();for(const t of e)t.isEmpty()||(this.#x.add(t),t.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#x)e.commit();this.#ae(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==Xe.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#x)e.unselect();this.#x.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#q[0]+=e,this.#q[1]+=t;const[i,a]=this.#q,s=[...this.#x],l=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#q[0]=this.#q[1]=0,this.addCommands({cmd:()=>{for(const u of s)this.#n.has(u.id)&&(u.translateInPage(i,a),u.translationDone())},undo:()=>{for(const u of s)this.#n.has(u.id)&&(u.translateInPage(-i,-a),u.translationDone())},mustExec:!1})},l);for(const u of s)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#x)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:i,y:a,pageIndex:s},l]of e)l.newX=i,l.newY=a,l.newPageIndex=s,t||=i!==l.savedX||a!==l.savedY||s!==l.savedPageIndex;if(!t)return!1;const r=(i,a,s,l)=>{if(this.#n.has(i.id)){const u=this.#s.get(l);u?i._setParentAndPosition(u,a,s):(i.pageIndex=l,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:l}]of e)r(i,a,s,l)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:l}]of e)r(i,a,s,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const r of this.#m.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==Xe.NONE}get imageManager(){return Qe(this,"imageManager",new AA)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,f=t.rangeCount;d<f;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:r,y:i,width:a,height:s}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,f,m,g)=>({x:(f-i)/s,y:1-(d+m-r)/a,width:g/s,height:m/a});break;case"180":l=(d,f,m,g)=>({x:1-(d+m-r)/a,y:1-(f+g-i)/s,width:m/a,height:g/s});break;case"270":l=(d,f,m,g)=>({x:1-(f+g-i)/s,y:(d-r)/a,width:g/s,height:m/a});break;default:l=(d,f,m,g)=>({x:(d-r)/a,y:(f-i)/s,width:m/a,height:g/s});break}const u=[];for(let d=0,f=t.rangeCount;d<f;d++){const m=t.getRangeAt(d);if(!m.collapsed)for(const{x:g,y,width:x,height:b}of m.getClientRects())x===0||b===0||u.push(l(g,y,x,b))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const r=this.#a.getRawValue(t);r&&(this.#T===Xe.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){const i=this.#D?.get(e);i&&(i.setCanvas(t,r),this.#D.delete(e))}addMissingCanvas(e,t){(this.#D||=new Map).set(e,t)}}class ea{#e=null;#t=!1;#r=null;#n=null;#s=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,ea.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){ea._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",ea.#f.missing),t.setAttribute("data-l10n-id",ea.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#c._uiManager._signal;e.addEventListener("contextmenu",Yr,{signal:r}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#a=!0,i(a))},{signal:r}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await ea._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(this.#l=r,this.#h=i),!(this.#e===e&&this.#t===t)&&(a||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#r&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#s=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#r;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",ea.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ea.#f[`${this.#g}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#s;if(!t){this.#s=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#s.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s?.classList.remove("show")},{signal:a})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Pm{#e=null;#t=null;#r=!1;#n=null;#s=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(r.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:r}=this.#e.getBoundingClientRect(),{x:i,y:a,width:s,height:l}=this.#n.parent.boundingClientRect;return[(e-i)/s,(t+r-a)/l]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const r=this.#n._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Yr,{signal:r}),t&&(e.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,Qt(a)},{capture:!0,signal:r}),e.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,Qt(a)},{capture:!0,signal:r})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#r=!0,i(a))},{signal:r}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:r}),e}edit(e){const t=this.commentPopupPositionInLayer;let r,i;if(t)[r,i]=t;else{[r,i]=this.#n.commentButtonPosition;const{width:f,height:m,x:g,y}=this.#n;r=g+r*f,i=y+i*m}const a=this.#n.parent.boundingClientRect,{x:s,y:l,width:u,height:d}=a;this.#n._uiManager.editComment(this.#n,s+r*u,l+i*d,{...e,parentDimensions:a})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#r}),this.#r=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#s}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#i=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#s=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#o=null,this.#n=null,this.#r=!1,this.#c=!1}}class Wh{#e;#t=!1;#r=null;#n;#s;#i;#a;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:l}){this.#e=e,this.#r=r,this.#n=t,this.#s=i,this.#i=a,this.#a=s,this.#h=new AbortController,this.#c=AbortSignal.any([l,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Fi.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#c,i.signal]),s=this.#e,l={capture:!0,signal:a,passive:!1},u=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};s.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Qt(d),u(d))},l),s.addEventListener("pointerup",u,l),s.addEventListener("pointercancel",u,l);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),a=this.#e,s={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),s);const l=this.#m.bind(this);a.addEventListener("touchend",l,s),a.addEventListener("touchcancel",l,s),s.capture=!0,a.addEventListener("pointerdown",Qt,s),a.addEventListener("pointermove",Qt,s),a.addEventListener("pointercancel",Qt,s),a.addEventListener("pointerup",Qt,s),this.#s?.()}if(Qt(e),e.touches.length!==2||this.#r?.()){this.#l=null;return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;Qt(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:a}=t,{screenX:s,screenY:l}=r,u=this.#l,{touch0X:d,touch0Y:f,touch1X:m,touch1Y:g}=u,y=m-d,x=g-f,b=s-i,w=l-a,S=Math.hypot(b,w)||1,O=Math.hypot(y,x)||1;if(!this.#t&&Math.abs(O-S)<=Wh.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=a,u.touch1X=s,u.touch1Y=l,!this.#t){this.#t=!0;return}const T=[(i+s)/2,(a+l)/2];this.#i?.(T,O,S)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#a?.()),this.#l&&(Qt(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class $e{#e=null;#t=null;#r=null;#n=null;#s=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#v=!1;#b=!1;#y=null;#E=0;#S=0;#w=null;#O=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#_=!1;#A=$e._zIndex++;static _borderLineWidth=-1;static _colorManager=new EA;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=$e.prototype._resizeWithKeyboard,t=Ga.TRANSLATE_SMALL,r=Ga.TRANSLATE_BIG;return Qe(this,"_resizerKeyboardManager",new Gh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],$e.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,s];const[l,u]=this.parentDimensions;this.x=e.x/l,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Qe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new rV({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if($e._l10n??=e,$e._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),$e._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);$e._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){kt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#_}set _isDraggable(e){this.#_=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#A}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[a,s]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/a,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}#N([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#N(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#N(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:l}=this;const[u,d]=this.getBaseTranslation();s+=u,l+=d;const{style:f}=r;f.left=`${(100*s).toFixed(2)}%`,f.top=`${(100*l).toFixed(2)}%`,this._onTranslating(s,l),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=$e,i=r/e,a=r/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:a,y:s,width:l,height:u}=this;if(l*=r,u*=i,a*=r,s*=i,this._mustFixPosition)switch(e){case 0:a=er(a,0,r-l),s=er(s,0,i-u);break;case 90:a=er(a,0,r-u),s=er(s,l,i);break;case 180:a=er(a,l,r),s=er(s,u,i);break;case 270:a=er(a,u,r),s=er(s,0,i-l);break}this.x=a/=r,this.y=s/=i;const[d,f]=this.getBaseTranslation();a+=d,s+=f,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#C(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return $e.#C(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return $e.#C(e,t,360-this.parentRotation)}#j(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#P.bind(this,r),{signal:t}),i.addEventListener("contextmenu",Yr,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#P(e,t){t.preventDefault();const{isMac:r}=In.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#r?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#D.bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Qt,{passive:!1,signal:s}),window.addEventListener("contextmenu",Yr,{signal:s}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=u,this.#B()};window.addEventListener("pointerup",d,{signal:s}),window.addEventListener("blur",d,{signal:s})}#k(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#h;this.#h=null;const a=this.x,s=this.y,l=this.width,u=this.height;a===e&&s===t&&l===r&&u===i||this.addCommands({cmd:this.#k.bind(this,a,s,l,u),undo:this.#k.bind(this,e,t,r,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#D(e,t){const[r,i]=this.parentDimensions,a=this.x,s=this.y,l=this.width,u=this.height,d=$e.MIN_SIZE/r,f=$e.MIN_SIZE/i,m=this.#j(this.rotation),g=(I,z)=>[m[0]*I+m[2]*z,m[1]*I+m[3]*z],y=this.#j(360-this.rotation),x=(I,z)=>[y[0]*I+y[2]*z,y[1]*I+y[3]*z];let b,w,S=!1,O=!1;switch(e){case"topLeft":S=!0,b=(I,z)=>[0,0],w=(I,z)=>[I,z];break;case"topMiddle":b=(I,z)=>[I/2,0],w=(I,z)=>[I/2,z];break;case"topRight":S=!0,b=(I,z)=>[I,0],w=(I,z)=>[0,z];break;case"middleRight":O=!0,b=(I,z)=>[I,z/2],w=(I,z)=>[0,z/2];break;case"bottomRight":S=!0,b=(I,z)=>[I,z],w=(I,z)=>[0,0];break;case"bottomMiddle":b=(I,z)=>[I/2,z],w=(I,z)=>[I/2,0];break;case"bottomLeft":S=!0,b=(I,z)=>[0,z],w=(I,z)=>[I,0];break;case"middleLeft":O=!0,b=(I,z)=>[0,z/2],w=(I,z)=>[I,z/2];break}const T=b(l,u),M=w(l,u);let N=g(...M);const j=$e._round(a+N[0]),C=$e._round(s+N[1]);let R=1,k=1,F,D;if(t.fromKeyboard)({deltaX:F,deltaY:D}=t);else{const{screenX:I,screenY:z}=t,[q,J]=this.#l;[F,D]=this.screenToPageTranslation(I-q,z-J),this.#l[0]=I,this.#l[1]=z}if([F,D]=x(F/r,D/i),S){const I=Math.hypot(l,u);R=k=Math.max(Math.min(Math.hypot(M[0]-T[0]-F,M[1]-T[1]-D)/I,1/l,1/u),d/l,f/u)}else O?R=er(Math.abs(M[0]-T[0]-F),d,1)/l:k=er(Math.abs(M[1]-T[1]-D),f,1)/u;const L=$e._round(l*R),B=$e._round(u*k);N=g(...w(L,B));const V=j-N[0],H=C-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=L,this.height=B,this.x=V,this.y=H,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new Bd(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#r?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(ea.initialize($e._l10n),this.#r=new ea(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Pm(this)}addStandaloneCommentButton(){if(this.#s){this._uiManager.isEditingMode()&&this.#s.classList.remove("hidden");return}this.hasComment&&(this.#s=this.#n.renderForStandalone(),this.div.append(this.#s))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#s=null}hideStandaloneCommentButton(){this.#s?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:i}}=this.#n;return{text:t,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Pm(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(this.#n||=new Pm(this),this.#n.setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Pm(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,l=s+a+1,u=i-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,u,d,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#U();const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),tI(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#O||=new Wh({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#H.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#x.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#H(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,t,r){let a=.7*(r/t)+1-.7;if(a===1)return;const s=this.#j(this.rotation),l=(j,C)=>[s[0]*j+s[2]*C,s[1]*j+s[3]*C],[u,d]=this.parentDimensions,f=this.x,m=this.y,g=this.width,y=this.height,x=$e.MIN_SIZE/u,b=$e.MIN_SIZE/d;a=Math.max(Math.min(a,1/g,1/y),x/g,b/y);const w=$e._round(g*a),S=$e._round(y*a);if(w===g&&S===y)return;this.#u||=[f,m,g,y];const O=l(g/2,y/2),T=$e._round(f+O[0]),M=$e._round(m+O[1]),N=l(w/2,S/2);this.x=T-N[0],this.y=M-N[1],this.width=w,this.height=S,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#x(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:t}=In.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#$(e);return}this.#R(e)}#R(e){const{isMac:t}=In.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#$(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},l=d=>{i.abort(),this.#a=null,this.#m=!1,this._uiManager.endDragSession()||this.#R(d),r&&this._onStopDragging()};t&&(this.#E=e.clientX,this.#S=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",d=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:m,pointerId:g}=d;if(g!==this.#a){Qt(d);return}const[y,x]=this.screenToPageTranslation(f-this.#E,m-this.#S);this.#E=f,this.#S=m,this._uiManager.dragSelectedEditors(y,x)},s),window.addEventListener("touchmove",Qt,s),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#O||d.isPrimary)&&l(d),Qt(d)},s));const u=d=>{if(!this.#a||this.#a===d.pointerId){l(d);return}Qt(d)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[l,u]=this.pageTranslation,d=e/i,f=t/i,m=this.x*a,g=this.y*s,y=this.width*a,x=this.height*s;switch(r){case 0:return[m+d+l,s-g-f-x+u,m+d+y+l,s-g-f+u];case 90:return[m+f+l,s-g+d+u,m+f+x+l,s-g+d+y+u];case 180:return[m-d-y+l,s-g+f+u,m-d+l,s-g+f+x+u];case 270:return[m-f-x+l,s-g-d-y+u,m-f+l,s-g-d+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,a,s]=e,l=a-r,u=s-i;switch(this.rotation){case 0:return[r,t-s,l,u];case 90:return[r,t-i,u,l];case 180:return[a,t-i,l,u];case 270:return[a,t-s,u,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&$e._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:i,deleted:a,richText:s},uid:l,pageIndex:u,creationDate:d,modificationDate:f}=this;return{id:l,pageIndex:u,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:d,modificationDate:r||f,popupRef:!a,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return t<s&&i>0&&e<a&&r>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#U()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[l,u,d,f]=i.getRectInCurrentCoords(e.rect,s);return i.x=l/a,i.y=u/s,i.width=d/a,i.height=f/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#O?.destroy(),this.#O=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,i,a,s]=this.getPDFRect();return[$e._round(r+(a-r)*e),$e._round(i+(s-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const s=this.#W.bind(this),l=this.#G.bind(this),u=this._uiManager._signal;for(const d of this.#t){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",s,{signal:u}),d.addEventListener("blur",l,{signal:u}),d.addEventListener("focus",this.#Y.bind(this,f),{signal:u}),d.setAttribute("data-l10n-id",$e._l10nResizer[f])}}const r=this.#t[0];let i=0;for(const s of t){if(s===r)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let l=0;l<i-a;l++)this.#c.append(this.#c.firstChild);else if(a>i)for(let l=0;l<a-i;l++)this.#c.firstChild.before(this.#c.lastChild);let s=0;for(const l of t){const d=this.#t[s++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",$e._l10nResizer[d])}}this.#q(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#W(e){$e._resizerKeyboardManager.exec(this,e)}#G(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#Y(e){this.#g=this.#b?e:""}#q(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#D(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#b=!1,this.#q(-1),this.#B()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:r}=e;let i=this.#w.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(r),this.#w.size===0&&(this.#w=null)},$e._telemetryTimeout),this.#w.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class rV extends $e{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Hj=3285377520,ui=4294901760,Ji=65535;class nI{constructor(e){this.h1=e?e&4294967295:Hj,this.h2=e?e&4294967295:Hj}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let b=0,w=e.length;b<w;b++){const S=e.charCodeAt(b);S<=255?t[r++]=S:(t[r++]=S>>>8,t[r++]=S&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,a=r-i*4,s=new Uint32Array(t.buffer,0,i);let l=0,u=0,d=this.h1,f=this.h2;const m=3432918353,g=461845907,y=m&Ji,x=g&Ji;for(let b=0;b<i;b++)b&1?(l=s[b],l=l*m&ui|l*y&Ji,l=l<<15|l>>>17,l=l*g&ui|l*x&Ji,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(u=s[b],u=u*m&ui|u*y&Ji,u=u<<15|u>>>17,u=u*g&ui|u*x&Ji,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,a){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*m&ui|l*y&Ji,l=l<<15|l>>>17,l=l*g&ui|l*x&Ji,i&1?d^=l:f^=l}this.h1=d,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ui|e*36045&Ji,t=t*4283543511&ui|((t<<16|e>>>16)*2950163797&ui)>>>16,e^=t>>>1,e=e*444984403&ui|e*60499&Ji,t=t*3301882366&ui|((t<<16|e>>>16)*3120437893&ui)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const __=Object.freeze({map:null,hash:"",transfer:void 0});class TA{#e=!1;#t=null;#r=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof $e&&this.#r.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of this.#n.values())if(r instanceof $e)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let i=!1;if(r!==void 0)for(const[a,s]of Object.entries(t))r[a]!==s&&(i=!0,r[a]=s);else i=!0,this.#n.set(e,t);i&&this.#s(),t instanceof $e&&((this.#r||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rI(this)}get serializable(){if(this.#n.size===0)return __;const e=new Map,t=new nI,r=[],i=Object.create(null);let a=!1;for(const[s,l]of this.#n){const u=l instanceof $e?l.serialize(!1,i):l;u&&(e.set(s,u),t.update(`${s}:${JSON.stringify(u)}`),a||=!!u.bitmap)}if(a)for(const s of e.values())s.bitmap&&r.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:__}get editorStats(){let e=null;const t=new Map;let r=0,i=0;for(const a of this.#n.values()){if(!(a instanceof $e)){a.popup&&(a.popup.deleted?i+=1:r+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(r+=1);const s=a.telemetryFinalData;if(!s)continue;const{type:l}=s;t.has(l)||t.set(l,Object.getPrototypeOf(a).constructor),e||=Object.create(null);const u=e[l]||=new Map;for(const[d,f]of Object.entries(s)){if(d==="type")continue;let m=u.get(d);m||(m=new Map,u.set(d,m));const g=m.get(f)??0;m.set(f,g+1)}}if((i>0||r>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:r}),!e)return null;for(const[a,s]of t)e[a]=s.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const r=this.#r?.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#r?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#r)for(const t of this.#r.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class rI extends TA{#e;constructor(e){super();const{map:t,hash:r,transfer:i}=e.serializable,a=structuredClone(t,i?{transfer:i}:null);this.#e={map:a,hash:r,transfer:i}}get print(){kt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Qe(this,"modifiedIds",{ids:new Set,hash:""})}}class iV{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||this.#e.has(e.loadedName))){if(ht(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,l=new FontFace(i,a,s);this.addNativeFontFace(l);try{await l.load(),this.#e.add(i),r?.(e)}catch{Ke(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}kt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw Ke(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Qe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Qe(this,"isSyncFontLoadingSupported",cr||In.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ht(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Qe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(M,N){return M.charCodeAt(N)<<24|M.charCodeAt(N+1)<<16|M.charCodeAt(N+2)<<8|M.charCodeAt(N+3)&255}function i(M,N,j,C){const R=M.substring(0,N),k=M.substring(N+j);return R+C+k}let a,s;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let d=0;function f(M,N){if(++d>30){Ke("Load test font never loaded."),N();return}if(u.font="30px "+M,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(f.bind(null,M,N))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=i(g,976,m.length,m);const x=16,b=1482184792;let w=r(g,x);for(a=0,s=m.length-3;a<s;a+=4)w=w-b+r(m,a)|0;a<m.length&&(w=w-b+r(m+"XXX",a)|0),g=i(g,x,4,V9(w));const S=`url(data:font/opentype;base64,${btoa(g)});`,O=`@font-face {font-family:"${m}";src:${S}}`;this.insertRule(O);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const M of[e.loadedName,m]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=M,T.append(N)}this._document.body.append(T),f(m,()=>{T.remove(),t.complete()})}}class aV{#e;constructor(e,t=null,r,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${YL(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(s){Ke(`getPathGenerator - ignoring character: "${s}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=a}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function sV(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(cr)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oV(n){if(cr&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return zh(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Rm(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const S_=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,lV=n=>typeof n=="object"&&typeof n?.name=="string",iI=X9.bind(null,S_,lV);class cV{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:a}=r;if(a.aborted){Ke("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const km={DATA:1,ERROR:2},bn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Vj(){}function xr(n){if(n instanceof Va||n instanceof vp||n instanceof Ij||n instanceof Jd||n instanceof V0)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||kt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Va(n.message);case"InvalidPDFException":return new vp(n.message);case"PasswordException":return new Ij(n.message,n.code);case"ResponseException":return new Jd(n.message,n.status,n.missing);case"UnknownErrorException":return new V0(n.message,n.details)}return new V0(n.message,n.toString())}class jd{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===km.DATA)i.resolve(e.data);else if(e.callback===km.ERROR)i.reject(xr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(s){a.postMessage({sourceName:r,targetName:i,callback:km.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:r,targetName:i,callback:km.ERROR,callbackId:e.callbackId,reason:xr(s)})});return}if(e.streamId){this.#r(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,r,i){const a=this.streamId++,s=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:l,action:e,streamId:a,data:t,desiredSize:d.desiredSize},i),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[a].pullCall=f,u.postMessage({sourceName:s,targetName:l,stream:bn.PULL,streamId:a,desiredSize:d.desiredSize}),f.promise},cancel:d=>{ht(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[a].cancelCall=f,this.streamControllers[a].isClosed=!0,u.postMessage({sourceName:s,targetName:l,stream:bn.CANCEL,streamId:a,reason:xr(d)}),f.promise}},r)}#r(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this,l=this.actionHandler[e.action],u={enqueue(d,f=1,m){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=f,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:bn.ENQUEUE,streamId:t,chunk:d},m)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:bn.CLOSE,streamId:t}),delete s.streamSinks[t])},error(d){ht(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:bn.ERROR,streamId:t,reason:xr(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(l,e.data,u).then(function(){a.postMessage({sourceName:r,targetName:i,stream:bn.START_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:bn.START_COMPLETE,streamId:t,reason:xr(d)})})}#n(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case bn.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(xr(e.reason));break;case bn.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(xr(e.reason));break;case bn.PULL:if(!l){a.postMessage({sourceName:r,targetName:i,stream:bn.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||Vj).then(function(){a.postMessage({sourceName:r,targetName:i,stream:bn.PULL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:bn.PULL_COMPLETE,streamId:t,reason:xr(d)})});break;case bn.ENQUEUE:if(ht(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case bn.CLOSE:if(ht(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#s(s,t);break;case bn.ERROR:ht(s,"error should have stream controller"),s.controller.error(xr(e.reason)),this.#s(s,t);break;case bn.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(xr(e.reason)),this.#s(s,t);break;case bn.CANCEL:if(!l)break;const u=xr(e.reason);Promise.try(l.onCancel||Vj,u).then(function(){a.postMessage({sourceName:r,targetName:i,stream:bn.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:bn.CANCEL_COMPLETE,streamId:t,reason:xr(d)})}),l.sinkCapability.reject(u),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#s(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class aI{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){kt("Abstract method `_createCanvas` called.")}}class uV extends aI{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class sI{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){kt("Abstract method `_fetch` called.")}}class Gj extends sI{async _fetch(e){const t=await cu(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):zh(t)}}class oI{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,a){return"none"}destroy(e=!1){}}class dV extends oI{#e;#t;#r;#n;#s;#i;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#s=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#r){const e=this.#s.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#s.createElementNS(Ra,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#r=this.#s.createElementNS(Ra,"defs"),e.append(r),r.append(this.#r),this.#s.body.append(e)}return this.#r}#h(e){if(e.length===1){const u=e[0],d=new Array(256);for(let m=0;m<256;m++)d[m]=u[m]/255;const f=d.join(",");return[f,f,f]}const[t,r,i]=e,a=new Array(256),s=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=t[u]/255,s[u]=r[u]/255,l[u]=i[u]/255;return[a.join(","),s.join(","),l.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#s.URL;t!==this.#s.baseURI&&(Vh(t)?Ke('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=bA(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[r,i,a]=this.#h(e),s=e.length===1?r:`${r}${i}${a}`;if(t=this.#o.get(s),t)return this.#o.set(e,t),t;const l=`g_${this.#n}_transfer_map_${this.#a++}`,u=this.#d(l);this.#o.set(e,u),this.#o.set(s,u);const d=this.#m(l);return this.#p(r,i,a,d),u}addHCMFilter(e,t){const r=`${e}-${t}`,i="base";let a=this.#c.get(i);if(a?.key===r||(a?(a.filter?.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},this.#c.set(i,a)),!e||!t))return a.url;const s=this.#b(e);e=Ce.makeHexColor(...s);const l=this.#b(t);if(t=Ce.makeHexColor(...l),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const u=new Array(256);for(let y=0;y<=255;y++){const x=y/255;u[y]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const d=u.join(","),f=`g_${this.#n}_hcm_filter`,m=a.filter=this.#m(f);this.#p(d,d,d,m),this.#g(m);const g=(y,x)=>{const b=s[y]/255,w=l[y]/255,S=new Array(x+1);for(let O=0;O<=x;O++)S[O]=b+O/x*(w-b);return S.join(",")};return this.#p(g(0,5),g(1,5),g(2,5),m),a.url=this.#d(f),a.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[r]=this.#h([e]),i=`alpha_${r}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_alpha_map_${this.#a++}`,s=this.#d(a);this.#o.set(e,s),this.#o.set(i,s);const l=this.#m(a);return this.#v(r,l),s}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let r,i;if(e?([r]=this.#h([e]),i=`luminosity_${r}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_luminosity_map_${this.#a++}`,s=this.#d(a);this.#o.set(e,s),this.#o.set(i,s);const l=this.#m(a);return this.#f(l),e&&this.#v(r,l),s}addHighlightHCMFilter(e,t,r,i,a){const s=`${t}-${r}-${i}-${a}`;let l=this.#c.get(e);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#c.set(e,l)),!t||!r))return l.url;const[u,d]=[t,r].map(this.#b.bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,y]=[i,a].map(this.#b.bind(this));m<f&&([f,m,g,y]=[m,f,y,g]),this.#l.style.color="";const x=(S,O,T)=>{const M=new Array(256),N=(m-f)/T,j=S/255,C=(O-S)/(255*T);let R=0;for(let k=0;k<=T;k++){const F=Math.round(f+k*N),D=j+k*C;for(let L=R;L<=F;L++)M[L]=D;R=F+1}for(let k=R;k<256;k++)M[k]=M[R-1];return M.join(",")},b=`g_${this.#n}_hcm_${e}_filter`,w=l.filter=this.#m(b);return this.#g(w),this.#p(x(g[0],y[0],5),x(g[1],y[1],5),x(g[2],y[2],5),w),l.url=this.#d(b),l.url}destroy(e=!1){e&&this.#i?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(e){const t=this.#s.createElementNS(Ra,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#s.createElementNS(Ra,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#s.createElementNS(Ra,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,r){const i=this.#s.createElementNS(Ra,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#p(e,t,r,i){const a=this.#s.createElementNS(Ra,"feComponentTransfer");i.append(a),this.#u(a,"feFuncR",e),this.#u(a,"feFuncG",t),this.#u(a,"feFuncB",r)}#v(e,t){const r=this.#s.createElementNS(Ra,"feComponentTransfer");t.append(r),this.#u(r,"feFuncA",e)}#b(e){return this.#l.style.color=e,uu(getComputedStyle(this.#l).getPropertyValue("color"))}}class lI{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){kt("Abstract method `_fetch` called.")}}class Wj extends lI{async _fetch(e){const t=await cu(e,"arraybuffer");return new Uint8Array(t)}}class cI{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){kt("Abstract method `_fetch` called.")}}class Yj extends cI{async _fetch(e){const t=await cu(e,"arraybuffer");return new Uint8Array(t)}}cr&&Ke("Please use the `legacy` build in Node.js environments.");async function OA(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class hV extends oI{}class fV extends aI{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class mV extends sI{async _fetch(e){return OA(e)}}class pV extends lI{async _fetch(e){return OA(e)}}class gV extends cI{async _fetch(e){return OA(e)}}const tc="__forcedDependency",{floor:Xj,ceil:Kj}=Math;function Dm(n,e,t,r,i,a){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],a)}const A_=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class vV{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===A_}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Lm=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};class yV{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[tc]:[]};#r=new Map;#n=[];#s=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#m;#u;#p;constructor(e,t,r=!1){this.#f=e.width,this.#g=e.height,this.#v(t),r&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#v(e,this.#u)}#v(e,t){const r=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(r),this.#u=new Uint32Array(r),t&&t.length>0?(this.#u.set(t),this.#u.fill(A_,t.length)):this.#u.fill(A_)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[tc]:{__proto__:this.#t[tc]}},this.#a={__proto__:this.#a},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const r=this.#n.pop();return r!==void 0&&(Lm(this.#p,e)?.dependencies.add(r),this.#u[e]=this.#u[r]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(Lm(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#s.push(e),this}endMarkedContent(e){const t=this.#s.pop();return t!==void 0&&(Lm(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#i.push(Ce.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#r.set(e,t),this}recordSimpleDataFromNamed(e,t,r){this.#e[e]=this.#r.get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(tc,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(tc,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,r,i,a,s){const l=Ce.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];Ce.axialAlignedBoundingBox([r,a,i,s],l,u);const d=Ce.intersect(this.#a,u);return d?(this.#a[0]=d[0],this.#a[1]=d[1],this.#a[2]=d[2],this.#a[3]=d[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,r,i,a,s){const l=this.#a;if(l[0]===1/0)return this;const u=Ce.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(l[0]===-1/0)return Ce.axialAlignedBoundingBox([r,a,i,s],u,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return Ce.axialAlignedBoundingBox([r,a,i,s],u,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],l[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],l[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],l[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,t,r,i=1,a=0,s=0,l){const u=r.bbox;let d,f;if(u&&(d=u[2]!==u[0]&&u[3]!==u[1]&&this.#d.get(r),d!==!1&&(f=[0,0,0,0],Ce.axialAlignedBoundingBox(u,r.fontMatrix,f),(i!==1||a!==0||s!==0)&&Ce.scaleMinMax([i,0,0,-i,a,s],f),d)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!l)return this.recordFullPageBBox(e);const m=l();return u&&f&&d===void 0&&(d=f[0]<=a-m.actualBoundingBoxLeft&&f[2]>=a+m.actualBoundingBoxRight&&f[1]<=s-m.actualBoundingBoxAscent&&f[3]>=s+m.actualBoundingBoxDescent,this.#d.set(r,d),d)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,a-m.actualBoundingBoxLeft,a+m.actualBoundingBoxRight,s-m.actualBoundingBoxAscent,s+m.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const r=this.#l,i=this.#e,a=this.#t;for(const s of t)s in this.#e?r.add(i[s]):s in a&&a[s].forEach(r.add,r);return this}recordNamedDependency(e,t){return this.#r.has(t)&&this.#l.add(this.#r.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[tc]),this.#p){const r=Lm(this.#p,e),{dependencies:i}=r;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#s.forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(this.#c===e){const r=Xj(this.#o[0]*256/this.#f),i=Xj(this.#o[1]*256/this.#g),a=Kj(this.#o[2]*256/this.#f),s=Kj(this.#o[3]*256/this.#g);Dm(this.#m,e,r,i,a,s);for(const l of this.#l)l!==e&&Dm(this.#m,l,r,i,a,s);for(const l of this.#n)l!==e&&Dm(this.#m,l,r,i,a,s);for(const l of this.#s)l!==e&&Dm(this.#m,l,r,i,a,s);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const r=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new vV(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class wp{#e;#t;#r;#n=0;#s=0;constructor(e,t,r){if(e instanceof wp&&e.#r===!!r)return e;this.#e=e,this.#t=t,this.#r=!!r}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#s++,this.#e.save(this.#t),this}restore(e){return this.#s>0&&(this.#e.restore(this.#t),this.#s--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#r||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,r,i,a,s){return this.#r||this.#e.recordClipBox(this.#t,t,r,i,a,s),this}recordBBox(e,t,r,i,a,s){return this.#r||this.#e.recordBBox(this.#t,t,r,i,a,s),this}recordCharacterBBox(e,t,r,i,a,s,l){return this.#r||this.#e.recordCharacterBBox(this.#t,t,r,i,a,s,l),this}recordFullPageBBox(e){return this.#r||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#r||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const di={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Yn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function E_(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class CA{isModifyingCurrentTransform(){return!1}getPattern(){kt("Abstract method `getPattern` called.")}}class bV extends CA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let a;if(i===Yn.STROKE||i===Yn.FILL){const s=t.current.getClippedPathBoundingBox(i,Zt(e))||[0,0,0,0],l=Math.ceil(s[2]-s[0])||1,u=Math.ceil(s[3]-s[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,u),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-s[0],-s[1]),r=Ce.transform(r,[1,0,0,1,s[0],s[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),E_(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),a=e.createPattern(d.canvas,"no-repeat");const m=new DOMMatrix(r);a.setTransform(m)}else E_(e,this._bbox),a=this._createGradient(e);return a}}function Y0(n,e,t,r,i,a,s,l){const u=e.coords,d=e.colors,f=n.data,m=n.width*4;let g;u[t+1]>u[r+1]&&(g=t,t=r,r=g,g=a,a=s,s=g),u[r+1]>u[i+1]&&(g=r,r=i,i=g,g=s,s=l,l=g),u[t+1]>u[r+1]&&(g=t,t=r,r=g,g=a,a=s,s=g);const y=(u[t]+e.offsetX)*e.scaleX,x=(u[t+1]+e.offsetY)*e.scaleY,b=(u[r]+e.offsetX)*e.scaleX,w=(u[r+1]+e.offsetY)*e.scaleY,S=(u[i]+e.offsetX)*e.scaleX,O=(u[i+1]+e.offsetY)*e.scaleY;if(x>=O)return;const T=d[a],M=d[a+1],N=d[a+2],j=d[s],C=d[s+1],R=d[s+2],k=d[l],F=d[l+1],D=d[l+2],L=Math.round(x),B=Math.round(O);let V,H,I,z,q,J,K,U;for(let G=L;G<=B;G++){if(G<w){const ve=G<x?0:(x-G)/(x-w);V=y-(y-b)*ve,H=T-(T-j)*ve,I=M-(M-C)*ve,z=N-(N-R)*ve}else{let ve;G>O?ve=1:w===O?ve=0:ve=(w-G)/(w-O),V=b-(b-S)*ve,H=j-(j-k)*ve,I=C-(C-F)*ve,z=R-(R-D)*ve}let ee;G<x?ee=0:G>O?ee=1:ee=(x-G)/(x-O),q=y-(y-S)*ee,J=T-(T-k)*ee,K=M-(M-F)*ee,U=N-(N-D)*ee;const le=Math.round(Math.min(V,q)),ge=Math.round(Math.max(V,q));let ye=m*G+le*4;for(let ve=le;ve<=ge;ve++)ee=(V-ve)/(V-q),ee<0?ee=0:ee>1&&(ee=1),f[ye++]=H-(H-J)*ee|0,f[ye++]=I-(I-K)*ee|0,f[ye++]=z-(z-U)*ee|0,f[ye++]=255}}function wV(n,e,t){const r=e.coords,i=e.colors;let a,s;switch(e.type){case"lattice":const l=e.verticesPerRow,u=Math.floor(r.length/l)-1,d=l-1;for(a=0;a<u;a++){let f=a*l;for(let m=0;m<d;m++,f++)Y0(n,t,r[f],r[f+1],r[f+l],i[f],i[f+1],i[f+l]),Y0(n,t,r[f+l+1],r[f+1],r[f+l],i[f+l+1],i[f+1],i[f+l])}break;case"triangles":for(a=0,s=r.length;a<s;a+=3)Y0(n,t,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class xV extends CA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-u,m=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),y=d/m,x=f/g,b={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/y,scaleY:1/x},w=m+4,S=g+4,O=r.getCanvas("mesh",w,S),T=O.context,M=T.createImageData(m,g);if(t){const j=M.data;for(let C=0,R=j.length;C<R;C+=4)j[C]=t[0],j[C+1]=t[1],j[C+2]=t[2],j[C+3]=255}for(const j of this._figures)wV(M,j,b);return T.putImageData(M,2,2),{canvas:O.canvas,offsetX:l-2*y,offsetY:u-2*x,scaleX:y,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,i){E_(e,this._bbox);const a=new Float32Array(2);if(i===Yn.SHADING)Ce.singularValueDecompose2dScale(Zt(e),a);else if(this.matrix){Ce.singularValueDecompose2dScale(this.matrix,a);const[l,u]=a;Ce.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=l,a[1]*=u}else Ce.singularValueDecompose2dScale(t.baseTransform,a);const s=this._createMeshCanvas(a,i===Yn.SHADING?null:this._background,t.cachedCanvases);return i!==Yn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class _V extends CA{getPattern(){return"hotpink"}}function SV(n){switch(n[0]){case"RadialAxial":return new bV(n);case"Mesh":return new xV(n);case"Dummy":return new _V}throw new Error(`Unknown IR type: ${n[0]}`)}const Zj={COLORED:1,UNCOLORED:2};class jA{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:r,operatorList:i,paintType:a,tilingType:s,color:l,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Cg("TilingType: "+s);const m=r[0],g=r[1],y=r[2],x=r[3],b=y-m,w=x-g,S=new Float32Array(2);Ce.singularValueDecompose2dScale(this.matrix,S);const[O,T]=S;Ce.singularValueDecompose2dScale(this.baseTransform,S);const M=O*S[0],N=T*S[1];let j=b,C=w,R=!1,k=!1;const F=Math.ceil(d*M),D=Math.ceil(f*N),L=Math.ceil(b*M),B=Math.ceil(w*N);F>=L?j=d:R=!0,D>=B?C=f:k=!0;const V=this.getSizeAndScale(j,this.ctx.canvas.width,M),H=this.getSizeAndScale(C,this.ctx.canvas.height,N),I=e.cachedCanvases.getCanvas("pattern",V.size,H.size),z=I.context,q=u.createCanvasGraphics(z,t);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,a,l),z.translate(-V.scale*m,-H.scale*g),q.transform(0,V.scale,0,0,H.scale,0,0),z.save(),q.dependencyTracker?.save(),this.clipBbox(q,m,g,y,x),q.baseTransform=Zt(q.ctx),q.executeOperatorList(i),q.endDrawing(),q.dependencyTracker?.restore(),z.restore(),R||k){const J=I.canvas;R&&(j=d),k&&(C=f);const K=this.getSizeAndScale(j,this.ctx.canvas.width,M),U=this.getSizeAndScale(C,this.ctx.canvas.height,N),G=K.size,ee=U.size,le=e.cachedCanvases.getCanvas("pattern-workaround",G,ee),ge=le.context,ye=R?Math.floor(b/d):0,ve=k?Math.floor(w/f):0;for(let Ae=0;Ae<=ye;Ae++)for(let me=0;me<=ve;me++)ge.drawImage(J,G*Ae,ee*me,G,ee,0,0,G,ee);return{canvas:le.canvas,scaleX:K.scale,scaleY:U.scale,offsetX:m,offsetY:g}}return{canvas:I.canvas,scaleX:V.scale,scaleY:H.scale,offsetX:m,offsetY:g}}getSizeAndScale(e,t,r){const i=Math.max(jA.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*r);return a>=i?a=i:r=a/e,{scale:r,size:a}}clipBbox(e,t,r,i,a){const s=i-t,l=a-r;e.ctx.rect(t,r,s,l),Ce.axialAlignedBoundingBox([t,r,i,a],Zt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,a=e.current;switch(t){case Zj.COLORED:const{fillStyle:s,strokeStyle:l}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=l;break;case Zj.UNCOLORED:i.fillStyle=i.strokeStyle=r,a.fillColor=a.strokeColor=r;break;default:throw new H9(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,i,a){let s=r;i!==Yn.SHADING&&(s=Ce.transform(s,t.baseTransform),this.matrix&&(s=Ce.transform(s,this.matrix)));const l=this.createPatternCanvas(t,a);let u=new DOMMatrix(s);u=u.translate(l.offsetX,l.offsetY),u=u.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(u),d}}function AV({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const l=In.isLittleEndian?4278190080:255,[u,d]=s?[a,l]:[l,a],f=r>>3,m=r&7,g=n.length;t=new Uint32Array(t.buffer);let y=0;for(let x=0;x<i;x++){for(const w=e+f;e<w;e++){const S=e<g?n[e]:255;t[y++]=S&128?d:u,t[y++]=S&64?d:u,t[y++]=S&32?d:u,t[y++]=S&16?d:u,t[y++]=S&8?d:u,t[y++]=S&4?d:u,t[y++]=S&2?d:u,t[y++]=S&1?d:u}if(m===0)continue;const b=e<g?n[e++]:255;for(let w=0;w<m;w++)t[y++]=b&1<<7-w?d:u}return{srcPos:e,destPos:y}}const Jj=16,Qj=100,EV=15,eN=10,Sr=16,X0=new DOMMatrix,zr=new Float32Array(2),dc=new Float32Array([1/0,1/0,-1/0,-1/0]);function TV(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,i,a,s,l){e.transform(t,r,i,a,s,l),this.__originalTransform(t,r,i,a,s,l)},n.setTransform=function(t,r,i,a,s,l){e.setTransform(t,r,i,a,s,l),this.__originalSetTransform(t,r,i,a,s,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,a,s,l){e.bezierCurveTo(t,r,i,a,s,l),this.__originalBezierCurveTo(t,r,i,a,s,l)},n.rect=function(t,r,i,a){e.rect(t,r,i,a),this.__originalRect(t,r,i,a)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class OV{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Im(n,e,t,r,i,a,s,l,u,d){const[f,m,g,y,x,b]=Zt(n);if(m===0&&g===0){const O=s*f+x,T=Math.round(O),M=l*y+b,N=Math.round(M),j=(s+u)*f+x,C=Math.abs(Math.round(j)-T)||1,R=(l+d)*y+b,k=Math.abs(Math.round(R)-N)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(y),T,N),n.drawImage(e,t,r,i,a,0,0,C,k),n.setTransform(f,m,g,y,x,b),[C,k]}if(f===0&&y===0){const O=l*g+x,T=Math.round(O),M=s*m+b,N=Math.round(M),j=(l+d)*g+x,C=Math.abs(Math.round(j)-T)||1,R=(s+u)*m+b,k=Math.abs(Math.round(R)-N)||1;return n.setTransform(0,Math.sign(m),Math.sign(g),0,T,N),n.drawImage(e,t,r,i,a,0,0,k,C),n.setTransform(f,m,g,y,x,b),[k,C]}n.drawImage(e,t,r,i,a,s,l,u,d);const w=Math.hypot(f,m),S=Math.hypot(g,y);return[w*u,S*d]}class tN{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=w_;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Gn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,r){r?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=dc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Yn.FILL,t=null){const r=this.minMax.slice();if(e===Yn.STROKE){t||kt("Stroke bounding box must include transform."),Ce.singularValueDecompose2dScale(t,zr);const i=zr[0]*this.lineWidth/2,a=zr[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=Ce.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(dc,0)}getClippedPathBoundingBox(e=Yn.FILL,t=null){return Ce.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function nN(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%Sr,a=(t-i)/Sr,s=i===0?a:a+1,l=n.createImageData(r,Sr);let u=0,d;const f=e.data,m=l.data;let g,y,x,b;if(e.kind===Id.GRAYSCALE_1BPP){const w=f.byteLength,S=new Uint32Array(m.buffer,0,m.byteLength>>2),O=S.length,T=r+7>>3,M=4294967295,N=In.isLittleEndian?4278190080:255;for(g=0;g<s;g++){for(x=g<a?Sr:i,d=0,y=0;y<x;y++){const j=w-u;let C=0;const R=j>T?r:j*8-7,k=R&-8;let F=0,D=0;for(;C<k;C+=8)D=f[u++],S[d++]=D&128?M:N,S[d++]=D&64?M:N,S[d++]=D&32?M:N,S[d++]=D&16?M:N,S[d++]=D&8?M:N,S[d++]=D&4?M:N,S[d++]=D&2?M:N,S[d++]=D&1?M:N;for(;C<R;C++)F===0&&(D=f[u++],F=128),S[d++]=D&F?M:N,F>>=1}for(;d<O;)S[d++]=0;n.putImageData(l,0,g*Sr)}}else if(e.kind===Id.RGBA_32BPP){for(y=0,b=r*Sr*4,g=0;g<a;g++)m.set(f.subarray(u,u+b)),u+=b,n.putImageData(l,0,y),y+=Sr;g<s&&(b=r*i*4,m.set(f.subarray(u,u+b)),n.putImageData(l,0,y))}else if(e.kind===Id.RGB_24BPP)for(x=Sr,b=r*x,g=0;g<s;g++){for(g>=a&&(x=i,b=r*x),d=0,y=b;y--;)m[d++]=f[u++],m[d++]=f[u++],m[d++]=f[u++],m[d++]=255;n.putImageData(l,0,g*Sr)}else throw new Error(`bad image kind: ${e.kind}`)}function rN(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%Sr,a=(t-i)/Sr,s=i===0?a:a+1,l=n.createImageData(r,Sr);let u=0;const d=e.data,f=l.data;for(let m=0;m<s;m++){const g=m<a?Sr:i;({srcPos:u}=AV({src:d,srcPos:u,dest:f,width:r,height:g,nonBlackColor:0})),n.putImageData(l,0,m*Sr)}}function hd(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Bm(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function iN(n,e){if(e)return!0;Ce.singularValueDecompose2dScale(n,zr);const t=Math.fround(Fi.pixelRatio*Ko.PDF_TO_CSS_UNITS);return zr[0]<=t&&zr[1]<=t}const CV=["butt","round","square"],jV=["miter","round","bevel"],NV={},aN={};class yc{constructor(e,t,r,i,a,{optionalContentConfig:s,markedContentStack:l=null},u,d,f){this.ctx=e,this.current=new tN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=s,this.cachedCanvases=new OV(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,r=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=l,r){const u=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Zt(this.compositeCtx))}this.ctx.save(),Bm(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Zt(this.ctx)}executeOperatorList(e,t,r,i,a){const s=e.argsArray,l=e.fnArray;let u=t||0;const d=s.length;if(d===u)return u;const f=d-u>eN&&typeof r=="function",m=f?Date.now()+EV:0;let g=0;const y=this.commonObjs,x=this.objs;let b,w;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,r),u;if(!a||a(u))if(b=l[u],w=s[u]??null,b!==Rc.dependency)w===null?this[b](u):this[b](u,...w);else for(const S of w){this.dependencyTracker?.recordNamedData(S,u);const O=S.startsWith("g_")?y:x;if(!O.has(S))return O.get(S,r),u}if(u++,u===d)return u;if(f&&++g>eN){if(Date.now()>m)return r(),u;g=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),l=r,u=i,d="prescale1",f,m;for(;a>2&&l>1||s>2&&u>1;){let g=l,y=u;a>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/g),s>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,s/=u/y),f=this.cachedCanvases.getCanvas(d,g,y),m=f.context,m.clearRect(0,0,g,y),m.drawImage(e,0,0,l,u,0,0,g,y),e=f.canvas,l=g,u=y,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:u}}_createMaskCanvas(e,t){const r=this.ctx,{width:i,height:a}=t,s=this.current.fillColor,l=this.current.patternFill,u=Zt(r);let d,f,m,g;if((t.bitmap||t.data)&&t.count>1){const F=t.bitmap||t.data.buffer;f=JSON.stringify(l?u:[u.slice(0,4),s]),d=this._cachedBitmapsMap.get(F),d||(d=new Map,this._cachedBitmapsMap.set(F,d));const D=d.get(f);if(D&&!l){const L=Math.round(Math.min(u[0],u[2])+u[4]),B=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,di.transformAndFill),{canvas:D,offsetX:L,offsetY:B}}m=D}m||(g=this.cachedCanvases.getCanvas("maskCanvas",i,a),rN(g.context,t));let y=Ce.transform(u,[1/i,0,0,-1/a,0,0]);y=Ce.transform(y,[1,0,0,1,0,-a]);const x=dc.slice();Ce.axialAlignedBoundingBox([0,0,i,a],y,x);const[b,w,S,O]=x,T=Math.round(S-b)||1,M=Math.round(O-w)||1,N=this.cachedCanvases.getCanvas("fillCanvas",T,M),j=N.context,C=b,R=w;j.translate(-C,-R),j.transform(...y),m||(m=this._scaleImage(g.canvas,Zi(j)),m=m.img,d&&l&&d.set(f,m)),j.imageSmoothingEnabled=iN(Zt(j),t.interpolate),Im(j,m,0,0,m.width,m.height,0,0,i,a),j.globalCompositeOperation="source-in";const k=Ce.transform(Zi(j),[1,0,0,1,-C,-R]);return j.fillStyle=l?s.getPattern(r,this,k,Yn.FILL,e):s,j.fillRect(0,0,i,a),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,N.canvas)),this.dependencyTracker?.recordDependencies(e,di.transformAndFill),{canvas:N.canvas,offsetX:Math.round(C),offsetY:Math.round(R)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=CV[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=jV[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[r,i]of t)switch(r){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,r);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),hd(this.suspendedCtx,s),TV(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const a=i[0],s=i[1],l=i[2]-a,u=i[3]-s;l===0||u===0||(this.genericComposeSMask(t.context,r,l,u,t.subtype,t.backdrop,t.transferMap,a,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,a,s,l,u,d,f,m){let g=e.canvas,y=u-f,x=d-m;if(s)if(y<0||x<0||y+r>g.width||x+i>g.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,i),S=w.context;S.drawImage(g,-y,-x),S.globalCompositeOperation="destination-atop",S.fillStyle=s,S.fillRect(0,0,r,i),S.globalCompositeOperation="source-over",g=w.canvas,y=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(y,x,r,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(y,x,r,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const b=new Path2D;b.rect(u,d,r,i),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(g,y,x,r,i,u,d,r,i),t.restore()}save(e){this.inSMaskMode&&hd(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&hd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,i,a,s,l){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,r,i,a,s,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,i){let[a]=r;if(!i){a||=r[0]=new Path2D,this[t](e,a);return}if(this.dependencyTracker!==null){const s=t===Rc.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const s=r[0]=new Path2D;for(let l=0,u=a.length;l<u;)switch(a[l++]){case Mm.moveTo:s.moveTo(a[l++],a[l++]);break;case Mm.lineTo:s.lineTo(a[l++],a[l++]);break;case Mm.curveTo:s.bezierCurveTo(a[l++],a[l++],a[l++],a[l++],a[l++],a[l++]);break;case Mm.closePath:s.closePath();break;default:Ke(`Unrecognized drawing path operator: ${a[l-1]}`);break}a=s}Ce.axialAlignedBoundingBox(i,Zt(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const s=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,Zi(i),Yn.STROKE,e),s){const l=new Path2D;l.addPath(t,i.getTransform().invertSelf().multiplySelf(s)),t=l}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,di.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Yn.STROKE,Zt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let l=!1;if(s){const d=a.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=a.getPattern(i,this,Zi(i),Yn.FILL,e),d){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(d)),t=f}l=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,di.fill),l&&(i.restore(),this.dependencyTracker?.restore(e)),r&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,di.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=NV}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=aN}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=r.getTransform().invertSelf();for(const{transform:s,x:l,y:u,fontSize:d,path:f}of t)f&&i.addPath(f,new DOMMatrix(s).preMultiplySelf(a).translate(l,u).scale(d,-d));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||w_,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Ke("Invalid font matrix for font "+t),r<0?(r=-r,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const s=i.loadedName||"sans-serif",l=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const d=i.italic?"italic":"normal";let f=r;r<Jj?f=Jj:r>Qj&&(f=Qj),this.current.fontSizeScale=r/f,this.ctx.font=`${d} ${u} ${f}px ${l}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#r(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i}paintChar(e,t,r,i,a,s){const l=this.ctx,u=this.current,d=u.font,f=u.textRenderingMode,m=u.fontSize/u.fontSizeScale,g=f&Gn.FILL_STROKE_MASK,y=!!(f&Gn.ADD_TO_PATH_FLAG),x=u.patternFill&&!d.missingFile,b=u.patternStroke&&!d.missingFile;let w;if((d.disableFontFace||y||x||b)&&!d.missingFile&&(w=d.getPathGenerator(this.commonObjs,t)),w&&(d.disableFontFace||x||b)){l.save(),l.translate(r,i),l.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(e,l,d);let S;if(g===Gn.FILL||g===Gn.FILL_STROKE)if(a){S=l.getTransform(),l.setTransform(...a);const O=this.#r(w,S,a);l.fill(O)}else l.fill(w);if(g===Gn.STROKE||g===Gn.FILL_STROKE)if(s){S||=l.getTransform(),l.setTransform(...s);const{a:O,b:T,c:M,d:N}=S,j=Ce.inverseTransform(s),C=Ce.transform([O,T,M,N,0,0],j);Ce.singularValueDecompose2dScale(C,zr),l.lineWidth*=Math.max(zr[0],zr[1])/m,l.stroke(this.#r(w,S,s))}else l.lineWidth/=m,l.stroke(w);l.restore()}else(g===Gn.FILL||g===Gn.FILL_STROKE)&&(l.fillText(t,r,i),this.dependencyTracker?.recordCharacterBBox(e,l,d,m,r,i,()=>l.measureText(t))),(g===Gn.STROKE||g===Gn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,l,d,m,r,i,()=>l.measureText(t)).recordDependencies(e,di.stroke),l.strokeText(t,r,i));y&&((this.pendingTextPaths||=[]).push({transform:Zt(l),x:r,y:i,fontSize:m,path:w}),this.dependencyTracker?.recordCharacterBBox(e,l,d,m,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return Qe(this,"isFontSubpixelAAEnabled",r)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,di.showText).resetBBox(e),this.current.textRenderingMode&Gn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const a=r.fontSize;if(a===0){this.dependencyTracker?.recordOperation(e);return}const s=this.ctx,l=r.fontSizeScale,u=r.charSpacing,d=r.wordSpacing,f=r.fontDirection,m=r.textHScale*f,g=t.length,y=i.vertical,x=y?1:-1,b=i.defaultVMetrics,w=a*r.fontMatrix[0],S=r.textRenderingMode===Gn.FILL&&!i.disableFontFace&&!r.patternFill;s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),f>0?s.scale(m,-1):s.scale(m,1);let O,T;if(r.patternFill){s.save();const R=r.fillColor.getPattern(s,this,Zi(s),Yn.FILL,e);O=Zt(s),s.restore(),s.fillStyle=R}if(r.patternStroke){s.save();const R=r.strokeColor.getPattern(s,this,Zi(s),Yn.STROKE,e);T=Zt(s),s.restore(),s.strokeStyle=R}let M=r.lineWidth;const N=r.textMatrixScale;if(N===0||M===0){const R=r.textRenderingMode&Gn.FILL_STROKE_MASK;(R===Gn.STROKE||R===Gn.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=N;if(l!==1&&(s.scale(l,l),M/=l),s.lineWidth=M,i.isInvalidPDFjsFont){const R=[];let k=0;for(const D of t)R.push(D.unicode),k+=D.width;const F=R.join("");if(s.fillText(F,0,0),this.dependencyTracker!==null){const D=s.measureText(F);this.dependencyTracker.recordBBox(e,this.ctx,-D.actualBoundingBoxLeft,D.actualBoundingBoxRight,-D.actualBoundingBoxAscent,D.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=k*w*m,s.restore(),this.compose();return}let j=0,C;for(C=0;C<g;++C){const R=t[C];if(typeof R=="number"){j+=x*R*a/1e3;continue}let k=!1;const F=(R.isSpace?d:0)+u,D=R.fontChar,L=R.accent;let B,V,H=R.width;if(y){const q=R.vmetric||b,J=-(R.vmetric?q[1]:H*.5)*w,K=q[2]*w;H=q?-q[0]:H,B=J/l,V=(j+K)/l}else B=j/l,V=0;let I;if(i.remeasure&&H>0){I=s.measureText(D);const q=I.width*1e3/a*l;if(H<q&&this.isFontSubpixelAAEnabled){const J=H/q;k=!0,s.save(),s.scale(J,1),B/=J}else H!==q&&(B+=(H-q)/2e3*a/l)}if(this.contentVisible&&(R.isInFont||i.missingFile)){if(S&&!L)s.fillText(D,B,V),this.dependencyTracker?.recordCharacterBBox(e,s,I?{bbox:null}:i,a/l,B,V,()=>I??s.measureText(D));else if(this.paintChar(e,D,B,V,O,T),L){const q=B+a*L.offset.x/l,J=V-a*L.offset.y/l;this.paintChar(e,L.fontChar,q,J,O,T)}}const z=y?H*w-F*f:H*w+F*f;j+=z,k&&s.restore()}y?r.y-=j:r.x+=j*m,s.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,i=this.current,a=i.font,s=i.fontSize,l=i.fontDirection,u=a.vertical?1:-1,d=i.charSpacing,f=i.wordSpacing,m=i.textHScale*l,g=i.fontMatrix||w_,y=t.length,x=i.textRenderingMode===Gn.INVISIBLE;let b,w,S,O;if(x||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(m,l);const T=this.dependencyTracker;for(this.dependencyTracker=T?new wp(T,e):null,b=0;b<y;++b){if(w=t[b],typeof w=="number"){O=u*w*s/1e3,this.ctx.translate(O,0),i.x+=O*m;continue}const M=(w.isSpace?f:0)+d,N=a.charProcOperatorList[w.operatorListId];N?this.contentVisible&&(this.save(),r.scale(s,s),r.transform(...g),this.executeOperatorList(N),this.restore()):Ke(`Type3 character "${w.operatorListId}" is not available.`);const j=[w.width,0];Ce.applyTransform(j,g),S=j[0]*s+M,r.translate(S,0),i.x+=S*m}r.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,i,a,s,l){const u=new Path2D;u.rect(i,a,s-i,l-a),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,i,s,a,l).recordClipBox(e,this.ctx,i,s,a,l),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const i=this.baseTransform||Zt(this.ctx),a={createCanvasGraphics:(s,l)=>new yc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new wp(this.dependencyTracker,l,!0):null)};r=new jA(t,this.ctx,a,i)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=SV(this.getObject(e,t)),this.cachedPatterns.set(t,i)),r&&(i.matrix=r),i}shadingFill(e,t){if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,t);r.fillStyle=i.getPattern(r,this,Zi(r),Yn.SHADING,e);const a=Zi(r);if(a){const{width:s,height:l}=r.canvas,u=dc.slice();Ce.axialAlignedBoundingBox([0,0,s,l],a,u);const[d,f,m,g]=u;this.ctx.fillRect(d,f,m-d,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,di.transform).recordDependencies(e,di.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){kt("Should not call beginInlineImage")}beginImageData(){kt("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Zt(this.ctx),r)){Ce.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[i,a,s,l]=r,u=new Path2D;u.rect(i,a,s-i,l-a),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,i,s,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||Cg("TODO: Support non-isolated groups."),t.knockout&&Ke("Knockout groups not supported.");const i=Zt(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=dc.slice();Ce.axialAlignedBoundingBox(t.bbox,Zt(r),a);const s=[0,0,r.canvas.width,r.canvas.height];a=Ce.intersect(a,s)||[0,0,0,0];const l=Math.floor(a[0]),u=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-l,1),f=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(m,d,f),y=g.context;y.translate(-l,-u),y.transform(...i);let x=new Path2D;const[b,w,S,O]=t.bbox;if(x.rect(b,w,S-b,O-w),t.matrix){const T=new Path2D;T.addPath(x,new DOMMatrix(t.matrix)),x=T}y.clip(x),t.smask&&this.smaskStack.push({canvas:g.canvas,context:y,offsetX:l,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(l,u),r.save()),hd(r,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Zt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const s=dc.slice();Ce.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a,s),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,a,s){if(this.#e(),Bm(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const l=r[2]-r[0],u=r[3]-r[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=l,r[3]=u,Ce.singularValueDecompose2dScale(Zt(this.ctx),zr);const{viewportScale:d}=this,f=Math.ceil(l*this.outputScaleX*d),m=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,m);const{canvas:g,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(zr[0],0,0,-zr[1],0,u*zr[1]),Bm(this.ctx)}else{Bm(this.ctx),this.endPath(e);const d=new Path2D;d.rect(r[0],r[1],l,u),this.ctx.clip(d)}}this.current=new tN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const i=this.ctx,a=this._createMaskCanvas(e,t),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,i=0,a=0,s,l){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const d=Zt(u);u.transform(r,i,a,s,0,0);const f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]),this.dependencyTracker?.resetBBox(e);for(let m=0,g=l.length;m<g;m+=2){const y=Ce.transform(d,[r,i,a,s,l[m],l[m+1]]);u.drawImage(f.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(e,this.ctx,y[4],y[4]+f.canvas.width,y[5],y[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,di.transformAndFill);for(const s of t){const{data:l,width:u,height:d,transform:f}=s,m=this.cachedCanvases.getCanvas("maskCanvas",u,d),g=m.context;g.save();const y=this.getObject(e,l,s);rN(g,y),g.globalCompositeOperation="source-in",g.fillStyle=a?i.getPattern(g,this,Zi(r),Yn.FILL,e):i,g.fillRect(0,0,u,d),g.restore(),r.save(),r.transform(...f),r.scale(1,-1),Im(r,m.canvas,0,0,u,d,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,u,0,d),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){Ke("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,i,a){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){Ke("Dependent image isn't ready yet");return}const l=s.width,u=s.height,d=[];for(let f=0,m=a.length;f<m;f+=2)d.push({transform:[r,0,0,i,a[f],a[f+1]],x:0,y:0,w:l,h:u});this.paintInlineImageXObjectGroup(e,s,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",r,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const r=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/r,-1/i);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",r,i).context;nN(f,t),l=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(l,Zi(a));a.imageSmoothingEnabled=iN(Zt(a),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,a,0,r,-i,0).recordDependencies(e,di.imageXObject).recordOperation(e),Im(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const s=t.width,l=t.height,d=this.cachedCanvases.getCanvas("inlineImage",s,l).context;nN(d,t),a=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(e);for(const s of r)i.save(),i.transform(...s.transform),i.scale(1,-1),Im(i,a,s.x,s.y,s.w,s.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,di.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===aN?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Zt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:a}=this.ctx.getTransform();let s,l;if(r===0&&i===0){const u=Math.abs(t),d=Math.abs(a);if(u===d)if(e===0)s=l=1/u;else{const f=u*e;s=l=f<1?1/f:1}else if(e===0)s=1/u,l=1/d;else{const f=u*e,m=d*e;s=f<1?1/f:1,l=m<1?1/m:1}}else{const u=Math.abs(t*a-r*i),d=Math.hypot(t,r),f=Math.hypot(i,a);if(e===0)s=f/u,l=d/u;else{const m=e*u;s=f>m?f/m:1,l=d>m?d/m:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){r.lineWidth=(i||1)*a,r.stroke(e);return}const l=r.getLineDash();t&&r.save(),r.scale(a,s),X0.a=1/a,X0.d=1/s;const u=new Path2D;if(u.addPath(e,X0),l.length>0){const d=Math.max(a,s);r.setLineDash(l.map(f=>f/d)),r.lineDashOffset/=d}r.lineWidth=i||1,r.stroke(u),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Rc)yc.prototype[n]!==void 0&&(yc.prototype[Rc[n]]=yc.prototype[n]);class bc{#e;#t;#r;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,r={};let i=0;for(const d of bc.strings){const f=t.encode(e[d]);r[d]=f,i+=4+f.length}const a=new ArrayBuffer(i),s=new Uint8Array(a),l=new DataView(a);let u=0;for(const d of bc.strings){const f=r[d],m=f.length;l.setUint32(u,m),s.set(f,u+4),u+=4+m}return ht(u===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}#n(e){ht(e<bc.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const r=this.#t.getUint32(t);return this.#r.decode(new Uint8Array(this.#e,t+4,r))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class wc{#e;#t;#r;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,r={};let i=0;for(const g of wc.strings){const y=t.encode(e[g]);r[g]=y,i+=4+y.length}i+=4;let a,s,l=1+i;e.style&&(a=t.encode(e.style.style),s=t.encode(e.style.weight),l+=4+a.length+4+s.length);const u=new ArrayBuffer(l),d=new Uint8Array(u),f=new DataView(u);let m=0;f.setUint8(m++,e.guessFallback?1:0),f.setUint32(m,0),m+=4,i=0;for(const g of wc.strings){const y=r[g],x=y.length;i+=4+x,f.setUint32(m,x),d.set(y,m+4),m+=4+x}return f.setUint32(m-i-4,i),e.style&&(f.setUint32(m,a.length),d.set(a,m+4),m+=4+a.length,f.setUint32(m,s.length),d.set(s,m+4),m+=4+s.length),ht(m<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(m)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){ht(e<wc.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const r=this.#t.getUint32(t);return this.#r.decode(new Uint8Array(this.#e,t+4,r))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),r=this.#r.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),a=this.#r.decode(new Uint8Array(this.#e,e+4,i));return{style:r,weight:a}}}class Mt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#r=this.#t+1+8;static#n=this.#r+1+48;static#s=this.#n+1+6;#i;#a;#o;constructor({data:e,extra:t}){this.#i=e,this.#a=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){ht(e<Mt.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,i=this.#o.getUint8(t)>>r&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return ht(e<Mt.numbers.length,"Invalid number index"),this.#o.getFloat64(Mt.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=Mt.#t;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=Mt.#r;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(this.#o.getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=Mt.#n;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}#h(e){ht(e<Mt.strings.length,"Invalid string index");let t=Mt.#s+4;for(let a=0;a<e;a++)t+=this.#o.getUint32(t)+4;const r=this.#o.getUint32(t),i=new Uint8Array(r);return i.set(new Uint8Array(this.#i,t+4,r)),this.#a.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=Mt.#s;const t=this.#o.getUint32(e);e+=4+t;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a!==0)return new Uint8Array(this.#i,e+4,a)}clearData(){let e=Mt.#s;const t=this.#o.getUint32(e);e+=4+t;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,a).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=Mt.#s;const t=this.#o.getUint32(e);e+=4+t;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#i,e+4,i)),new bc(a.buffer)}get systemFontInfo(){let e=Mt.#s;const t=this.#o.getUint32(e);e+=4+t;const r=this.#o.getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(this.#i,e+4,r)),new wc(i.buffer)}static write(e){const t=e.systemFontInfo?wc.write(e.systemFontInfo):null,r=e.cssFontInfo?bc.write(e.cssFontInfo):null,i=new TextEncoder,a={};let s=0;for(const b of Mt.strings)a[b]=i.encode(e[b]),s+=4+a[b].length;const l=Mt.#s+4+s+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(l),d=new Uint8Array(u),f=new DataView(u);let m=0;const g=Mt.bools.length;let y=0,x=0;for(let b=0;b<g;b++){const w=e[Mt.bools[b]];y|=(w===void 0?0:w?2:1)<<x,x+=2,(x===8||b===g-1)&&(f.setUint8(m++,y),y=0,x=0)}ht(m===Mt.#e,"FontInfo.write: Boolean properties offset mismatch");for(const b of Mt.numbers)f.setFloat64(m,e[b]),m+=8;if(ht(m===Mt.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(m++,4);for(const b of e.bbox)f.setInt16(m,b,!0),m+=2}else f.setUint8(m++,0),m+=8;if(ht(m===Mt.#r,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(m++,6);for(const b of e.fontMatrix)f.setFloat64(m,b,!0),m+=8}else f.setUint8(m++,0),m+=48;if(ht(m===Mt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(m++,1);for(const b of e.defaultVMetrics)f.setInt16(m,b,!0),m+=2}else f.setUint8(m++,0),m+=6;ht(m===Mt.#s,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(Mt.#s,0),m+=4;for(const b of Mt.strings){const w=a[b],S=w.length;f.setUint32(m,S),d.set(w,m+4),m+=4+S}if(f.setUint32(Mt.#s,m-Mt.#s-4),!t)f.setUint32(m,0),m+=4;else{const b=t.byteLength;f.setUint32(m,b),ht(m+4+b<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(t),m+4),m+=4+b}if(!r)f.setUint32(m,0),m+=4;else{const b=r.byteLength;f.setUint32(m,b),ht(m+4+b<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(r),m+4),m+=4+b}return e.data===void 0?(f.setUint32(m,0),m+=4):(f.setUint32(m,e.data.length),d.set(e.data,m+4),m+=4+e.data.length),ht(m<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(m)}}class Us{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class MV{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const uc=Symbol("INTERNAL");class PV{#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:a}){this.#e=!!(e&$r.DISPLAY),this.#t=!!(e&$r.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==uc&&kt("Internal method `_setVisible` called."),this.#r=r,this.#n=t}}class RV{#e=null;#t=new Map;#r=null;#n=null;constructor(e,t=$r.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const r of e.groups)this.#t.set(r.id,new PV(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(uc,!1);for(const r of e.on)this.#t.get(r)._setVisible(uc,!0);for(const r of e.off)this.#t.get(r)._setVisible(uc,!1);this.#r=this.getHash()}}#s(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const a=e[i];let s;if(Array.isArray(a))s=this.#s(a);else if(this.#t.has(a))s=this.#t.get(a).visible;else return Ke(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Cg("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ke(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ke(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ke(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ke(`Unknown optional content policy ${e.policy}.`),!0}return Ke(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const i=this.#t.get(e);if(!i){Ke(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const s of a)s!==e&&this.#t.get(s)?._setVisible(uc,!1,!0);i._setVisible(uc,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const a=this.#t.get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new nI;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class kV{constructor(e,{disableRange:t=!1,disableStream:r=!1}){ht(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=l,a?.length>0){const u=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,d)=>{this._onReceiveData({begin:u,chunk:d})}),e.addProgressListener((u,d)=>{this._onProgress({loaded:u,total:d})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(r),!0)});ht(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ht(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new DV(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new LV(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class DV{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=Ng(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class LV{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function IV(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let f=l(t);return f=unescape(f),f=u(f),f=d(f),a(f)}if(t=s(n),t){const f=d(t);return a(f)}if(t=r("filename","i").exec(n),t){t=t[1];let f=l(t);return f=d(f),a(f)}function r(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function i(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const g=new TextDecoder(f,{fatal:!0}),y=zh(m);m=g.decode(y),e=!1}catch{}}return m}function a(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function s(f){const m=[];let g;const y=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=y.exec(f))!==null;){let[,b,w,S]=g;if(b=parseInt(b,10),b in m){if(b===0)break;continue}m[b]=[w,S]}const x=[];for(let b=0;b<m.length&&b in m;++b){let[w,S]=m[b];S=l(S),w&&(S=unescape(S),b===0&&(S=u(S))),x.push(S)}return x.join("")}function l(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let g=0;g<m.length;++g){const y=m[g].indexOf('"');y!==-1&&(m[g]=m[g].slice(0,y),m.length=g+1),m[g]=m[g].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function u(f){const m=f.indexOf("'");if(m===-1)return f;const g=f.slice(0,m),x=f.slice(m+1).replace(/^[^']*'/,"");return i(g,x)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,g,y,x){if(y==="q"||y==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,w){return String.fromCharCode(parseInt(w,16))}),i(g,x);try{x=atob(x)}catch{}return i(g,x)})}return""}function uI(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function Mg(n){return URL.parse(n)?.origin??null}function dI({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function hI(n){const e=n.get("Content-Disposition");if(e){let t=IV(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ng(t))return t}return null}function Yh(n,e){return new Jd(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function fI(n){return n===200||n===206}function mI(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function pI(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ke(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class BV{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=uI(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ht(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new $V(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new FV(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class $V{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,mI(r,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=Mg(a.url),!fI(a.status))throw Yh(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:l,suggestedLength:u}=dI({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=hI(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Va("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:pI(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class FV{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${r-1}`);const s=i.url;fetch(s,mI(a,this._withCredentials,this._abortController)).then(l=>{const u=Mg(l.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!fI(l.status))throw Yh(l.status,s);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:pI(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const K0=200,Z0=206;function UV(n){const e=n.response;return typeof e!="string"?e:zh(e).buffer}class qV{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=uI(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,s]of this.headers)t.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Z0):i.expectedStatus=K0,t.responseType="arraybuffer",ht(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const a=i.status||K0;if(!(a===K0&&r.expectedStatus===Z0)&&a!==r.expectedStatus){r.onError(i.status);return}const l=UV(i);if(a===Z0){const u=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);d?r.onDone({begin:parseInt(d[1],10),chunk:l}):(Ke('Missing or invalid "Content-Range" header.'),r.onError(0))}else l?r.onDone({begin:0,chunk:l}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class zV{constructor(e){this._source=e,this._manager=new qV(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ht(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new HV(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new VV(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class HV{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Mg(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[u,...d]=l.split(": ");return[u,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=dI({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=hI(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Yh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class VV{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Mg(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Yh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const GV=/^[a-z][a-z0-9\-+.]+:/i;function WV(n){if(GV.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class YV{constructor(e){this.source=e,this.url=WV(e.url),ht(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ht(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new XV(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new KV(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class XV{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Yh(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Va("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class KV{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const fd=Symbol("INITIAL_DATA");class gI{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:fd}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const r=this.#e[e];if(!r||r.data===fd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==fd}delete(e){const t=this.#e[e];return!t||t.data===fd?!1:(delete this.#e[e],!0)}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==fd&&(yield[e,t])}}}const ZV=1e5,sN=30;let eh=class pi{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#s=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#v=null;static#b=new Map;static#y=new Map;static#E=new WeakMap;static#S=null;static#w=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(u){u.enqueue(e),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=r.scale*Fi.pixelRatio,this.#h=r.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:s,pageY:l}=r.rawDims;this.#v=[1,0,0,-1,-s,l+a],this.#o=i,this.#a=a,pi.#j(),Hs(t,r),this.#e.promise.finally(()=>{pi.#w.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=In.platform;return Qe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#s??=t.lang,Object.assign(this.#f,t.styles),this.#O(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),pi.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*Fi.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Hs(this.#l,{rotation:i})),r!==this.#d){t?.(),this.#d=r;const a={div:null,properties:null,ctx:pi.#N(this.#s)};for(const s of this.#u)a.properties=this.#p.get(s),a.div=s,this.#A(a)}}cancel(){const e=new Va("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#O(e){if(this.#r)return;this.#i.ctx??=pi.#N(this.#s);const t=this.#u,r=this.#g;for(const i of e){if(t.length>ZV){Ke("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#_(i)}}#_(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const i=Ce.transform(this.#v,e.transform);let a=Math.atan2(i[1],i[0]);const s=this.#f[e.fontName];s.vertical&&(a+=Math.PI/2);let l=this.#n&&s.fontSubstitution||s.fontFamily;l=pi.fontFamilyMap.get(l)||l;const u=Math.hypot(i[2],i[3]),d=u*pi.#I(l,s,this.#s);let f,m;a===0?(f=i[4],m=i[5]-d):(f=i[4]+d*Math.sin(a),m=i[5]-d*Math.cos(a));const g="calc(var(--total-scale-factor) *",y=t.style;this.#t===this.#l?(y.left=`${(100*f/this.#o).toFixed(2)}%`,y.top=`${(100*m/this.#a).toFixed(2)}%`):(y.left=`${g}${f.toFixed(2)}px)`,y.top=`${g}${m.toFixed(2)}px)`),y.fontSize=`${g}${(pi.#S*u).toFixed(2)}px)`,y.fontFamily=l,r.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(r.angle=a*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);b!==w&&Math.max(b,w)/Math.min(b,w)>1.5&&(x=!0)}if(x&&(r.canvasWidth=s.vertical?e.height:e.width),this.#p.set(t,r),this.#i.div=t,this.#i.properties=r,this.#A(this.#i),r.hasText&&this.#t.append(t),r.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this.#t.append(b)}}#A(e){const{div:t,properties:r,ctx:i}=e,{style:a}=t;let s="";if(pi.#S>1&&(s=`scale(${1/pi.#S})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=a,{canvasWidth:u,fontSize:d}=r;pi.#C(i,d*this.#d,l);const{width:f}=i.measureText(t.textContent);f>0&&(s=`scaleX(${u*this.#d/f}) ${s}`)}r.angle!==0&&(s=`rotate(${r.angle}deg) ${s}`),s.length>0&&(a.transform=s)}static cleanup(){if(!(this.#w.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#N(e=null){let t=this.#y.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#C(e,t,r){const i=this.#E.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#j(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#I(e,t,r){const i=this.#b.get(e);if(i)return i;const a=this.#N(r);a.canvas.width=a.canvas.height=sN,this.#C(a,sN,e);const s=a.measureText(""),l=s.fontBoundingBoxAscent,u=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return l?d=l/(l+u):(In.platform.isFirefox&&Ke("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),this.#b.set(e,d),d}};const JV=100;function NA(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new MA,{docId:t}=e,r=n.url?sV(n.url):null,i=n.data?oV(n.data):null,a=n.httpHeaders||null,s=n.withCredentials===!0,l=n.password??null,u=n.range instanceof PA?n.range:null,d=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let f=n.worker instanceof kc?n.worker:null;const m=n.verbosity,g=typeof n.docBaseUrl=="string"&&!Vh(n.docBaseUrl)?n.docBaseUrl:null,y=Rm(n.cMapUrl),x=n.cMapPacked!==!1,b=n.CMapReaderFactory||(cr?mV:Gj),w=Rm(n.iccUrl),S=Rm(n.standardFontDataUrl),O=n.StandardFontDataFactory||(cr?pV:Wj),T=Rm(n.wasmUrl),M=n.WasmFactory||(cr?gV:Yj),N=n.stopAtErrors!==!0,j=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,C=n.isEvalSupported!==!1,R=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!cr,k=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!cr&&(In.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,D=typeof n.disableFontFace=="boolean"?n.disableFontFace:cr,L=n.fontExtraProperties===!0,B=n.enableXfa===!0,V=n.ownerDocument||globalThis.document,H=n.disableRange===!0,I=n.disableStream===!0,z=n.disableAutoFetch===!0,q=n.pdfBug===!0,J=n.CanvasFactory||(cr?fV:uV),K=n.FilterFactory||(cr?hV:dV),U=n.enableHWA===!0,G=n.useWasm!==!1,ee=u?u.length:n.length??NaN,le=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!cr&&!D,ge=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(b===Gj&&O===Wj&&M===Yj&&y&&S&&T&&Cd(y,document.baseURI)&&Cd(S,document.baseURI)&&Cd(T,document.baseURI)),ye=null;U9(m);const ve={canvasFactory:new J({ownerDocument:V,enableHWA:U}),filterFactory:new K({docId:t,ownerDocument:V}),cMapReaderFactory:ge?null:new b({baseUrl:y,isCompressed:x}),standardFontDataFactory:ge?null:new O({baseUrl:S}),wasmFactory:ge?null:new M({baseUrl:T})};f||(f=kc.create({verbosity:m,port:Us.workerPort}),e._worker=f);const Ae={docId:t,apiVersion:"5.4.296",data:i,password:l,disableAutoFetch:z,rangeChunkSize:d,length:ee,docBaseUrl:g,enableXfa:B,evaluatorOptions:{maxImageSize:j,disableFontFace:D,ignoreErrors:N,isEvalSupported:C,isOffscreenCanvasSupported:R,isImageDecoderSupported:k,canvasMaxAreaInBytes:F,fontExtraProperties:L,useSystemFonts:le,useWasm:G,useWorkerFetch:ge,cMapUrl:y,iccUrl:w,standardFontDataUrl:S,wasmUrl:T}},me={ownerDocument:V,pdfBug:q,styleElement:ye,loadingParams:{disableAutoFetch:z,enableXfa:B}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Se=f.messageHandler.sendWithPromise("GetDocRequest",Ae,i?[i.buffer]:null);let De;if(u)De=new kV(u,{disableRange:H,disableStream:I});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const ce=Cd(r)?BV:cr?YV:zV;De=new ce({url:r,length:ee,httpHeaders:a,withCredentials:s,rangeChunkSize:d,disableRange:H,disableStream:I})}return Se.then(ce=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Me=new jd(t,ce,f.port),Te=new tG(Me,e,De,me,ve,U);e._transport=Te,Me.send("Ready",null)})}).catch(e._capability.reject),e}class MA{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${MA.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let PA=class{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#s=[];constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){this.#s.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const r of this.#s)r(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const r of this.#n)r(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#r)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){kt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class QV{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Qe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class eG{#e=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new $j:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new gI,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new Hh({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Qe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:i="display",annotationMode:a=na.ENABLE,transform:s=null,background:l=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1,recordOperations:y=!1,operationsFilter:x=null}){this._stats?.time("Overall");const b=this._transport.getRenderingIntent(i,a,m,g),{renderingIntent:w,cacheKey:S}=b;this.#e=!1,u||=this._transport.getOptionalContentConfig(w);let O=this._intentStates.get(S);O||(O=Object.create(null),this._intentStates.set(S,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const T=!!(w&$r.PRINT);O.displayReadyCapability||(O.displayReadyCapability=Promise.withResolvers(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(b));const M=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(y||M),j=k=>{if(O.renderTasks.delete(C),N){const F=C.gfx?.dependencyTracker.take();F&&(C.stepper&&C.stepper.setOperatorBBoxes(F,C.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=F))}T&&(this.#e=!0),this.#t(),k?(C.capability.reject(k),this._abortOperatorList({intentState:O,reason:k instanceof Error?k:new Error(k)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new hc({callback:j,params:{canvas:t,canvasContext:e,dependencyTracker:N?new yV(t,O.operatorList.length,M):null,viewport:r,transform:s,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:x});(O.renderTasks||=new Set).add(C);const R=C.task;return Promise.all([O.displayReadyCapability.promise,u]).then(([k,F])=>{if(this.destroyed){j();return}if(this._stats?.time("Rendering"),!(F.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:k,optionalContentConfig:F}),C.operatorListChanged()}).catch(j),R}getOperatorList({intent:e="display",annotationMode:t=na.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const s=this._transport.getRenderingIntent(e,t,r,i,!0);let l=this._intentStates.get(s.cacheKey);l||(l=Object.create(null),this._intentStates.set(s.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Qd.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function a(){s.read().then(function({value:u,done:d}){if(d){r(l);return}l.lang??=u.lang,Object.assign(l.styles,u.styles),l.items.push(...u.items),a()},i)}const s=t.getReader(),l={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new $j),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:a,transfer:s}=r,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},s).getReader(),d=this._intentStates.get(t);d.streamReader=u;const f=()=>{u.read().then(({value:m,done:g})=>{if(g){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,d),f())},m=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const g of d.renderTasks)g.operatorListChanged();this.#t()}if(d.displayReadyCapability)d.displayReadyCapability.reject(m);else if(d.opListReadCapability)d.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof jg){let i=JV;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Va(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Is,Pi,Da,zo,wg,Ho,Vo,dr,rp,vI,yI,Nd,Cc,ip;const Yt=class Yt{constructor({name:e=null,port:t=null,verbosity:r=q9()}={}){Xi(this,dr);Xi(this,Is,Promise.withResolvers());Xi(this,Pi,null);Xi(this,Da,null);Xi(this,zo,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(Wt(Yt,Vo).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Wt(Yt,Vo).set(t,this),Ki(this,dr,vI).call(this,t)}else Ki(this,dr,yI).call(this)}get promise(){return Wt(this,Is).promise}get port(){return Wt(this,Da)}get messageHandler(){return Wt(this,Pi)}destroy(){this.destroyed=!0,Wt(this,zo)?.terminate(),wr(this,zo,null),Wt(Yt,Vo).delete(Wt(this,Da)),wr(this,Da,null),Wt(this,Pi)?.destroy(),wr(this,Pi,null)}static create(e){const t=Wt(this,Vo).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Yt(e)}static get workerSrc(){if(Us.workerSrc)return Us.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Qe(this,"_setupFakeWorkerGlobal",(async()=>Wt(this,Cc,ip)?Wt(this,Cc,ip):(await import(this.workerSrc)).WorkerMessageHandler)())}};Is=new WeakMap,Pi=new WeakMap,Da=new WeakMap,zo=new WeakMap,wg=new WeakMap,Ho=new WeakMap,Vo=new WeakMap,dr=new WeakSet,rp=function(){Wt(this,Is).resolve(),Wt(this,Pi).send("configure",{verbosity:this.verbosity})},vI=function(e){wr(this,Da,e),wr(this,Pi,new jd("main","worker",e)),Wt(this,Pi).on("ready",()=>{}),Ki(this,dr,rp).call(this)},yI=function(){if(Wt(Yt,Ho)||Wt(Yt,Cc,ip)){Ki(this,dr,Nd).call(this);return}let{workerSrc:e}=Yt;try{Yt._isSameOrigin(window.location,e)||(e=Yt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new jd("main","worker",t),i=()=>{a.abort(),r.destroy(),t.terminate(),this.destroyed?Wt(this,Is).reject(new Error("Worker was destroyed")):Ki(this,dr,Nd).call(this)},a=new AbortController;t.addEventListener("error",()=>{Wt(this,zo)||i()},{signal:a.signal}),r.on("test",l=>{if(a.abort(),this.destroyed||!l){i();return}wr(this,Pi,r),wr(this,Da,t),wr(this,zo,t),Ki(this,dr,rp).call(this)}),r.on("ready",l=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{Ki(this,dr,Nd).call(this)}});const s=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};s();return}catch{Cg("The worker has been disabled.")}Ki(this,dr,Nd).call(this)},Nd=function(){Wt(Yt,Ho)||(Ke("Setting up fake worker."),wr(Yt,Ho,!0)),Yt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Wt(this,Is).reject(new Error("Worker was destroyed"));return}const t=new cV;wr(this,Da,t);const r=`fake${jC(Yt,wg)._++}`,i=new jd(r+"_worker",r,t);e.setup(i,t),wr(this,Pi,new jd(r,r+"_worker",t)),Ki(this,dr,rp).call(this)}).catch(e=>{Wt(this,Is).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Cc=new WeakSet,ip=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Xi(Yt,Cc),Xi(Yt,wg,0),Xi(Yt,Ho,!1),Xi(Yt,Vo,new WeakMap),cr&&(wr(Yt,Ho,!0),Us.workerSrc||="./pdf.worker.mjs"),Yt._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!r?.origin||r.origin==="null")return!1;const i=new URL(t,r);return r.origin===i.origin},Yt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Yt.fromPort=e=>{if(Z9("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Yt.create(e)};let kc=Yt;class tG{#e=new Map;#t=new Map;#r=new Map;#n=new Map;#s=null;constructor(e,t,r,i,a,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new gI,this.fontLoader=new iV({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}#i(e,t=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return Qe(this,"annotationStorage",new TA)}getRenderingIntent(e,t=na.ENABLE,r=null,i=!1,a=!1){let s=$r.DISPLAY,l=__;switch(e){case"any":s=$r.ANY;break;case"display":break;case"print":s=$r.PRINT;break;default:Ke(`getRenderingIntent - invalid intent: ${e}`)}const u=s&$r.PRINT&&r instanceof rI?r:this.annotationStorage;switch(t){case na.DISABLE:s+=$r.ANNOTATIONS_DISABLE;break;case na.ENABLE:break;case na.ENABLE_FORMS:s+=$r.ANNOTATIONS_FORMS;break;case na.ENABLE_STORAGE:s+=$r.ANNOTATIONS_STORAGE,l=u.serializable;break;default:Ke(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=$r.IS_EDITING),a&&(s+=$r.OPLIST);const{ids:d,hash:f}=u.modifiedIds,m=[s,l.hash,f];return{renderingIntent:s,cacheKey:m.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),eh.cleanup(),this._networkStream?.cancelAllRequests(new Va("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{ht(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}ht(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{t.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(r,i)=>{ht(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:l}){if(l){i.close();return}ht(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new QV(r,this))}),e.on("DocException",r=>{t._capability.reject(xr(r))}),e.on("PasswordRequest",r=>{this.#s=Promise.withResolvers();try{if(!t.onPassword)throw xr(r);const i=a=>{a instanceof Error?this.#s.reject(a):this.#s.resolve({password:a})};t.onPassword(i,r.code)}catch(i){this.#s.reject(i)}return this.#s.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,a])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in a){const f=a.error;Ke(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const s=new Mt(a),l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,m)=>globalThis.FontInspector.fontAdded(f,m):null,u=new aV(s,l,a.extra,a.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":const{imageRef:d}=a;ht(d,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,m]of f.objs)if(m?.ref===d)return m.dataLen?(this.commonObjs.resolve(r,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,a,s])=>{if(this.destroyed)return;const l=this.#t.get(i);if(!l.objs.has(r)){if(l._intentStates.size===0){s?.bitmap?.close();return}switch(a){case"Image":case"Pattern":l.objs.resolve(r,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ke("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#r.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const s=new eG(t,a,this,this._params.pdfBug);return this.#t.set(t,s),s});return this.#r.set(t,i),i}getPageIndex(e){return S_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new RV(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new MV(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),eh.cleanup()}}cachedPageNumber(e){if(!S_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class nG{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class hc{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:l,canvasFactory:u,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:g=null,enableHWA:y=!1,operationsFilter:x=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=d,this._pdfBug=m,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new nG(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=y,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=x}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(hc.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");hc.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:a,dependencyTracker:s}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new yc(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),hc.#t.delete(this._canvas),e||=new jg(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),hc.#t.delete(this._canvas),this.callback())))}}const bI="5.4.296",wI="f56dc8601";class Fr{#e=null;#t=null;#r;#n=null;#s=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Qe(this,"_keyboardManager",new Gh([[["Escape","mac+Escape"],Fr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fr.prototype._moveToPrevious],[["Home","mac+Home"],Fr.prototype._moveToBeginning],[["End","mac+End"],Fr.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#a=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Fr.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#r,e.append(r),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",Yr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[r,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=r,a.setAttribute("data-l10n-id",Fr.#h[r]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===this.#r,a.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ut.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastChild?.focus()}#g(e){Fr._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#s=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const r of this.#n.children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class th{#e=null;#t=null;#r=null;static#n=null;constructor(e){this.#t=e,this.#r=e._uiManager,th.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:r}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",th.#n[e]),i.addEventListener("input",()=>{this.#r.updateParams(t,i.value)},{signal:this.#r._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function oN(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function md(n){return Math.max(0,Math.min(255,255*n))}class lN{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=md(e),[e,e,e]}static G_HTML([e]){const t=oN(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(md)}static RGB_HTML(e){return`#${e.map(oN).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[md(1-Math.min(1,e+i)),md(1-Math.min(1,r+i)),md(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,a=1-t,s=1-r,l=Math.min(i,a,s);return["CMYK",i,a,s,l]}}class rG{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){kt("Abstract method `_createSVG` called.")}}class nh extends rG{_createSVG(e){return document.createElementNS(Ra,e)}}const iG=9,Zo=new WeakSet,aG=new Date().getTimezoneOffset()*60*1e3;class cN{static create(e){switch(e.data.annotationType){case cn.LINK:return new RA(e);case cn.TEXT:return new oG(e);case cn.WIDGET:switch(e.data.fieldType){case"Tx":return new lG(e);case"Btn":return e.data.radioButton?new xI(e):e.data.checkBox?new uG(e):new dG(e);case"Ch":return new hG(e);case"Sig":return new cG(e)}return new ll(e);case cn.POPUP:return new T_(e);case cn.FREETEXT:return new _I(e);case cn.LINE:return new mG(e);case cn.SQUARE:return new pG(e);case cn.CIRCLE:return new gG(e);case cn.POLYLINE:return new SI(e);case cn.CARET:return new yG(e);case cn.INK:return new kA(e);case cn.POLYGON:return new vG(e);case cn.HIGHLIGHT:return new AI(e);case cn.UNDERLINE:return new bG(e);case cn.SQUIGGLY:return new wG(e);case cn.STRIKEOUT:return new xG(e);case cn.STAMP:return new EI(e);case cn.FILEATTACHMENT:return new _G(e);default:return new tn(e)}}}class tn{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return tn._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:i}=this.data;let a=-1/0,s=-1/0;if(t?.length>=8){for(let l=0;l<t.length;l+=8)t[l+1]>s?(s=t[l+1],a=t[l+2]):t[l+1]===s&&(a=Math.max(a,t[l+2]));return[a,s]}if(r?.length>=1){for(const l of r)for(let u=0,d=l.length;u<d;u+=2)l[u+1]>s?(s=l[u+1],a=l[u]):l[u+1]===s&&(a=Math.max(a,l[u]));if(a!==1/0)return[a,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/r,e[1]=100*(e[1]-s)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Zd}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${Zd}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#r?.popup||this.popup)?.remove(),this.#r=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:r}=e;t&&this.#n(t);let i=this.#r?.popup||this.popup;!i&&r?.text&&(this._createPopup(r),i=this.#r.popup),i&&(i.updateEdited(e),r?.deleted&&(i.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:l,pageY:u}}}}=this;r?.splice(0,4,...e),t.left=`${100*(e[0]-l)/a}%`,t.top=`${100*(s-e[3]+u)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof ll)&&!(this instanceof RA)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof T_){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,a),a}const{width:l,height:u}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(b>0||w>0){const O=`calc(${b}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;s.borderRadius=O}else if(this instanceof xI){const O=`calc(${l}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;s.borderRadius=O}switch(t.borderStyle.style){case cc.SOLID:s.borderStyle="solid";break;case cc.DASHED:s.borderStyle="dashed";break;case cc.BEVELED:Ke("Unimplemented border style: beveled");break;case cc.INSET:Ke("Unimplemented border style: inset");break;case cc.UNDERLINE:s.borderBottomStyle="solid";break}const S=t.borderColor||null;S?(this.#t=!0,s.borderColor=Ce.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):s.borderWidth=0}const d=Ce.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:f,pageHeight:m,pageX:g,pageY:y}=i.rawDims;s.left=`${100*(d[0]-g)/f}%`,s.top=`${100*(d[1]-y)/m}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(s.width=`${100*l/f}%`,s.height=`${100*u/m}%`):this.setRotation(x,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),t.style.width=`${100*a/r}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const a=i.detail[t],s=a[0],l=a.slice(1);i.target.style[r]=lN[`${s}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:lN[`${s}_rgb`](l)})};return Qe(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,a]of Object.entries(t)){const s=r[i];if(s){const l={detail:{[i]:a},target:e};s(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,a]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,w,S,O]=e.subarray(2,6);if(i===b&&a===w&&t===S&&r===O)return}const{style:s}=this.container;let l;if(this.#t){const{borderColor:b,borderWidth:w}=s;s.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const u=i-t,d=a-r,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const g=f.createElement("defs");m.append(g);const y=f.createElement("clipPath"),x=`clippath_${this.data.id}`;y.setAttribute("id",x),y.setAttribute("clipPathUnits","objectBoundingBox"),g.append(y);for(let b=2,w=e.length;b<w;b+=8){const S=e[b],O=e[b+1],T=e[b+2],M=e[b+3],N=f.createElement("rect"),j=(T-t)/u,C=(a-O)/d,R=(S-T)/u,k=(O-M)/d;N.setAttribute("x",j),N.setAttribute("y",C),N.setAttribute("width",R),N.setAttribute("height",k),y.append(N),l?.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${C}" width="${R}" height="${k}"/>`)}this.#t&&(l.push("</g></svg>')"),s.backgroundImage=l.join("")),this.container.append(m),this.container.style.clipPath=`url(#${x})`}_createPopup(e=null){const{data:t}=this;let r,i;e?(r={str:e.text},i=e.date):(r=t.contentsObj,i=t.modificationDate);const a=this.#r=new T_({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#r}render(){kt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:l}of i){if(a===-1||s===t)continue;const u=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${s}"]`);if(d&&!Zo.has(d)){Ke(`_getElementsByName - element not allowed: ${s}`);continue}r.push({id:s,exportValue:u,domElement:d})}return r}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==t&&Zo.has(i)&&r.push({id:s,exportValue:a,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class sG extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class RA extends tn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(r,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#r(r,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,r=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),r&&(e.title=r)}_bindNamedAction(e,t,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),r&&(e.title=r),this.#e()}#t(e,t,r="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:r&&(e.title=r),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#r(e,t,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),r&&(e.title=r),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const a=r.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ke('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:i,refs:a,include:s}=t,l=[];if(i.length!==0||a.length!==0){const f=new Set(a);for(const m of i){const g=this._fieldObjects[m]||[];for(const{id:y}of g)f.add(y)}for(const m of Object.values(this._fieldObjects))for(const g of m)f.has(g.id)===s&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,d=[];for(const f of l){const{id:m}=f;switch(d.push(m),f.type){case"text":{const y=f.defaultValue||"";u.setValue(m,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(m,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(m,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${m}"]`);if(g){if(!Zo.has(g)){Ke(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class oG extends tn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ll extends tn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return In.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,a){r.includes("mouse")?e.addEventListener(r,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(r,s=>{if(r==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}})})}_setEventListeners(e,t,r,i){for(const[a,s]of r)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,a,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ce.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||iG,a=e.style;let s;const l=2,u=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(d/(H0*i))||1,m=d/f;s=Math.min(i,u(m/H0))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);s=Math.min(i,u(d/H0))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=Ce.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class lG extends ll{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=r),a.setValue(s.id,{[i]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let a=i.value||"";const s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&a.length>s&&(a=a.slice(0,s));let l=i.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",l??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Zo.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:m}=this.data,g=!!f&&this.enableScripting;d&&(r.title=d),this._setRequired(r,this.data.required),s&&(r.maxLength=s),r.addEventListener("input",x=>{e.setValue(t,{value:x.target.value}),this.setPropertyOnSiblings(r,"value",x.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",x=>{const b=this.data.defaultFieldValue??"";r.value=u.userValue=b,u.formattedValue=null});let y=x=>{const{formattedValue:b}=u;b!=null&&(x.target.value=b),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",b=>{if(u.focused)return;const{target:w}=b;if(g&&(w.type=f,m&&(w.step=m)),u.userValue){const S=u.userValue;if(g)if(f==="time"){const O=new Date(S),T=[O.getHours(),O.getMinutes(),O.getSeconds()];w.value=T.map(M=>M.toString().padStart(2,"0")).join(":")}else w.value=new Date(S-aG).toISOString().split(f==="date"?"T":".",1)[0];else w.value=S}u.lastCommittedValue=w.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const w={value(S){u.userValue=S.detail.value??"",g||e.setValue(t,{value:u.userValue.toString()}),S.target.value=u.userValue},formattedValue(S){const{formattedValue:O}=S.detail;u.formattedValue=O,O!=null&&S.target!==document.activeElement&&(S.target.value=O);const T={formattedValue:O};g&&(T.value=O),e.setValue(t,T)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{const{charLimit:O}=S.detail,{target:T}=S;if(O===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",O);let M=u.userValue;!M||M.length<=O||(M=M.slice(0,O),T.value=u.userValue=M,e.setValue(t,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(w,b)}),r.addEventListener("keydown",b=>{u.commitKey=1;let w=-1;if(b.key==="Escape"?w=0:b.key==="Enter"&&!this.data.multiLine?w=2:b.key==="Tab"&&(u.commitKey=3),w===-1)return;const{value:S}=b.target;u.lastCommittedValue!==S&&(u.lastCommittedValue=S,u.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:w,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const x=y;y=null,r.addEventListener("blur",b=>{if(!u.focused||!b.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{target:w}=b;let{value:S}=w;if(g){if(S&&f==="time"){const O=S.split(":").map(T=>parseInt(T,10));S=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),w.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();w.type="text"}u.userValue=S,u.lastCommittedValue!==S&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:u.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}),x(b)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",b=>{u.lastCommittedValue=null;const{data:w,target:S}=b,{value:O,selectionStart:T,selectionEnd:M}=S;let N=T,j=M;switch(b.inputType){case"deleteWordBackward":{const C=O.substring(0,T).match(/\w*[^\w]*$/);C&&(N-=C[0].length);break}case"deleteWordForward":{const C=O.substring(T).match(/^[^\w]*\w*/);C&&(j+=C[0].length);break}case"deleteContentBackward":T===M&&(N-=1);break;case"deleteContentForward":T===M&&(j+=1);break}b.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:O,change:w||"",willCommit:!1,selStart:N,selEnd:j}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(y&&r.addEventListener("blur",y),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/s;r.classList.add("comb"),r.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class cG extends ll{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class uG extends ll{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Zo.add(a),a.setAttribute("data-element-id",r),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:l,checked:u}=s.target;for(const d of this._getElementsByName(l,r)){const f=u&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}e.setValue(r,{value:u})}),a.addEventListener("resetform",s=>{const l=t.defaultFieldValue||"Off";s.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const l={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(r,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class xI extends ll{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,r))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(Zo.add(a),a.setAttribute("data-element-id",r),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:l,checked:u}=s.target;for(const d of this._getElementsByName(l,r))e.setValue(d.id,{value:!1});e.setValue(r,{value:u})}),a.addEventListener("resetform",s=>{const l=t.defaultFieldValue;s.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;a.addEventListener("updatefromsandbox",l=>{const u={value:d=>{const f=s===d.detail.value;for(const m of this._getElementsByName(d.target.name)){const g=f&&m.id===r;m.domElement&&(m.domElement.checked=g),e.setValue(m.id,{value:g})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class dG extends RA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class hG extends ll{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Zo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const g of i.options)g.selected=g.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,r.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),a=!1),i.append(m)}let s=null;if(a){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),s=()=>{f.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const l=f=>{const m=f?"value":"textContent",{options:g,multiple:y}=i;return y?Array.prototype.filter.call(g,x=>x.selected).map(x=>x[m]):g.selectedIndex===-1?null:g[g.selectedIndex][m]};let u=l(!1);const d=f=>{const m=f.target.options;return Array.prototype.map.call(m,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const m={value(g){s?.();const y=g.detail.value,x=new Set(Array.isArray(y)?y:[y]);for(const b of i.options)b.selected=x.has(b.value);e.setValue(t,{value:l(!0)}),u=l(!1)},multipleSelection(g){i.multiple=!0},remove(g){const y=i.options,x=g.detail.remove;y[x].selected=!1,i.remove(x),y.length>0&&Array.prototype.findIndex.call(y,w=>w.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:l(!0),items:d(g)}),u=l(!1)},clear(g){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=l(!1)},insert(g){const{index:y,displayValue:x,exportValue:b}=g.detail.insert,w=i.children[y],S=document.createElement("option");S.textContent=x,S.value=b,w?w.before(S):i.append(S),e.setValue(t,{value:l(!0),items:d(g)}),u=l(!1)},items(g){const{items:y}=g.detail;for(;i.length!==0;)i.remove(0);for(const x of y){const{displayValue:b,exportValue:w}=x,S=document.createElement("option");S.textContent=b,S.value=w,i.append(S)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(g)}),u=l(!1)},indices(g){const y=new Set(g.detail.indices);for(const x of g.target.options)x.selected=y.has(x.index);e.setValue(t,{value:l(!0)}),u=l(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(m,f)}),i.addEventListener("input",f=>{const m=l(!0),g=l(!1);e.setValue(t,{value:m}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:g,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class T_ extends tn{constructor(e){const{data:t,elements:r,parent:i}=e,a=!!i._commentManager;if(super(e,{isRenderable:!a&&tn._hasPopupData(t)}),this.elements=r,a&&tn._hasPopupData(t)){const s=this.popup=this.#e();for(const l of r)l.popup=s}else this.popup=null}#e(){return new fG({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),r=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${xA}${i}`).join(",")),this.container}}class fG{#e=null;#t=this.#H.bind(this);#r=this.#$.bind(this);#n=this.#R.bind(this);#s=this.#x.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#v=null;#b=null;#y=null;#E=null;#S=null;#w=null;#O=!1;#_=null;#A=null;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:a,contentsObj:s,richText:l,parent:u,rect:d,parentRect:f,open:m,commentManager:g=null}){this.#a=e,this.#S=i,this.#o=s,this.#E=l,this.#h=u,this.#i=t,this.#y=d,this.#d=f,this.#l=r,this.#e=g,this.#_=r[0],this.#c=yp.toDateObject(a),this.trigger=r.flatMap(y=>y.getElementsToTriggerPopup()),g?this.renderCommentButton():(this.#N(),this.#a.hidden=!0,m&&this.#x())}#N(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#s,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#r,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#C(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#v||this.#C(),!this.#v))return;const{signal:e}=this.#m=new AbortController,t=!!this.#_.extraPopupElement,r=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},a=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#_.container;for(const s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",this.#t,{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),s.classList.add("popupTriggerArea")}else{const s=this.#p=document.createElement("button");s.className="annotationCommentButton";const l=this.#_.container;s.style.zIndex=l.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#j(),s.addEventListener("keydown",this.#t,{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),l.after(s)}}#j(){if(this.#_.extraPopupElement&&!this.#_.editor)return;this.renderCommentButton();const[e,t]=this.#v,{style:r}=this.#p;r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`}#I(){this.#_.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#_.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:i,modificationDate:a}=this.#_.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:i,modificationDate:a}}get elementBeforePopup(){return this.#p}get comment(){return this.#A||=this.#_.commentText,this.#A}set comment(e){e!==this.comment&&(this.#_.commentText=this.#A=e)}get parentBoundingClientRect(){return this.#_.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:r}=this.#p.getBoundingClientRect(),{x:i,y:a,width:s,height:l}=this.#_.layer.getBoundingClientRect();return[(e-i)/s,(t+r-a)/l]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=this.#b||this.commentButtonPosition.map(d=>d/100),i=this.parentBoundingClientRect,{x:a,y:s,width:l,height:u}=i;this.#e.showDialog(null,this,a+t*l,s+r*u,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#i){const r=e.style.outlineColor=Ce.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#S?.str){const r=document.createElement("span");r.className="title",t.append(r),{dir:r.dir,str:r.textContent}=this.#S}if(e.append(t),this.#c){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),r.dateTime=this.#c.toISOString(),t.append(r)}SA({html:this.#P||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#P(){const e=this.#E,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#E.html||null}get#k(){return this.#P?.attributes?.style?.fontSize||0}get#B(){return this.#P?.attributes?.style?.color||null}#D(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#B,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return r}#H(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#x()}updateEdited({rect:e,popup:t,deleted:r}){if(this.#e){r?(this.remove(),this.#A=null):t&&(t.deleted?this.remove():(this.#I(),this.#A=t.text)),e&&(this.#v=null,this.#C(),this.#j());return}if(r||t?.deleted){this.remove();return}this.#N(),this.#w||={contentsObj:this.#o,richText:this.#E},e&&(this.#u=null),t&&t.text&&(this.#E=this.#D(t.text),this.#c=yp.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#E}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#O=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:a}}}=this.#h;let s=!!this.#d,l=s?this.#d:this.#y;for(const x of this.#l)if(!l||Ce.intersect(x.data.rect,l)!==null){l=x.data.rect,s=!0;break}const u=Ce.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),f=s?l[2]-l[0]+5:0,m=u[0]+f,g=u[1];this.#u=[100*(m-i)/t,100*(g-a)/r];const{style:y}=this.#a;y.left=`${this.#u[0]}%`,y.top=`${this.#u[1]}%`}#x(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#R(),this.#a.addEventListener("click",this.#s),this.#a.addEventListener("keydown",this.#t)):(this.#$(),this.#a.removeEventListener("click",this.#s),this.#a.removeEventListener("keydown",this.#t))}#R(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#$(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#O=this.isVisible,this.#O&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#N(),this.#O&&(this.#g||this.#R(),this.#O=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class _I extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Xe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class mG extends tn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class pG extends tn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),a=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",a/2),s.setAttribute("y",a/2),s.setAttribute("width",t-a),s.setAttribute("height",r-a),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class gG extends tn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:r}=this,i=this.svgFactory.create(t,r,!0),a=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",t/2),s.setAttribute("cy",r/2),s.setAttribute("rx",t/2-a/2),s.setAttribute("ry",r/2-a/2),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class SI extends tn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:i},width:a,height:s}=this;if(!t)return this.container;const l=this.svgFactory.create(a,s,!0);let u=[];for(let f=0,m=t.length;f<m;f+=2){const g=t[f]-e[0],y=e[3]-t[f+1];u.push(`${g},${y}`)}u=u.join(" ");const d=this.#e=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",u),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class vG extends SI{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class yG extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class kA extends tn{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Xe.HIGHLIGHT:Xe.INK}#r(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:s,width:l,height:u}=this.#r(t,e),d=this.svgFactory.create(l,u,!0),f=this.#e=this.svgFactory.createElement("svg:g");d.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",s);for(let m=0,g=r.length;m<g;m++){const y=this.svgFactory.createElement(this.svgElementName);this.#t.push(y),y.setAttribute("points",r[m].join(",")),f.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:r,rect:i}=e,a=this.#e;if(t>=0&&a.setAttribute("stroke-width",t||1),r)for(let s=0,l=this.#t.length;s<l;s++)this.#t[s].setAttribute("points",r[s].join(","));if(i){const{transform:s,width:l,height:u}=this.#r(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",s)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class AI extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Xe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class bG extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class wG extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class xG extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class EI extends tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Xe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class _G extends tn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=In.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let DA=class TI{#e=null;#t=null;#r=null;#n=new Map;#s=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:l,commentManager:u,linkService:d,annotationStorage:f}){this.div=e,this.#e=t,this.#t=r,this.#s=l||null,this.#i=d||null,this.#r=f||new TA,this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=u||null}hasEditableAnnotations(){return this.#n.size>0}async#a(e,t,r){const i=e.firstChild||e,a=i.id=`${xA}${t}`,s=await this.#s?.getAriaAttributes(a);if(s)for(const[l,u]of s)i.setAttribute(l,u);r?r.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,r=this.div;Hs(r,this.viewport);const i=new Map,a={data:null,layer:r,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new nh,annotationStorage:this.#r,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const s of t){if(s.noHTML)continue;const l=s.annotationType===cn.POPUP;if(l){const f=i.get(s.id);if(!f)continue;a.elements=f}else if(s.rect[2]===s.rect[0]||s.rect[3]===s.rect[1])continue;a.data=s;const u=cN.create(a);if(!u.isRenderable)continue;if(!l&&s.popupRef){const f=i.get(s.popupRef);f?f.push(u):i.set(s.popupRef,[u])}const d=u.render();s.hidden&&(d.style.visibility="hidden"),await this.#a(d,s.id,a.elements),u.extraPopupElement?.popup?.renderCommentButton(),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new nh,parent:this};for(const r of e){r.borderStyle||=TI._defaultBorderStyle,t.data=r;const i=cN.create(t);if(!i.isRenderable)continue;const a=i.render();await this.#a(a,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Hs(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const s=this.#n.get(t);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,r),s._hasNoCanvas=!1):s.canvas=r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:r,rotation:i}=e,a=new sG({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#r}),s=a.render();return t.append(s),this.#e?.moveElementInDOM(t,s,s,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return Qe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:cc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const $m=/\r\n?|\n/g;class kn extends $e{#e="";#t=`${this.id}-editor`;#r=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=kn.prototype,t=a=>a.isEmpty(),r=Ga.TRANSLATE_SMALL,i=Ga.TRANSLATE_BIG;return Qe(this,"_keyboardManager",new Gh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Xe.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||kn._defaultColor||$e._defaultLineColor,this.#n=e.fontSize||kn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){$e.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case ut.FREETEXT_SIZE:kn._defaultFontSize=t;break;case ut.FREETEXT_COLOR:kn._defaultColor=t;break}}updateParams(e,t){switch(e){case ut.FREETEXT_SIZE:this.#s(t);break;case ut.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[ut.FREETEXT_SIZE,kn._defaultFontSize],[ut.FREETEXT_COLOR,kn._defaultColor||$e._defaultLineColor]]}get propertiesToUpdate(){return[[ut.FREETEXT_SIZE,this.#n],[ut.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new th(this),[["colorPicker",this._colorPicker]]}get colorType(){return ut.FREETEXT_COLOR}#s(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},r=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-kn._internalPadding*e,-(kn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(kn.#c(r)),t=r);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,s=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=s,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const r=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){kn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,f]=this.pageDimensions,[m,g]=this.pageTranslation;let y,x;switch(this.rotation){case 0:y=e+(s[0]-m)/d,x=t+this.height-(s[1]-g)/f;break;case 90:y=e+(s[0]-m)/d,x=t-(s[1]-g)/f,[l,u]=[u,-l];break;case 180:y=e-this.width+(s[0]-m)/d,x=t-(s[1]-g)/f,[l,u]=[-l,-u];break;case 270:y=e+(s[0]-m-this.height*f)/d,x=t+(s[1]-g-this.width*d)/f,[l,u]=[-u,l];break}this.setAt(y*i,x*a,l,u)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll($m,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const i=kn.#d(t.getData("text")||"").replaceAll($m,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const s=a.getRangeAt(0);if(!i.includes(`
`)){s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=s,d=[],f=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(f.push(l.nodeValue.slice(u).replaceAll($m,"")),y!==this.editorDiv){let x=d;for(const b of this.editorDiv.childNodes){if(b===y){x=f;continue}x.push(kn.#c(b))}}d.push(l.nodeValue.slice(0,u).replaceAll($m,""))}else if(l===this.editorDiv){let y=d,x=0;for(const b of this.editorDiv.childNodes)x++===u&&(y=f),y.push(kn.#c(b))}this.#e=`${d.join(`
`)}${i}${f.join(`
`)}`,this.#l();const m=new Range;let g=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const x=y.nodeValue.length;if(g<=x){m.setStart(y,g),m.setEnd(y,g);break}g-=x}a.removeAllRanges(),a.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=kn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,r){let i=null;if(e instanceof _I){const{data:{defaultAppearanceData:{fontSize:s,fontColor:l},rect:u,rotation:d,id:f,popupRef:m,richText:g,contentsObj:y,creationDate:x,modificationDate:b},textContent:w,textPosition:S,parent:{page:{pageNumber:O}}}=e;if(!w||w.length===0)return null;i=e={annotationType:Xe.FREETEXT,color:Array.from(l),fontSize:s,value:w.join(`
`),position:S,pageIndex:O-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:y?.str||null,richText:g,creationDate:x,modificationDate:b}}const a=await super.deserialize(e,t,r);return a.#n=e.fontSize,a.color=Ce.makeHexColor(...e.color),a.#e=kn.#d(e.value),a._initialData=i,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=$e._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!this.#f(r)?null:(r.id=this.annotationElementId,r)}#f(e){const{value:t,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((s,l)=>s!==i[l])||e.pageIndex!==a}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:r}=t;r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Oe{static PRECISION=1e-4;toSVGPath(){kt("Abstract method `toSVGPath` must be implemented.")}get box(){kt("Abstract getter `box` must be implemented.")}serialize(e,t){kt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,a,s){s||=new Float32Array(e.length);for(let l=0,u=e.length;l<u;l+=2)s[l]=t+e[l]*i,s[l+1]=r+e[l+1]*a;return s}static _rescaleAndSwap(e,t,r,i,a,s){s||=new Float32Array(e.length);for(let l=0,u=e.length;l<u;l+=2)s[l]=t+e[l+1]*i,s[l+1]=r+e[l]*a;return s}static _translate(e,t,r,i){i||=new Float32Array(e.length);for(let a=0,s=e.length;a<s;a+=2)i[a]=t+e[a],i[a+1]=r+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,a){switch(a){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,a,s){return[(e+5*r)/6,(t+5*i)/6,(5*r+a)/6,(5*i+s)/6,(r+a)/2,(i+s)/2]}}class Bo{#e;#t=[];#r;#n;#s=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#d;#f=[];static#g=8;static#m=2;static#u=Bo.#g+Bo.#m;constructor({x:e,y:t},r,i,a,s,l=0){this.#e=r,this.#d=a*i,this.#n=s,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#r=l,this.#l=Bo.#g*i,this.#c=Bo.#u*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#p(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[r,i,a,s]=this.#e;return[(this.#a+(e[0]-t[0])/2-r)/a,(this.#o+(e[1]-t[1])/2-i)/s,(this.#a+(t[0]-e[0])/2-r)/a,(this.#o+(t[1]-e[1])/2-i)/s]}add({x:e,y:t}){this.#a=e,this.#o=t;const[r,i,a,s]=this.#e;let[l,u,d,f]=this.#i.subarray(8,12);const m=e-d,g=t-f,y=Math.hypot(m,g);if(y<this.#c)return!1;const x=y-this.#l,b=x/y,w=b*m,S=b*g;let O=l,T=u;l=d,u=f,d+=w,f+=S,this.#f?.push(e,t);const M=-S/x,N=w/x,j=M*this.#d,C=N*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([d+j,f+C],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([d-j,f-C],16),isNaN(this.#i[6])?(this.#s.length===0&&(this.#i.set([l+j,u+C],2),this.#s.push(NaN,NaN,NaN,NaN,(l+j-r)/a,(u+C-i)/s),this.#i.set([l-j,u-C],14),this.#t.push(NaN,NaN,NaN,NaN,(l-j-r)/a,(u-C-i)/s)),this.#i.set([O,T,l,u,d,f],6),!this.isEmpty()):(this.#i.set([O,T,l,u,d,f],6),Math.abs(Math.atan2(T-u,O-l)-Math.atan2(S,w))<Math.PI/2?([l,u,d,f]=this.#i.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((l+d)/2-r)/a,((u+f)/2-i)/s),[l,u,O,T]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((O+l)/2-r)/a,((T+u)/2-i)/s),!0):([O,T,l,u,d,f]=this.#i.subarray(0,6),this.#s.push(((O+5*l)/6-r)/a,((T+5*u)/6-i)/s,((5*l+d)/6-r)/a,((5*u+f)/6-i)/s,((l+d)/2-r)/a,((u+f)/2-i)/s),[d,f,l,u,O,T]=this.#i.subarray(12,18),this.#t.push(((O+5*l)/6-r)/a,((T+5*u)/6-i)/s,((5*l+d)/6-r)/a,((5*u+f)/6-i)/s,((l+d)/2-r)/a,((u+f)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#y(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(r),r.join(" ")}#v(){const[e,t,r,i]=this.#e,[a,s,l,u]=this.#p();return`M${(this.#i[2]-e)/r} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/r} ${(this.#i[5]-t)/i} L${a} ${s} L${l} ${u} L${(this.#i[16]-e)/r} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/r} ${(this.#i[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,r,i,a]=this.#e,s=this.#i.subarray(4,6),l=this.#i.subarray(16,18),[u,d,f,m]=this.#p();e.push(`L${(s[0]-t)/i} ${(s[1]-r)/a} L${u} ${d} L${f} ${m} L${(l[0]-t)/i} ${(l[1]-r)/a}`)}newFreeDrawOutline(e,t,r,i,a,s){return new OI(e,t,r,i,a,s)}getOutlines(){const e=this.#s,t=this.#t,r=this.#i,[i,a,s,l]=this.#e,u=new Float32Array((this.#f?.length??0)+2);for(let m=0,g=u.length-2;m<g;m+=2)u[m]=(this.#f[m]-i)/s,u[m+1]=(this.#f[m+1]-a)/l;if(u[u.length-2]=(this.#a-i)/s,u[u.length-1]=(this.#o-a)/l,isNaN(r[6])&&!this.isEmpty())return this.#E(u);const d=new Float32Array(this.#s.length+24+this.#t.length);let f=e.length;for(let m=0;m<f;m+=2){if(isNaN(e[m])){d[m]=d[m+1]=NaN;continue}d[m]=e[m],d[m+1]=e[m+1]}f=this.#w(d,f);for(let m=t.length-6;m>=6;m-=6)for(let g=0;g<6;g+=2){if(isNaN(t[m+g])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=t[m+g],d[f+1]=t[m+g+1],f+=2}return this.#S(d,f),this.newFreeDrawOutline(d,u,this.#e,this.#h,this.#r,this.#n)}#E(e){const t=this.#i,[r,i,a,s]=this.#e,[l,u,d,f]=this.#p(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-r)/a,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-r)/a,(t[5]-i)/s,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(t[16]-r)/a,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-r)/a,(t[15]-i)/s],0),this.newFreeDrawOutline(m,e,this.#e,this.#h,this.#r,this.#n)}#S(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#w(e,t){const r=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[a,s,l,u]=this.#e,[d,f,m,g]=this.#p();return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-s)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,m,g,NaN,NaN,NaN,NaN,(i[0]-a)/l,(i[1]-s)/u],t),t+=24}}class OI extends Oe{#e;#t=new Float32Array(4);#r;#n;#s;#i;#a;constructor(e,t,r,i,a,s){super(),this.#a=e,this.#s=t,this.#e=r,this.#i=i,this.#r=a,this.#n=s,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(s);const[l,u,d,f]=this.#t;for(let m=0,g=e.length;m<g;m+=2)e[m]=(e[m]-l)/d,e[m+1]=(e[m+1]-u)/f;for(let m=0,g=t.length;m<g;m+=2)t[m]=(t[m]-l)/d,t[m+1]=(t[m+1]-u)/f}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,r=this.#a.length;t<r;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,i],a){const s=r-e,l=i-t;let u,d;switch(a){case 0:u=Oe._rescale(this.#a,e,i,s,-l),d=Oe._rescale(this.#s,e,i,s,-l);break;case 90:u=Oe._rescaleAndSwap(this.#a,e,t,s,l),d=Oe._rescaleAndSwap(this.#s,e,t,s,l);break;case 180:u=Oe._rescale(this.#a,r,t,-s,l),d=Oe._rescale(this.#s,r,t,-s,l);break;case 270:u=Oe._rescaleAndSwap(this.#a,r,i,-s,-l),d=Oe._rescaleAndSwap(this.#s,r,i,-s,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}#o(e){const t=this.#a;let r=t[4],i=t[5];const a=[r,i,r,i];let s=r,l=i,u=r,d=i;const f=e?Math.max:Math.min,m=new Float32Array(4);for(let y=6,x=t.length;y<x;y+=6){const b=t[y+4],w=t[y+5];isNaN(t[y])?(Ce.pointBoundingBox(b,w,a),l>w?(s=b,l=w):l===w&&(s=f(s,b)),d<w?(u=b,d=w):d===w&&(u=f(u,b))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,Ce.bezierBoundingBox(r,i,...t.slice(y,y+6),m),Ce.rectBoundingBox(m[0],m[1],m[2],m[3],a),l>m[1]?(s=m[0],l=m[1]):l===m[1]&&(s=f(s,m[0])),d<m[3]?(u=m[2],d=m[3]):d===m[3]&&(u=f(u,m[2]))),r=b,i=w}const g=this.#t;g[0]=a[0]-this.#r,g[1]=a[1]-this.#r,g[2]=a[2]-a[0]+2*this.#r,g[3]=a[3]-a[1]+2*this.#r,this.firstPoint=[s,l],this.lastPoint=[u,d]}get box(){return this.#t}newOutliner(e,t,r,i,a,s=0){return new Bo(e,t,r,i,a,s)}getNewOutline(e,t){const[r,i,a,s]=this.#t,[l,u,d,f]=this.#e,m=a*d,g=s*f,y=r*d+l,x=i*f+u,b=this.newOutliner({x:this.#s[0]*m+y,y:this.#s[1]*g+x},this.#e,this.#i,e,this.#n,t??this.#r);for(let w=2;w<this.#s.length;w+=2)b.add({x:this.#s[w]*m+y,y:this.#s[w+1]*g+x});return b.getOutlines()}}class O_{#e;#t;#r;#n=[];#s=[];constructor(e,t=0,r=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:b,y:w,width:S,height:O}of e){const T=Math.floor((b-t)/s)*s,M=Math.ceil((b+S+t)/s)*s,N=Math.floor((w-t)/s)*s,j=Math.ceil((w+O+t)/s)*s,C=[T,N,j,!0],R=[M,N,j,!1];this.#n.push(C,R),Ce.rectBoundingBox(T,N,M,j,a)}const l=a[2]-a[0]+2*r,u=a[3]-a[1]+2*r,d=a[0]-r,f=a[1]-r;let m=i?-1/0:1/0,g=1/0;const y=this.#n.at(i?-1:-2),x=[y[0],y[2]];for(const b of this.#n){const[w,S,O,T]=b;!T&&i?S<g?(g=S,m=w):S===g&&(m=Math.max(m,w)):T&&!i&&(S<g?(g=S,m=w):S===g&&(m=Math.min(m,w))),b[0]=(w-d)/l,b[1]=(S-f)/u,b[2]=(O-f)/u}this.#e=new Float32Array([d,f,l,u]),this.#t=[m,g],this.#r=x}getOutlines(){this.#n.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],r=new Set;for(const s of e){const[l,u,d]=s;t.push([l,u,s],[l,d,s])}t.sort((s,l)=>s[1]-l[1]||s[0]-l[0]);for(let s=0,l=t.length;s<l;s+=2){const u=t[s][2],d=t[s+1][2];u.push(d),d.push(u),r.add(u),r.add(d)}const i=[];let a;for(;r.size>0;){const s=r.values().next().value;let[l,u,d,f,m]=s;r.delete(s);let g=l,y=u;for(a=[l,d],i.push(a);;){let x;if(r.has(f))x=f;else if(r.has(m))x=m;else break;r.delete(x),[l,u,d,f,m]=x,g!==l&&(a.push(g,y,l,y===u?u:d),g=l),y=y===u?d:u}a.push(g,y)}return new SG(i,this.#e,this.#t,this.#r)}#a(e){const t=this.#s;let r=0,i=t.length-1;for(;r<=i;){const a=r+i>>1,s=t[a][0];if(s===e)return a;s<e?r=a+1:i=a-1}return i+1}#o([,e,t]){const r=this.#a(e);this.#s.splice(r,0,[e,t])}#c([,e,t]){const r=this.#a(e);for(let i=r;i<this.#s.length;i++){const[a,s]=this.#s[i];if(a!==e)break;if(a===e&&s===t){this.#s.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[a,s]=this.#s[i];if(a!==e)break;if(a===e&&s===t){this.#s.splice(i,1);return}}}#l(e){const[t,r,i]=e,a=[[t,r,i]],s=this.#a(i);for(let l=0;l<s;l++){const[u,d]=this.#s[l];for(let f=0,m=a.length;f<m;f++){const[,g,y]=a[f];if(!(d<=g||y<=u)){if(g>=u){if(y>d)a[f][1]=d;else{if(m===1)return[];a.splice(f,1),f--,m--}continue}a[f][2]=u,y>d&&a.push([t,d,y])}}}return a}}class SG extends Oe{#e;#t;constructor(e,t,r,i){super(),this.#t=e,this.#e=t,this.firstPoint=r,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let a=2;a<t.length;a+=2){const s=t[a],l=t[a+1];s===r?(e.push(`V${l}`),i=l):l===i&&(e.push(`H${s}`),r=s)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],a){const s=[],l=r-e,u=i-t;for(const d of this.#t){const f=new Array(d.length);for(let m=0;m<d.length;m+=2)f[m]=e+d[m]*l,f[m+1]=i-d[m+1]*u;s.push(f)}return s}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class C_ extends Bo{newFreeDrawOutline(e,t,r,i,a,s){return new AG(e,t,r,i,a,s)}}class AG extends OI{newOutliner(e,t,r,i,a,s=0){return new C_(e,t,r,i,a,s)}}class un extends $e{#e=null;#t=0;#r;#n=null;#s=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#m=null;#u="";#p;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Xe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=un.prototype;return Qe(this,"_keyboardManager",new Gh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||un._defaultColor,this.#p=e.thickness||un._defaultThickness,this.opacity=e.opacity||un._defaultOpacity,this.#r=e.boxes||null,this.#v=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#_()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#_(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new O_(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new O_(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:r}=this.#l;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#p/2+i,.0025),t>=0)this.#h=t,this.#n=r,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:un.#A(this.#l.box,(m-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:un.#A(this.#i.box,m),path:{d:this.#i.toSVGPath()}})}const[a,s,l,u]=e.box;switch(this.rotation){case 0:this.x=a,this.y=s,this.width=l,this.height=u;break;case 90:{const[m,g]=this.parentDimensions;this.x=s,this.y=1-a,this.width=l*g/m,this.height=u*m/g;break}case 180:this.x=1-a,this.y=1-s,this.width=l,this.height=u;break;case 270:{const[m,g]=this.parentDimensions;this.x=1-s,this.y=a,this.width=l*g/m,this.height=u*m/g;break}}const{firstPoint:d}=e;this.#f=[(d[0]-a)/l,(d[1]-s)/u];const{lastPoint:f}=this.#i;this.#g=[(f[0]-a)/l,(f[1]-s)/u]}static initialize(e,t){$e.initialize(e,t),un._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case ut.HIGHLIGHT_COLOR:un._defaultColor=t;break;case ut.HIGHLIGHT_THICKNESS:un._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case ut.HIGHLIGHT_COLOR:this.#E(t);break;case ut.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[ut.HIGHLIGHT_COLOR,un._defaultColor],[ut.HIGHLIGHT_THICKNESS,un._defaultThickness]]}get propertiesToUpdate(){return[[ut.HIGHLIGHT_COLOR,this.color||un._defaultColor],[ut.HIGHLIGHT_THICKNESS,this.#p||un._defaultThickness],[ut.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#s?.updateColor(this.color),super.onUpdatedColor()}#E(e){const t=(a,s)=>{this.color=a,this.opacity=s,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,un._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#S(e){const t=this.#p,r=i=>{this.#p=i,this.#w(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ut.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new Fr({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#j())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#j())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#O(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#_(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#O():e&&(this.#_(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#w(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#O(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#_(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#A([e,t,r,i],a){switch(a){case 90:return[1-t-i,e,i,r];case 180:return[1-e-r,1-t-i,r,i];case 270:return[t,1-e-r,i,r]}return[e,t,r,i]}rotate(e){const{drawLayer:t}=this.parent;let r;this.#d?(e=(e-this.rotation+360)%360,r=un.#A(this.#l.box,e)):r=un.#A([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:un.#A(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#N.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),tI(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#N(e){un._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#C(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#j(){return this.#d?this.rotation:0}#I(){if(this.#d)return null;const[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,a=this.#r,s=new Float32Array(a.length*8);let l=0;for(const{x:u,y:d,width:f,height:m}of a){const g=u*e+r,y=(1-d)*t+i;s[l]=s[l+4]=g,s[l+1]=s[l+3]=y,s[l+2]=s[l+6]=g+f*e,s[l+5]=s[l+7]=y-m*t,l+=8}return s}#P(e){return this.#l.serialize(e,this.#j())}static startHighlighting(e,t,{target:r,x:i,y:a}){const{x:s,y:l,width:u,height:d}=r.getBoundingClientRect(),f=new AbortController,m=e.combinedSignal(f),g=y=>{f.abort(),this.#B(e,y)};window.addEventListener("blur",g,{signal:m}),window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("pointerdown",Qt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Yr,{signal:m}),r.addEventListener("pointermove",this.#k.bind(this,e),{signal:m}),this._freeHighlight=new C_({x:i,y:a},[s,l,u,d],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let i=null;if(e instanceof AI){const{data:{quadPoints:x,rect:b,rotation:w,id:S,color:O,opacity:T,popupRef:M,richText:N,contentsObj:j,creationDate:C,modificationDate:R},parent:{page:{pageNumber:k}}}=e;i=e={annotationType:Xe.HIGHLIGHT,color:Array.from(O),opacity:T,quadPoints:x,boxes:null,pageIndex:k-1,rect:b.slice(0),rotation:w,annotationElementId:S,id:S,deleted:!1,popupRef:M,richText:N,comment:j?.str||null,creationDate:C,modificationDate:R}}else if(e instanceof kA){const{data:{inkLists:x,rect:b,rotation:w,id:S,color:O,borderStyle:{rawWidth:T},popupRef:M,richText:N,contentsObj:j,creationDate:C,modificationDate:R},parent:{page:{pageNumber:k}}}=e;i=e={annotationType:Xe.HIGHLIGHT,color:Array.from(O),thickness:T,inkLists:x,boxes:null,pageIndex:k-1,rect:b.slice(0),rotation:w,annotationElementId:S,id:S,deleted:!1,popupRef:M,richText:N,comment:j?.str||null,creationDate:C,modificationDate:R}}const{color:a,quadPoints:s,inkLists:l,opacity:u}=e,d=await super.deserialize(e,t,r);d.color=Ce.makeHexColor(...a),d.opacity=u||1,l&&(d.#p=e.thickness),d._initialData=i,e.comment&&d.setCommentData(e);const[f,m]=d.pageDimensions,[g,y]=d.pageTranslation;if(s){const x=d.#r=[];for(let b=0;b<s.length;b+=8)x.push({x:(s[b]-g)/f,y:1-(s[b+1]-y)/m,width:(s[b+2]-s[b])/f,height:(s[b+1]-s[b+5])/m});d.#b(),d.#_(),d.rotate(d.rotation)}else if(l){d.#d=!0;const x=l[0],b={x:x[0]-g,y:m-(x[1]-y)},w=new C_(b,[0,0,f,m],1,d.#p/2,!0,.001);for(let T=0,M=x.length;T<M;T+=2)b.x=x[T]-g,b.y=m-(x[T+1]-y),w.add(b);const{id:S,clipPathId:O}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);d.#y({highlightOutlines:w.getOutlines(),highlightId:S,clipPathId:O}),d.#_(),d.rotate(d.parentRotation)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=$e._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#P(r.rect)}),this.addComment(r),this.annotationElementId&&!this.#D(r)?null:(r.id=this.annotationElementId,r)}#D(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class CI{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){kt("Not implemented")}}class qe extends $e{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#s=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:r}){this.#e=e,this._drawingOptions||=r,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:r}=t.drawLayer.draw(qe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,t){const r=new Set(Object.keys(e));for(const[i,a]of Object.entries(t))r.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){kt("Not implemented")}static get typesMap(){kt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,t),this._currentParent&&(qe.#r.updateProperty(r,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)e.push([r,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[r,i]of this.constructor.typesMap)e.push([r,t[i]]);return e}_updateProperty(e,t,r){const i=this._drawingOptions,a=i[t],s=l=>{i.updateProperty(t,l);const u=this.#e.updateProperty(t,l);u&&this.#u(u),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,r),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,qe._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#m()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,qe._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#m()),{bbox:this.#p()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,qe._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,r,i]){const{parentDimensions:[a,s],rotation:l}=this;switch(l){case 90:return[t,1-e,r*(s/a),i*(a/s)];case 180:return[1-e,1-t,r,i];case 270:return[1-t,e,r*(s/a),i*(a/s)];default:return[e,t,r,i]}}#m(){const{x:e,y:t,width:r,height:i,parentDimensions:[a,s],rotation:l}=this;switch(l){case 90:return[1-t,e,r*(a/s),i*(s/a)];case 180:return[1-e,1-t,r,i];case 270:return[t,1-e,r*(a/s),i*(s/a)];default:return[e,t,r,i]}}#u(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:e,y:t,width:r,height:i,rotation:a,parentRotation:s,parentDimensions:[l,u]}=this;switch((a*4+s)/90){case 1:return[1-t-i,e,i,r];case 2:return[1-e-r,1-t-i,r,i];case 3:return[t,1-e-r,i,r];case 4:return[e,t-r*(l/u),i*(u/l),r*(l/u)];case 5:return[1-t,e,r*(l/u),i*(u/l)];case 6:return[1-e-i*(u/l),1-t,i*(u/l),r*(l/u)];case 7:return[t-r*(l/u),1-e-i*(u/l),r*(l/u),i*(u/l)];case 8:return[e-r,t-i,r,i];case 9:return[1-t,e-r,i,r];case 10:return[1-e,1-t,r,i];case 11:return[t-i,1-e,i,r];case 12:return[e-i*(u/l),t,i*(u/l),r*(l/u)];case 13:return[1-t-r*(l/u),e-i*(u/l),r*(l/u),i*(u/l)];case 14:return[1-e,1-t-r*(l/u),i*(u/l),r*(l/u)];case 15:return[t,1-e,r*(l/u),i*(u/l)];default:return[e,t,r,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,qe._mergeSVGProperties({bbox:this.#p()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),r}static createDrawerInstance(e,t,r,i,a){kt("Not implemented")}static startDrawing(e,t,r,i){const{target:a,offsetX:s,offsetY:l,pointerId:u,pointerType:d}=i;if(qe.#a&&qe.#a!==d)return;const{viewport:{rotation:f}}=e,{width:m,height:g}=a.getBoundingClientRect(),y=qe.#n=new AbortController,x=e.combinedSignal(y);if(qe.#i||=u,qe.#a??=d,window.addEventListener("pointerup",b=>{qe.#i===b.pointerId?this._endDraw(b):qe.#o?.delete(b.pointerId)},{signal:x}),window.addEventListener("pointercancel",b=>{qe.#i===b.pointerId?this._currentParent.endDrawingSession():qe.#o?.delete(b.pointerId)},{signal:x}),window.addEventListener("pointerdown",b=>{qe.#a===b.pointerType&&((qe.#o||=new Set).add(b.pointerId),qe.#r.isCancellable()&&(qe.#r.removeLastElement(),qe.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Yr,{signal:x}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),a.addEventListener("touchmove",b=>{b.timeStamp===qe.#c&&Qt(b)},{signal:x}),e.toggleDrawing(),t._editorUndoBar?.hide(),qe.#r){e.drawLayer.updateProperties(this._currentDrawId,qe.#r.startNew(s,l,m,g,f));return}t.updateUIForDefaultProperties(this),qe.#r=this.createDrawerInstance(s,l,m,g,f),qe.#s=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(qe.#s.toSVGProperties(),qe.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(qe.#c=-1,!qe.#r)return;const{offsetX:t,offsetY:r,pointerId:i}=e;if(qe.#i===i){if(qe.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,qe.#r.add(t,r)),qe.#c=e.timeStamp,Qt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,qe.#r=null,qe.#s=null,qe.#a=null,qe.#c=NaN),qe.#n&&(qe.#n.abort(),qe.#n=null,qe.#i=NaN,qe.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,qe.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=qe.#r,i=this._currentDrawId,a=r.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{t.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:ut.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(ut.DRAW_STEP),!qe.#r.isEmpty()){const{pageDimensions:[r,i],scale:a}=t,s=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:qe.#r.getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:qe.#s,mustBeCommitted:!e});return this._cleanup(!0),s}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,r,i,a,s){kt("Not implemented")}static async deserialize(e,t,r){const{rawDims:{pageWidth:i,pageHeight:a,pageX:s,pageY:l}}=t.viewport,u=this.deserializeDraw(s,l,i,a,this._INNER_MARGIN,e),d=await super.deserialize(e,t,r);return d.createDrawingOptions(e),d.#l({drawOutlines:u}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[t,r]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([t,r,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class EG{#e=new Float64Array(6);#t;#r;#n;#s;#i;#a="";#o=0;#c=new Xh;#l;#h;constructor(e,t,r,i,a,s){this.#l=r,this.#h=i,this.#n=a,this.#s=s,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#r=[{line:l,points:this.#i}],this.#e.set(l,0)}updateProperty(e,t){e==="stroke-width"&&(this.#s=t)}#d(e,t){return Oe._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#d(e,t);const[r,i,a,s]=this.#e.subarray(2,6),l=e-a,u=t-s;return Math.hypot(this.#l*l,this.#h*u)<=2?null:(this.#i.push(e,t),isNaN(r)?(this.#e.set([a,s,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,i,a,s,e,t],0),this.#t.push(...Oe.createBezierPoints(r,i,a,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,a){this.#l=r,this.#h=i,this.#n=a,[e,t]=this.#d(e,t);const s=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const l=this.#r.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#r.push({line:s,points:this.#i}),this.#e.set(s,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#c.removeLastElement();this.#r.pop(),this.#a="";for(let e=0,t=this.#r.length;e<t;e++){const{line:r,points:i}=this.#r[e];this.#t=r,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=Oe.svgRound(this.#t[4]),t=Oe.svgRound(this.#t[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#i.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=Oe.svgRound(this.#t[10]),a=Oe.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${i} ${a}`,this.#o=12,this.#a}const r=[];this.#o===0&&(r.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,a=this.#t.length;i<a;i+=6){const[s,l,u,d,f,m]=this.#t.slice(i,i+6).map(Oe.svgRound);r.push(`C${s} ${l} ${u} ${d} ${f} ${m}`)}return this.#a+=r.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,r,i){const a=this.#r.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#r,e,t,r,this.#n,this.#s,i),this.#e=null,this.#t=null,this.#r=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Xh extends Oe{#e;#t=0;#r;#n;#s;#i;#a;#o;#c;build(e,t,r,i,a,s,l){this.#s=t,this.#i=r,this.#a=i,this.#o=a,this.#c=s,this.#r=l??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${Oe.svgRound(t[4])} ${Oe.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${Oe.svgRound(t[10])} ${Oe.svgRound(t[11])}`);continue}for(let r=6,i=t.length;r<i;r+=6){const[a,s,l,u,d,f]=t.subarray(r,r+6).map(Oe.svgRound);e.push(`C${a} ${s} ${l} ${u} ${d} ${f}`)}}return e.join("")}serialize([e,t,r,i],a){const s=[],l=[],[u,d,f,m]=this.#h();let g,y,x,b,w,S,O,T,M;switch(this.#o){case 0:M=Oe._rescale,g=e,y=t+i,x=r,b=-i,w=e+u*r,S=t+(1-d-m)*i,O=e+(u+f)*r,T=t+(1-d)*i;break;case 90:M=Oe._rescaleAndSwap,g=e,y=t,x=r,b=i,w=e+d*r,S=t+u*i,O=e+(d+m)*r,T=t+(u+f)*i;break;case 180:M=Oe._rescale,g=e+r,y=t,x=-r,b=i,w=e+(1-u-f)*r,S=t+d*i,O=e+(1-u)*r,T=t+(d+m)*i;break;case 270:M=Oe._rescaleAndSwap,g=e+r,y=t+i,x=-r,b=-i,w=e+(1-d-m)*r,S=t+(1-u-f)*i,O=e+(1-d)*r,T=t+(1-u)*i;break}for(const{line:N,points:j}of this.#n)s.push(M(N,g,y,x,b,a?new Array(N.length):null)),l.push(M(j,g,y,x,b,a?new Array(j.length):null));return{lines:s,points:l,rect:[w,S,O,T]}}static deserialize(e,t,r,i,a,{paths:{lines:s,points:l},rotation:u,thickness:d}){const f=[];let m,g,y,x,b;switch(u){case 0:b=Oe._rescale,m=-e/r,g=t/i+1,y=1/r,x=-1/i;break;case 90:b=Oe._rescaleAndSwap,m=-t/i,g=-e/r,y=1/i,x=1/r;break;case 180:b=Oe._rescale,m=e/r+1,g=-t/i,y=-1/r,x=1/i;break;case 270:b=Oe._rescaleAndSwap,m=t/i+1,g=e/r+1,y=-1/i,x=-1/r;break}if(!s){s=[];for(const S of l){const O=S.length;if(O===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(O===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const T=new Float32Array(3*(O-2));s.push(T);let[M,N,j,C]=S.subarray(0,4);T.set([NaN,NaN,NaN,NaN,M,N],0);for(let R=4;R<O;R+=2){const k=S[R],F=S[R+1];T.set(Oe.createBezierPoints(M,N,j,C,k,F),(R-2)*3),[M,N,j,C]=[j,C,k,F]}}}for(let S=0,O=s.length;S<O;S++)f.push({line:b(s[S].map(T=>T??NaN),m,g,y,x),points:b(l[S].map(T=>T??NaN),m,g,y,x)});const w=new this.prototype.constructor;return w.build(f,r,i,1,u,d,a),w}#l(e=this.#c){const t=this.#r+e/2*this.#a;return this.#o%180===0?[t/this.#s,t/this.#i]:[t/this.#i,t/this.#s]}#h(){const[e,t,r,i]=this.#e,[a,s]=this.#l(0);return[e+a,t+s,r-2*a,i-2*s]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let l=4,u=i.length;l<u;l+=6)Ce.pointBoundingBox(i[l],i[l+1],e);continue}let a=i[4],s=i[5];for(let l=6,u=i.length;l<u;l+=6){const[d,f,m,g,y,x]=i.subarray(l,l+6);Ce.bezierBoundingBox(a,s,d,f,m,g,y,x,e),a=y,s=x}}const[t,r]=this.#l();e[0]=er(e[0]-t,0,1),e[1]=er(e[1]-r,0,1),e[2]=er(e[2]+t,0,1),e[3]=er(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,r]=this.#l();this.#c=e;const[i,a]=this.#l(),[s,l]=[i-t,a-r],u=this.#e;return u[0]-=s,u[1]-=l,u[2]+=2*s,u[3]+=2*l,u}updateParentDimensions([e,t],r){const[i,a]=this.#l();this.#s=e,this.#i=t,this.#a=r;const[s,l]=this.#l(),u=s-i,d=l-a,f=this.#e;return f[0]-=u,f[1]-=d,f[2]+=2*u,f[3]+=2*d,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Oe.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Oe.svgRound(e)} ${Oe.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let r=0,i=0,a=0,s=0,l=0,u=0;switch(this.#t){case 90:i=t/e,a=-e/t,l=e;break;case 180:r=-1,s=-1,l=e,u=t;break;case 270:i=-t/e,a=e/t,u=t;break;default:return""}return`matrix(${r} ${i} ${a} ${s} ${Oe.svgRound(l)} ${Oe.svgRound(u)})`}getPathResizingSVGProperties([e,t,r,i]){const[a,s]=this.#l(),[l,u,d,f]=this.#e;if(Math.abs(d-a)<=Oe.PRECISION||Math.abs(f-s)<=Oe.PRECISION){const b=e+r/2-(l+d/2),w=t+i/2-(u+f/2);return{path:{"transform-origin":`${Oe.svgRound(e)} ${Oe.svgRound(t)}`,transform:`${this.rotationTransform} translate(${b} ${w})`}}}const m=(r-2*a)/(d-2*a),g=(i-2*s)/(f-2*s),y=d/r,x=f/i;return{path:{"transform-origin":`${Oe.svgRound(l)} ${Oe.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${x}) translate(${Oe.svgRound(a)} ${Oe.svgRound(s)}) scale(${m} ${g}) translate(${Oe.svgRound(-a)} ${Oe.svgRound(-s)})`}}}getPathResizedSVGProperties([e,t,r,i]){const[a,s]=this.#l(),l=this.#e,[u,d,f,m]=l;if(l[0]=e,l[1]=t,l[2]=r,l[3]=i,Math.abs(f-a)<=Oe.PRECISION||Math.abs(m-s)<=Oe.PRECISION){const w=e+r/2-(u+f/2),S=t+i/2-(d+m/2);for(const{line:O,points:T}of this.#n)Oe._translate(O,w,S,O),Oe._translate(T,w,S,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Oe.svgRound(e)} ${Oe.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(r-2*a)/(f-2*a),y=(i-2*s)/(m-2*s),x=-g*(u+a)+e+a,b=-y*(d+s)+t+s;if(g!==1||y!==1||x!==0||b!==0)for(const{line:w,points:S}of this.#n)Oe._rescale(w,x,b,g,y,w),Oe._rescale(S,x,b,g,y,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Oe.svgRound(e)} ${Oe.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],r){const[i,a]=r,s=this.#e,l=e-s[0],u=t-s[1];if(this.#s===i&&this.#i===a)for(const{line:d,points:f}of this.#n)Oe._translate(d,l,u,d),Oe._translate(f,l,u,f);else{const d=this.#s/i,f=this.#i/a;this.#s=i,this.#i=a;for(const{line:m,points:g}of this.#n)Oe._rescale(m,l,u,d,f,m),Oe._rescale(g,l,u,d,f,g);s[2]*=d,s[3]*=f}return s[0]=e,s[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Oe.svgRound(e)} ${Oe.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Oe.svgRound(e[0])} ${Oe.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Pg extends CI{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:$e._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Pg(this._viewParameters);return e.updateAll(this),e}}class LA extends qe{static _type="ink";static _editorType=Xe.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){$e.initialize(e,t),this._defaultDrawingOptions=new Pg(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Qe(this,"typesMap",new Map([[ut.INK_THICKNESS,"stroke-width"],[ut.INK_COLOR,"stroke"],[ut.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,r,i,a){return new EG(e,t,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,r,i,a,s){return Xh.deserialize(e,t,r,i,a,s)}static async deserialize(e,t,r){let i=null;if(e instanceof kA){const{data:{inkLists:s,rect:l,rotation:u,id:d,color:f,opacity:m,borderStyle:{rawWidth:g},popupRef:y,richText:x,contentsObj:b,creationDate:w,modificationDate:S},parent:{page:{pageNumber:O}}}=e;i=e={annotationType:Xe.INK,color:Array.from(f),thickness:g,opacity:m,paths:{points:s},boxes:null,pageIndex:O-1,rect:l.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:x,comment:b?.str||null,creationDate:w,modificationDate:S}}const a=await super.deserialize(e,t,r);return a._initialData=i,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||=new th(this),[["colorPicker",this._colorPicker]]}get colorType(){return ut.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:r}=this;t.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:r}){this._drawingOptions=LA.getDefaultDrawingOptions({stroke:Ce.makeHexColor(...e),"stroke-width":t,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":s}}=this,l=Object.assign(super.serialize(e),{color:$e._colorManager.convert(i),opacity:a,thickness:s,paths:{lines:t,points:r}});return this.addComment(l),e?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:t,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((s,l)=>s!==t[l])||e.thickness!==r||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class j_ extends Xh{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Fm=8,pd=3;class Do{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,r,i){return r-=e,i-=t,r===0?i>0?0:4:r===1?i+6:2-i}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,r,i,a,s,l){const u=this.#t(r,i,a,s);for(let d=0;d<8;d++){const f=(-d+u-l+16)%8,m=this.#r[2*f],g=this.#r[2*f+1];if(e[(r+m)*t+(i+g)]!==0)return f}return-1}static#s(e,t,r,i,a,s,l){const u=this.#t(r,i,a,s);for(let d=0;d<8;d++){const f=(d+u+l+16)%8,m=this.#r[2*f],g=this.#r[2*f+1];if(e[(r+m)*t+(i+g)]!==0)return f}return-1}static#i(e,t,r,i){const a=e.length,s=new Int32Array(a);for(let f=0;f<a;f++)s[f]=e[f]<=i?1:0;for(let f=1;f<r-1;f++)s[f*t]=s[f*t+t-1]=0;for(let f=0;f<t;f++)s[f]=s[t*r-1-f]=0;let l=1,u;const d=[];for(let f=1;f<r-1;f++){u=1;for(let m=1;m<t-1;m++){const g=f*t+m,y=s[g];if(y===0)continue;let x=f,b=m;if(y===1&&s[g-1]===0)l+=1,b-=1;else if(y>=1&&s[g+1]===0)l+=1,b+=1,y>1&&(u=y);else{y!==1&&(u=Math.abs(y));continue}const w=[m,f],S=b===m+1,O={isHole:S,points:w,id:l,parent:0};d.push(O);let T;for(const D of d)if(D.id===u){T=D;break}T?T.isHole?O.parent=S?T.parent:u:O.parent=S?u:T.parent:O.parent=S?u:0;const M=this.#n(s,t,f,m,x,b,0);if(M===-1){s[g]=-l,s[g]!==1&&(u=Math.abs(s[g]));continue}let N=this.#r[2*M],j=this.#r[2*M+1];const C=f+N,R=m+j;x=C,b=R;let k=f,F=m;for(;;){const D=this.#s(s,t,k,F,x,b,1);N=this.#r[2*D],j=this.#r[2*D+1];const L=k+N,B=F+j;w.push(B,L);const V=k*t+F;if(s[V+1]===0?s[V]=-l:s[V]===1&&(s[V]=l),L===f&&B===m&&k===C&&F===R){s[g]!==1&&(u=Math.abs(s[g]));break}else x=k,b=F,k=L,F=B}}}return d}static#a(e,t,r,i){if(r-t<=4){for(let C=t;C<r-2;C+=2)i.push(e[C],e[C+1]);return}const a=e[t],s=e[t+1],l=e[r-4]-a,u=e[r-3]-s,d=Math.hypot(l,u),f=l/d,m=u/d,g=f*s-m*a,y=u/l,x=1/d,b=Math.atan(y),w=Math.cos(b),S=Math.sin(b),O=x*(Math.abs(w)+Math.abs(S)),T=x*(1-O+O**2),M=Math.max(Math.atan(Math.abs(S+w)*T),Math.atan(Math.abs(S-w)*T));let N=0,j=t;for(let C=t+2;C<r-2;C+=2){const R=Math.abs(g-f*e[C+1]+m*e[C]);R>N&&(j=C,N=R)}N>(d*M)**2?(this.#a(e,t,j+2,i),this.#a(e,j,r,i)):i.push(a,s)}static#o(e){const t=[],r=e.length;return this.#a(e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t}static#c(e,t,r,i,a,s){const l=new Float32Array(s**2),u=-2*i**2,d=s>>1;for(let b=0;b<s;b++){const w=(b-d)**2;for(let S=0;S<s;S++)l[b*s+S]=Math.exp((w+(S-d)**2)/u)}const f=new Float32Array(256),m=-2*a**2;for(let b=0;b<256;b++)f[b]=Math.exp(b**2/m);const g=e.length,y=new Uint8Array(g),x=new Uint32Array(256);for(let b=0;b<r;b++)for(let w=0;w<t;w++){const S=b*t+w,O=e[S];let T=0,M=0;for(let j=0;j<s;j++){const C=b+j-d;if(!(C<0||C>=r))for(let R=0;R<s;R++){const k=w+R-d;if(k<0||k>=t)continue;const F=e[C*t+k],D=l[j*s+R]*f[Math.abs(F-O)];T+=F*D,M+=D}}const N=y[S]=Math.round(T/M);x[N]++}return[y,x]}static#l(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t}static#h(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let l=0,u=r.length;l<u;l++){const d=r[l]=e[l<<2];i=Math.max(i,d),a=Math.min(a,d)}const s=255/(i-a);for(let l=0,u=r.length;l<u;l++)r[l]=(r[l]-a)*s;return r}static#d(e){let t,r=-1/0,i=-1/0;const a=e.findIndex(u=>u!==0);let s=a,l=a;for(t=a;t<256;t++){const u=e[t];u>r&&(t-s>i&&(i=t-s,l=t-1),r=u,s=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:r,height:i}=e,{maxDim:a}=this.#e;let s=r,l=i;if(r>a||i>a){let g=r,y=i,x=Math.log2(Math.max(r,i)/a);const b=Math.floor(x);x=x===b?b-1:b;for(let S=0;S<x;S++){s=Math.ceil(g/2),l=Math.ceil(y/2);const O=new OffscreenCanvas(s,l);O.getContext("2d").drawImage(e,0,0,g,y,0,0,s,l),g=s,y=l,e!==t&&e.close(),e=O.transferToImageBitmap()}const w=Math.min(a/s,a/l);s=Math.round(s*w),l=Math.round(l*w)}const d=new OffscreenCanvas(s,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,s,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,s,l);const f=d.getImageData(0,0,s,l).data;return[this.#h(f),s,l]}static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},a,s,l,u){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const m=200,g=f.font=`${r} ${i} ${m}px ${t}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:x,actualBoundingBoxAscent:b,actualBoundingBoxDescent:w,fontBoundingBoxAscent:S,fontBoundingBoxDescent:O,width:T}=f.measureText(e),M=1.5,N=Math.ceil(Math.max(Math.abs(y)+Math.abs(x)||0,T)*M),j=Math.ceil(Math.max(Math.abs(b)+Math.abs(w)||m,Math.abs(S)+Math.abs(O)||m)*M);d=new OffscreenCanvas(N,j),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=g,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,N,j),f.fillStyle="black",f.fillText(e,N*(M-1)/2,j*(3-M)/2);const C=this.#h(f.getImageData(0,0,N,j).data),R=this.#l(C),k=this.#d(R),F=this.#i(C,N,j,k);return this.processDrawnLines({lines:{curves:F,width:N,height:j},pageWidth:a,pageHeight:s,rotation:l,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,a){const[s,l,u]=this.#f(e),[d,f]=this.#c(s,l,u,Math.hypot(l,u)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),m=this.#d(f),g=this.#i(d,l,u,m);return this.processDrawnLines({lines:{curves:g,width:l,height:u},pageWidth:t,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:s,areContours:l}){i%180!==0&&([t,r]=[r,t]);const{curves:u,width:d,height:f}=e,m=e.thickness??0,g=[],y=Math.min(t/d,r/f),x=y/t,b=y/r,w=[];for(const{points:O}of u){const T=s?this.#o(O):O;if(!T)continue;w.push(T);const M=T.length,N=new Float32Array(M),j=new Float32Array(3*(M===2?2:M-2));if(g.push({line:j,points:N}),M===2){N[0]=T[0]*x,N[1]=T[1]*b,j.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[C,R,k,F]=T;C*=x,R*=b,k*=x,F*=b,N.set([C,R,k,F],0),j.set([NaN,NaN,NaN,NaN,C,R],0);for(let D=4;D<M;D+=2){const L=N[D]=T[D]*x,B=N[D+1]=T[D+1]*b;j.set(Oe.createBezierPoints(C,R,k,F,L,B),(D-2)*3),[C,R,k,F]=[k,F,L,B]}}if(g.length===0)return null;const S=l?new j_:new Xh;return S.build(g,t,r,1,i,l?0:m,a),{outline:S,newCurves:w,areContours:l,thickness:m,width:d,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:i,height:a}){let s=1/0,l=-1/0,u=0;for(const T of e){u+=T.length;for(let M=2,N=T.length;M<N;M++){const j=T[M]-T[M-2];s=Math.min(s,j),l=Math.max(l,j)}}let d;s>=-128&&l<=127?d=Int8Array:s>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const f=e.length,m=Fm+pd*f,g=new Uint32Array(m);let y=0;g[y++]=m*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*d.BYTES_PER_ELEMENT,g[y++]=0,g[y++]=i,g[y++]=a,g[y++]=t?0:1,g[y++]=Math.max(0,Math.floor(r??0)),g[y++]=f,g[y++]=d.BYTES_PER_ELEMENT;for(const T of e)g[y++]=T.length-2,g[y++]=T[0],g[y++]=T[1];const x=new CompressionStream("deflate-raw"),b=x.writable.getWriter();await b.ready,b.write(g);const w=d.prototype.constructor;for(const T of e){const M=new w(T.length-2);for(let N=2,j=T.length;N<j;N++)M[N-2]=T[N]-T[N-2];b.write(M)}b.close();const S=await new Response(x.readable).arrayBuffer(),O=new Uint8Array(S);return YL(O)}static async decompressSignature(e){try{const t=K9(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,l=0;for await(const T of r)s||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),s.set(T,l),l+=T.length;const u=new Uint32Array(s.buffer,0,s.length>>2),d=u[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=u[2],m=u[3],g=u[4]===0,y=u[5],x=u[6],b=u[7],w=[],S=(Fm+pd*x)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(b){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(s.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(s.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(s.buffer,S);break}l=0;for(let T=0;T<x;T++){const M=u[pd*T+Fm],N=new Float32Array(M+2);w.push(N);for(let j=0;j<pd-1;j++)N[j]=u[pd*T+Fm+j+1];for(let j=0;j<M;j++)N[j+2]=N[j]+O[l++]}return{areContours:g,thickness:y,outlines:w,width:f,height:m}}catch(t){return Ke(`decompressSignature: ${t}`),null}}}class IA extends CI{constructor(){super(),super.updateProperties({fill:$e._defaultLineColor,"stroke-width":0})}clone(){const e=new IA;return e.updateAll(this),e}}class BA extends Pg{constructor(e){super(e),super.updateProperties({stroke:$e._defaultLineColor,"stroke-width":1})}clone(){const e=new BA(this._viewParameters);return e.updateAll(this),e}}class Qi extends qe{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=Xe.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){$e.initialize(e,t),this._defaultDrawingOptions=new IA,this._defaultDrawnSignatureOptions=new BA(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Qe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:i,mustSmooth:a,areContours:s,description:l,uuid:u,heightInPage:d}=this.#r,{rawDims:{pageWidth:f,pageHeight:m},rotation:g}=this.parent.viewport,y=Do.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:g,innerMargin:Qi._INNER_MARGIN,mustSmooth:a,areContours:s});this.addSignature(y,d,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:r,width:i,height:a}=this.#r,s=Math.max(i,a),l=Do.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:r,width:i,height:a},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,r,i){const{x:a,y:s}=this,{outline:l}=this.#r=e;this.#e=l instanceof j_,this.description=r;let u;this.#e?u=Qi.getDefaultDrawingOptions():(u=Qi._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,d]=this.pageDimensions;let f=t/d;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=a,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:r},rotation:i}=this.parent.viewport;return Do.process(e,t,r,i,Qi._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Do.extractContoursFromText(e,t,r,i,a,Qi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:r},rotation:i}=this.parent.viewport;return Do.processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:Qi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Qi.getDefaultDrawingOptions():(this._drawingOptions=Qi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(a),e?(a.paths={lines:t,points:r},a.uuid=this.#n,a.isCopy=!0):a.lines=t,this.#t&&(a.accessibilityData={type:"Figure",alt:this.#t}),a}static deserializeDraw(e,t,r,i,a,s){return s.areContours?j_.deserialize(e,t,r,i,a,s):Xh.deserialize(e,t,r,i,a,s)}static async deserialize(e,t,r){const i=await super.deserialize(e,t,r);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class TG extends $e{#e=null;#t=null;#r=null;#n=null;#s=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Xe.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#s=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){$e.initialize(e,t)}static isHandlingMimeForPasting(e){return bp.includes(e)}static paste(e,t){t.pasteEditor({mode:Xe.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#m()}#f(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:s}=e||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:a,height:s,channels:i.length/(a*s)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),t&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#d(r,!0)).finally(()=>this.#f());return}if(this.#n){const r=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(r).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=bp.join(",");const t=this._uiManager._signal;this.#r=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#s||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#t=r,i&&(this.#e=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:r}=this.#e;const[i,a]=this.pageDimensions,s=.75;if(this.width)t=this.width*i,r=this.height*a;else if(t>s*i||r>s*a){const u=Math.min(s*i/t,s*a/r);t*=u,r*=u}this._uiManager.enableWaiting(!1);const l=this.#a=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),this.width=t/i,this.height=r/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,r=!1){e||(e=224);const{width:i,height:a}=this.#e,s=new Fi;let l=this.#e,u=i,d=a,f=null;if(t){if(i>t||a>t){const j=Math.min(t/i,t/a);u=Math.floor(i*j),d=Math.floor(a*j)}f=document.createElement("canvas");const g=f.width=Math.ceil(u*s.sx),y=f.height=Math.ceil(d*s.sy);this.#l||(l=this.#u(g,y));const x=f.getContext("2d");x.filter=this._uiManager.hcmFilter;let b="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":Q9.isDarkMode&&(b="#8f8f9d",w="#42414d");const S=15,O=S*s.sx,T=S*s.sy,M=new OffscreenCanvas(O*2,T*2),N=M.getContext("2d");N.fillStyle=b,N.fillRect(0,0,O*2,T*2),N.fillStyle=w,N.fillRect(0,0,O,T),N.fillRect(O,T,O,T),x.fillStyle=x.createPattern(M,"repeat"),x.fillRect(0,0,g,y),x.drawImage(l,0,0,l.width,l.height,0,0,g,y)}let m=null;if(r){let g,y;if(s.symmetric&&l.width<e&&l.height<e)g=l.width,y=l.height;else if(l=this.#e,i>e||a>e){const w=Math.min(e/i,e/a);g=Math.floor(i*w),y=Math.floor(a*w),this.#l||(l=this.#u(g,y))}const b=new OffscreenCanvas(g,y).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,g,y),m={width:g,height:y,data:b.getImageData(0,0,g,y).data}}return{canvas:f,width:u,height:d,imageData:m}}#u(e,t){const{width:r,height:i}=this.#e;let a=r,s=i,l=this.#e;for(;a>2*e||s>2*t;){const u=a,d=s;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const f=new OffscreenCanvas(a,s);f.getContext("2d").drawImage(l,0,0,u,d,0,0,a,s),l=f.transferToImageBitmap()}return l}#p(){const[e,t]=this.parentDimensions,{width:r,height:i}=this,a=new Fi,s=Math.ceil(r*e*a.sx),l=Math.ceil(i*t*a.sy),u=this.#a;if(!u||u.width===s&&u.height===l)return;u.width=s,u.height=l;const d=this.#l?this.#e:this.#u(s,l),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,s,l)}#v(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,r]=this.pageDimensions,i=Math.round(this.width*t*Ko.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Ko.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(i,a);return s.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),s.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,r){let i=null,a=!1;if(e instanceof EI){const{data:{rect:b,rotation:w,id:S,structParent:O,popupRef:T,richText:M,contentsObj:N,creationDate:j,modificationDate:C},container:R,parent:{page:{pageNumber:k}},canvas:F}=e;let D,L;F?(delete e.canvas,{id:D,bitmap:L}=r.imageManager.getFromCanvas(R.id,F),F.remove()):(a=!0,e._hasNoCanvas=!0);const B=(await t._structTree.getAriaAttributes(`${xA}${S}`))?.get("aria-label")||"";i=e={annotationType:Xe.STAMP,bitmapId:D,bitmap:L,pageIndex:k-1,rect:b.slice(0),rotation:w,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:B},isSvg:!1,structParent:O,popupRef:T,richText:M,comment:N?.str||null,creationDate:j,modificationDate:C}}const s=await super.deserialize(e,t,r),{rect:l,bitmap:u,bitmapUrl:d,bitmapId:f,isSvg:m,accessibilityData:g}=e;a?(r.addMissingCanvas(e.id,s),s.#o=!0):f&&r.imageManager.isValidId(f)?(s.#t=f,u&&(s.#e=u)):s.#n=d,s.#l=m;const[y,x]=s.pageDimensions;return s.width=(l[2]-l[0])/y,s.height=(l[3]-l[1])/x,g&&(s.altTextData=g),s._initialData=i,e.comment&&s.setCommentData(e),s.#h=!!i,s}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(r),e)return r.bitmapUrl=this.#v(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=this.#b(r);return l.isSame?null:(l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(t===null)return r;t.stamps||=new Map;const s=this.#l?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:s,serialized:r}),r.bitmap=this.#v(!1);else if(this.#l){const l=t.stamps.get(this.#t);s>l.area&&(l.area=s,l.serialized.bitmap.close(),l.serialized.bitmap=this.#v(!1))}return r}#b(e){const{pageIndex:t,accessibilityData:{altText:r}}=this._initialData,i=e.pageIndex===t,a=(e.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class ta{#e;#t=!1;#r=null;#n=null;#s=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([kn,LA,TG,un,Qi].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:l,textLayer:u,viewport:d,l10n:f}){const m=[...ta.#p.values()];if(!ta._initialized){ta._initialized=!0;for(const g of m)g.initialize(f,e)}e.registerEditorTypes(m),this.#u=e,this.pageIndex=t,this.div=r,this.#e=a,this.#r=s,this.viewport=d,this.#d=u,this.drawLayer=l,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Xe.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case Xe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Xe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Xe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Xe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of ta.#p.values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.div.classList.toggle("disabled",!e)}get#v(){return this.#i.size!==0?this.#i.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const r of this.#v)r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#u.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=this.#r;if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),this.#u.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const r=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",i=>{const{clientX:s,clientY:l,timeStamp:u}=i,d=this.#m;if(u-d>500){this.#m=u;return}this.#m=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const m=document.elementsFromPoint(s,l);if(f.toggle("getElements",!1),!this.div.contains(m[0]))return;let g;const y=new RegExp(`^${Zd}[0-9]+$`);for(const b of m)if(y.test(b.id)){g=b.id;break}if(!g)return;const x=this.#i.get(g);x?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),x.dblclick(i))},{signal:r,capture:!0})}const e=this.#r;if(e){const r=new Map,i=new Map;for(const s of this.#v){if(s.disableEditing(),!s.annotationElementId){s.updateFakeAnnotationElement(e);continue}if(s.serialize()!==null){r.set(s.annotationElementId,s);continue}else i.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}const a=e.getEditableAnnotations();for(const s of a){const{id:l}=s.data;if(this.#u.isDeletedAnnotationElement(l)){s.updateEdited({deleted:!0});continue}let u=i.get(l);if(u){u.resetAnnotationElement(s),u.show(!1),s.show();continue}u=r.get(l),u&&(this.#u.addChangedExistingAnnotation(u),u.renderAnnotationElement(s)&&u.show(!1)),s.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of ta.#p.values())t.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:r}=In.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),un.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),$e.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#y(){return ta.#p.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#E(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:r,offsetY:i}=this.#S(),a=this.getNextId(),s=this.#E({parent:this,id:a,x:r,y:i,uiManager:this.#u,isCentered:!0,...t});s&&this.add(s)}async deserialize(e){return await ta.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),a=this.#E({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...r});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:e,y:t,width:r,height:i}=this.boundingClientRect,a=Math.max(0,e),s=Math.max(0,t),l=Math.min(window.innerWidth,e+r),u=Math.min(window.innerHeight,t+i),d=(a+l)/2-e,f=(s+u)/2-t,[m,g]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:m,offsetY:g}}addNewEditor(e={}){this.createAndAddNewEditor(this.#S(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=In.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const r=this.#u.getMode();if(r===Xe.STAMP||r===Xe.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Xe.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=In.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const r=this.#u.getActive();this.#t=!r||r.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,r){const i=this.#u.findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Hs(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Hs(this.div,{rotation:r}),t!==r)for(const i of this.#i.values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class Dn{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Qe(this,"_svgFactory",new nh)}static#s(e,[t,r,i,a]){const{style:s}=e;s.top=`${100*r}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*a}%`}#i(){const e=Dn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const r=Dn._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const a=Dn._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i}#o(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)}draw(e,t=!1,r=!1){const i=Dn.#n++,a=this.#i(),s=Dn._svgFactory.createElement("defs");a.append(s);const l=Dn._svgFactory.createElement("path");s.append(l);const u=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#r.set(i,l);const d=r?this.#a(s,u):null,f=Dn._svgFactory.createElement("use");return a.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(e,t){const r=Dn.#n++,i=this.#i(),a=Dn._svgFactory.createElement("defs");i.append(a);const s=Dn._svgFactory.createElement("path");a.append(s);const l=`path_p${this.pageIndex}_${r}`;s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const m=Dn._svgFactory.createElement("mask");a.append(m),u=`mask_p${this.pageIndex}_${r}`,m.setAttribute("id",u),m.setAttribute("maskUnits","objectBoundingBox");const g=Dn._svgFactory.createElement("rect");m.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const y=Dn._svgFactory.createElement("use");m.append(y),y.setAttribute("href",`#${l}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const d=Dn._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${l}`),u&&d.setAttribute("mask",`url(#${u})`);const f=d.cloneNode();return i.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(r,i),r}finalizeDraw(e,t){this.#r.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:r,bbox:i,rootClass:a,path:s}=t,l=typeof e=="number"?this.#t.get(e):e;if(l){if(r&&this.#o(l,r),i&&Dn.#s(l,i),a){const{classList:u}=l;for(const[d,f]of Object.entries(a))u.toggle(d,f)}if(s){const d=l.firstChild.firstChild;this.#o(d,s)}}}updateParent(e,t){if(t===this)return;const r=this.#t.get(e);r&&(t.#e.append(r),this.#t.delete(e),t.#t.set(e,r))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:O_};globalThis.pdfjsLib={AbortException:Va,AnnotationEditorLayer:ta,AnnotationEditorParamsType:ut,AnnotationEditorType:Xe,AnnotationEditorUIManager:Ga,AnnotationLayer:DA,AnnotationMode:na,AnnotationType:cn,applyOpacity:QL,build:wI,ColorPicker:Fr,createValidAbsoluteUrl:yA,CSSConstants:JL,DOMSVGFactory:nh,DrawLayer:Dn,FeatureTest:In,fetchData:cu,findContrastColor:eI,getDocument:NA,getFilenameFromUrl:XL,getPdfFilenameFromUrl:KL,getRGB:uu,getUuid:wA,getXfaPageViewport:ZL,GlobalWorkerOptions:Us,ImageKind:Id,InvalidPDFException:vp,isDataScheme:Vh,isPdfFile:Ng,isValidExplicitDest:iI,MathClamp:er,noContextMenu:Yr,normalizeUnicode:WL,OPS:Rc,OutputScale:Fi,PasswordResponses:VL,PDFDataRangeTransport:PA,PDFDateString:yp,PDFWorker:kc,PermissionFlag:HL,PixelsPerInch:Ko,RenderingCancelledException:jg,renderRichText:SA,ResponseException:Jd,setLayerDimensions:Hs,shadow:Qe,SignatureExtractor:Do,stopEvent:Qt,SupportedImageMimeTypes:bp,TextLayer:eh,TouchManager:Wh,updateUrlHash:bA,Util:Ce,VerbosityLevel:qh,version:bI,XfaLayer:_A};const OG=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Va,AnnotationEditorLayer:ta,AnnotationEditorParamsType:ut,AnnotationEditorType:Xe,AnnotationEditorUIManager:Ga,AnnotationLayer:DA,AnnotationMode:na,AnnotationType:cn,CSSConstants:JL,ColorPicker:Fr,DOMSVGFactory:nh,DrawLayer:Dn,FeatureTest:In,GlobalWorkerOptions:Us,ImageKind:Id,InvalidPDFException:vp,MathClamp:er,OPS:Rc,OutputScale:Fi,PDFDataRangeTransport:PA,PDFDateString:yp,PDFWorker:kc,PasswordResponses:VL,PermissionFlag:HL,PixelsPerInch:Ko,RenderingCancelledException:jg,ResponseException:Jd,SignatureExtractor:Do,SupportedImageMimeTypes:bp,TextLayer:eh,TouchManager:Wh,Util:Ce,VerbosityLevel:qh,XfaLayer:_A,applyOpacity:QL,build:wI,createValidAbsoluteUrl:yA,fetchData:cu,findContrastColor:eI,getDocument:NA,getFilenameFromUrl:XL,getPdfFilenameFromUrl:KL,getRGB:uu,getUuid:wA,getXfaPageViewport:ZL,isDataScheme:Vh,isPdfFile:Ng,isValidExplicitDest:iI,noContextMenu:Yr,normalizeUnicode:WL,renderRichText:SA,setLayerDimensions:Hs,shadow:Qe,stopEvent:Qt,updateUrlHash:bA,version:bI},Symbol.toStringTag,{value:"Module"}));function jI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=jI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function at(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=jI(n))&&(r&&(r+=" "),r+=e);return r}var uN=Object.prototype.hasOwnProperty;function dN(n,e,t){for(t of n.keys())if(xc(t,e))return t}function xc(n,e){var t,r,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&xc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(i=r,i&&typeof i=="object"&&(i=dN(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(i=r[0],i&&typeof i=="object"&&(i=dN(e,i),!i)||!xc(r[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(uN.call(n,t)&&++r&&!uN.call(e,t)||!(t in e)||!xc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function Kh(n){let e=!1;return{promise:new Promise((r,i)=>{n.then(a=>!e&&r(a)).catch(a=>!e&&i(a))}),cancel(){e=!0}}}const CG=["onCopy","onCut","onPaste"],jG=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],NG=["onFocus","onBlur"],MG=["onInput","onInvalid","onReset","onSubmit"],PG=["onLoad","onError"],RG=["onKeyDown","onKeyPress","onKeyUp"],kG=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],DG=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],LG=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],IG=["onSelect"],BG=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],$G=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],FG=["onScroll"],UG=["onWheel"],qG=["onAnimationStart","onAnimationEnd","onAnimationIteration"],zG=["onTransitionEnd"],HG=["onToggle"],VG=["onChange"],GG=[...CG,...jG,...NG,...MG,...PG,...RG,...kG,...DG,...LG,...IG,...BG,...$G,...FG,...UG,...qG,...zG,...VG,...HG];function NI(n,e){const t={};for(const r of GG){const i=n[r];i&&(e?t[r]=(a=>i(a,e(r))):t[r]=i)}return t}var WG="Invariant failed";function pt(n,e){if(!n)throw new Error(WG)}var J0,hN;function YG(){if(hN)return J0;hN=1;var n=function(){};return J0=n,J0}var XG=YG();const ir=_t(XG),MI=E.createContext(null),KG="noopener noreferrer nofollow";class ZG{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return pt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){pt(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||KG,e.target=r?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{pt(this.pdfDocument),pt(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{pt(Array.isArray(t));const r=t[0];new Promise(i=>{pt(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(a=>{i(a)}).catch(()=>{pt(!1)}):typeof r=="number"?i(r):pt(!1)}).then(i=>{const a=i+1;pt(this.pdfViewer),pt(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:a})})})}goToPage(e){const t=e-1;pt(this.pdfViewer),pt(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function _c({children:n,type:e}){return v.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const fN={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function JG(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Dc(){return E.useReducer(JG,{value:void 0,error:void 0})}const Rg=typeof window<"u",PI=Rg&&window.location.protocol==="file:";function QG(n){return typeof n<"u"}function Eo(n){return QG(n)&&n!==null}function eW(n){return typeof n=="string"}function tW(n){return n instanceof ArrayBuffer}function nW(n){return pt(Rg),n instanceof Blob}function N_(n){return eW(n)&&/^data:/.test(n)}function mN(n){pt(N_(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function rW(){return Rg&&window.devicePixelRatio||1}const RI="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function pN(){ir(!PI,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${RI}`)}function iW(){ir(!PI,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${RI}`)}function Jo(n){n?.cancel&&n.cancel()}function M_(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function aW(n){return n.name==="RenderingCancelledException"}function sW(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:a}=i.target;if(!a)return t(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:oW}=OG,lW=(n,e)=>{switch(e){case fN.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case fN.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function gN(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const cW=E.forwardRef(function({children:e,className:t,error:r="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:a,file:s,inputRef:l,imageResourcesPath:u,loading:d="Loading PDF",noData:f="No PDF file specified.",onItemClick:m,onLoadError:g,onLoadProgress:y,onLoadSuccess:x,onPassword:b=lW,onSourceError:w,onSourceSuccess:S,options:O,renderMode:T,rotate:M,scale:N,...j},C){const[R,k]=Dc(),{value:F,error:D}=R,[L,B]=Dc(),{value:V,error:H}=L,I=E.useRef(new ZG),z=E.useRef([]),q=E.useRef(void 0),J=E.useRef(void 0);s&&s!==q.current&&gN(s)&&(ir(!xc(s,q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),q.current=s),O&&O!==J.current&&(ir(!xc(O,J.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),J.current=O);const K=E.useRef({scrollPageIntoView:Me=>{const{dest:Te,pageNumber:Ge,pageIndex:Ue=Ge-1}=Me;if(m){m({dest:Te,pageIndex:Ue,pageNumber:Ge});return}const Ft=z.current[Ue];if(Ft){Ft.scrollIntoView();return}ir(!1,`An internal link leading to page ${Ge} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});E.useImperativeHandle(C,()=>({linkService:I,pages:z,viewer:K}),[]);function U(){S&&S()}function G(){D&&(ir(!1,D.toString()),w&&w(D))}function ee(){k({type:"RESET"})}E.useEffect(ee,[s,k]);const le=E.useCallback(async()=>{if(!s)return null;if(typeof s=="string")return N_(s)?{data:mN(s)}:(pN(),{url:s});if(s instanceof oW)return{range:s};if(tW(s))return{data:s};if(Rg&&nW(s))return{data:await sW(s)};if(pt(typeof s=="object"),pt(gN(s)),"url"in s&&typeof s.url=="string"){if(N_(s.url)){const{url:Me,...Te}=s;return{data:mN(Me),...Te}}pN()}return s},[s]);E.useEffect(()=>{const Me=Kh(le());return Me.promise.then(Te=>{k({type:"RESOLVE",value:Te})}).catch(Te=>{k({type:"REJECT",error:Te})}),()=>{Jo(Me)}},[le,k]),E.useEffect(()=>{if(!(typeof F>"u")){if(F===!1){G();return}U()}},[F]);function ge(){V&&(x&&x(V),z.current=new Array(V.numPages),I.current.setDocument(V))}function ye(){H&&(ir(!1,H.toString()),g&&g(H))}E.useEffect(function(){B({type:"RESET"})},[B,F]),E.useEffect(function(){if(!F)return;const Te=O?{...F,...O}:F,Ge=NA(Te);y&&(Ge.onProgress=y),b&&(Ge.onPassword=b);const Ue=Ge,Ft=Ue.promise.then(An=>{B({type:"RESOLVE",value:An})}).catch(An=>{Ue.destroyed||B({type:"REJECT",error:An})});return()=>{Ft.finally(()=>Ue.destroy())}},[O,B,F]),E.useEffect(()=>{if(!(typeof V>"u")){if(V===!1){ye();return}ge()}},[V]),E.useEffect(function(){I.current.setViewer(K.current),I.current.setExternalLinkRel(i),I.current.setExternalLinkTarget(a)},[i,a]);const ve=E.useCallback((Me,Te)=>{z.current[Me]=Te},[]),Ae=E.useCallback(Me=>{delete z.current[Me]},[]),me=E.useMemo(()=>({imageResourcesPath:u,linkService:I.current,onItemClick:m,pdf:V,registerPage:ve,renderMode:T,rotate:M,scale:N,unregisterPage:Ae}),[u,m,V,ve,T,M,N,Ae]),Se=E.useMemo(()=>NI(j,()=>V),[j,V]);function De(){function Me(Ge){return!!Ge?.pdf}if(!Me(me))throw new Error("pdf is undefined");const Te=typeof e=="function"?e(me):e;return v.jsx(MI.Provider,{value:me,children:Te})}function ce(){return s?V==null?v.jsx(_c,{type:"loading",children:typeof d=="function"?d():d}):V===!1?v.jsx(_c,{type:"error",children:typeof r=="function"?r():r}):De():v.jsx(_c,{type:"no-data",children:typeof f=="function"?f():f})}return v.jsx("div",{className:at("react-pdf__Document",t),ref:l,...Se,children:ce()})});function kI(){return E.useContext(MI)}function DI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(a){for(var s=0,l=t;s<l.length;s++){var u=l[s];typeof u=="function"?u(a):u&&(u.current=a)}}}const LI=E.createContext(null);function kg(){return E.useContext(LI)}function uW(){const n=kI(),e=kg();pt(e);const t={...n,...e},{imageResourcesPath:r,linkService:i,onGetAnnotationsError:a,onGetAnnotationsSuccess:s,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:u,page:d,pdf:f,renderForms:m,rotate:g,scale:y=1}=t;pt(f),pt(d),pt(i);const[x,b]=Dc(),{value:w,error:S}=x,O=E.useRef(null);ir(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function T(){w&&s&&s(w)}function M(){S&&(ir(!1,S.toString()),a&&a(S))}E.useEffect(function(){b({type:"RESET"})},[b,d]),E.useEffect(function(){if(!d)return;const k=Kh(d.getAnnotations()),F=k;return k.promise.then(D=>{b({type:"RESOLVE",value:D})}).catch(D=>{b({type:"REJECT",error:D})}),()=>{Jo(F)}},[b,d]),E.useEffect(()=>{if(w!==void 0){if(w===!1){M();return}T()}},[w]);function N(){u&&u()}function j(R){ir(!1,`${R}`),l&&l(R)}const C=E.useMemo(()=>d.getViewport({scale:y,rotation:g}),[d,g,y]);return E.useEffect(function(){if(!f||!d||!i||!w)return;const{current:k}=O;if(!k)return;const F=C.clone({dontFlip:!0}),D={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:f.annotationStorage,commentManager:null,div:k,l10n:null,linkService:i,page:d,structTreeLayer:null,viewport:F},L={annotations:w,annotationStorage:f.annotationStorage,div:k,imageResourcesPath:r,linkService:i,page:d,renderForms:m,viewport:F};k.innerHTML="";try{new DA(D).render(L),N()}catch(B){j(B)}return()=>{}},[w,r,i,d,f,m,C]),v.jsx("div",{className:at("react-pdf__Page__annotations","annotationLayer"),ref:O})}const II={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},dW=/^H(\d+)$/;function hW(n){return n in II}function Dg(n){return"children"in n}function BI(n){return Dg(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function fW(n){const e={};if(Dg(n)){const{role:t}=n,r=t.match(dW);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(hW(t)){const i=II[t];i&&(e.role=i)}}return e}function $I(n){const e={};if(Dg(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),BI(n)){const[t]=n.children;if(t){const r=$I(t);return{...e,...r}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function mW(n){return n?{...fW(n),...$I(n)}:null}function FI({className:n,node:e}){const t=E.useMemo(()=>mW(e),[e]),r=E.useMemo(()=>!Dg(e)||BI(e)?null:e.children.map((i,a)=>v.jsx(FI,{node:i},a)),[e]);return v.jsx("span",{className:n,...t,children:r})}function pW(){const n=kg();pt(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,i]=Dc(),{value:a,error:s}=r,{customTextRenderer:l,page:u}=n;function d(){a&&t&&t(a)}function f(){s&&(ir(!1,s.toString()),e&&e(s))}return E.useEffect(function(){i({type:"RESET"})},[i,u]),E.useEffect(function(){if(l||!u)return;const g=Kh(u.getStructTree()),y=g;return g.promise.then(x=>{i({type:"RESOLVE",value:x})}).catch(x=>{i({type:"REJECT",error:x})}),()=>Jo(y)},[l,u,i]),E.useEffect(()=>{if(a!==void 0){if(a===!1){f();return}d()}},[a]),a?v.jsx(FI,{className:"react-pdf__Page__structTree structTree",node:a}):null}const vN=na;function gW(n){const e=kg();pt(e);const t={...e,...n},{_className:r,canvasBackground:i,devicePixelRatio:a=rW(),onRenderError:s,onRenderSuccess:l,page:u,renderForms:d,renderTextLayer:f,rotate:m,scale:g}=t,{canvasRef:y}=n;pt(u);const x=E.useRef(null);function b(){u&&l&&l(M_(u,g))}function w(M){aW(M)||(ir(!1,M.toString()),s&&s(M))}const S=E.useMemo(()=>u.getViewport({scale:g*a,rotation:m}),[a,u,m,g]),O=E.useMemo(()=>u.getViewport({scale:g,rotation:m}),[u,m,g]);E.useEffect(function(){if(!u)return;u.cleanup();const{current:N}=x;if(!N)return;N.width=S.width,N.height=S.height,N.style.width=`${Math.floor(O.width)}px`,N.style.height=`${Math.floor(O.height)}px`,N.style.visibility="hidden";const j={annotationMode:d?vN.ENABLE_FORMS:vN.ENABLE,canvas:N,canvasContext:N.getContext("2d",{alpha:!1}),viewport:S};i&&(j.background=i);const C=u.render(j),R=C;return C.promise.then(()=>{N.style.visibility="",b()}).catch(w),()=>Jo(R)},[i,u,d,S,O]);const T=E.useCallback(()=>{const{current:M}=x;M&&(M.width=0,M.height=0)},[]);return E.useEffect(()=>T,[T]),v.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:DI(y,x),style:{display:"block",userSelect:"none"},children:f?v.jsx(pW,{}):null})}function vW(n){return"str"in n}function yW(){const n=kg();pt(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:s,pageIndex:l,pageNumber:u,rotate:d,scale:f}=n;pt(s);const[m,g]=Dc(),{value:y,error:x}=m,b=E.useRef(null);ir(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function w(){y&&r&&r(y)}function S(){x&&(ir(!1,x.toString()),t&&t(x))}E.useEffect(function(){g({type:"RESET"})},[s,g]),E.useEffect(function(){if(!s)return;const R=Kh(s.getTextContent()),k=R;return R.promise.then(F=>{g({type:"RESOLVE",value:F})}).catch(F=>{g({type:"REJECT",error:F})}),()=>Jo(k)},[s,g]),E.useEffect(()=>{if(y!==void 0){if(y===!1){S();return}w()}},[y]);const O=E.useCallback(()=>{a&&a()},[a]),T=E.useCallback(C=>{ir(!1,C.toString()),i&&i(C)},[i]);function M(){const C=b.current;C&&C.classList.add("selecting")}function N(){const C=b.current;C&&C.classList.remove("selecting")}const j=E.useMemo(()=>s.getViewport({scale:f,rotation:d}),[s,d,f]);return E.useLayoutEffect(function(){if(!s||!y)return;const{current:R}=b;if(!R)return;R.innerHTML="";const k=s.streamTextContent({includeMarkedContent:!0}),F={container:R,textContentSource:k,viewport:j},D=new eh(F),L=D;return D.render().then(()=>{const B=document.createElement("div");B.className="endOfContent",R.append(B);const V=R.querySelectorAll('[role="presentation"]');if(e){let H=0;y.items.forEach((I,z)=>{if(!vW(I))return;const q=V[H];if(!q)return;const J=e({pageIndex:l,pageNumber:u,itemIndex:z,...I});q.innerHTML=J,H+=I.str&&I.hasEOL?2:1})}O()}).catch(T),()=>Jo(L)},[e,T,O,s,l,u,y,j]),v.jsx("div",{className:at("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:M,ref:b})}const yN=1;function bW(n){const t={...kI(),...n},{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:s,children:l,className:u,customRenderer:d,customTextRenderer:f,devicePixelRatio:m,error:g="Failed to load the page.",height:y,inputRef:x,loading:b="Loading page",noData:w="No page specified.",onGetAnnotationsError:S,onGetAnnotationsSuccess:O,onGetStructTreeError:T,onGetStructTreeSuccess:M,onGetTextError:N,onGetTextSuccess:j,onLoadError:C,onLoadSuccess:R,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:F,onRenderError:D,onRenderSuccess:L,onRenderTextLayerError:B,onRenderTextLayerSuccess:V,pageIndex:H,pageNumber:I,pdf:z,registerPage:q,renderAnnotationLayer:J=!0,renderForms:K=!1,renderMode:U="canvas",renderTextLayer:G=!0,rotate:ee,scale:le=yN,unregisterPage:ge,width:ye,...ve}=t,[Ae,me]=Dc(),{value:Se,error:De}=Ae,ce=E.useRef(null);pt(z);const Me=Eo(I)?I-1:H??null,Te=I??(Eo(H)?H+1:null),Ge=ee??(Se?Se.rotate:null),Ue=E.useMemo(()=>{if(!Se)return null;let ar=1;const fn=le??yN;if(ye||y){const mn=Se.getViewport({scale:1,rotation:Ge});ye?ar=ye/mn.width:y&&(ar=y/mn.height)}return fn*ar},[y,Se,Ge,le,ye]);E.useEffect(function(){return()=>{Eo(Me)&&i&&ge&&ge(Me)}},[i,z,Me,ge]);function Ft(){if(R){if(!Se||!Ue)return;R(M_(Se,Ue))}if(i&&q){if(!Eo(Me)||!ce.current)return;q(Me,ce.current)}}function An(){De&&(ir(!1,De.toString()),C&&C(De))}E.useEffect(function(){me({type:"RESET"})},[me,z,Me]),E.useEffect(function(){if(!z||!Te)return;const fn=Kh(z.getPage(Te)),mn=fn;return fn.promise.then(ha=>{me({type:"RESOLVE",value:ha})}).catch(ha=>{me({type:"REJECT",error:ha})}),()=>Jo(mn)},[me,z,Te]),E.useEffect(()=>{if(Se!==void 0){if(Se===!1){An();return}Ft()}},[Se,Ue]);const Fn=E.useMemo(()=>Eo(Me)&&Te&&Eo(Ge)&&Eo(Ue)?{_className:r,canvasBackground:a,customTextRenderer:f,devicePixelRatio:m,onGetAnnotationsError:S,onGetAnnotationsSuccess:O,onGetStructTreeError:T,onGetStructTreeSuccess:M,onGetTextError:N,onGetTextSuccess:j,onRenderAnnotationLayerError:k,onRenderAnnotationLayerSuccess:F,onRenderError:D,onRenderSuccess:L,onRenderTextLayerError:B,onRenderTextLayerSuccess:V,page:Se,pageIndex:Me,pageNumber:Te,renderForms:K,renderTextLayer:G,rotate:Ge,scale:Ue}:null,[r,a,f,m,S,O,T,M,N,j,k,F,D,L,B,V,Se,Me,Te,K,G,Ge,Ue]),Kr=E.useMemo(()=>NI(ve,()=>Se&&(Ue?M_(Se,Ue):void 0)),[ve,Se,Ue]),Pn=`${Me}@${Ue}/${Ge}`;function Cr(){switch(U){case"custom":return pt(d),v.jsx(d,{},`${Pn}_custom`);case"none":return null;case"canvas":default:return v.jsx(gW,{canvasRef:s},`${Pn}_canvas`)}}function da(){return G?v.jsx(yW,{},`${Pn}_text`):null}function Lt(){return J?v.jsx(uW,{},`${Pn}_annotations`):null}function Zr(){function ar(mn){return!!mn?.page}if(!ar(Fn))throw new Error("page is undefined");const fn=typeof l=="function"?l(Fn):l;return v.jsxs(LI.Provider,{value:Fn,children:[Cr(),da(),Lt(),fn]})}function Qs(){return Te?z===null||Se===void 0||Se===null?v.jsx(_c,{type:"loading",children:typeof b=="function"?b():b}):z===!1||Se===!1?v.jsx(_c,{type:"error",children:typeof g=="function"?g():g}):Zr():v.jsx(_c,{type:"no-data",children:typeof w=="function"?w():w})}return v.jsx("div",{className:at(r,u),"data-page-number":Te,ref:DI(x,ce),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Ue}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Kr,children:Qs()})}iW();Us.workerSrc="pdf.worker.mjs";Us.workerSrc=new URL("/ma-faculte/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();function wW(){const{sujetId:n}=ou(),e=hn(),[t,r]=E.useState(null),[i,a]=E.useState(null),[s,l]=E.useState(1),[u,d]=E.useState(!1),[f,m]=E.useState(!1),[g,y]=E.useState(!0),[x,b]=E.useState(null),[w,S]=E.useState(null),[O,T]=E.useState(!1);E.useEffect(()=>{if(!n){r(null),y(!1);return}let C=!1;return(async()=>{y(!0),b(null);try{const k=await oe.from("sujets").select("*").eq("id",n).maybeSingle();if(k.error)throw k.error;if(C)return;const F=k.data||null;if(F){const D=B=>{if(!B)return B;const V=B.match(/\/d\/([a-zA-Z0-9_-]+)/),H=B.match(/[?&]id=([a-zA-Z0-9_-]+)/),I=V?.[1]||H?.[1];return I?`https://drive.google.com/uc?export=download&id=${I}`:B},L=F.fichier_url||F.pdfUrl||null;F.pdfUrlResolved=D(L),S(D(L)||null)}r(F)}catch(k){b(k?.message||String(k)),r(null)}finally{C||y(!1)}})(),()=>{C=!0}},[n]);function M({numPages:C}){a(C),l(1)}E.useEffect(()=>()=>{if(w&&w.startsWith("blob:"))try{URL.revokeObjectURL(w)}catch{}},[w]);const N=async C=>{if(console.error("react-pdf load error:",C),!O&&t){T(!0);const R=t.pdfUrlResolved||t.fichier_url||t.pdfUrl;if(!R)return;try{const k=await fetch(R);if(!k.ok)throw new Error(`Fetch failed: ${k.status}`);const F=await k.blob(),D=URL.createObjectURL(F);S(D)}catch(k){console.error("Fallback fetch-as-blob failed:",k),b(String(k))}}else b(C?.message||String(C))},j=()=>{d(!1),m(!0)};return g?v.jsx("div",{className:"p-4 text-center text-gray-600",children:"Chargement du sujet..."}):x?v.jsxs("div",{className:"p-4 text-center text-red-500",children:["Erreur : ",x]}):t?v.jsxs("div",{className:"flex flex-col h-screen bg-gray-200",children:[v.jsx("header",{className:"bg-white p-4 shadow-md z-20 flex-shrink-0",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center min-w-0",children:[v.jsx("button",{onClick:()=>e(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Xo,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-lg font-bold text-gray-800 truncate",children:t.titre||t.title})]}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{onClick:()=>d(!u),className:"p-2 rounded-full hover:bg-gray-100",children:v.jsx(Jz,{className:"w-6 h-6 text-gray-700"})}),u&&v.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-xl z-30",children:[v.jsxs("a",{href:"#",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[v.jsx(Iz,{className:"w-5 h-5 mr-3"})," Enregistrer"]}),v.jsxs("button",{onClick:j,className:"w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[v.jsx(mA,{className:"w-5 h-5 mr-3"})," Signaler"]})]})]})]})}),v.jsx("main",{className:"flex-grow overflow-auto",children:v.jsx("div",{className:"flex justify-center p-4",children:v.jsx(cW,{file:w||t.pdfUrlResolved||t.fichier_url||t.pdfUrl,onLoadSuccess:M,onLoadError:N,loading:v.jsx("div",{className:"text-center p-8",children:"Chargement du sujet..."}),error:v.jsx("div",{className:"text-center p-8 text-red-500",children:"Erreur de chargement du PDF."}),children:v.jsx(bW,{pageNumber:s,renderTextLayer:!1})})})}),i&&v.jsxs("footer",{className:"bg-white p-2 shadow-inner z-20 flex-shrink-0 flex items-center justify-center space-x-4",children:[v.jsx("button",{onClick:()=>l(C=>Math.max(1,C-1)),disabled:s<=1,className:"px-4 py-2 rounded disabled:opacity-50",children:"Prc."}),v.jsxs("div",{className:"text-sm",children:["Page ",v.jsx("input",{type:"number",value:s,onChange:C=>l(Math.max(1,Math.min(i,Number(C.target.value)))),className:"w-12 text-center border rounded mx-1"})," sur ",i]}),v.jsx("button",{onClick:()=>l(C=>Math.min(i,C+1)),disabled:s>=i,className:"px-4 py-2 rounded disabled:opacity-50",children:"Suiv."})]}),v.jsx(Wr,{isOpen:f,onClose:()=>m(!1),title:"Signaler un problme",children:v.jsxs("form",{children:[v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dcrivez le problme que vous avez rencontr avec ce sujet (ex: pages illisibles, mauvais fichier, etc.)."}),v.jsx("textarea",{className:"w-full h-32 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Votre message..."}),v.jsx("button",{type:"submit",className:"w-full mt-4 bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Envoyer le signalement"})]})})]}):v.jsx("div",{className:"p-4 text-center text-red-500",children:"Sujet non trouv."})}const gd=({label:n,children:e})=>v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),e]});function xW(){const n=hn(),{profile:e,refreshProfile:t}=Ui(),[r,i]=E.useState({prenom:"",nom:"",universite_id:"",faculte_id:"",niveau_id:""}),[a,s]=E.useState({prenom:"",nom:"",universite_id:"",faculte_id:"",niveau_id:""}),[l,u]=E.useState(!1),[d,f]=E.useState(null),[m,g]=E.useState({isOpen:!1,title:"",message:""}),[y,x]=E.useState([]),[b,w]=E.useState([]),[S,O]=E.useState([]);E.useEffect(()=>{if(e){const j={prenom:e.prenom||"",nom:e.nom||"",universite_id:e.universite_id||"",faculte_id:e.faculte_id||"",niveau_id:e.niveau_id||""};s(j),i(j)}},[e]),E.useEffect(()=>{(async()=>{const{data:C}=await oe.from("universites").select("id, nom"),{data:R}=await oe.from("facultes").select("id, nom");x(C||[]),w(R||[])})()},[]),E.useEffect(()=>{a.faculte_id&&(async()=>{const{data:C}=await oe.from("niveaux").select("id, nom").eq("faculte_id",a.faculte_id).order("ordre",{ascending:!0});O(C||[])})()},[a.faculte_id]);const T=j=>{const{name:C,value:R}=j.target;s(k=>({...k,[C]:R}))},M=async j=>{if(j.preventDefault(),!e)return;u(!0),f(null);const{error:C}=await oe.from("profiles").update({nom:a.nom,prenom:a.prenom,universite_id:a.universite_id,faculte_id:a.faculte_id,niveau_id:a.niveau_id}).eq("id",e.id);u(!1),C?(f(C.message),console.error("Erreur de mise  jour:",C)):g({isOpen:!0,title:"Succs",message:"Votre profil a t mis  jour avec succs !",onConfirm:async()=>{await t(),n("/profil")}})},N=JSON.stringify(a)!==JSON.stringify(r);return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>n("/profil"),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Xo,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Modifier le profil"})]}),v.jsxs("main",{className:"p-4",children:[d&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),v.jsxs("form",{onSubmit:M,className:"space-y-6 bg-white p-6 rounded-xl shadow-md",children:[v.jsx(gd,{label:"Prnom",children:v.jsx("input",{type:"text",name:"prenom",value:a.prenom,onChange:T,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),v.jsx(gd,{label:"Nom",children:v.jsx("input",{type:"text",name:"nom",value:a.nom,onChange:T,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),v.jsx(gd,{label:"Universit",children:v.jsxs("select",{name:"universite_id",value:a.universite_id,onChange:T,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"",children:"Slectionner une universit"}),y.map(j=>v.jsx("option",{value:j.id,children:j.nom},j.id))]})}),v.jsx(gd,{label:"Facult / UFR",children:v.jsxs("select",{name:"faculte_id",value:a.faculte_id,onChange:T,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"",children:"Slectionner une facult"}),b.map(j=>v.jsx("option",{value:j.id,children:j.nom},j.id))]})}),v.jsx(gd,{label:"Niveau d'tude",children:v.jsxs("select",{name:"niveau_id",value:a.niveau_id,onChange:T,required:!0,disabled:!a.faculte_id,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[v.jsx("option",{value:"",children:"Slectionner un niveau"}),S.map(j=>v.jsx("option",{value:j.id,children:j.nom},j.id))]})}),v.jsx("div",{className:"pt-4",children:v.jsx("button",{type:"submit",disabled:l||!N,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",children:l?"Enregistrement...":"Enregistrer les modifications"})})]})]}),v.jsx(qi,{isOpen:m.isOpen,onClose:()=>g({...m,isOpen:!1}),onConfirm:m.onConfirm,title:m.title,message:m.message})]})}const _W=()=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:v.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.487 5.235 3.487 8.413.003 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.586-1.459l-6.323 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.89-5.466 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.731 6.086l.099.164-1.157 4.224 4.272-1.119.162.1zM12 6.506c-3.036 0-5.51 2.474-5.51 5.51s2.474 5.51 5.51 5.51 5.51-2.474 5.51-5.51-2.475-5.51-5.51-5.51zm0 9.51c-2.206 0-3.997-1.791-3.997-3.998s1.791-3.997 3.997-3.997 3.998 1.791 3.998 3.997-1.792 3.998-3.998 3.998z"})}),SW=["Accs  tous les modules, sans exception","Tlchargement des sujets et livres en illimit","Support prioritaire"];function AW(){const[n,e]=E.useState(""),[t,r]=E.useState(!1),[i,a]=E.useState(""),{profile:s,refreshProfile:l}=Ui(),u=hn(),{modalProps:d,showModal:f}=zL(),m=async b=>{if(b.preventDefault(),!n){f({title:"Erreur",message:"Veuillez entrer un code d'activation."});return}r(!0);try{const{data:w,error:S}=await oe.rpc("activate_premium_subscription",{p_active_code:n});if(S)throw S;if(w.success)f({title:"Flicitations !",message:w.message||"Votre abonnement Premium a t activ avec succs.",onConfirm:async()=>{await l(),u("/profil")}});else throw new Error(w.message||"Le code d'activation est invalide ou a dj t utilis.")}catch(w){f({title:"chec de l'activation",message:w.message||"Une erreur est survenue. Veuillez ressayer."})}finally{r(!1),e("")}},g=b=>new Date(b).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),y=()=>{s?.code&&navigator.clipboard.writeText(s.code).then(()=>{a("Copi !"),setTimeout(()=>a(""),2e3)},()=>{a("Erreur")})},x=()=>{const b="22656658808",w=`Bonjour, je suis ${s?.prenom||""} ${s?.nom||""}. Mon code utilisateur est : ${s?.code}. J'aimerais obtenir un code d'activation premium.`,S=`https://wa.me/${b}?text=${encodeURIComponent(w)}`;window.open(S,"_blank")};return v.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm flex items-center",children:[v.jsx(en,{to:"/profil",className:"p-2 rounded-full hover:bg-gray-100",children:v.jsx(vH,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800 text-center flex-grow",children:"Mon Abonnement"}),v.jsx("div",{className:"w-8"})," "]}),v.jsxs("main",{className:"p-4 space-y-6 ",children:[s?.is_premium&&s.subscription_end_date?v.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white p-6 rounded-xl shadow-lg",children:[v.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Statut de votre abonnement"}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx(FL,{className:"w-10 h-10"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-bold text-xl",children:"Premium Actif"}),v.jsxs("p",{className:"text-sm text-gray-600",children:["Expire le : ",g(s.subscription_end_date)]})]})]})]}):v.jsx("div",{className:"flex items-center space-x-3 text-red-500",children:v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md w-full",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Statut de votre abonnement"}),v.jsxs("div",{className:"flex items-center space-x-3 text-amber-600",children:[v.jsx(O9,{className:"w-8 h-8"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-bold text-lg",children:"Inactif"}),v.jsx("p",{className:"text-sm text-gray-600",children:"Passez  Premium pour un accs illimit."})]})]})]})}),!s?.is_premium&&v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Pourquoi passer Premium ?"}),v.jsx("ul",{className:"space-y-3",children:SW.map((b,w)=>v.jsxs("li",{className:"flex items-center",children:[v.jsx($L,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),v.jsx("span",{className:"text-gray-700",children:b})]},w))})]}),!s?.is_premium&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Activer votre abonnement"}),v.jsxs("form",{onSubmit:m,className:"space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx(v9,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),v.jsx("input",{type:"text",value:n,onChange:b=>e(b.target.value.toUpperCase()),placeholder:"Entrez votre code d'activation",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),v.jsx("button",{type:"submit",disabled:t||!n,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-300 transition-colors shadow-sm hover:shadow-md",children:t?"Activation en cours...":"Activer"})]})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Obtenir un code d'activation"}),v.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Pour passer  Premium, communiquez-nous votre code utilisateur unique via WhatsApp."}),v.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg flex items-center justify-between mb-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-gray-500",children:"Votre code utilisateur"}),v.jsx("p",{className:"text-lg font-mono font-bold text-gray-800 tracking-wider",children:s?.code||"Chargement..."})]}),v.jsxs("button",{onClick:y,className:"flex items-center text-sm bg-blue-100 hover:bg-blue-200 text-blue-800 font-semibold py-2 px-3 rounded-md transition-all duration-200",children:[v.jsx(y_,{className:"h-5 w-5 mr-2"}),i||"Copier"]})]}),v.jsxs("button",{onClick:x,disabled:!s?.code,className:"w-full flex items-center justify-center bg-green-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-600 disabled:bg-green-300 transition-colors shadow-sm hover:shadow-md",children:[v.jsx(_W,{}),v.jsx("span",{className:"ml-2",children:"Envoyer via WhatsApp"})]})]})]})]}),v.jsx(qi,{...d})]})}const EW=()=>v.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:v.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})});function TW(){const n=hn(),[e,t]=E.useState([]),[r,i]=E.useState(!0),[a,s]=E.useState(null);return E.useEffect(()=>{(async()=>{i(!0);try{const{data:u,error:d}=await oe.from("equipe_view").select("*");if(d)throw d;const f=(u||[]).map(m=>({id:m.user_id,name:`${m.prenom||""} ${m.nom||""}`.trim(),role:m.role,avatarUrl:m.profil_url||"https://qbrpefuxlzgtrntxdtwk.supabase.co/storage/v1/object/public/images/user/utilisateur.png",faculte:m.faculte_nom||"N/A",niveau:m.niveau_nom||"N/A",facebookUrl:m.facebook_url}));t(f)}catch(u){s("Impossible de charger les membres de l'quipe."),console.error(u)}finally{i(!1)}})()},[]),v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>n(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Xo,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Notre quipe"})]}),v.jsx("main",{className:"p-4",children:r?v.jsx("div",{className:"text-center text-gray-500",children:"Chargement de l'quipe..."}):a?v.jsx("div",{className:"text-center text-red-500",children:a}):v.jsx("div",{className:"space-y-4",children:e.map(l=>v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex items-center space-x-4",children:[v.jsx("img",{src:l.avatarUrl,alt:`Avatar de ${l.name}`,className:"w-16 h-16 rounded-full object-cover"}),v.jsxs("div",{className:"flex-grow",children:[v.jsx("h2",{className:"font-bold text-gray-900",children:l.name}),v.jsx("p",{className:"text-sm text-gray-600",children:l.role}),v.jsxs("p",{className:"text-xs text-gray-500",children:[l.faculte,"  ",l.niveau]})]}),l.facebookUrl&&v.jsx("a",{href:l.facebookUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-blue-600 transition-colors","aria-label":`Profil Facebook de ${l.name}`,children:v.jsx(EW,{})})]},l.id))})})]})}const UI=6048e5,OW=864e5,Um=43200,bN=1440,wN=Symbol.for("constructDateFrom");function Wa(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&wN in n?n[wN](e):n instanceof Date?new n.constructor(e):new Date(e)}function Bn(n,e){return Wa(e||n,n)}let CW={};function Zh(){return CW}function rh(n,e){const t=Zh(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Bn(n,e?.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function xp(n,e){return rh(n,{...e,weekStartsOn:1})}function qI(n,e){const t=Bn(n,e?.in),r=t.getFullYear(),i=Wa(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=xp(i),s=Wa(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const l=xp(s);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function _p(n){const e=Bn(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Lg(n,...e){const t=Wa.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function xN(n,e){const t=Bn(n,e?.in);return t.setHours(0,0,0,0),t}function jW(n,e,t){const[r,i]=Lg(t?.in,n,e),a=xN(r),s=xN(i),l=+a-_p(a),u=+s-_p(s);return Math.round((l-u)/OW)}function NW(n,e){const t=qI(n,e),r=Wa(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),xp(r)}function ap(n,e){const t=+Bn(n)-+Bn(e);return t<0?-1:t>0?1:t}function MW(n){return Wa(n,Date.now())}function PW(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function RW(n){return!(!PW(n)&&typeof n!="number"||isNaN(+Bn(n)))}function kW(n,e,t){const[r,i]=Lg(t?.in,n,e),a=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return a*12+s}function DW(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function LW(n,e){return+Bn(n)-+Bn(e)}function IW(n,e){const t=Bn(n,e?.in);return t.setHours(23,59,59,999),t}function BW(n,e){const t=Bn(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function $W(n,e){const t=Bn(n,e?.in);return+IW(t,e)==+BW(t,e)}function FW(n,e,t){const[r,i,a]=Lg(t?.in,n,n,e),s=ap(i,a),l=Math.abs(kW(i,a));if(l<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*l);let u=ap(i,a)===-s;$W(r)&&l===1&&ap(r,a)===1&&(u=!1);const d=s*(l-+u);return d===0?0:d}function UW(n,e,t){const r=LW(n,e)/1e3;return DW(t?.roundingMethod)(r)}function qW(n,e){const t=Bn(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const zW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},HW=(n,e,t)=>{let r;const i=zW[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Sc(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const VW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},WW={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},YW={date:Sc({formats:VW,defaultWidth:"full"}),time:Sc({formats:GW,defaultWidth:"full"}),dateTime:Sc({formats:WW,defaultWidth:"full"})},XW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},KW=(n,e,t,r)=>XW[n];function ra(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,l=t?.width?String(t.width):s;i=n.formattingValues[l]||n.formattingValues[s]}else{const s=n.defaultWidth,l=t?.width?String(t.width):n.defaultWidth;i=n.values[l]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const ZW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},JW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},QW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eY={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rY=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},iY={ordinalNumber:rY,era:ra({values:ZW,defaultWidth:"wide"}),quarter:ra({values:JW,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ra({values:QW,defaultWidth:"wide"}),day:ra({values:eY,defaultWidth:"wide"}),dayPeriod:ra({values:tY,defaultWidth:"wide",formattingValues:nY,defaultFormattingWidth:"wide"})};function ia(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],u=Array.isArray(l)?sY(l,m=>m.test(s)):aY(l,m=>m.test(s));let d;d=n.valueCallback?n.valueCallback(u):u,d=t.valueCallback?t.valueCallback(d):d;const f=e.slice(s.length);return{value:d,rest:f}}}function aY(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function sY(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function zI(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const l=e.slice(i.length);return{value:s,rest:l}}}const oY=/^(\d+)(th|st|nd|rd)?/i,lY=/\d+/i,cY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uY={any:[/^b/i,/^(a|c)/i]},dY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hY={any:[/1/i,/2/i,/3/i,/4/i]},fY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bY={ordinalNumber:zI({matchPattern:oY,parsePattern:lY,valueCallback:n=>parseInt(n,10)}),era:ia({matchPatterns:cY,defaultMatchWidth:"wide",parsePatterns:uY,defaultParseWidth:"any"}),quarter:ia({matchPatterns:dY,defaultMatchWidth:"wide",parsePatterns:hY,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ia({matchPatterns:fY,defaultMatchWidth:"wide",parsePatterns:mY,defaultParseWidth:"any"}),day:ia({matchPatterns:pY,defaultMatchWidth:"wide",parsePatterns:gY,defaultParseWidth:"any"}),dayPeriod:ia({matchPatterns:vY,defaultMatchWidth:"any",parsePatterns:yY,defaultParseWidth:"any"})},HI={code:"en-US",formatDistance:HW,formatLong:YW,formatRelative:KW,localize:iY,match:bY,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wY(n,e){const t=Bn(n,e?.in);return jW(t,qW(t))+1}function xY(n,e){const t=Bn(n,e?.in),r=+xp(t)-+NW(t);return Math.round(r/UI)+1}function VI(n,e){const t=Bn(n,e?.in),r=t.getFullYear(),i=Zh(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=Wa(e?.in||n,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const l=rh(s,e),u=Wa(e?.in||n,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=rh(u,e);return+t>=+l?r+1:+t>=+d?r:r-1}function _Y(n,e){const t=Zh(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=VI(n,e),a=Wa(e?.in||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),rh(a,e)}function SY(n,e){const t=Bn(n,e?.in),r=+rh(t,e)-+_Y(t,e);return Math.round(r/UI)+1}function Tt(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Ps={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Tt(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Tt(t+1,2)},d(n,e){return Tt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Tt(n.getHours()%12||12,e.length)},H(n,e){return Tt(n.getHours(),e.length)},m(n,e){return Tt(n.getMinutes(),e.length)},s(n,e){return Tt(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Tt(i,e.length)}},nc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_N={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Ps.y(n,e)},Y:function(n,e,t,r){const i=VI(n,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Tt(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Tt(a,e.length)},R:function(n,e){const t=qI(n);return Tt(t,e.length)},u:function(n,e){const t=n.getFullYear();return Tt(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Tt(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Tt(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Ps.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Tt(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=SY(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Tt(i,e.length)},I:function(n,e,t){const r=xY(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Tt(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Ps.d(n,e)},D:function(n,e,t){const r=wY(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Tt(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Tt(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Tt(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Tt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=nc.noon:r===0?i=nc.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=nc.evening:r>=12?i=nc.afternoon:r>=4?i=nc.morning:i=nc.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Ps.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Ps.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Tt(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Tt(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ps.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Ps.s(n,e)},S:function(n,e){return Ps.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return AN(r);case"XXXX":case"XX":return Co(r);case"XXXXX":case"XXX":default:return Co(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return AN(r);case"xxxx":case"xx":return Co(r);case"xxxxx":case"xxx":default:return Co(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+SN(r,":");case"OOOO":default:return"GMT"+Co(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+SN(r,":");case"zzzz":default:return"GMT"+Co(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Tt(r,e.length)},T:function(n,e,t){return Tt(+n,e.length)}};function SN(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+Tt(a,2)}function AN(n,e){return n%60===0?(n>0?"-":"+")+Tt(Math.abs(n)/60,2):Co(n,e)}function Co(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Tt(Math.trunc(r/60),2),a=Tt(r%60,2);return t+i+e+a}const EN=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},GI=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},AY=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return EN(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",EN(r,e)).replace("{{time}}",GI(i,e))},EY={p:GI,P:AY},TY=/^D+$/,OY=/^Y+$/,CY=["D","DD","YY","YYYY"];function jY(n){return TY.test(n)}function NY(n){return OY.test(n)}function MY(n,e,t){const r=PY(n,e,t);if(console.warn(r),CY.includes(n))throw new RangeError(r)}function PY(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DY=/^'([^]*?)'?$/,LY=/''/g,IY=/[a-zA-Z]/;function fc(n,e,t){const r=Zh(),i=t?.locale??r.locale??HI,a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=Bn(n,t?.in);if(!RW(l))throw new RangeError("Invalid time value");let u=e.match(kY).map(f=>{const m=f[0];if(m==="p"||m==="P"){const g=EY[m];return g(f,i.formatLong)}return f}).join("").match(RY).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const m=f[0];if(m==="'")return{isToken:!1,value:BY(f)};if(_N[m])return{isToken:!0,value:f};if(m.match(IY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(u=i.localize.preprocessor(l,u));const d={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return u.map(f=>{if(!f.isToken)return f.value;const m=f.value;(!t?.useAdditionalWeekYearTokens&&NY(m)||!t?.useAdditionalDayOfYearTokens&&jY(m))&&MY(m,e,String(n));const g=_N[m[0]];return g(l,m,i.localize,d)}).join("")}function BY(n){const e=n.match(DY);return e?e[1].replace(LY,"'"):n}function $Y(n,e,t){const r=Zh(),i=t?.locale??r.locale??HI,a=2520,s=ap(n,e);if(isNaN(s))throw new RangeError("Invalid time value");const l=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:s}),[u,d]=Lg(t?.in,...s>0?[e,n]:[n,e]),f=UW(d,u),m=(_p(d)-_p(u))/1e3,g=Math.round((f-m)/60);let y;if(g<2)return t?.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,l):f<10?i.formatDistance("lessThanXSeconds",10,l):f<20?i.formatDistance("lessThanXSeconds",20,l):f<40?i.formatDistance("halfAMinute",0,l):f<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):g===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",g,l);if(g<45)return i.formatDistance("xMinutes",g,l);if(g<90)return i.formatDistance("aboutXHours",1,l);if(g<bN){const x=Math.round(g/60);return i.formatDistance("aboutXHours",x,l)}else{if(g<a)return i.formatDistance("xDays",1,l);if(g<Um){const x=Math.round(g/bN);return i.formatDistance("xDays",x,l)}else if(g<Um*2)return y=Math.round(g/Um),i.formatDistance("aboutXMonths",y,l)}if(y=FW(d,u),y<12){const x=Math.round(g/Um);return i.formatDistance("xMonths",x,l)}else{const x=y%12,b=Math.trunc(y/12);return x<3?i.formatDistance("aboutXYears",b,l):x<9?i.formatDistance("overXYears",b,l):i.formatDistance("almostXYears",b+1,l)}}function FY(n,e){return $Y(n,MW(n),e)}const UY={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},qY=(n,e,t)=>{let r;const i=UY[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),t?.addSuffix?t.comparison&&t.comparison>0?"dans "+r:"il y a "+r:r},zY={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},HY={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},VY={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GY={date:Sc({formats:zY,defaultWidth:"full"}),time:Sc({formats:HY,defaultWidth:"full"}),dateTime:Sc({formats:VY,defaultWidth:"full"})},WY={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},YY=(n,e,t,r)=>WY[n],XY={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},KY={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},ZY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},JY={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},QY={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},eX=(n,e)=>{const t=Number(n),r=e?.unit;if(t===0)return"0";const i=["year","week","hour","minute","second"];let a;return t===1?a=r&&i.includes(r)?"re":"er":a="me",t+a},tX=["MMM","MMMM"],nX={preprocessor:(n,e)=>n.getDate()===1||!e.some(r=>r.isToken&&tX.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:eX,era:ra({values:XY,defaultWidth:"wide"}),quarter:ra({values:KY,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ra({values:ZY,defaultWidth:"wide"}),day:ra({values:JY,defaultWidth:"wide"}),dayPeriod:ra({values:QY,defaultWidth:"wide"})},rX=/^(\d+)(ime|re|me|er|e)?/i,iX=/\d+/i,aX={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},sX={any:[/^av/i,/^ap/i]},oX={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},lX={any:[/1/i,/2/i,/3/i,/4/i]},cX={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},uX={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},dX={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},hX={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},fX={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},mX={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},pX={ordinalNumber:zI({matchPattern:rX,parsePattern:iX,valueCallback:n=>parseInt(n)}),era:ia({matchPatterns:aX,defaultMatchWidth:"wide",parsePatterns:sX,defaultParseWidth:"any"}),quarter:ia({matchPatterns:oX,defaultMatchWidth:"wide",parsePatterns:lX,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ia({matchPatterns:cX,defaultMatchWidth:"wide",parsePatterns:uX,defaultParseWidth:"any"}),day:ia({matchPatterns:dX,defaultMatchWidth:"wide",parsePatterns:hX,defaultParseWidth:"any"}),dayPeriod:ia({matchPatterns:fX,defaultMatchWidth:"any",parsePatterns:mX,defaultParseWidth:"any"})},Ac={code:"fr",formatDistance:qY,formatLong:GY,formatRelative:YY,localize:nX,match:pX,options:{weekStartsOn:1,firstWeekContainsDate:4}};function gX(){const n=hn(),{notifications:e,markAsRead:t,markAllAsRead:r,loading:i,error:a,hasMore:s,loadMore:l,unreadCount:u}=fL(),[d,f]=E.useState(!1),m=E.useRef(null);E.useEffect(()=>{const x=new IntersectionObserver(async b=>{const[w]=b;w.isIntersecting&&s&&!i&&!d&&(f(!0),await l(),f(!1))},{threshold:.1});return m.current&&x.observe(m.current),()=>x.disconnect()},[s,i,l]);const g=async x=>{try{await t(x)}catch(b){console.error("Erreur lors du marquage comme lu:",b)}},y=async()=>{try{await r()}catch(x){console.error("Erreur lors du marquage de toutes les notifications:",x)}};return i&&e.length===0?v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsx("div",{className:"text-gray-600",children:"Chargement des notifications..."})}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10",children:v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>n(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Xo,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Notifications"})]}),u>0&&v.jsx("button",{onClick:y,className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 transition-colors",children:"Tout marquer comme lu"})]})}),v.jsxs("main",{children:[a&&v.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-500 mb-4",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx(eH,{className:"w-5 h-5 text-red-500 mr-2"}),v.jsx("p",{className:"text-red-700",children:a})]})}),v.jsx("div",{className:"divide-y divide-gray-200",children:e.length===0&&!i?v.jsx("div",{className:"text-center p-8 text-gray-500",children:"Aucune notification pour le moment."}):e.map(x=>v.jsxs("button",{onClick:()=>g(x.id),disabled:x.lue,className:`w-full text-left p-4 flex items-start space-x-4 transition-colors ${x.lue?"bg-white":"bg-blue-50 hover:bg-blue-100"}`,children:[v.jsx("div",{className:`flex-shrink-0 mt-1 p-2 rounded-full ${x.lue?"bg-gray-100":"bg-blue-100"}`,children:v.jsx(kz,{className:`w-6 h-6 ${x.lue?"text-gray-500":"text-blue-600"}`})}),v.jsxs("div",{className:"flex-grow",children:[v.jsx("h2",{className:"font-semibold text-gray-800",children:x.titre}),v.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.message}),v.jsx("p",{className:"text-xs text-gray-400 mt-2",children:FY(new Date(x.created_at),{addSuffix:!0,locale:Ac})})]}),!x.lue&&v.jsx("div",{className:"flex-shrink-0 mt-1",children:v.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full block"})})]},x.id))})]})]})}const vX=[{name:"Tableau de bord",to:"/admin",icon:zz,end:!0},{name:"Grer les utilisateurs",to:"/admin/users",icon:cH},{name:"Grer les sujets",to:"/admin/subjects",icon:DL},{name:"Grer les livres",to:"/admin/books",icon:RL},{name:"Grer les drives",to:"/admin/drives",icon:LL},{name:"Grer les modules",to:"/admin/modules",icon:Gz},{name:"Grer les facults",to:"/admin/faculties",icon:$z},{name:"Grer les universits",to:"/admin/universities",icon:Uz},{name:"Revenus",to:"/admin/revenues",icon:Yz}];function yX(){const[n,e]=E.useState(!1),t=({isActive:r})=>`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${r?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`;return v.jsxs("div",{className:"flex h-screen bg-gray-100",children:[n&&v.jsx("div",{className:"fixed inset-0 bg-black/60 z-20 lg:hidden",onClick:()=>e(!1)}),v.jsxs("aside",{className:`fixed inset-y-0 left-0 w-64 bg-white border-r border-gray-200 flex flex-col transform transition-transform duration-300 ease-in-out z-30 lg:relative lg:translate-x-0 ${n?"translate-x-0":"-translate-x-full"}`,children:[v.jsx("div",{className:"h-16 flex items-center justify-center px-4 border-b flex-shrink-0",children:v.jsx("h1",{className:"text-xl font-bold text-blue-600",children:"Admin Panel"})}),v.jsx("nav",{className:"flex-grow p-4 space-y-2 overflow-y-auto",children:vX.map(r=>v.jsxs(g_,{to:r.to,className:t,end:r.end??!1,onClick:()=>e(!1),children:[v.jsx(r.icon,{className:"h-5 w-5 mr-3 flex-shrink-0"}),v.jsx("span",{children:r.name})]},r.name))}),v.jsx("div",{className:"p-4 border-t flex-shrink-0",children:v.jsxs(g_,{to:"/",className:"flex items-center px-4 py-3 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 hover:text-gray-900",children:[v.jsx(xH,{className:"h-5 w-5 mr-3 flex-shrink-0"}),"Retour  l'application"]})})]}),v.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[v.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 lg:hidden",children:[v.jsx("button",{onClick:()=>e(!0),className:"p-2 text-gray-600 hover:text-gray-900",children:v.jsx(AH,{className:"h-6 w-6"})}),v.jsx("h1",{className:"text-lg font-bold text-blue-600",children:"Admin Panel"}),v.jsx("div",{className:"w-8"})," "]}),v.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6",children:v.jsx(fA,{})})]})]})}var Q0,TN;function Or(){if(TN)return Q0;TN=1;var n=Array.isArray;return Q0=n,Q0}var eb,ON;function WI(){if(ON)return eb;ON=1;var n=typeof wm=="object"&&wm&&wm.Object===Object&&wm;return eb=n,eb}var tb,CN;function ua(){if(CN)return tb;CN=1;var n=WI(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return tb=t,tb}var nb,jN;function Jh(){if(jN)return nb;jN=1;var n=ua(),e=n.Symbol;return nb=e,nb}var rb,NN;function bX(){if(NN)return rb;NN=1;var n=Jh(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function a(s){var l=t.call(s,i),u=s[i];try{s[i]=void 0;var d=!0}catch{}var f=r.call(s);return d&&(l?s[i]=u:delete s[i]),f}return rb=a,rb}var ib,MN;function wX(){if(MN)return ib;MN=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return ib=t,ib}var ab,PN;function ts(){if(PN)return ab;PN=1;var n=Jh(),e=bX(),t=wX(),r="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function s(l){return l==null?l===void 0?i:r:a&&a in Object(l)?e(l):t(l)}return ab=s,ab}var sb,RN;function ns(){if(RN)return sb;RN=1;function n(e){return e!=null&&typeof e=="object"}return sb=n,sb}var ob,kN;function du(){if(kN)return ob;kN=1;var n=ts(),e=ns(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return ob=r,ob}var lb,DN;function $A(){if(DN)return lb;DN=1;var n=Or(),e=du(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(n(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||e(a)?!0:r.test(a)||!t.test(a)||s!=null&&a in Object(s)}return lb=i,lb}var cb,LN;function Ys(){if(LN)return cb;LN=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return cb=n,cb}var ub,IN;function FA(){if(IN)return ub;IN=1;var n=ts(),e=Ys(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(l){if(!e(l))return!1;var u=n(l);return u==r||u==i||u==t||u==a}return ub=s,ub}var db,BN;function xX(){if(BN)return db;BN=1;var n=ua(),e=n["__core-js_shared__"];return db=e,db}var hb,$N;function _X(){if($N)return hb;$N=1;var n=xX(),e=(function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function t(r){return!!e&&e in r}return hb=t,hb}var fb,FN;function YI(){if(FN)return fb;FN=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return fb=t,fb}var mb,UN;function SX(){if(UN)return mb;UN=1;var n=FA(),e=_X(),t=Ys(),r=YI(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,u=s.toString,d=l.hasOwnProperty,f=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(g){if(!t(g)||e(g))return!1;var y=n(g)?f:a;return y.test(r(g))}return mb=m,mb}var pb,qN;function AX(){if(qN)return pb;qN=1;function n(e,t){return e?.[t]}return pb=n,pb}var gb,zN;function cl(){if(zN)return gb;zN=1;var n=SX(),e=AX();function t(r,i){var a=e(r,i);return n(a)?a:void 0}return gb=t,gb}var vb,HN;function Ig(){if(HN)return vb;HN=1;var n=cl(),e=n(Object,"create");return vb=e,vb}var yb,VN;function EX(){if(VN)return yb;VN=1;var n=Ig();function e(){this.__data__=n?n(null):{},this.size=0}return yb=e,yb}var bb,GN;function TX(){if(GN)return bb;GN=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return bb=n,bb}var wb,WN;function OX(){if(WN)return wb;WN=1;var n=Ig(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(a){var s=this.__data__;if(n){var l=s[a];return l===e?void 0:l}return r.call(s,a)?s[a]:void 0}return wb=i,wb}var xb,YN;function CX(){if(YN)return xb;YN=1;var n=Ig(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var a=this.__data__;return n?a[i]!==void 0:t.call(a,i)}return xb=r,xb}var _b,XN;function jX(){if(XN)return _b;XN=1;var n=Ig(),e="__lodash_hash_undefined__";function t(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=n&&i===void 0?e:i,this}return _b=t,_b}var Sb,KN;function NX(){if(KN)return Sb;KN=1;var n=EX(),e=TX(),t=OX(),r=CX(),i=jX();function a(s){var l=-1,u=s==null?0:s.length;for(this.clear();++l<u;){var d=s[l];this.set(d[0],d[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,Sb=a,Sb}var Ab,ZN;function MX(){if(ZN)return Ab;ZN=1;function n(){this.__data__=[],this.size=0}return Ab=n,Ab}var Eb,JN;function UA(){if(JN)return Eb;JN=1;function n(e,t){return e===t||e!==e&&t!==t}return Eb=n,Eb}var Tb,QN;function Bg(){if(QN)return Tb;QN=1;var n=UA();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return Tb=e,Tb}var Ob,eM;function PX(){if(eM)return Ob;eM=1;var n=Bg(),e=Array.prototype,t=e.splice;function r(i){var a=this.__data__,s=n(a,i);if(s<0)return!1;var l=a.length-1;return s==l?a.pop():t.call(a,s,1),--this.size,!0}return Ob=r,Ob}var Cb,tM;function RX(){if(tM)return Cb;tM=1;var n=Bg();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return Cb=e,Cb}var jb,nM;function kX(){if(nM)return jb;nM=1;var n=Bg();function e(t){return n(this.__data__,t)>-1}return jb=e,jb}var Nb,rM;function DX(){if(rM)return Nb;rM=1;var n=Bg();function e(t,r){var i=this.__data__,a=n(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}return Nb=e,Nb}var Mb,iM;function $g(){if(iM)return Mb;iM=1;var n=MX(),e=PX(),t=RX(),r=kX(),i=DX();function a(s){var l=-1,u=s==null?0:s.length;for(this.clear();++l<u;){var d=s[l];this.set(d[0],d[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,Mb=a,Mb}var Pb,aM;function qA(){if(aM)return Pb;aM=1;var n=cl(),e=ua(),t=n(e,"Map");return Pb=t,Pb}var Rb,sM;function LX(){if(sM)return Rb;sM=1;var n=NX(),e=$g(),t=qA();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return Rb=r,Rb}var kb,oM;function IX(){if(oM)return kb;oM=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return kb=n,kb}var Db,lM;function Fg(){if(lM)return Db;lM=1;var n=IX();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Db=e,Db}var Lb,cM;function BX(){if(cM)return Lb;cM=1;var n=Fg();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return Lb=e,Lb}var Ib,uM;function $X(){if(uM)return Ib;uM=1;var n=Fg();function e(t){return n(this,t).get(t)}return Ib=e,Ib}var Bb,dM;function FX(){if(dM)return Bb;dM=1;var n=Fg();function e(t){return n(this,t).has(t)}return Bb=e,Bb}var $b,hM;function UX(){if(hM)return $b;hM=1;var n=Fg();function e(t,r){var i=n(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this}return $b=e,$b}var Fb,fM;function zA(){if(fM)return Fb;fM=1;var n=LX(),e=BX(),t=$X(),r=FX(),i=UX();function a(s){var l=-1,u=s==null?0:s.length;for(this.clear();++l<u;){var d=s[l];this.set(d[0],d[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,Fb=a,Fb}var Ub,mM;function XI(){if(mM)return Ub;mM=1;var n=zA(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,l=i?i.apply(this,s):s[0],u=a.cache;if(u.has(l))return u.get(l);var d=r.apply(this,s);return a.cache=u.set(l,d)||u,d};return a.cache=new(t.Cache||n),a}return t.Cache=n,Ub=t,Ub}var qb,pM;function qX(){if(pM)return qb;pM=1;var n=XI(),e=500;function t(r){var i=n(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return qb=t,qb}var zb,gM;function zX(){if(gM)return zb;gM=1;var n=qX(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,l,u,d){a.push(u?d.replace(t,"$1"):l||s)}),a});return zb=r,zb}var Hb,vM;function HA(){if(vM)return Hb;vM=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}return Hb=n,Hb}var Vb,yM;function HX(){if(yM)return Vb;yM=1;var n=Jh(),e=HA(),t=Or(),r=du(),i=n?n.prototype:void 0,a=i?i.toString:void 0;function s(l){if(typeof l=="string")return l;if(t(l))return e(l,s)+"";if(r(l))return a?a.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return Vb=s,Vb}var Gb,bM;function KI(){if(bM)return Gb;bM=1;var n=HX();function e(t){return t==null?"":n(t)}return Gb=e,Gb}var Wb,wM;function ZI(){if(wM)return Wb;wM=1;var n=Or(),e=$A(),t=zX(),r=KI();function i(a,s){return n(a)?a:e(a,s)?[a]:t(r(a))}return Wb=i,Wb}var Yb,xM;function Ug(){if(xM)return Yb;xM=1;var n=du();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return Yb=e,Yb}var Xb,_M;function VA(){if(_M)return Xb;_M=1;var n=ZI(),e=Ug();function t(r,i){i=n(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return Xb=t,Xb}var Kb,SM;function JI(){if(SM)return Kb;SM=1;var n=VA();function e(t,r,i){var a=t==null?void 0:n(t,r);return a===void 0?i:a}return Kb=e,Kb}var VX=JI();const yi=_t(VX);var Zb,AM;function GX(){if(AM)return Zb;AM=1;function n(e){return e==null}return Zb=n,Zb}var WX=GX();const st=_t(WX);var Jb,EM;function YX(){if(EM)return Jb;EM=1;var n=ts(),e=Or(),t=ns(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==r}return Jb=i,Jb}var XX=YX();const Qo=_t(XX);var KX=FA();const et=_t(KX);var ZX=Ys();const hu=_t(ZX);var Qb={exports:{}},wt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TM;function JX(){if(TM)return wt;TM=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function b(w){if(typeof w=="object"&&w!==null){var S=w.$$typeof;switch(S){case n:switch(w=w.type,w){case t:case i:case r:case d:case f:return w;default:switch(w=w&&w.$$typeof,w){case l:case s:case u:case g:case m:case a:return w;default:return S}}case e:return S}}}return wt.ContextConsumer=s,wt.ContextProvider=a,wt.Element=n,wt.ForwardRef=u,wt.Fragment=t,wt.Lazy=g,wt.Memo=m,wt.Portal=e,wt.Profiler=i,wt.StrictMode=r,wt.Suspense=d,wt.SuspenseList=f,wt.isAsyncMode=function(){return!1},wt.isConcurrentMode=function(){return!1},wt.isContextConsumer=function(w){return b(w)===s},wt.isContextProvider=function(w){return b(w)===a},wt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===n},wt.isForwardRef=function(w){return b(w)===u},wt.isFragment=function(w){return b(w)===t},wt.isLazy=function(w){return b(w)===g},wt.isMemo=function(w){return b(w)===m},wt.isPortal=function(w){return b(w)===e},wt.isProfiler=function(w){return b(w)===i},wt.isStrictMode=function(w){return b(w)===r},wt.isSuspense=function(w){return b(w)===d},wt.isSuspenseList=function(w){return b(w)===f},wt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===t||w===i||w===r||w===d||w===f||w===y||typeof w=="object"&&w!==null&&(w.$$typeof===g||w.$$typeof===m||w.$$typeof===a||w.$$typeof===s||w.$$typeof===u||w.$$typeof===x||w.getModuleId!==void 0)},wt.typeOf=b,wt}var OM;function QX(){return OM||(OM=1,Qb.exports=JX()),Qb.exports}var eK=QX(),ew,CM;function QI(){if(CM)return ew;CM=1;var n=ts(),e=ns(),t="[object Number]";function r(i){return typeof i=="number"||e(i)&&n(i)==t}return ew=r,ew}var tw,jM;function tK(){if(jM)return tw;jM=1;var n=QI();function e(t){return n(t)&&t!=+t}return tw=e,tw}var nK=tK();const Qh=_t(nK);var rK=QI();const iK=_t(rK);var $i=function(e){return e===0?0:e>0?1:-1},$o=function(e){return Qo(e)&&e.indexOf("%")===e.length-1},be=function(e){return iK(e)&&!Qh(e)},aK=function(e){return st(e)},Nn=function(e){return be(e)||Qo(e)},sK=0,ef=function(e){var t=++sK;return"".concat(e||"").concat(t)},el=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!be(e)&&!Qo(e))return r;var a;if($o(e)){var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return Qh(a)&&(a=r),i&&a>t&&(a=t),a},Ls=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},oK=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Ii=function(e,t){return be(e)&&be(t)?function(r){return e+r*(t-e)}:function(){return t}};function Sp(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):yi(r,e))===t})}var lK=function(e,t){return be(e)&&be(t)?e-t:Qo(e)&&Qo(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function Ec(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function P_(n){"@babel/helpers - typeof";return P_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P_(n)}var cK=["viewBox","children"],uK=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],NM=["points","pathLength"],nw={svg:cK,polygon:NM,polyline:NM},GA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ap=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(E.isValidElement(e)&&(r=e.props),!hu(r))return null;var i={};return Object.keys(r).forEach(function(a){GA.includes(a)&&(i[a]=t||function(s){return r[a](r,s)})}),i},dK=function(e,t,r){return function(i){return e(t,r,i),null}},Ep=function(e,t,r){if(!hu(e)||P_(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];GA.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=dK(s,t,r))}),i},hK=["children"],fK=["children"];function MM(n,e){if(n==null)return{};var t=mK(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function mK(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function R_(n){"@babel/helpers - typeof";return R_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R_(n)}var PM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fa=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},RM=null,rw=null,WA=function n(e){if(e===RM&&Array.isArray(rw))return rw;var t=[];return E.Children.forEach(e,function(r){st(r)||(eK.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),rw=t,RM=e,t};function bi(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Fa(i)}):r=[Fa(e)],WA(n).forEach(function(i){var a=yi(i,"type.displayName")||yi(i,"type.name");r.indexOf(a)!==-1&&t.push(i)}),t}function Ur(n,e){var t=bi(n,e);return t&&t[0]}var kM=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!be(r)||r<=0||!be(i)||i<=0)},pK=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],gK=function(e){return e&&e.type&&Qo(e.type)&&pK.indexOf(e.type)>=0},vK=function(e){return e&&R_(e)==="object"&&"clipDot"in e},yK=function(e,t,r,i){var a,s=(a=nw?.[i])!==null&&a!==void 0?a:[];return t.startsWith("data-")||!et(e)&&(i&&s.includes(t)||uK.includes(t))||r&&GA.includes(t)},ft=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(E.isValidElement(e)&&(i=e.props),!hu(i))return null;var a={};return Object.keys(i).forEach(function(s){var l;yK((l=i)===null||l===void 0?void 0:l[s],s,t,r)&&(a[s]=i[s])}),a},k_=function n(e,t){if(e===t)return!0;var r=E.Children.count(e);if(r!==E.Children.count(t))return!1;if(r===0)return!0;if(r===1)return DM(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var a=e[i],s=t[i];if(Array.isArray(a)||Array.isArray(s)){if(!n(a,s))return!1}else if(!DM(a,s))return!1}return!0},DM=function(e,t){if(st(e)&&st(t))return!0;if(!st(e)&&!st(t)){var r=e.props||{},i=r.children,a=MM(r,hK),s=t.props||{},l=s.children,u=MM(s,fK);return i&&l?Ec(a,u)&&k_(i,l):!i&&!l?Ec(a,u):!1}return!1},LM=function(e,t){var r=[],i={};return WA(e).forEach(function(a,s){if(gK(a))r.push(a);else if(a){var l=Fa(a.type),u=t[l]||{},d=u.handler,f=u.once;if(d&&(!f||!i[l])){var m=d(a,l,s);r.push(m),i[l]=!0}}}),r},bK=function(e){var t=e&&e.type;return t&&PM[t]?PM[t]:null},wK=function(e,t){return WA(t).indexOf(e)},xK=["children","width","height","viewBox","className","style","title","desc"];function D_(){return D_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},D_.apply(this,arguments)}function _K(n,e){if(n==null)return{};var t=SK(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function SK(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function L_(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,a=n.className,s=n.style,l=n.title,u=n.desc,d=_K(n,xK),f=i||{width:t,height:r,x:0,y:0},m=at("recharts-surface",a);return Z.createElement("svg",D_({},ft(d,!0,"svg"),{className:m,width:t,height:r,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Z.createElement("title",null,l),Z.createElement("desc",null,u),e)}var AK=["children","className"];function I_(){return I_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},I_.apply(this,arguments)}function EK(n,e){if(n==null)return{};var t=TK(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function TK(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var dn=Z.forwardRef(function(n,e){var t=n.children,r=n.className,i=EK(n,AK),a=at("recharts-layer",r);return Z.createElement("g",I_({className:a},ft(i,!0),{ref:e}),t)}),Ua=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},iw,IM;function OK(){if(IM)return iw;IM=1;function n(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+t];return s}return iw=n,iw}var aw,BM;function CK(){if(BM)return aw;BM=1;var n=OK();function e(t,r,i){var a=t.length;return i=i===void 0?a:i,!r&&i>=a?t:n(t,r,i)}return aw=e,aw}var sw,$M;function e4(){if($M)return sw;$M=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",s="\\u200d",l=RegExp("["+s+n+i+a+"]");function u(d){return l.test(d)}return sw=u,sw}var ow,FM;function jK(){if(FM)return ow;FM=1;function n(e){return e.split("")}return ow=n,ow}var lw,UM;function NK(){if(UM)return lw;UM=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",s="["+n+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",f="[^"+n+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",x=d+"?",b="["+a+"]?",w="(?:"+y+"(?:"+[f,m,g].join("|")+")"+b+x+")*",S=b+x+w,O="(?:"+[f+l+"?",l,m,g,s].join("|")+")",T=RegExp(u+"(?="+u+")|"+O+S,"g");function M(N){return N.match(T)||[]}return lw=M,lw}var cw,qM;function MK(){if(qM)return cw;qM=1;var n=jK(),e=e4(),t=NK();function r(i){return e(i)?t(i):n(i)}return cw=r,cw}var uw,zM;function PK(){if(zM)return uw;zM=1;var n=CK(),e=e4(),t=MK(),r=KI();function i(a){return function(s){s=r(s);var l=e(s)?t(s):void 0,u=l?l[0]:s.charAt(0),d=l?n(l,1).join(""):s.slice(1);return u[a]()+d}}return uw=i,uw}var dw,HM;function RK(){if(HM)return dw;HM=1;var n=PK(),e=n("toUpperCase");return dw=e,dw}var kK=RK();const qg=_t(kK);function $t(n){return function(){return n}}const t4=Math.cos,Tp=Math.sin,zi=Math.sqrt,Op=Math.PI,zg=2*Op,B_=Math.PI,$_=2*B_,jo=1e-6,DK=$_-jo;function n4(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function LK(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return n4;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class IK{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?n4:LK(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,s){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,u=r-e,d=i-t,f=s-e,m=l-t,g=f*f+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(g>jo)if(!(Math.abs(m*u-d*f)>jo)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let y=r-s,x=i-l,b=u*u+d*d,w=y*y+x*x,S=Math.sqrt(b),O=Math.sqrt(g),T=a*Math.tan((B_-Math.acos((b+g-w)/(2*S*O)))/2),M=T/O,N=T/S;Math.abs(M-1)>jo&&this._append`L${e+M*f},${t+M*m}`,this._append`A${a},${a},0,0,${+(m*y>f*x)},${this._x1=e+N*u},${this._y1=t+N*d}`}}arc(e,t,r,i,a,s){if(e=+e,t=+t,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),d=e+l,f=t+u,m=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>jo||Math.abs(this._y1-f)>jo)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%$_+$_),g>DK?this._append`A${r},${r},0,1,${m},${e-l},${t-u}A${r},${r},0,1,${m},${this._x1=d},${this._y1=f}`:g>jo&&this._append`A${r},${r},0,${+(g>=B_)},${m},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function YA(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new IK(e)}function XA(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function r4(n){this._context=n}r4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function Hg(n){return new r4(n)}function i4(n){return n[0]}function a4(n){return n[1]}function s4(n,e){var t=$t(!0),r=null,i=Hg,a=null,s=YA(l);n=typeof n=="function"?n:n===void 0?i4:$t(n),e=typeof e=="function"?e:e===void 0?a4:$t(e);function l(u){var d,f=(u=XA(u)).length,m,g=!1,y;for(r==null&&(a=i(y=s())),d=0;d<=f;++d)!(d<f&&t(m=u[d],d,u))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+n(m,d,u),+e(m,d,u));if(y)return a=null,y+""||null}return l.x=function(u){return arguments.length?(n=typeof u=="function"?u:$t(+u),l):n},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:$t(+u),l):e},l.defined=function(u){return arguments.length?(t=typeof u=="function"?u:$t(!!u),l):t},l.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),l):r},l}function qm(n,e,t){var r=null,i=$t(!0),a=null,s=Hg,l=null,u=YA(d);n=typeof n=="function"?n:n===void 0?i4:$t(+n),e=typeof e=="function"?e:$t(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?a4:$t(+t);function d(m){var g,y,x,b=(m=XA(m)).length,w,S=!1,O,T=new Array(b),M=new Array(b);for(a==null&&(l=s(O=u())),g=0;g<=b;++g){if(!(g<b&&i(w=m[g],g,m))===S)if(S=!S)y=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=g-1;x>=y;--x)l.point(T[x],M[x]);l.lineEnd(),l.areaEnd()}S&&(T[g]=+n(w,g,m),M[g]=+e(w,g,m),l.point(r?+r(w,g,m):T[g],t?+t(w,g,m):M[g]))}if(O)return l=null,O+""||null}function f(){return s4().defined(i).curve(s).context(a)}return d.x=function(m){return arguments.length?(n=typeof m=="function"?m:$t(+m),r=null,d):n},d.x0=function(m){return arguments.length?(n=typeof m=="function"?m:$t(+m),d):n},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:$t(+m),d):r},d.y=function(m){return arguments.length?(e=typeof m=="function"?m:$t(+m),t=null,d):e},d.y0=function(m){return arguments.length?(e=typeof m=="function"?m:$t(+m),d):e},d.y1=function(m){return arguments.length?(t=m==null?null:typeof m=="function"?m:$t(+m),d):t},d.lineX0=d.lineY0=function(){return f().x(n).y(e)},d.lineY1=function(){return f().x(n).y(t)},d.lineX1=function(){return f().x(r).y(e)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:$t(!!m),d):i},d.curve=function(m){return arguments.length?(s=m,a!=null&&(l=s(a)),d):s},d.context=function(m){return arguments.length?(m==null?a=l=null:l=s(a=m),d):a},d}class o4{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function BK(n){return new o4(n,!0)}function $K(n){return new o4(n,!1)}const KA={draw(n,e){const t=zi(e/Op);n.moveTo(t,0),n.arc(0,0,t,0,zg)}},FK={draw(n,e){const t=zi(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},l4=zi(1/3),UK=l4*2,qK={draw(n,e){const t=zi(e/UK),r=t*l4;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},zK={draw(n,e){const t=zi(e),r=-t/2;n.rect(r,r,t,t)}},HK=.8908130915292852,c4=Tp(Op/10)/Tp(7*Op/10),VK=Tp(zg/10)*c4,GK=-t4(zg/10)*c4,WK={draw(n,e){const t=zi(e*HK),r=VK*t,i=GK*t;n.moveTo(0,-t),n.lineTo(r,i);for(let a=1;a<5;++a){const s=zg*a/5,l=t4(s),u=Tp(s);n.lineTo(u*t,-l*t),n.lineTo(l*r-u*i,u*r+l*i)}n.closePath()}},hw=zi(3),YK={draw(n,e){const t=-zi(e/(hw*3));n.moveTo(0,t*2),n.lineTo(-hw*t,-t),n.lineTo(hw*t,-t),n.closePath()}},hi=-.5,fi=zi(3)/2,F_=1/zi(12),XK=(F_/2+1)*3,KK={draw(n,e){const t=zi(e/XK),r=t/2,i=t*F_,a=r,s=t*F_+t,l=-a,u=s;n.moveTo(r,i),n.lineTo(a,s),n.lineTo(l,u),n.lineTo(hi*r-fi*i,fi*r+hi*i),n.lineTo(hi*a-fi*s,fi*a+hi*s),n.lineTo(hi*l-fi*u,fi*l+hi*u),n.lineTo(hi*r+fi*i,hi*i-fi*r),n.lineTo(hi*a+fi*s,hi*s-fi*a),n.lineTo(hi*l+fi*u,hi*u-fi*l),n.closePath()}};function ZK(n,e){let t=null,r=YA(i);n=typeof n=="function"?n:$t(n||KA),e=typeof e=="function"?e:$t(e===void 0?64:+e);function i(){let a;if(t||(t=a=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(n=typeof a=="function"?a:$t(a),i):n},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:$t(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function Cp(){}function jp(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function u4(n){this._context=n}u4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jp(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function JK(n){return new u4(n)}function d4(n){this._context=n}d4.prototype={areaStart:Cp,areaEnd:Cp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:jp(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function QK(n){return new d4(n)}function h4(n){this._context=n}h4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:jp(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function eZ(n){return new h4(n)}function f4(n){this._context=n}f4.prototype={areaStart:Cp,areaEnd:Cp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function tZ(n){return new f4(n)}function VM(n){return n<0?-1:1}function GM(n,e,t){var r=n._x1-n._x0,i=e-n._x1,a=(n._y1-n._y0)/(r||i<0&&-0),s=(t-n._y1)/(i||r<0&&-0),l=(a*i+s*r)/(r+i);return(VM(a)+VM(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function WM(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function fw(n,e,t){var r=n._x0,i=n._y0,a=n._x1,s=n._y1,l=(a-r)/3;n._context.bezierCurveTo(r+l,i+l*e,a-l,s-l*t,a,s)}function Np(n){this._context=n}Np.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fw(this,this._t0,WM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,fw(this,WM(this,t=GM(this,n,e)),t);break;default:fw(this,this._t0,t=GM(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function m4(n){this._context=new p4(n)}(m4.prototype=Object.create(Np.prototype)).point=function(n,e){Np.prototype.point.call(this,e,n)};function p4(n){this._context=n}p4.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,a){this._context.bezierCurveTo(e,n,r,t,a,i)}};function nZ(n){return new Np(n)}function rZ(n){return new m4(n)}function g4(n){this._context=n}g4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=YM(n),i=YM(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],n[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function YM(n){var e,t=n.length-1,r,i=new Array(t),a=new Array(t),s=new Array(t);for(i[0]=0,a[0]=2,s[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,s[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,a[t-1]=7,s[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-i[e+1];return[i,a]}function iZ(n){return new g4(n)}function Vg(n,e){this._context=n,this._t=e}Vg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function aZ(n){return new Vg(n,.5)}function sZ(n){return new Vg(n,0)}function oZ(n){return new Vg(n,1)}function Lc(n,e){if((s=n.length)>1)for(var t=1,r,i,a=n[e[0]],s,l=a.length;t<s;++t)for(i=a,a=n[e[t]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function U_(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function lZ(n,e){return n[e]}function cZ(n){const e=[];return e.key=n,e}function uZ(){var n=$t([]),e=U_,t=Lc,r=lZ;function i(a){var s=Array.from(n.apply(this,arguments),cZ),l,u=s.length,d=-1,f;for(const m of a)for(l=0,++d;l<u;++l)(s[l][d]=[0,+r(m,s[l].key,d,a)]).data=m;for(l=0,f=XA(e(s));l<u;++l)s[f[l]].index=l;return t(s,f),s}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:$t(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:$t(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?U_:typeof a=="function"?a:$t(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??Lc,i):t},i}function dZ(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,s;i<a;++i){for(s=t=0;t<r;++t)s+=n[t][i][1]||0;if(s)for(t=0;t<r;++t)n[t][i][1]/=s}Lc(n,e)}}function hZ(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var s=0,l=0;s<i;++s)l+=n[s][t][1]||0;r[t][1]+=r[t][0]=-l/2}Lc(n,e)}}function fZ(n,e){if(!(!((s=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,s;r<a;++r){for(var l=0,u=0,d=0;l<s;++l){for(var f=n[e[l]],m=f[r][1]||0,g=f[r-1][1]||0,y=(m-g)/2,x=0;x<l;++x){var b=n[e[x]],w=b[r][1]||0,S=b[r-1][1]||0;y+=w-S}u+=m,d+=y*m}i[r-1][1]+=i[r-1][0]=t,u&&(t-=d/u)}i[r-1][1]+=i[r-1][0]=t,Lc(n,e)}}function ih(n){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(n)}var mZ=["type","size","sizeType"];function q_(){return q_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},q_.apply(this,arguments)}function XM(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function KM(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XM(Object(t),!0).forEach(function(r){pZ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XM(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pZ(n,e,t){return e=gZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gZ(n){var e=vZ(n,"string");return ih(e)=="symbol"?e:e+""}function vZ(n,e){if(ih(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yZ(n,e){if(n==null)return{};var t=bZ(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function bZ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var v4={symbolCircle:KA,symbolCross:FK,symbolDiamond:qK,symbolSquare:zK,symbolStar:WK,symbolTriangle:YK,symbolWye:KK},wZ=Math.PI/180,xZ=function(e){var t="symbol".concat(qg(e));return v4[t]||KA},_Z=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*wZ;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},SZ=function(e,t){v4["symbol".concat(qg(e))]=t},ZA=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,a=i===void 0?64:i,s=e.sizeType,l=s===void 0?"area":s,u=yZ(e,mZ),d=KM(KM({},u),{},{type:r,size:a,sizeType:l}),f=function(){var w=xZ(r),S=ZK().type(w).size(_Z(a,l,r));return S()},m=d.className,g=d.cx,y=d.cy,x=ft(d,!0);return g===+g&&y===+y&&a===+a?Z.createElement("path",q_({},x,{className:at("recharts-symbols",m),transform:"translate(".concat(g,", ").concat(y,")"),d:f()})):null};ZA.registerSymbol=SZ;function Ic(n){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(n)}function z_(){return z_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},z_.apply(this,arguments)}function ZM(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function AZ(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZM(Object(t),!0).forEach(function(r){ah(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZM(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function EZ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function TZ(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,b4(r.key),r)}}function OZ(n,e,t){return e&&TZ(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function CZ(n,e,t){return e=Mp(e),jZ(n,y4()?Reflect.construct(e,t||[],Mp(n).constructor):e.apply(n,t))}function jZ(n,e){if(e&&(Ic(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NZ(n)}function NZ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function y4(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y4=function(){return!!n})()}function Mp(n){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mp(n)}function MZ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&H_(n,e)}function H_(n,e){return H_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},H_(n,e)}function ah(n,e,t){return e=b4(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function b4(n){var e=PZ(n,"string");return Ic(e)=="symbol"?e:e+""}function PZ(n,e){if(Ic(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ic(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var mi=32,JA=(function(n){function e(){return EZ(this,e),CZ(this,e,arguments)}return MZ(e,n),OZ(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=mi/2,s=mi/6,l=mi/3,u=r.inactive?i:r.color;if(r.type==="plainline")return Z.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:mi,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return Z.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(mi,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return Z.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(mi/8,"h").concat(mi,"v").concat(mi*3/4,"h").concat(-mi,"z"),className:"recharts-legend-icon"});if(Z.isValidElement(r.legendIcon)){var d=AZ({},r);return delete d.legendIcon,Z.cloneElement(r.legendIcon,d)}return Z.createElement(ZA,{fill:u,cx:a,cy:a,size:mi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,l=i.layout,u=i.formatter,d=i.inactiveColor,f={x:0,y:0,width:mi,height:mi},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(y,x){var b=y.formatter||u,w=at(ah(ah({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",y.inactive));if(y.type==="none")return null;var S=et(y.value)?null:y.value;Ua(!et(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var O=y.inactive?d:y.color;return Z.createElement("li",z_({className:w,style:m,key:"legend-item-".concat(x)},Ep(r.props,y,x)),Z.createElement(L_,{width:s,height:s,viewBox:f,style:g},r.renderIcon(y)),Z.createElement("span",{className:"recharts-legend-item-text",style:{color:O}},b?b(S,y,x):S))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return Z.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(E.PureComponent);ah(JA,"displayName","Legend");ah(JA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var mw,JM;function RZ(){if(JM)return mw;JM=1;var n=$g();function e(){this.__data__=new n,this.size=0}return mw=e,mw}var pw,QM;function kZ(){if(QM)return pw;QM=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return pw=n,pw}var gw,eP;function DZ(){if(eP)return gw;eP=1;function n(e){return this.__data__.get(e)}return gw=n,gw}var vw,tP;function LZ(){if(tP)return vw;tP=1;function n(e){return this.__data__.has(e)}return vw=n,vw}var yw,nP;function IZ(){if(nP)return yw;nP=1;var n=$g(),e=qA(),t=zA(),r=200;function i(a,s){var l=this.__data__;if(l instanceof n){var u=l.__data__;if(!e||u.length<r-1)return u.push([a,s]),this.size=++l.size,this;l=this.__data__=new t(u)}return l.set(a,s),this.size=l.size,this}return yw=i,yw}var bw,rP;function w4(){if(rP)return bw;rP=1;var n=$g(),e=RZ(),t=kZ(),r=DZ(),i=LZ(),a=IZ();function s(l){var u=this.__data__=new n(l);this.size=u.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,bw=s,bw}var ww,iP;function BZ(){if(iP)return ww;iP=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return ww=e,ww}var xw,aP;function $Z(){if(aP)return xw;aP=1;function n(e){return this.__data__.has(e)}return xw=n,xw}var _w,sP;function x4(){if(sP)return _w;sP=1;var n=zA(),e=BZ(),t=$Z();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new n;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,_w=r,_w}var Sw,oP;function _4(){if(oP)return Sw;oP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return Sw=n,Sw}var Aw,lP;function S4(){if(lP)return Aw;lP=1;function n(e,t){return e.has(t)}return Aw=n,Aw}var Ew,cP;function A4(){if(cP)return Ew;cP=1;var n=x4(),e=_4(),t=S4(),r=1,i=2;function a(s,l,u,d,f,m){var g=u&r,y=s.length,x=l.length;if(y!=x&&!(g&&x>y))return!1;var b=m.get(s),w=m.get(l);if(b&&w)return b==l&&w==s;var S=-1,O=!0,T=u&i?new n:void 0;for(m.set(s,l),m.set(l,s);++S<y;){var M=s[S],N=l[S];if(d)var j=g?d(N,M,S,l,s,m):d(M,N,S,s,l,m);if(j!==void 0){if(j)continue;O=!1;break}if(T){if(!e(l,function(C,R){if(!t(T,R)&&(M===C||f(M,C,u,d,m)))return T.push(R)})){O=!1;break}}else if(!(M===N||f(M,N,u,d,m))){O=!1;break}}return m.delete(s),m.delete(l),O}return Ew=a,Ew}var Tw,uP;function FZ(){if(uP)return Tw;uP=1;var n=ua(),e=n.Uint8Array;return Tw=e,Tw}var Ow,dP;function UZ(){if(dP)return Ow;dP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}return Ow=n,Ow}var Cw,hP;function QA(){if(hP)return Cw;hP=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return Cw=n,Cw}var jw,fP;function qZ(){if(fP)return jw;fP=1;var n=Jh(),e=FZ(),t=UA(),r=A4(),i=UZ(),a=QA(),s=1,l=2,u="[object Boolean]",d="[object Date]",f="[object Error]",m="[object Map]",g="[object Number]",y="[object RegExp]",x="[object Set]",b="[object String]",w="[object Symbol]",S="[object ArrayBuffer]",O="[object DataView]",T=n?n.prototype:void 0,M=T?T.valueOf:void 0;function N(j,C,R,k,F,D,L){switch(R){case O:if(j.byteLength!=C.byteLength||j.byteOffset!=C.byteOffset)return!1;j=j.buffer,C=C.buffer;case S:return!(j.byteLength!=C.byteLength||!D(new e(j),new e(C)));case u:case d:case g:return t(+j,+C);case f:return j.name==C.name&&j.message==C.message;case y:case b:return j==C+"";case m:var B=i;case x:var V=k&s;if(B||(B=a),j.size!=C.size&&!V)return!1;var H=L.get(j);if(H)return H==C;k|=l,L.set(j,C);var I=r(B(j),B(C),k,F,D,L);return L.delete(j),I;case w:if(M)return M.call(j)==M.call(C)}return!1}return jw=N,jw}var Nw,mP;function E4(){if(mP)return Nw;mP=1;function n(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}return Nw=n,Nw}var Mw,pP;function zZ(){if(pP)return Mw;pP=1;var n=E4(),e=Or();function t(r,i,a){var s=i(r);return e(r)?s:n(s,a(r))}return Mw=t,Mw}var Pw,gP;function HZ(){if(gP)return Pw;gP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var l=e[r];t(l,r,e)&&(s[a++]=l)}return s}return Pw=n,Pw}var Rw,vP;function VZ(){if(vP)return Rw;vP=1;function n(){return[]}return Rw=n,Rw}var kw,yP;function GZ(){if(yP)return kw;yP=1;var n=HZ(),e=VZ(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),n(i(s),function(l){return r.call(s,l)}))}:e;return kw=a,kw}var Dw,bP;function WZ(){if(bP)return Dw;bP=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return Dw=n,Dw}var Lw,wP;function YZ(){if(wP)return Lw;wP=1;var n=ts(),e=ns(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return Lw=r,Lw}var Iw,xP;function eE(){if(xP)return Iw;xP=1;var n=YZ(),e=ns(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,a=n((function(){return arguments})())?n:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return Iw=a,Iw}var Md={exports:{}},Bw,_P;function XZ(){if(_P)return Bw;_P=1;function n(){return!1}return Bw=n,Bw}Md.exports;var SP;function T4(){return SP||(SP=1,(function(n,e){var t=ua(),r=XZ(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,s=a&&a.exports===i,l=s?t.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;n.exports=d})(Md,Md.exports)),Md.exports}var $w,AP;function tE(){if(AP)return $w;AP=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var a=typeof r;return i=i??n,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return $w=t,$w}var Fw,EP;function nE(){if(EP)return Fw;EP=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return Fw=e,Fw}var Uw,TP;function KZ(){if(TP)return Uw;TP=1;var n=ts(),e=nE(),t=ns(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",f="[object Number]",m="[object Object]",g="[object RegExp]",y="[object Set]",x="[object String]",b="[object WeakMap]",w="[object ArrayBuffer]",S="[object DataView]",O="[object Float32Array]",T="[object Float64Array]",M="[object Int8Array]",N="[object Int16Array]",j="[object Int32Array]",C="[object Uint8Array]",R="[object Uint8ClampedArray]",k="[object Uint16Array]",F="[object Uint32Array]",D={};D[O]=D[T]=D[M]=D[N]=D[j]=D[C]=D[R]=D[k]=D[F]=!0,D[r]=D[i]=D[w]=D[a]=D[S]=D[s]=D[l]=D[u]=D[d]=D[f]=D[m]=D[g]=D[y]=D[x]=D[b]=!1;function L(B){return t(B)&&e(B.length)&&!!D[n(B)]}return Uw=L,Uw}var qw,OP;function O4(){if(OP)return qw;OP=1;function n(e){return function(t){return e(t)}}return qw=n,qw}var Pd={exports:{}};Pd.exports;var CP;function ZZ(){return CP||(CP=1,(function(n,e){var t=WI(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,s=a&&t.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}})();n.exports=l})(Pd,Pd.exports)),Pd.exports}var zw,jP;function C4(){if(jP)return zw;jP=1;var n=KZ(),e=O4(),t=ZZ(),r=t&&t.isTypedArray,i=r?e(r):n;return zw=i,zw}var Hw,NP;function JZ(){if(NP)return Hw;NP=1;var n=WZ(),e=eE(),t=Or(),r=T4(),i=tE(),a=C4(),s=Object.prototype,l=s.hasOwnProperty;function u(d,f){var m=t(d),g=!m&&e(d),y=!m&&!g&&r(d),x=!m&&!g&&!y&&a(d),b=m||g||y||x,w=b?n(d.length,String):[],S=w.length;for(var O in d)(f||l.call(d,O))&&!(b&&(O=="length"||y&&(O=="offset"||O=="parent")||x&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||i(O,S)))&&w.push(O);return w}return Hw=u,Hw}var Vw,MP;function QZ(){if(MP)return Vw;MP=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return Vw=e,Vw}var Gw,PP;function j4(){if(PP)return Gw;PP=1;function n(e,t){return function(r){return e(t(r))}}return Gw=n,Gw}var Ww,RP;function eJ(){if(RP)return Ww;RP=1;var n=j4(),e=n(Object.keys,Object);return Ww=e,Ww}var Yw,kP;function tJ(){if(kP)return Yw;kP=1;var n=QZ(),e=eJ(),t=Object.prototype,r=t.hasOwnProperty;function i(a){if(!n(a))return e(a);var s=[];for(var l in Object(a))r.call(a,l)&&l!="constructor"&&s.push(l);return s}return Yw=i,Yw}var Xw,DP;function tf(){if(DP)return Xw;DP=1;var n=FA(),e=nE();function t(r){return r!=null&&e(r.length)&&!n(r)}return Xw=t,Xw}var Kw,LP;function Gg(){if(LP)return Kw;LP=1;var n=JZ(),e=tJ(),t=tf();function r(i){return t(i)?n(i):e(i)}return Kw=r,Kw}var Zw,IP;function nJ(){if(IP)return Zw;IP=1;var n=zZ(),e=GZ(),t=Gg();function r(i){return n(i,t,e)}return Zw=r,Zw}var Jw,BP;function rJ(){if(BP)return Jw;BP=1;var n=nJ(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(a,s,l,u,d,f){var m=l&e,g=n(a),y=g.length,x=n(s),b=x.length;if(y!=b&&!m)return!1;for(var w=y;w--;){var S=g[w];if(!(m?S in s:r.call(s,S)))return!1}var O=f.get(a),T=f.get(s);if(O&&T)return O==s&&T==a;var M=!0;f.set(a,s),f.set(s,a);for(var N=m;++w<y;){S=g[w];var j=a[S],C=s[S];if(u)var R=m?u(C,j,S,s,a,f):u(j,C,S,a,s,f);if(!(R===void 0?j===C||d(j,C,l,u,f):R)){M=!1;break}N||(N=S=="constructor")}if(M&&!N){var k=a.constructor,F=s.constructor;k!=F&&"constructor"in a&&"constructor"in s&&!(typeof k=="function"&&k instanceof k&&typeof F=="function"&&F instanceof F)&&(M=!1)}return f.delete(a),f.delete(s),M}return Jw=i,Jw}var Qw,$P;function iJ(){if($P)return Qw;$P=1;var n=cl(),e=ua(),t=n(e,"DataView");return Qw=t,Qw}var ex,FP;function aJ(){if(FP)return ex;FP=1;var n=cl(),e=ua(),t=n(e,"Promise");return ex=t,ex}var tx,UP;function N4(){if(UP)return tx;UP=1;var n=cl(),e=ua(),t=n(e,"Set");return tx=t,tx}var nx,qP;function sJ(){if(qP)return nx;qP=1;var n=cl(),e=ua(),t=n(e,"WeakMap");return nx=t,nx}var rx,zP;function oJ(){if(zP)return rx;zP=1;var n=iJ(),e=qA(),t=aJ(),r=N4(),i=sJ(),a=ts(),s=YI(),l="[object Map]",u="[object Object]",d="[object Promise]",f="[object Set]",m="[object WeakMap]",g="[object DataView]",y=s(n),x=s(e),b=s(t),w=s(r),S=s(i),O=a;return(n&&O(new n(new ArrayBuffer(1)))!=g||e&&O(new e)!=l||t&&O(t.resolve())!=d||r&&O(new r)!=f||i&&O(new i)!=m)&&(O=function(T){var M=a(T),N=M==u?T.constructor:void 0,j=N?s(N):"";if(j)switch(j){case y:return g;case x:return l;case b:return d;case w:return f;case S:return m}return M}),rx=O,rx}var ix,HP;function lJ(){if(HP)return ix;HP=1;var n=w4(),e=A4(),t=qZ(),r=rJ(),i=oJ(),a=Or(),s=T4(),l=C4(),u=1,d="[object Arguments]",f="[object Array]",m="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function x(b,w,S,O,T,M){var N=a(b),j=a(w),C=N?f:i(b),R=j?f:i(w);C=C==d?m:C,R=R==d?m:R;var k=C==m,F=R==m,D=C==R;if(D&&s(b)){if(!s(w))return!1;N=!0,k=!1}if(D&&!k)return M||(M=new n),N||l(b)?e(b,w,S,O,T,M):t(b,w,C,S,O,T,M);if(!(S&u)){var L=k&&y.call(b,"__wrapped__"),B=F&&y.call(w,"__wrapped__");if(L||B){var V=L?b.value():b,H=B?w.value():w;return M||(M=new n),T(V,H,S,O,M)}}return D?(M||(M=new n),r(b,w,S,O,T,M)):!1}return ix=x,ix}var ax,VP;function rE(){if(VP)return ax;VP=1;var n=lJ(),e=ns();function t(r,i,a,s,l){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,a,s,t,l)}return ax=t,ax}var sx,GP;function cJ(){if(GP)return sx;GP=1;var n=w4(),e=rE(),t=1,r=2;function i(a,s,l,u){var d=l.length,f=d,m=!u;if(a==null)return!f;for(a=Object(a);d--;){var g=l[d];if(m&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++d<f;){g=l[d];var y=g[0],x=a[y],b=g[1];if(m&&g[2]){if(x===void 0&&!(y in a))return!1}else{var w=new n;if(u)var S=u(x,b,y,a,s,w);if(!(S===void 0?e(b,x,t|r,u,w):S))return!1}}return!0}return sx=i,sx}var ox,WP;function M4(){if(WP)return ox;WP=1;var n=Ys();function e(t){return t===t&&!n(t)}return ox=e,ox}var lx,YP;function uJ(){if(YP)return lx;YP=1;var n=M4(),e=Gg();function t(r){for(var i=e(r),a=i.length;a--;){var s=i[a],l=r[s];i[a]=[s,l,n(l)]}return i}return lx=t,lx}var cx,XP;function P4(){if(XP)return cx;XP=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return cx=n,cx}var ux,KP;function dJ(){if(KP)return ux;KP=1;var n=cJ(),e=uJ(),t=P4();function r(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(s){return s===i||n(s,i,a)}}return ux=r,ux}var dx,ZP;function hJ(){if(ZP)return dx;ZP=1;function n(e,t){return e!=null&&t in Object(e)}return dx=n,dx}var hx,JP;function fJ(){if(JP)return hx;JP=1;var n=ZI(),e=eE(),t=Or(),r=tE(),i=nE(),a=Ug();function s(l,u,d){u=n(u,l);for(var f=-1,m=u.length,g=!1;++f<m;){var y=a(u[f]);if(!(g=l!=null&&d(l,y)))break;l=l[y]}return g||++f!=m?g:(m=l==null?0:l.length,!!m&&i(m)&&r(y,m)&&(t(l)||e(l)))}return hx=s,hx}var fx,QP;function mJ(){if(QP)return fx;QP=1;var n=hJ(),e=fJ();function t(r,i){return r!=null&&e(r,i,n)}return fx=t,fx}var mx,e5;function pJ(){if(e5)return mx;e5=1;var n=rE(),e=JI(),t=mJ(),r=$A(),i=M4(),a=P4(),s=Ug(),l=1,u=2;function d(f,m){return r(f)&&i(m)?a(s(f),m):function(g){var y=e(g,f);return y===void 0&&y===m?t(g,f):n(m,y,l|u)}}return mx=d,mx}var px,t5;function fu(){if(t5)return px;t5=1;function n(e){return e}return px=n,px}var gx,n5;function gJ(){if(n5)return gx;n5=1;function n(e){return function(t){return t?.[e]}}return gx=n,gx}var vx,r5;function vJ(){if(r5)return vx;r5=1;var n=VA();function e(t){return function(r){return n(r,t)}}return vx=e,vx}var yx,i5;function yJ(){if(i5)return yx;i5=1;var n=gJ(),e=vJ(),t=$A(),r=Ug();function i(a){return t(a)?n(r(a)):e(a)}return yx=i,yx}var bx,a5;function Xs(){if(a5)return bx;a5=1;var n=dJ(),e=pJ(),t=fu(),r=Or(),i=yJ();function a(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?r(s)?e(s[0],s[1]):n(s):i(s)}return bx=a,bx}var wx,s5;function R4(){if(s5)return wx;s5=1;function n(e,t,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(t(e[s],s,e))return s;return-1}return wx=n,wx}var xx,o5;function bJ(){if(o5)return xx;o5=1;function n(e){return e!==e}return xx=n,xx}var _x,l5;function wJ(){if(l5)return _x;l5=1;function n(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return _x=n,_x}var Sx,c5;function xJ(){if(c5)return Sx;c5=1;var n=R4(),e=bJ(),t=wJ();function r(i,a,s){return a===a?t(i,a,s):n(i,e,s)}return Sx=r,Sx}var Ax,u5;function _J(){if(u5)return Ax;u5=1;var n=xJ();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return Ax=e,Ax}var Ex,d5;function SJ(){if(d5)return Ex;d5=1;function n(e,t,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1}return Ex=n,Ex}var Tx,h5;function AJ(){if(h5)return Tx;h5=1;function n(){}return Tx=n,Tx}var Ox,f5;function EJ(){if(f5)return Ox;f5=1;var n=N4(),e=AJ(),t=QA(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(a){return new n(a)}:e;return Ox=i,Ox}var Cx,m5;function TJ(){if(m5)return Cx;m5=1;var n=x4(),e=_J(),t=SJ(),r=S4(),i=EJ(),a=QA(),s=200;function l(u,d,f){var m=-1,g=e,y=u.length,x=!0,b=[],w=b;if(f)x=!1,g=t;else if(y>=s){var S=d?null:i(u);if(S)return a(S);x=!1,g=r,w=new n}else w=d?[]:b;e:for(;++m<y;){var O=u[m],T=d?d(O):O;if(O=f||O!==0?O:0,x&&T===T){for(var M=w.length;M--;)if(w[M]===T)continue e;d&&w.push(T),b.push(O)}else g(w,T,f)||(w!==b&&w.push(T),b.push(O))}return b}return Cx=l,Cx}var jx,p5;function OJ(){if(p5)return jx;p5=1;var n=Xs(),e=TJ();function t(r,i){return r&&r.length?e(r,n(i,2)):[]}return jx=t,jx}var CJ=OJ();const g5=_t(CJ);function k4(n,e,t){return e===!0?g5(n,t):et(e)?g5(n,e):n}function Bc(n){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(n)}var jJ=["ref"];function v5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Pa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v5(Object(t),!0).forEach(function(r){Wg(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function NJ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function y5(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,L4(r.key),r)}}function MJ(n,e,t){return e&&y5(n.prototype,e),t&&y5(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function PJ(n,e,t){return e=Pp(e),RJ(n,D4()?Reflect.construct(e,t||[],Pp(n).constructor):e.apply(n,t))}function RJ(n,e){if(e&&(Bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kJ(n)}function kJ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function D4(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D4=function(){return!!n})()}function Pp(n){return Pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pp(n)}function DJ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&V_(n,e)}function V_(n,e){return V_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V_(n,e)}function Wg(n,e,t){return e=L4(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function L4(n){var e=LJ(n,"string");return Bc(e)=="symbol"?e:e+""}function LJ(n,e){if(Bc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function IJ(n,e){if(n==null)return{};var t=BJ(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function BJ(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function $J(n){return n.value}function FJ(n,e){if(Z.isValidElement(n))return Z.cloneElement(n,e);if(typeof n=="function")return Z.createElement(n,e);e.ref;var t=IJ(e,jJ);return Z.createElement(JA,t)}var b5=1,qa=(function(n){function e(){var t;NJ(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=PJ(this,e,[].concat(i)),Wg(t,"lastBoundingBox",{width:-1,height:-1}),t}return DJ(e,n),MJ(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>b5||Math.abs(i.height-this.lastBoundingBox.height)>b5)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Pa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,l=i.verticalAlign,u=i.margin,d=i.chartWidth,f=i.chartHeight,m,g;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var y=this.getBBoxSnapshot();m={left:((d||0)-y.width)/2}}else m=s==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();g={top:((f||0)-x.height)/2}}else g=l==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return Pa(Pa({},m),g)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,l=i.height,u=i.wrapperStyle,d=i.payloadUniqBy,f=i.payload,m=Pa(Pa({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(u)),u);return Z.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(y){r.wrapperNode=y}},FJ(a,Pa(Pa({},this.props),{},{payload:k4(f,d,$J)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Pa(Pa({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&be(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])})(E.PureComponent);Wg(qa,"displayName","Legend");Wg(qa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Nx,w5;function UJ(){if(w5)return Nx;w5=1;var n=Jh(),e=eE(),t=Or(),r=n?n.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(r&&a&&a[r])}return Nx=i,Nx}var Mx,x5;function I4(){if(x5)return Mx;x5=1;var n=E4(),e=UJ();function t(r,i,a,s,l){var u=-1,d=r.length;for(a||(a=e),l||(l=[]);++u<d;){var f=r[u];i>0&&a(f)?i>1?t(f,i-1,a,s,l):n(l,f):s||(l[l.length]=f)}return l}return Mx=t,Mx}var Px,_5;function qJ(){if(_5)return Px;_5=1;function n(e){return function(t,r,i){for(var a=-1,s=Object(t),l=i(t),u=l.length;u--;){var d=l[e?u:++a];if(r(s[d],d,s)===!1)break}return t}}return Px=n,Px}var Rx,S5;function zJ(){if(S5)return Rx;S5=1;var n=qJ(),e=n();return Rx=e,Rx}var kx,A5;function B4(){if(A5)return kx;A5=1;var n=zJ(),e=Gg();function t(r,i){return r&&n(r,i,e)}return kx=t,kx}var Dx,E5;function HJ(){if(E5)return Dx;E5=1;var n=tf();function e(t,r){return function(i,a){if(i==null)return i;if(!n(i))return t(i,a);for(var s=i.length,l=r?s:-1,u=Object(i);(r?l--:++l<s)&&a(u[l],l,u)!==!1;);return i}}return Dx=e,Dx}var Lx,T5;function iE(){if(T5)return Lx;T5=1;var n=B4(),e=HJ(),t=e(n);return Lx=t,Lx}var Ix,O5;function $4(){if(O5)return Ix;O5=1;var n=iE(),e=tf();function t(r,i){var a=-1,s=e(r)?Array(r.length):[];return n(r,function(l,u,d){s[++a]=i(l,u,d)}),s}return Ix=t,Ix}var Bx,C5;function VJ(){if(C5)return Bx;C5=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return Bx=n,Bx}var $x,j5;function GJ(){if(j5)return $x;j5=1;var n=du();function e(t,r){if(t!==r){var i=t!==void 0,a=t===null,s=t===t,l=n(t),u=r!==void 0,d=r===null,f=r===r,m=n(r);if(!d&&!m&&!l&&t>r||l&&u&&f&&!d&&!m||a&&u&&f||!i&&f||!s)return 1;if(!a&&!l&&!m&&t<r||m&&i&&s&&!a&&!l||d&&i&&s||!u&&s||!f)return-1}return 0}return $x=e,$x}var Fx,N5;function WJ(){if(N5)return Fx;N5=1;var n=GJ();function e(t,r,i){for(var a=-1,s=t.criteria,l=r.criteria,u=s.length,d=i.length;++a<u;){var f=n(s[a],l[a]);if(f){if(a>=d)return f;var m=i[a];return f*(m=="desc"?-1:1)}}return t.index-r.index}return Fx=e,Fx}var Ux,M5;function YJ(){if(M5)return Ux;M5=1;var n=HA(),e=VA(),t=Xs(),r=$4(),i=VJ(),a=O4(),s=WJ(),l=fu(),u=Or();function d(f,m,g){m.length?m=n(m,function(b){return u(b)?function(w){return e(w,b.length===1?b[0]:b)}:b}):m=[l];var y=-1;m=n(m,a(t));var x=r(f,function(b,w,S){var O=n(m,function(T){return T(b)});return{criteria:O,index:++y,value:b}});return i(x,function(b,w){return s(b,w,g)})}return Ux=d,Ux}var qx,P5;function XJ(){if(P5)return qx;P5=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return qx=n,qx}var zx,R5;function KJ(){if(R5)return zx;R5=1;var n=XJ(),e=Math.max;function t(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,l=-1,u=e(s.length-i,0),d=Array(u);++l<u;)d[l]=s[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=s[l];return f[i]=a(d),n(r,this,f)}}return zx=t,zx}var Hx,k5;function ZJ(){if(k5)return Hx;k5=1;function n(e){return function(){return e}}return Hx=n,Hx}var Vx,D5;function F4(){if(D5)return Vx;D5=1;var n=cl(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return Vx=e,Vx}var Gx,L5;function JJ(){if(L5)return Gx;L5=1;var n=ZJ(),e=F4(),t=fu(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return Gx=r,Gx}var Wx,I5;function QJ(){if(I5)return Wx;I5=1;var n=800,e=16,t=Date.now;function r(i){var a=0,s=0;return function(){var l=t(),u=e-(l-s);if(s=l,u>0){if(++a>=n)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return Wx=r,Wx}var Yx,B5;function eQ(){if(B5)return Yx;B5=1;var n=JJ(),e=QJ(),t=e(n);return Yx=t,Yx}var Xx,$5;function tQ(){if($5)return Xx;$5=1;var n=fu(),e=KJ(),t=eQ();function r(i,a){return t(e(i,a,n),i+"")}return Xx=r,Xx}var Kx,F5;function Yg(){if(F5)return Kx;F5=1;var n=UA(),e=tf(),t=tE(),r=Ys();function i(a,s,l){if(!r(l))return!1;var u=typeof s;return(u=="number"?e(l)&&t(s,l.length):u=="string"&&s in l)?n(l[s],a):!1}return Kx=i,Kx}var Zx,U5;function nQ(){if(U5)return Zx;U5=1;var n=I4(),e=YJ(),t=tQ(),r=Yg(),i=t(function(a,s){if(a==null)return[];var l=s.length;return l>1&&r(a,s[0],s[1])?s=[]:l>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,n(s,1),[])});return Zx=i,Zx}var rQ=nQ();const aE=_t(rQ);function sh(n){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(n)}function G_(){return G_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},G_.apply(this,arguments)}function iQ(n,e){return lQ(n)||oQ(n,e)||sQ(n,e)||aQ()}function aQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sQ(n,e){if(n){if(typeof n=="string")return q5(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return q5(n,e)}}function q5(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function oQ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function lQ(n){if(Array.isArray(n))return n}function z5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(t),!0).forEach(function(r){cQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cQ(n,e,t){return e=uQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uQ(n){var e=dQ(n,"string");return sh(e)=="symbol"?e:e+""}function dQ(n,e){if(sh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hQ(n){return Array.isArray(n)&&Nn(n[0])&&Nn(n[1])?n.join(" ~ "):n}var fQ=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,l=s===void 0?{}:s,u=e.labelStyle,d=u===void 0?{}:u,f=e.payload,m=e.formatter,g=e.itemSorter,y=e.wrapperClassName,x=e.labelClassName,b=e.label,w=e.labelFormatter,S=e.accessibilityLayer,O=S===void 0?!1:S,T=function(){if(f&&f.length){var L={padding:0,margin:0},B=(g?aE(f,g):f).map(function(V,H){if(V.type==="none")return null;var I=Jx({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},l),z=V.formatter||m||hQ,q=V.value,J=V.name,K=q,U=J;if(z&&K!=null&&U!=null){var G=z(q,J,V,H,f);if(Array.isArray(G)){var ee=iQ(G,2);K=ee[0],U=ee[1]}else K=G}return Z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:I},Nn(U)?Z.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Nn(U)?Z.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Z.createElement("span",{className:"recharts-tooltip-item-value"},K),Z.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return Z.createElement("ul",{className:"recharts-tooltip-item-list",style:L},B)}return null},M=Jx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=Jx({margin:0},d),j=!st(b),C=j?b:"",R=at("recharts-default-tooltip",y),k=at("recharts-tooltip-label",x);j&&w&&f!==void 0&&f!==null&&(C=w(b,f));var F=O?{role:"status","aria-live":"assertive"}:{};return Z.createElement("div",G_({className:R,style:M},F),Z.createElement("p",{className:k,style:N},Z.isValidElement(C)?C:"".concat(C)),T())};function oh(n){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(n)}function zm(n,e,t){return e=mQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mQ(n){var e=pQ(n,"string");return oh(e)=="symbol"?e:e+""}function pQ(n,e){if(oh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var vd="recharts-tooltip-wrapper",gQ={visibility:"hidden"};function vQ(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return at(vd,zm(zm(zm(zm({},"".concat(vd,"-right"),be(t)&&e&&be(e.x)&&t>=e.x),"".concat(vd,"-left"),be(t)&&e&&be(e.x)&&t<e.x),"".concat(vd,"-bottom"),be(r)&&e&&be(e.y)&&r>=e.y),"".concat(vd,"-top"),be(r)&&e&&be(e.y)&&r<e.y))}function H5(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,a=n.position,s=n.reverseDirection,l=n.tooltipDimension,u=n.viewBox,d=n.viewBoxDimension;if(a&&be(a[r]))return a[r];var f=t[r]-l-i,m=t[r]+i;if(e[r])return s[r]?f:m;if(s[r]){var g=f,y=u[r];return g<y?Math.max(m,u[r]):Math.max(f,u[r])}var x=m+l,b=u[r]+d;return x>b?Math.max(f,u[r]):Math.max(m,u[r])}function yQ(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function bQ(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,a=n.reverseDirection,s=n.tooltipBox,l=n.useTranslate3d,u=n.viewBox,d,f,m;return s.height>0&&s.width>0&&t?(f=H5({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:u,viewBoxDimension:u.width}),m=H5({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:u,viewBoxDimension:u.height}),d=yQ({translateX:f,translateY:m,useTranslate3d:l})):d=gQ,{cssProperties:d,cssClasses:vQ({translateX:f,translateY:m,coordinate:t})}}function $c(n){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(n)}function V5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function G5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?V5(Object(t),!0).forEach(function(r){Y_(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):V5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wQ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xQ(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,q4(r.key),r)}}function _Q(n,e,t){return e&&xQ(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function SQ(n,e,t){return e=Rp(e),AQ(n,U4()?Reflect.construct(e,t||[],Rp(n).constructor):e.apply(n,t))}function AQ(n,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EQ(n)}function EQ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function U4(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U4=function(){return!!n})()}function Rp(n){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rp(n)}function TQ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&W_(n,e)}function W_(n,e){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},W_(n,e)}function Y_(n,e,t){return e=q4(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q4(n){var e=OQ(n,"string");return $c(e)=="symbol"?e:e+""}function OQ(n,e){if($c(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var W5=1,CQ=(function(n){function e(){var t;wQ(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=SQ(this,e,[].concat(i)),Y_(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Y_(t,"handleKeyDown",function(s){if(s.key==="Escape"){var l,u,d,f;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(u=t.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&l!==void 0?l:0,y:(d=(f=t.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),t}return TQ(e,n),_Q(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>W5||Math.abs(r.height-this.state.lastBoundingBox.height)>W5)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,u=i.animationEasing,d=i.children,f=i.coordinate,m=i.hasPayload,g=i.isAnimationActive,y=i.offset,x=i.position,b=i.reverseDirection,w=i.useTranslate3d,S=i.viewBox,O=i.wrapperStyle,T=bQ({allowEscapeViewBox:s,coordinate:f,offsetTopLeft:y,position:x,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:S}),M=T.cssClasses,N=T.cssProperties,j=G5(G5({transition:g&&a?"transform ".concat(l,"ms ").concat(u):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&m?"visible":"hidden",position:"absolute",top:0,left:0},O);return Z.createElement("div",{tabIndex:-1,className:M,style:j,ref:function(R){r.wrapperNode=R}},d)}}])})(E.PureComponent),jQ=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},mu={isSsr:jQ()};function Fc(n){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(n)}function Y5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function X5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(t),!0).forEach(function(r){sE(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function NQ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function MQ(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,H4(r.key),r)}}function PQ(n,e,t){return e&&MQ(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function RQ(n,e,t){return e=kp(e),kQ(n,z4()?Reflect.construct(e,t||[],kp(n).constructor):e.apply(n,t))}function kQ(n,e){if(e&&(Fc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DQ(n)}function DQ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function z4(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z4=function(){return!!n})()}function kp(n){return kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kp(n)}function LQ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&X_(n,e)}function X_(n,e){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},X_(n,e)}function sE(n,e,t){return e=H4(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function H4(n){var e=IQ(n,"string");return Fc(e)=="symbol"?e:e+""}function IQ(n,e){if(Fc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function BQ(n){return n.dataKey}function $Q(n,e){return Z.isValidElement(n)?Z.cloneElement(n,e):typeof n=="function"?Z.createElement(n,e):Z.createElement(fQ,e)}var gi=(function(n){function e(){return NQ(this,e),RQ(this,e,arguments)}return LQ(e,n),PQ(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,u=i.animationEasing,d=i.content,f=i.coordinate,m=i.filterNull,g=i.isAnimationActive,y=i.offset,x=i.payload,b=i.payloadUniqBy,w=i.position,S=i.reverseDirection,O=i.useTranslate3d,T=i.viewBox,M=i.wrapperStyle,N=x??[];m&&N.length&&(N=k4(x.filter(function(C){return C.value!=null&&(C.hide!==!0||r.props.includeHidden)}),b,BQ));var j=N.length>0;return Z.createElement(CQ,{allowEscapeViewBox:s,animationDuration:l,animationEasing:u,isAnimationActive:g,active:a,coordinate:f,hasPayload:j,offset:y,position:w,reverseDirection:S,useTranslate3d:O,viewBox:T,wrapperStyle:M},$Q(d,X5(X5({},this.props),{},{payload:N})))}}])})(E.PureComponent);sE(gi,"displayName","Tooltip");sE(gi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!mu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Qx,K5;function FQ(){if(K5)return Qx;K5=1;var n=ua(),e=function(){return n.Date.now()};return Qx=e,Qx}var e1,Z5;function UQ(){if(Z5)return e1;Z5=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return e1=e,e1}var t1,J5;function qQ(){if(J5)return t1;J5=1;var n=UQ(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return t1=t,t1}var n1,Q5;function V4(){if(Q5)return n1;Q5=1;var n=qQ(),e=Ys(),t=du(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(t(d))return r;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=n(d);var m=a.test(d);return m||s.test(d)?l(d.slice(2),m?2:8):i.test(d)?r:+d}return n1=u,n1}var r1,eR;function zQ(){if(eR)return r1;eR=1;var n=Ys(),e=FQ(),t=V4(),r="Expected a function",i=Math.max,a=Math.min;function s(l,u,d){var f,m,g,y,x,b,w=0,S=!1,O=!1,T=!0;if(typeof l!="function")throw new TypeError(r);u=t(u)||0,n(d)&&(S=!!d.leading,O="maxWait"in d,g=O?i(t(d.maxWait)||0,u):g,T="trailing"in d?!!d.trailing:T);function M(B){var V=f,H=m;return f=m=void 0,w=B,y=l.apply(H,V),y}function N(B){return w=B,x=setTimeout(R,u),S?M(B):y}function j(B){var V=B-b,H=B-w,I=u-V;return O?a(I,g-H):I}function C(B){var V=B-b,H=B-w;return b===void 0||V>=u||V<0||O&&H>=g}function R(){var B=e();if(C(B))return k(B);x=setTimeout(R,j(B))}function k(B){return x=void 0,T&&f?M(B):(f=m=void 0,y)}function F(){x!==void 0&&clearTimeout(x),w=0,f=b=m=x=void 0}function D(){return x===void 0?y:k(e())}function L(){var B=e(),V=C(B);if(f=arguments,m=this,b=B,V){if(x===void 0)return N(b);if(O)return clearTimeout(x),x=setTimeout(R,u),M(b)}return x===void 0&&(x=setTimeout(R,u)),y}return L.cancel=F,L.flush=D,L}return r1=s,r1}var i1,tR;function HQ(){if(tR)return i1;tR=1;var n=zQ(),e=Ys(),t="Expected a function";function r(i,a,s){var l=!0,u=!0;if(typeof i!="function")throw new TypeError(t);return e(s)&&(l="leading"in s?!!s.leading:l,u="trailing"in s?!!s.trailing:u),n(i,a,{leading:l,maxWait:a,trailing:u})}return i1=r,i1}var VQ=HQ();const G4=_t(VQ);function lh(n){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(n)}function nR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Hm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(t),!0).forEach(function(r){GQ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nR(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function GQ(n,e,t){return e=WQ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WQ(n){var e=YQ(n,"string");return lh(e)=="symbol"?e:e+""}function YQ(n,e){if(lh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XQ(n,e){return QQ(n)||JQ(n,e)||ZQ(n,e)||KQ()}function KQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZQ(n,e){if(n){if(typeof n=="string")return rR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rR(n,e)}}function rR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function JQ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function QQ(n){if(Array.isArray(n))return n}var K_=E.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=n.width,s=a===void 0?"100%":a,l=n.height,u=l===void 0?"100%":l,d=n.minWidth,f=d===void 0?0:d,m=n.minHeight,g=n.maxHeight,y=n.children,x=n.debounce,b=x===void 0?0:x,w=n.id,S=n.className,O=n.onResize,T=n.style,M=T===void 0?{}:T,N=E.useRef(null),j=E.useRef();j.current=O,E.useImperativeHandle(e,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var C=E.useState({containerWidth:i.width,containerHeight:i.height}),R=XQ(C,2),k=R[0],F=R[1],D=E.useCallback(function(B,V){F(function(H){var I=Math.round(B),z=Math.round(V);return H.containerWidth===I&&H.containerHeight===z?H:{containerWidth:I,containerHeight:z}})},[]);E.useEffect(function(){var B=function(J){var K,U=J[0].contentRect,G=U.width,ee=U.height;D(G,ee),(K=j.current)===null||K===void 0||K.call(j,G,ee)};b>0&&(B=G4(B,b,{trailing:!0,leading:!1}));var V=new ResizeObserver(B),H=N.current.getBoundingClientRect(),I=H.width,z=H.height;return D(I,z),V.observe(N.current),function(){V.disconnect()}},[D,b]);var L=E.useMemo(function(){var B=k.containerWidth,V=k.containerHeight;if(B<0||V<0)return null;Ua($o(s)||$o(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,u),Ua(!t||t>0,"The aspect(%s) must be greater than zero.",t);var H=$o(s)?B:s,I=$o(u)?V:u;t&&t>0&&(H?I=H/t:I&&(H=I*t),g&&I>g&&(I=g)),Ua(H>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,I,s,u,f,m,t);var z=!Array.isArray(y)&&Fa(y.type).endsWith("Chart");return Z.Children.map(y,function(q){return Z.isValidElement(q)?E.cloneElement(q,Hm({width:H,height:I},z?{style:Hm({height:"100%",width:"100%",maxHeight:I,maxWidth:H},q.props.style)}:{})):q})},[t,y,u,g,m,f,k,s]);return Z.createElement("div",{id:w?"".concat(w):void 0,className:at("recharts-responsive-container",S),style:Hm(Hm({},M),{},{width:s,height:u,minWidth:f,minHeight:m,maxHeight:g}),ref:N},L)}),W4=function(e){return null};W4.displayName="Cell";function ch(n){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(n)}function iR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Z_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iR(Object(t),!0).forEach(function(r){eee(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iR(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eee(n,e,t){return e=tee(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tee(n){var e=nee(n,"string");return ch(e)=="symbol"?e:e+""}function nee(n,e){if(ch(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var rc={widthCache:{},cacheCount:0},ree=2e3,iee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aR="recharts_measurement_span";function aee(n){var e=Z_({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var $d=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||mu.isSsr)return{width:0,height:0};var r=aee(t),i=JSON.stringify({text:e,copyStyle:r});if(rc.widthCache[i])return rc.widthCache[i];try{var a=document.getElementById(aR);a||(a=document.createElement("span"),a.setAttribute("id",aR),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=Z_(Z_({},iee),r);Object.assign(a.style,s),a.textContent="".concat(e);var l=a.getBoundingClientRect(),u={width:l.width,height:l.height};return rc.widthCache[i]=u,++rc.cacheCount>ree&&(rc.cacheCount=0,rc.widthCache={}),u}catch{return{width:0,height:0}}},see=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function uh(n){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(n)}function Dp(n,e){return uee(n)||cee(n,e)||lee(n,e)||oee()}function oee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lee(n,e){if(n){if(typeof n=="string")return sR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sR(n,e)}}function sR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function cee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function uee(n){if(Array.isArray(n))return n}function dee(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function oR(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,fee(r.key),r)}}function hee(n,e,t){return e&&oR(n.prototype,e),t&&oR(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function fee(n){var e=mee(n,"string");return uh(e)=="symbol"?e:e+""}function mee(n,e){if(uh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var lR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gee=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Y4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vee=Object.keys(Y4),mc="NaN";function yee(n,e){return n*Y4[e]}var Vm=(function(){function n(e,t){dee(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!pee.test(t)&&(this.num=NaN,this.unit=""),vee.includes(t)&&(this.num=yee(e,t),this.unit="px")}return hee(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=gee.exec(t))!==null&&r!==void 0?r:[],a=Dp(i,3),s=a[1],l=a[2];return new n(parseFloat(s),l??"")}}])})();function X4(n){if(n.includes(mc))return mc;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=lR.exec(e))!==null&&t!==void 0?t:[],i=Dp(r,4),a=i[1],s=i[2],l=i[3],u=Vm.parse(a??""),d=Vm.parse(l??""),f=s==="*"?u.multiply(d):u.divide(d);if(f.isNaN())return mc;e=e.replace(lR,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,g=(m=cR.exec(e))!==null&&m!==void 0?m:[],y=Dp(g,4),x=y[1],b=y[2],w=y[3],S=Vm.parse(x??""),O=Vm.parse(w??""),T=b==="+"?S.add(O):S.subtract(O);if(T.isNaN())return mc;e=e.replace(cR,T.toString())}return e}var uR=/\(([^()]*)\)/;function bee(n){for(var e=n;e.includes("(");){var t=uR.exec(e),r=Dp(t,2),i=r[1];e=e.replace(uR,X4(i))}return e}function wee(n){var e=n.replace(/\s+/g,"");return e=bee(e),e=X4(e),e}function xee(n){try{return wee(n)}catch{return mc}}function a1(n){var e=xee(n.slice(5,-1));return e===mc?"":e}var _ee=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],See=["dx","dy","angle","className","breakAll"];function J_(){return J_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},J_.apply(this,arguments)}function dR(n,e){if(n==null)return{};var t=Aee(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Aee(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function hR(n,e){return Cee(n)||Oee(n,e)||Tee(n,e)||Eee()}function Eee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tee(n,e){if(n){if(typeof n=="string")return fR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fR(n,e)}}function fR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Oee(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function Cee(n){if(Array.isArray(n))return n}var K4=/[ \f\n\r\t\v\u2028\u2029]+/,Z4=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var a=[];st(t)||(r?a=t.toString().split(""):a=t.toString().split(K4));var s=a.map(function(u){return{word:u,width:$d(u,i).width}}),l=r?0:$d("",i).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},jee=function(e,t,r,i,a){var s=e.maxLines,l=e.children,u=e.style,d=e.breakAll,f=be(s),m=l,g=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(I,z){var q=z.word,J=z.width,K=I[I.length-1];if(K&&(i==null||a||K.width+J+r<Number(i)))K.words.push(q),K.width+=J+r;else{var U={words:[q],width:J};I.push(U)}return I},[])},y=g(t),x=function(H){return H.reduce(function(I,z){return I.width>z.width?I:z})};if(!f)return y;for(var b="",w=function(H){var I=m.slice(0,H),z=Z4({breakAll:d,style:u,children:I+b}).wordsWithComputedWidth,q=g(z),J=q.length>s||x(q).width>Number(i);return[J,q]},S=0,O=m.length-1,T=0,M;S<=O&&T<=m.length-1;){var N=Math.floor((S+O)/2),j=N-1,C=w(j),R=hR(C,2),k=R[0],F=R[1],D=w(N),L=hR(D,1),B=L[0];if(!k&&!B&&(S=N+1),k&&B&&(O=N-1),!k&&B){M=F;break}T++}return M||y},mR=function(e){var t=st(e)?[]:e.toString().split(K4);return[{words:t}]},Nee=function(e){var t=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,l=e.maxLines;if((t||r)&&!mu.isSsr){var u,d,f=Z4({breakAll:s,children:i,style:a});if(f){var m=f.wordsWithComputedWidth,g=f.spaceWidth;u=m,d=g}else return mR(i);return jee({breakAll:s,children:i,maxLines:l,style:a},u,d,t,r)}return mR(i)},pR="#808080",Lp=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.lineHeight,l=s===void 0?"1em":s,u=e.capHeight,d=u===void 0?"0.71em":u,f=e.scaleToFit,m=f===void 0?!1:f,g=e.textAnchor,y=g===void 0?"start":g,x=e.verticalAnchor,b=x===void 0?"end":x,w=e.fill,S=w===void 0?pR:w,O=dR(e,_ee),T=E.useMemo(function(){return Nee({breakAll:O.breakAll,children:O.children,maxLines:O.maxLines,scaleToFit:m,style:O.style,width:O.width})},[O.breakAll,O.children,O.maxLines,m,O.style,O.width]),M=O.dx,N=O.dy,j=O.angle,C=O.className,R=O.breakAll,k=dR(O,See);if(!Nn(r)||!Nn(a))return null;var F=r+(be(M)?M:0),D=a+(be(N)?N:0),L;switch(b){case"start":L=a1("calc(".concat(d,")"));break;case"middle":L=a1("calc(".concat((T.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:L=a1("calc(".concat(T.length-1," * -").concat(l,")"));break}var B=[];if(m){var V=T[0].width,H=O.width;B.push("scale(".concat((be(H)?H/V:1)/V,")"))}return j&&B.push("rotate(".concat(j,", ").concat(F,", ").concat(D,")")),B.length&&(k.transform=B.join(" ")),Z.createElement("text",J_({},ft(k,!0),{x:F,y:D,className:at("recharts-text",C),textAnchor:y,fill:S.includes("url")?pR:S}),T.map(function(I,z){var q=I.words.join(R?"":" ");return Z.createElement("tspan",{x:F,dy:z===0?L:l,key:"".concat(q,"-").concat(z)},q)}))};function qs(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Mee(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function oE(n){let e,t,r;n.length!==2?(e=qs,t=(l,u)=>qs(n(l),u),r=(l,u)=>n(l)-u):(e=n===qs||n===Mee?n:Pee,t=n,r=n);function i(l,u,d=0,f=l.length){if(d<f){if(e(u,u)!==0)return f;do{const m=d+f>>>1;t(l[m],u)<0?d=m+1:f=m}while(d<f)}return d}function a(l,u,d=0,f=l.length){if(d<f){if(e(u,u)!==0)return f;do{const m=d+f>>>1;t(l[m],u)<=0?d=m+1:f=m}while(d<f)}return d}function s(l,u,d=0,f=l.length){const m=i(l,u,d,f-1);return m>d&&r(l[m-1],u)>-r(l[m],u)?m-1:m}return{left:i,center:s,right:a}}function Pee(){return 0}function J4(n){return n===null?NaN:+n}function*Ree(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const kee=oE(qs),nf=kee.right;oE(J4).center;class gR extends Map{constructor(e,t=Iee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(vR(this,e))}has(e){return super.has(vR(this,e))}set(e,t){return super.set(Dee(this,e),t)}delete(e){return super.delete(Lee(this,e))}}function vR({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function Dee({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Lee({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Iee(n){return n!==null&&typeof n=="object"?n.valueOf():n}function Bee(n=qs){if(n===qs)return Q4;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function Q4(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const $ee=Math.sqrt(50),Fee=Math.sqrt(10),Uee=Math.sqrt(2);function Ip(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=$ee?10:a>=Fee?5:a>=Uee?2:1;let l,u,d;return i<0?(d=Math.pow(10,-i)/s,l=Math.round(n*d),u=Math.round(e*d),l/d<n&&++l,u/d>e&&--u,d=-d):(d=Math.pow(10,i)*s,l=Math.round(n/d),u=Math.round(e/d),l*d<n&&++l,u*d>e&&--u),u<l&&.5<=t&&t<2?Ip(n,e,t*2):[l,u,d]}function Q_(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?Ip(e,n,t):Ip(n,e,t);if(!(a>=i))return[];const l=a-i+1,u=new Array(l);if(r)if(s<0)for(let d=0;d<l;++d)u[d]=(a-d)/-s;else for(let d=0;d<l;++d)u[d]=(a-d)*s;else if(s<0)for(let d=0;d<l;++d)u[d]=(i+d)/-s;else for(let d=0;d<l;++d)u[d]=(i+d)*s;return u}function eS(n,e,t){return e=+e,n=+n,t=+t,Ip(n,e,t)[2]}function tS(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?eS(e,n,t):eS(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function yR(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function bR(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function eB(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?Q4:Bee(i);r>t;){if(r-t>600){const u=r-t+1,d=e-t+1,f=Math.log(u),m=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*m*(u-m)/u)*(d-u/2<0?-1:1),y=Math.max(t,Math.floor(e-d*m/u+g)),x=Math.min(r,Math.floor(e+(u-d)*m/u+g));eB(n,e,y,x,i)}const a=n[e];let s=t,l=r;for(yd(n,t,e),i(n[r],a)>0&&yd(n,t,r);s<l;){for(yd(n,s,l),++s,--l;i(n[s],a)<0;)++s;for(;i(n[l],a)>0;)--l}i(n[t],a)===0?yd(n,t,l):(++l,yd(n,l,r)),l<=e&&(t=l+1),e<=l&&(r=l-1)}return n}function yd(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function qee(n,e,t){if(n=Float64Array.from(Ree(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return bR(n);if(e>=1)return yR(n);var r,i=(r-1)*e,a=Math.floor(i),s=yR(eB(n,a).subarray(0,a+1)),l=bR(n.subarray(a+1));return s+(l-s)*(i-a)}}function zee(n,e,t=J4){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,a=Math.floor(i),s=+t(n[a],a,n),l=+t(n[a+1],a+1,n);return s+(l-s)*(i-a)}}function Hee(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function xi(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function rs(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nS=Symbol("implicit");function lE(){var n=new gR,e=[],t=[],r=nS;function i(a){let s=n.get(a);if(s===void 0){if(r!==nS)return r;n.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new gR;for(const s of a)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return lE(e,t).unknown(r)},xi.apply(i,arguments),i}function dh(){var n=lE().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,s,l=!1,u=0,d=0,f=.5;delete n.unknown;function m(){var g=e().length,y=i<r,x=y?i:r,b=y?r:i;a=(b-x)/Math.max(1,g-u+d*2),l&&(a=Math.floor(a)),x+=(b-x-a*(g-u))*f,s=a*(1-u),l&&(x=Math.round(x),s=Math.round(s));var w=Hee(g).map(function(S){return x+a*S});return t(y?w.reverse():w)}return n.domain=function(g){return arguments.length?(e(g),m()):e()},n.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},n.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,l=!0,m()},n.bandwidth=function(){return s},n.step=function(){return a},n.round=function(g){return arguments.length?(l=!!g,m()):l},n.padding=function(g){return arguments.length?(u=Math.min(1,d=+g),m()):u},n.paddingInner=function(g){return arguments.length?(u=Math.min(1,g),m()):u},n.paddingOuter=function(g){return arguments.length?(d=+g,m()):d},n.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),m()):f},n.copy=function(){return dh(e(),[r,i]).round(l).paddingInner(u).paddingOuter(d).align(f)},xi.apply(m(),arguments)}function tB(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return tB(e())},n}function Fd(){return tB(dh.apply(null,arguments).paddingInner(1))}function cE(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function nB(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function rf(){}var hh=.7,Bp=1/hh,Tc="\\s*([+-]?\\d+)\\s*",fh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vee=/^#([0-9a-f]{3,8})$/,Gee=new RegExp(`^rgb\\(${Tc},${Tc},${Tc}\\)$`),Wee=new RegExp(`^rgb\\(${sa},${sa},${sa}\\)$`),Yee=new RegExp(`^rgba\\(${Tc},${Tc},${Tc},${fh}\\)$`),Xee=new RegExp(`^rgba\\(${sa},${sa},${sa},${fh}\\)$`),Kee=new RegExp(`^hsl\\(${fh},${sa},${sa}\\)$`),Zee=new RegExp(`^hsla\\(${fh},${sa},${sa},${fh}\\)$`),wR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cE(rf,mh,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:xR,formatHex:xR,formatHex8:Jee,formatHsl:Qee,formatRgb:_R,toString:_R});function xR(){return this.rgb().formatHex()}function Jee(){return this.rgb().formatHex8()}function Qee(){return rB(this).formatHsl()}function _R(){return this.rgb().formatRgb()}function mh(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Vee.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?SR(e):t===3?new Ar(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Gm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Gm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Gee.exec(n))?new Ar(e[1],e[2],e[3],1):(e=Wee.exec(n))?new Ar(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Yee.exec(n))?Gm(e[1],e[2],e[3],e[4]):(e=Xee.exec(n))?Gm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kee.exec(n))?TR(e[1],e[2]/100,e[3]/100,1):(e=Zee.exec(n))?TR(e[1],e[2]/100,e[3]/100,e[4]):wR.hasOwnProperty(n)?SR(wR[n]):n==="transparent"?new Ar(NaN,NaN,NaN,0):null}function SR(n){return new Ar(n>>16&255,n>>8&255,n&255,1)}function Gm(n,e,t,r){return r<=0&&(n=e=t=NaN),new Ar(n,e,t,r)}function ete(n){return n instanceof rf||(n=mh(n)),n?(n=n.rgb(),new Ar(n.r,n.g,n.b,n.opacity)):new Ar}function rS(n,e,t,r){return arguments.length===1?ete(n):new Ar(n,e,t,r??1)}function Ar(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}cE(Ar,rS,nB(rf,{brighter(n){return n=n==null?Bp:Math.pow(Bp,n),new Ar(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?hh:Math.pow(hh,n),new Ar(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ar(Go(this.r),Go(this.g),Go(this.b),$p(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:AR,formatHex:AR,formatHex8:tte,formatRgb:ER,toString:ER}));function AR(){return`#${Fo(this.r)}${Fo(this.g)}${Fo(this.b)}`}function tte(){return`#${Fo(this.r)}${Fo(this.g)}${Fo(this.b)}${Fo((isNaN(this.opacity)?1:this.opacity)*255)}`}function ER(){const n=$p(this.opacity);return`${n===1?"rgb(":"rgba("}${Go(this.r)}, ${Go(this.g)}, ${Go(this.b)}${n===1?")":`, ${n})`}`}function $p(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Go(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Fo(n){return n=Go(n),(n<16?"0":"")+n.toString(16)}function TR(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Bi(n,e,t,r)}function rB(n){if(n instanceof Bi)return new Bi(n.h,n.s,n.l,n.opacity);if(n instanceof rf||(n=mh(n)),!n)return new Bi;if(n instanceof Bi)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,l=a-i,u=(a+i)/2;return l?(e===a?s=(t-r)/l+(t<r)*6:t===a?s=(r-e)/l+2:s=(e-t)/l+4,l/=u<.5?a+i:2-a-i,s*=60):l=u>0&&u<1?0:s,new Bi(s,l,u,n.opacity)}function nte(n,e,t,r){return arguments.length===1?rB(n):new Bi(n,e,t,r??1)}function Bi(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}cE(Bi,nte,nB(rf,{brighter(n){return n=n==null?Bp:Math.pow(Bp,n),new Bi(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?hh:Math.pow(hh,n),new Bi(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Ar(s1(n>=240?n-240:n+120,i,r),s1(n,i,r),s1(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Bi(OR(this.h),Wm(this.s),Wm(this.l),$p(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=$p(this.opacity);return`${n===1?"hsl(":"hsla("}${OR(this.h)}, ${Wm(this.s)*100}%, ${Wm(this.l)*100}%${n===1?")":`, ${n})`}`}}));function OR(n){return n=(n||0)%360,n<0?n+360:n}function Wm(n){return Math.max(0,Math.min(1,n||0))}function s1(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const uE=n=>()=>n;function rte(n,e){return function(t){return n+t*e}}function ite(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function ate(n){return(n=+n)==1?iB:function(e,t){return t-e?ite(e,t,n):uE(isNaN(e)?t:e)}}function iB(n,e){var t=e-n;return t?rte(n,t):uE(isNaN(n)?e:n)}const CR=(function n(e){var t=ate(e);function r(i,a){var s=t((i=rS(i)).r,(a=rS(a)).r),l=t(i.g,a.g),u=t(i.b,a.b),d=iB(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=l(f),i.b=u(f),i.opacity=d(f),i+""}}return r.gamma=n,r})(1);function ste(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function ote(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function lte(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=pu(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function cte(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Fp(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function ute(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=pu(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var iS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o1=new RegExp(iS.source,"g");function dte(n){return function(){return n}}function hte(n){return function(e){return n(e)+""}}function fte(n,e){var t=iS.lastIndex=o1.lastIndex=0,r,i,a,s=-1,l=[],u=[];for(n=n+"",e=e+"";(r=iS.exec(n))&&(i=o1.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,u.push({i:s,x:Fp(r,i)})),t=o1.lastIndex;return t<e.length&&(a=e.slice(t),l[s]?l[s]+=a:l[++s]=a),l.length<2?u[0]?hte(u[0].x):dte(e):(e=u.length,function(d){for(var f=0,m;f<e;++f)l[(m=u[f]).i]=m.x(d);return l.join("")})}function pu(n,e){var t=typeof e,r;return e==null||t==="boolean"?uE(e):(t==="number"?Fp:t==="string"?(r=mh(e))?(e=r,CR):fte:e instanceof mh?CR:e instanceof Date?cte:ote(e)?ste:Array.isArray(e)?lte:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ute:Fp)(n,e)}function dE(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function mte(n,e){e===void 0&&(e=n,n=pu);for(var t=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);t<r;)a[t]=n(i,i=e[++t]);return function(s){var l=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[l](s-l)}}function pte(n){return function(){return n}}function Up(n){return+n}var jR=[0,1];function ur(n){return n}function aS(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:pte(isNaN(e)?NaN:.5)}function gte(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function vte(n,e,t){var r=n[0],i=n[1],a=e[0],s=e[1];return i<r?(r=aS(i,r),a=t(s,a)):(r=aS(r,i),a=t(a,s)),function(l){return a(r(l))}}function yte(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=aS(n[s],n[s+1]),a[s]=t(e[s],e[s+1]);return function(l){var u=nf(n,l,1,r)-1;return a[u](i[u](l))}}function af(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Xg(){var n=jR,e=jR,t=pu,r,i,a,s=ur,l,u,d;function f(){var g=Math.min(n.length,e.length);return s!==ur&&(s=gte(n[0],n[g-1])),l=g>2?yte:vte,u=d=null,m}function m(g){return g==null||isNaN(g=+g)?a:(u||(u=l(n.map(r),e,t)))(r(s(g)))}return m.invert=function(g){return s(i((d||(d=l(e,n.map(r),Fp)))(g)))},m.domain=function(g){return arguments.length?(n=Array.from(g,Up),f()):n.slice()},m.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},m.rangeRound=function(g){return e=Array.from(g),t=dE,f()},m.clamp=function(g){return arguments.length?(s=g?!0:ur,f()):s!==ur},m.interpolate=function(g){return arguments.length?(t=g,f()):t},m.unknown=function(g){return arguments.length?(a=g,m):a},function(g,y){return r=g,i=y,f()}}function hE(){return Xg()(ur,ur)}function bte(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function qp(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function Uc(n){return n=qp(Math.abs(n)),n?n[1]:NaN}function wte(n,e){return function(t,r){for(var i=t.length,a=[],s=0,l=n[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(t.substring(i-=l,i+l)),!((u+=l+1)>r));)l=n[s=(s+1)%n.length];return a.reverse().join(e)}}function xte(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var _te=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ph(n){if(!(e=_te.exec(n)))throw new Error("invalid format: "+n);var e;return new fE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ph.prototype=fE.prototype;function fE(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}fE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ste(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var aB;function Ate(n,e){var t=qp(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(aB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+qp(n,Math.max(0,e+a-1))[0]}function NR(n,e){var t=qp(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const MR={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:bte,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>NR(n*100,e),r:NR,s:Ate,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function PR(n){return n}var RR=Array.prototype.map,kR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ete(n){var e=n.grouping===void 0||n.thousands===void 0?PR:wte(RR.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?PR:xte(RR.call(n.numerals,String)),s=n.percent===void 0?"%":n.percent+"",l=n.minus===void 0?"":n.minus+"",u=n.nan===void 0?"NaN":n.nan+"";function d(m){m=ph(m);var g=m.fill,y=m.align,x=m.sign,b=m.symbol,w=m.zero,S=m.width,O=m.comma,T=m.precision,M=m.trim,N=m.type;N==="n"?(O=!0,N="g"):MR[N]||(T===void 0&&(T=12),M=!0,N="g"),(w||g==="0"&&y==="=")&&(w=!0,g="0",y="=");var j=b==="$"?t:b==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",C=b==="$"?r:/[%p]/.test(N)?s:"",R=MR[N],k=/[defgprs%]/.test(N);T=T===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function F(D){var L=j,B=C,V,H,I;if(N==="c")B=R(D)+B,D="";else{D=+D;var z=D<0||1/D<0;if(D=isNaN(D)?u:R(Math.abs(D),T),M&&(D=Ste(D)),z&&+D==0&&x!=="+"&&(z=!1),L=(z?x==="("?x:l:x==="-"||x==="("?"":x)+L,B=(N==="s"?kR[8+aB/3]:"")+B+(z&&x==="("?")":""),k){for(V=-1,H=D.length;++V<H;)if(I=D.charCodeAt(V),48>I||I>57){B=(I===46?i+D.slice(V+1):D.slice(V))+B,D=D.slice(0,V);break}}}O&&!w&&(D=e(D,1/0));var q=L.length+D.length+B.length,J=q<S?new Array(S-q+1).join(g):"";switch(O&&w&&(D=e(J+D,J.length?S-B.length:1/0),J=""),y){case"<":D=L+D+B+J;break;case"=":D=L+J+D+B;break;case"^":D=J.slice(0,q=J.length>>1)+L+D+B+J.slice(q);break;default:D=J+L+D+B;break}return a(D)}return F.toString=function(){return m+""},F}function f(m,g){var y=d((m=ph(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(Uc(g)/3)))*3,b=Math.pow(10,-x),w=kR[8+x/3];return function(S){return y(b*S)+w}}return{format:d,formatPrefix:f}}var Ym,mE,sB;Tte({thousands:",",grouping:[3],currency:["$",""]});function Tte(n){return Ym=Ete(n),mE=Ym.format,sB=Ym.formatPrefix,Ym}function Ote(n){return Math.max(0,-Uc(Math.abs(n)))}function Cte(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Uc(e)/3)))*3-Uc(Math.abs(n)))}function jte(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Uc(e)-Uc(n))+1}function oB(n,e,t,r){var i=tS(n,e,t),a;switch(r=ph(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=Cte(i,s))&&(r.precision=a),sB(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=jte(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ote(i))&&(r.precision=a-(r.type==="%")*2);break}}return mE(r)}function Ks(n){var e=n.domain;return n.ticks=function(t){var r=e();return Q_(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return oB(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,s=r[i],l=r[a],u,d,f=10;for(l<s&&(d=s,s=l,l=d,d=i,i=a,a=d);f-- >0;){if(d=eS(s,l,t),d===u)return r[i]=s,r[a]=l,e(r);if(d>0)s=Math.floor(s/d)*d,l=Math.ceil(l/d)*d;else if(d<0)s=Math.ceil(s*d)/d,l=Math.floor(l*d)/d;else break;u=d}return n},n}function zp(){var n=hE();return n.copy=function(){return af(n,zp())},xi.apply(n,arguments),Ks(n)}function lB(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,Up),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return lB(n).unknown(e)},n=arguments.length?Array.from(n,Up):[0,1],Ks(t)}function cB(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],s;return a<i&&(s=t,t=r,r=s,s=i,i=a,a=s),n[t]=e.floor(i),n[r]=e.ceil(a),n}function DR(n){return Math.log(n)}function LR(n){return Math.exp(n)}function Nte(n){return-Math.log(-n)}function Mte(n){return-Math.exp(-n)}function Pte(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Rte(n){return n===10?Pte:n===Math.E?Math.exp:e=>Math.pow(n,e)}function kte(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function IR(n){return(e,t)=>-n(-e,t)}function pE(n){const e=n(DR,LR),t=e.domain;let r=10,i,a;function s(){return i=kte(r),a=Rte(r),t()[0]<0?(i=IR(i),a=IR(a),n(Nte,Mte)):n(DR,LR),e}return e.base=function(l){return arguments.length?(r=+l,s()):r},e.domain=function(l){return arguments.length?(t(l),s()):t()},e.ticks=l=>{const u=t();let d=u[0],f=u[u.length-1];const m=f<d;m&&([d,f]=[f,d]);let g=i(d),y=i(f),x,b;const w=l==null?10:+l;let S=[];if(!(r%1)&&y-g<w){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(x=1;x<r;++x)if(b=g<0?x/a(-g):x*a(g),!(b<d)){if(b>f)break;S.push(b)}}else for(;g<=y;++g)for(x=r-1;x>=1;--x)if(b=g>0?x/a(-g):x*a(g),!(b<d)){if(b>f)break;S.push(b)}S.length*2<w&&(S=Q_(d,f,w))}else S=Q_(g,y,Math.min(y-g,w)).map(a);return m?S.reverse():S},e.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=ph(u)).precision==null&&(u.trim=!0),u=mE(u)),l===1/0)return u;const d=Math.max(1,r*l/e.ticks().length);return f=>{let m=f/a(Math.round(i(f)));return m*r<r-.5&&(m*=r),m<=d?u(f):""}},e.nice=()=>t(cB(t(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),e}function uB(){const n=pE(Xg()).domain([1,10]);return n.copy=()=>af(n,uB()).base(n.base()),xi.apply(n,arguments),n}function BR(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function $R(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function gE(n){var e=1,t=n(BR(e),$R(e));return t.constant=function(r){return arguments.length?n(BR(e=+r),$R(e)):e},Ks(t)}function dB(){var n=gE(Xg());return n.copy=function(){return af(n,dB()).constant(n.constant())},xi.apply(n,arguments)}function FR(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function Dte(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Lte(n){return n<0?-n*n:n*n}function vE(n){var e=n(ur,ur),t=1;function r(){return t===1?n(ur,ur):t===.5?n(Dte,Lte):n(FR(t),FR(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Ks(e)}function yE(){var n=vE(Xg());return n.copy=function(){return af(n,yE()).exponent(n.exponent())},xi.apply(n,arguments),n}function Ite(){return yE.apply(null,arguments).exponent(.5)}function UR(n){return Math.sign(n)*n*n}function Bte(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function hB(){var n=hE(),e=[0,1],t=!1,r;function i(a){var s=Bte(n(a));return isNaN(s)?r:t?Math.round(s):s}return i.invert=function(a){return n.invert(UR(a))},i.domain=function(a){return arguments.length?(n.domain(a),i):n.domain()},i.range=function(a){return arguments.length?(n.range((e=Array.from(a,Up)).map(UR)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(n.clamp(a),i):n.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return hB(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},xi.apply(i,arguments),Ks(i)}function fB(){var n=[],e=[],t=[],r;function i(){var s=0,l=Math.max(1,e.length);for(t=new Array(l-1);++s<l;)t[s-1]=zee(n,s/l);return a}function a(s){return s==null||isNaN(s=+s)?r:e[nf(t,s)]}return a.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?t[l-1]:n[0],l<t.length?t[l]:n[n.length-1]]},a.domain=function(s){if(!arguments.length)return n.slice();n=[];for(let l of s)l!=null&&!isNaN(l=+l)&&n.push(l);return n.sort(qs),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return t.slice()},a.copy=function(){return fB().domain(n).range(e).unknown(r)},xi.apply(a,arguments)}function mB(){var n=0,e=1,t=1,r=[.5],i=[0,1],a;function s(u){return u!=null&&u<=u?i[nf(r,u,0,t)]:a}function l(){var u=-1;for(r=new Array(t);++u<t;)r[u]=((u+1)*e-(u-t)*n)/(t+1);return s}return s.domain=function(u){return arguments.length?([n,e]=u,n=+n,e=+e,l()):[n,e]},s.range=function(u){return arguments.length?(t=(i=Array.from(u)).length-1,l()):i.slice()},s.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[n,r[0]]:d>=t?[r[t-1],e]:[r[d-1],r[d]]},s.unknown=function(u){return arguments.length&&(a=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return mB().domain([n,e]).range(i).unknown(a)},xi.apply(Ks(s),arguments)}function pB(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[nf(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[n[s-1],n[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return pB().domain(n).range(e).unknown(t)},xi.apply(i,arguments)}const l1=new Date,c1=new Date;function Mn(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const u=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return u;let d;do u.push(d=new Date(+a)),e(a,l),n(a);while(d<a&&a<s);return u},i.filter=a=>Mn(s=>{if(s>=s)for(;n(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!a(s););else for(;--l>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(l1.setTime(+a),c1.setTime(+s),n(l1),n(c1),Math.floor(t(l1,c1))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Hp=Mn(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);Hp.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Mn(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):Hp);Hp.range;const La=1e3,vi=La*60,Ia=vi*60,Ya=Ia*24,bE=Ya*7,qR=Ya*30,u1=Ya*365,Uo=Mn(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*La)},(n,e)=>(e-n)/La,n=>n.getUTCSeconds());Uo.range;const wE=Mn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*La)},(n,e)=>{n.setTime(+n+e*vi)},(n,e)=>(e-n)/vi,n=>n.getMinutes());wE.range;const xE=Mn(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*vi)},(n,e)=>(e-n)/vi,n=>n.getUTCMinutes());xE.range;const _E=Mn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*La-n.getMinutes()*vi)},(n,e)=>{n.setTime(+n+e*Ia)},(n,e)=>(e-n)/Ia,n=>n.getHours());_E.range;const SE=Mn(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*Ia)},(n,e)=>(e-n)/Ia,n=>n.getUTCHours());SE.range;const sf=Mn(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*vi)/Ya,n=>n.getDate()-1);sf.range;const Kg=Mn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Ya,n=>n.getUTCDate()-1);Kg.range;const gB=Mn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Ya,n=>Math.floor(n/Ya));gB.range;function ul(n){return Mn(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vi)/bE)}const Zg=ul(0),Vp=ul(1),$te=ul(2),Fte=ul(3),qc=ul(4),Ute=ul(5),qte=ul(6);Zg.range;Vp.range;$te.range;Fte.range;qc.range;Ute.range;qte.range;function dl(n){return Mn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/bE)}const Jg=dl(0),Gp=dl(1),zte=dl(2),Hte=dl(3),zc=dl(4),Vte=dl(5),Gte=dl(6);Jg.range;Gp.range;zte.range;Hte.range;zc.range;Vte.range;Gte.range;const AE=Mn(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());AE.range;const EE=Mn(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());EE.range;const Xa=Mn(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Xa.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Mn(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Xa.range;const Ka=Mn(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Ka.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Mn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Ka.range;function vB(n,e,t,r,i,a){const s=[[Uo,1,La],[Uo,5,5*La],[Uo,15,15*La],[Uo,30,30*La],[a,1,vi],[a,5,5*vi],[a,15,15*vi],[a,30,30*vi],[i,1,Ia],[i,3,3*Ia],[i,6,6*Ia],[i,12,12*Ia],[r,1,Ya],[r,2,2*Ya],[t,1,bE],[e,1,qR],[e,3,3*qR],[n,1,u1]];function l(d,f,m){const g=f<d;g&&([d,f]=[f,d]);const y=m&&typeof m.range=="function"?m:u(d,f,m),x=y?y.range(d,+f+1):[];return g?x.reverse():x}function u(d,f,m){const g=Math.abs(f-d)/m,y=oE(([,,w])=>w).right(s,g);if(y===s.length)return n.every(tS(d/u1,f/u1,m));if(y===0)return Hp.every(Math.max(tS(d,f,m),1));const[x,b]=s[g/s[y-1][2]<s[y][2]/g?y-1:y];return x.every(b)}return[l,u]}const[Wte,Yte]=vB(Ka,EE,Jg,gB,SE,xE),[Xte,Kte]=vB(Xa,AE,Zg,sf,_E,wE);function d1(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function h1(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function bd(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function Zte(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,s=n.shortDays,l=n.months,u=n.shortMonths,d=wd(i),f=xd(i),m=wd(a),g=xd(a),y=wd(s),x=xd(s),b=wd(l),w=xd(l),S=wd(u),O=xd(u),T={a:z,A:q,b:J,B:K,c:null,d:YR,e:YR,f:wne,g:Nne,G:Pne,H:vne,I:yne,j:bne,L:yB,m:xne,M:_ne,p:U,q:G,Q:ZR,s:JR,S:Sne,u:Ane,U:Ene,V:Tne,w:One,W:Cne,x:null,X:null,y:jne,Y:Mne,Z:Rne,"%":KR},M={a:ee,A:le,b:ge,B:ye,c:null,d:XR,e:XR,f:Ine,g:Wne,G:Xne,H:kne,I:Dne,j:Lne,L:wB,m:Bne,M:$ne,p:ve,q:Ae,Q:ZR,s:JR,S:Fne,u:Une,U:qne,V:zne,w:Hne,W:Vne,x:null,X:null,y:Gne,Y:Yne,Z:Kne,"%":KR},N={a:F,A:D,b:L,B,c:V,d:GR,e:GR,f:fne,g:VR,G:HR,H:WR,I:WR,j:cne,L:hne,m:lne,M:une,p:k,q:one,Q:pne,s:gne,S:dne,u:nne,U:rne,V:ine,w:tne,W:ane,x:H,X:I,y:VR,Y:HR,Z:sne,"%":mne};T.x=j(t,T),T.X=j(r,T),T.c=j(e,T),M.x=j(t,M),M.X=j(r,M),M.c=j(e,M);function j(me,Se){return function(De){var ce=[],Me=-1,Te=0,Ge=me.length,Ue,Ft,An;for(De instanceof Date||(De=new Date(+De));++Me<Ge;)me.charCodeAt(Me)===37&&(ce.push(me.slice(Te,Me)),(Ft=zR[Ue=me.charAt(++Me)])!=null?Ue=me.charAt(++Me):Ft=Ue==="e"?" ":"0",(An=Se[Ue])&&(Ue=An(De,Ft)),ce.push(Ue),Te=Me+1);return ce.push(me.slice(Te,Me)),ce.join("")}}function C(me,Se){return function(De){var ce=bd(1900,void 0,1),Me=R(ce,me,De+="",0),Te,Ge;if(Me!=De.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Se&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(Te=h1(bd(ce.y,0,1)),Ge=Te.getUTCDay(),Te=Ge>4||Ge===0?Gp.ceil(Te):Gp(Te),Te=Kg.offset(Te,(ce.V-1)*7),ce.y=Te.getUTCFullYear(),ce.m=Te.getUTCMonth(),ce.d=Te.getUTCDate()+(ce.w+6)%7):(Te=d1(bd(ce.y,0,1)),Ge=Te.getDay(),Te=Ge>4||Ge===0?Vp.ceil(Te):Vp(Te),Te=sf.offset(Te,(ce.V-1)*7),ce.y=Te.getFullYear(),ce.m=Te.getMonth(),ce.d=Te.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Ge="Z"in ce?h1(bd(ce.y,0,1)).getUTCDay():d1(bd(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Ge+5)%7:ce.w+ce.U*7-(Ge+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,h1(ce)):d1(ce)}}function R(me,Se,De,ce){for(var Me=0,Te=Se.length,Ge=De.length,Ue,Ft;Me<Te;){if(ce>=Ge)return-1;if(Ue=Se.charCodeAt(Me++),Ue===37){if(Ue=Se.charAt(Me++),Ft=N[Ue in zR?Se.charAt(Me++):Ue],!Ft||(ce=Ft(me,De,ce))<0)return-1}else if(Ue!=De.charCodeAt(ce++))return-1}return ce}function k(me,Se,De){var ce=d.exec(Se.slice(De));return ce?(me.p=f.get(ce[0].toLowerCase()),De+ce[0].length):-1}function F(me,Se,De){var ce=y.exec(Se.slice(De));return ce?(me.w=x.get(ce[0].toLowerCase()),De+ce[0].length):-1}function D(me,Se,De){var ce=m.exec(Se.slice(De));return ce?(me.w=g.get(ce[0].toLowerCase()),De+ce[0].length):-1}function L(me,Se,De){var ce=S.exec(Se.slice(De));return ce?(me.m=O.get(ce[0].toLowerCase()),De+ce[0].length):-1}function B(me,Se,De){var ce=b.exec(Se.slice(De));return ce?(me.m=w.get(ce[0].toLowerCase()),De+ce[0].length):-1}function V(me,Se,De){return R(me,e,Se,De)}function H(me,Se,De){return R(me,t,Se,De)}function I(me,Se,De){return R(me,r,Se,De)}function z(me){return s[me.getDay()]}function q(me){return a[me.getDay()]}function J(me){return u[me.getMonth()]}function K(me){return l[me.getMonth()]}function U(me){return i[+(me.getHours()>=12)]}function G(me){return 1+~~(me.getMonth()/3)}function ee(me){return s[me.getUTCDay()]}function le(me){return a[me.getUTCDay()]}function ge(me){return u[me.getUTCMonth()]}function ye(me){return l[me.getUTCMonth()]}function ve(me){return i[+(me.getUTCHours()>=12)]}function Ae(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Se=j(me+="",T);return Se.toString=function(){return me},Se},parse:function(me){var Se=C(me+="",!1);return Se.toString=function(){return me},Se},utcFormat:function(me){var Se=j(me+="",M);return Se.toString=function(){return me},Se},utcParse:function(me){var Se=C(me+="",!0);return Se.toString=function(){return me},Se}}}var zR={"-":"",_:" ",0:"0"},$n=/^\s*\d+/,Jte=/^%/,Qte=/[\\^$*+?|[\]().{}]/g;function yt(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function ene(n){return n.replace(Qte,"\\$&")}function wd(n){return new RegExp("^(?:"+n.map(ene).join("|")+")","i")}function xd(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function tne(n,e,t){var r=$n.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function nne(n,e,t){var r=$n.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function rne(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function ine(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function ane(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function HR(n,e,t){var r=$n.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function VR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function sne(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function one(n,e,t){var r=$n.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function lne(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function GR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function cne(n,e,t){var r=$n.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function WR(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function une(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function dne(n,e,t){var r=$n.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function hne(n,e,t){var r=$n.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function fne(n,e,t){var r=$n.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function mne(n,e,t){var r=Jte.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function pne(n,e,t){var r=$n.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function gne(n,e,t){var r=$n.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function YR(n,e){return yt(n.getDate(),e,2)}function vne(n,e){return yt(n.getHours(),e,2)}function yne(n,e){return yt(n.getHours()%12||12,e,2)}function bne(n,e){return yt(1+sf.count(Xa(n),n),e,3)}function yB(n,e){return yt(n.getMilliseconds(),e,3)}function wne(n,e){return yB(n,e)+"000"}function xne(n,e){return yt(n.getMonth()+1,e,2)}function _ne(n,e){return yt(n.getMinutes(),e,2)}function Sne(n,e){return yt(n.getSeconds(),e,2)}function Ane(n){var e=n.getDay();return e===0?7:e}function Ene(n,e){return yt(Zg.count(Xa(n)-1,n),e,2)}function bB(n){var e=n.getDay();return e>=4||e===0?qc(n):qc.ceil(n)}function Tne(n,e){return n=bB(n),yt(qc.count(Xa(n),n)+(Xa(n).getDay()===4),e,2)}function One(n){return n.getDay()}function Cne(n,e){return yt(Vp.count(Xa(n)-1,n),e,2)}function jne(n,e){return yt(n.getFullYear()%100,e,2)}function Nne(n,e){return n=bB(n),yt(n.getFullYear()%100,e,2)}function Mne(n,e){return yt(n.getFullYear()%1e4,e,4)}function Pne(n,e){var t=n.getDay();return n=t>=4||t===0?qc(n):qc.ceil(n),yt(n.getFullYear()%1e4,e,4)}function Rne(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+yt(e/60|0,"0",2)+yt(e%60,"0",2)}function XR(n,e){return yt(n.getUTCDate(),e,2)}function kne(n,e){return yt(n.getUTCHours(),e,2)}function Dne(n,e){return yt(n.getUTCHours()%12||12,e,2)}function Lne(n,e){return yt(1+Kg.count(Ka(n),n),e,3)}function wB(n,e){return yt(n.getUTCMilliseconds(),e,3)}function Ine(n,e){return wB(n,e)+"000"}function Bne(n,e){return yt(n.getUTCMonth()+1,e,2)}function $ne(n,e){return yt(n.getUTCMinutes(),e,2)}function Fne(n,e){return yt(n.getUTCSeconds(),e,2)}function Une(n){var e=n.getUTCDay();return e===0?7:e}function qne(n,e){return yt(Jg.count(Ka(n)-1,n),e,2)}function xB(n){var e=n.getUTCDay();return e>=4||e===0?zc(n):zc.ceil(n)}function zne(n,e){return n=xB(n),yt(zc.count(Ka(n),n)+(Ka(n).getUTCDay()===4),e,2)}function Hne(n){return n.getUTCDay()}function Vne(n,e){return yt(Gp.count(Ka(n)-1,n),e,2)}function Gne(n,e){return yt(n.getUTCFullYear()%100,e,2)}function Wne(n,e){return n=xB(n),yt(n.getUTCFullYear()%100,e,2)}function Yne(n,e){return yt(n.getUTCFullYear()%1e4,e,4)}function Xne(n,e){var t=n.getUTCDay();return n=t>=4||t===0?zc(n):zc.ceil(n),yt(n.getUTCFullYear()%1e4,e,4)}function Kne(){return"+0000"}function KR(){return"%"}function ZR(n){return+n}function JR(n){return Math.floor(+n/1e3)}var ic,_B,SB;Zne({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Zne(n){return ic=Zte(n),_B=ic.format,ic.parse,SB=ic.utcFormat,ic.utcParse,ic}function Jne(n){return new Date(n)}function Qne(n){return n instanceof Date?+n:+new Date(+n)}function TE(n,e,t,r,i,a,s,l,u,d){var f=hE(),m=f.invert,g=f.domain,y=d(".%L"),x=d(":%S"),b=d("%I:%M"),w=d("%I %p"),S=d("%a %d"),O=d("%b %d"),T=d("%B"),M=d("%Y");function N(j){return(u(j)<j?y:l(j)<j?x:s(j)<j?b:a(j)<j?w:r(j)<j?i(j)<j?S:O:t(j)<j?T:M)(j)}return f.invert=function(j){return new Date(m(j))},f.domain=function(j){return arguments.length?g(Array.from(j,Qne)):g().map(Jne)},f.ticks=function(j){var C=g();return n(C[0],C[C.length-1],j??10)},f.tickFormat=function(j,C){return C==null?N:d(C)},f.nice=function(j){var C=g();return(!j||typeof j.range!="function")&&(j=e(C[0],C[C.length-1],j??10)),j?g(cB(C,j)):f},f.copy=function(){return af(f,TE(n,e,t,r,i,a,s,l,u,d))},f}function ere(){return xi.apply(TE(Xte,Kte,Xa,AE,Zg,sf,_E,wE,Uo,_B).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tre(){return xi.apply(TE(Wte,Yte,Ka,EE,Jg,Kg,SE,xE,Uo,SB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qg(){var n=0,e=1,t,r,i,a,s=ur,l=!1,u;function d(m){return m==null||isNaN(m=+m)?u:s(i===0?.5:(m=(a(m)-t)*i,l?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([n,e]=m,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),d):[n,e]},d.clamp=function(m){return arguments.length?(l=!!m,d):l},d.interpolator=function(m){return arguments.length?(s=m,d):s};function f(m){return function(g){var y,x;return arguments.length?([y,x]=g,s=m(y,x),d):[s(0),s(1)]}}return d.range=f(pu),d.rangeRound=f(dE),d.unknown=function(m){return arguments.length?(u=m,d):u},function(m){return a=m,t=m(n),r=m(e),i=t===r?0:1/(r-t),d}}function Zs(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function AB(){var n=Ks(Qg()(ur));return n.copy=function(){return Zs(n,AB())},rs.apply(n,arguments)}function EB(){var n=pE(Qg()).domain([1,10]);return n.copy=function(){return Zs(n,EB()).base(n.base())},rs.apply(n,arguments)}function TB(){var n=gE(Qg());return n.copy=function(){return Zs(n,TB()).constant(n.constant())},rs.apply(n,arguments)}function OE(){var n=vE(Qg());return n.copy=function(){return Zs(n,OE()).exponent(n.exponent())},rs.apply(n,arguments)}function nre(){return OE.apply(null,arguments).exponent(.5)}function OB(){var n=[],e=ur;function t(r){if(r!=null&&!isNaN(r=+r))return e((nf(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(qs),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,a)=>qee(n,a/r))},t.copy=function(){return OB(e).domain(n)},rs.apply(t,arguments)}function ev(){var n=0,e=.5,t=1,r=1,i,a,s,l,u,d=ur,f,m=!1,g;function y(b){return isNaN(b=+b)?g:(b=.5+((b=+f(b))-a)*(r*b<r*a?l:u),d(m?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([n,e,t]=b,i=f(n=+n),a=f(e=+e),s=f(t=+t),l=i===a?0:.5/(a-i),u=a===s?0:.5/(s-a),r=a<i?-1:1,y):[n,e,t]},y.clamp=function(b){return arguments.length?(m=!!b,y):m},y.interpolator=function(b){return arguments.length?(d=b,y):d};function x(b){return function(w){var S,O,T;return arguments.length?([S,O,T]=w,d=mte(b,[S,O,T]),y):[d(0),d(.5),d(1)]}}return y.range=x(pu),y.rangeRound=x(dE),y.unknown=function(b){return arguments.length?(g=b,y):g},function(b){return f=b,i=b(n),a=b(e),s=b(t),l=i===a?0:.5/(a-i),u=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function CB(){var n=Ks(ev()(ur));return n.copy=function(){return Zs(n,CB())},rs.apply(n,arguments)}function jB(){var n=pE(ev()).domain([.1,1,10]);return n.copy=function(){return Zs(n,jB()).base(n.base())},rs.apply(n,arguments)}function NB(){var n=gE(ev());return n.copy=function(){return Zs(n,NB()).constant(n.constant())},rs.apply(n,arguments)}function CE(){var n=vE(ev());return n.copy=function(){return Zs(n,CE()).exponent(n.exponent())},rs.apply(n,arguments)}function rre(){return CE.apply(null,arguments).exponent(.5)}const QR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dh,scaleDiverging:CB,scaleDivergingLog:jB,scaleDivergingPow:CE,scaleDivergingSqrt:rre,scaleDivergingSymlog:NB,scaleIdentity:lB,scaleImplicit:nS,scaleLinear:zp,scaleLog:uB,scaleOrdinal:lE,scalePoint:Fd,scalePow:yE,scaleQuantile:fB,scaleQuantize:mB,scaleRadial:hB,scaleSequential:AB,scaleSequentialLog:EB,scaleSequentialPow:OE,scaleSequentialQuantile:OB,scaleSequentialSqrt:nre,scaleSequentialSymlog:TB,scaleSqrt:Ite,scaleSymlog:dB,scaleThreshold:pB,scaleTime:ere,scaleUtc:tre,tickFormat:oB},Symbol.toStringTag,{value:"Module"}));var f1,ek;function MB(){if(ek)return f1;ek=1;var n=du();function e(t,r,i){for(var a=-1,s=t.length;++a<s;){var l=t[a],u=r(l);if(u!=null&&(d===void 0?u===u&&!n(u):i(u,d)))var d=u,f=l}return f}return f1=e,f1}var m1,tk;function ire(){if(tk)return m1;tk=1;function n(e,t){return e>t}return m1=n,m1}var p1,nk;function are(){if(nk)return p1;nk=1;var n=MB(),e=ire(),t=fu();function r(i){return i&&i.length?n(i,t,e):void 0}return p1=r,p1}var sre=are();const tv=_t(sre);var g1,rk;function ore(){if(rk)return g1;rk=1;function n(e,t){return e<t}return g1=n,g1}var v1,ik;function lre(){if(ik)return v1;ik=1;var n=MB(),e=ore(),t=fu();function r(i){return i&&i.length?n(i,t,e):void 0}return v1=r,v1}var cre=lre();const nv=_t(cre);var y1,ak;function ure(){if(ak)return y1;ak=1;var n=HA(),e=Xs(),t=$4(),r=Or();function i(a,s){var l=r(a)?n:t;return l(a,e(s,3))}return y1=i,y1}var b1,sk;function dre(){if(sk)return b1;sk=1;var n=I4(),e=ure();function t(r,i){return n(e(r,i),1)}return b1=t,b1}var hre=dre();const fre=_t(hre);var w1,ok;function mre(){if(ok)return w1;ok=1;var n=rE();function e(t,r){return n(t,r)}return w1=e,w1}var pre=mre();const rv=_t(pre);var gu=1e9,gre={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NE,Kt=!0,wi="[DecimalError] ",Wo=wi+"Invalid argument: ",jE=wi+"Exponent out of range: ",vu=Math.floor,No=Math.pow,vre=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gr,Ln=1e7,Vt=7,PB=9007199254740991,Wp=vu(PB/Vt),je={};je.absoluteValue=je.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};je.comparedTo=je.cmp=function(n){var e,t,r,i,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(r=a.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};je.decimalPlaces=je.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*Vt;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};je.dividedBy=je.div=function(n){return za(this,new this.constructor(n))};je.dividedToIntegerBy=je.idiv=function(n){var e=this,t=e.constructor;return Dt(za(e,new t(n),0,1),t.precision)};je.equals=je.eq=function(n){return!this.cmp(n)};je.exponent=function(){return Sn(this)};je.greaterThan=je.gt=function(n){return this.cmp(n)>0};je.greaterThanOrEqualTo=je.gte=function(n){return this.cmp(n)>=0};je.isInteger=je.isint=function(){return this.e>this.d.length-2};je.isNegative=je.isneg=function(){return this.s<0};je.isPositive=je.ispos=function(){return this.s>0};je.isZero=function(){return this.s===0};je.lessThan=je.lt=function(n){return this.cmp(n)<0};je.lessThanOrEqualTo=je.lte=function(n){return this.cmp(n)<1};je.logarithm=je.log=function(n){var e,t=this,r=t.constructor,i=r.precision,a=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(Gr))throw Error(wi+"NaN");if(t.s<1)throw Error(wi+(t.s?"NaN":"-Infinity"));return t.eq(Gr)?new r(0):(Kt=!1,e=za(gh(t,a),gh(n,a),a),Kt=!0,Dt(e,i))};je.minus=je.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?DB(e,n):RB(e,(n.s=-n.s,n))};je.modulo=je.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(wi+"NaN");return t.s?(Kt=!1,e=za(t,n,0,1).times(n),Kt=!0,t.minus(e)):Dt(new r(t),i)};je.naturalExponential=je.exp=function(){return kB(this)};je.naturalLogarithm=je.ln=function(){return gh(this)};je.negated=je.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};je.plus=je.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?RB(e,n):DB(e,(n.s=-n.s,n))};je.precision=je.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Wo+n);if(e=Sn(i)+1,r=i.d.length-1,t=r*Vt+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};je.squareRoot=je.sqrt=function(){var n,e,t,r,i,a,s,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(wi+"NaN")}for(n=Sn(l),Kt=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=aa(l.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=vu((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new u(e)):r=new u(i.toString()),t=u.precision,i=s=t+3;;)if(a=r,r=a.plus(za(l,a,s+2)).times(.5),aa(a.d).slice(0,s)===(e=aa(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Dt(a,t+1,0),a.times(a).eq(l)){r=a;break}}else if(e!="9999")break;s+=4}return Kt=!0,Dt(r,t)};je.times=je.mul=function(n){var e,t,r,i,a,s,l,u,d,f=this,m=f.constructor,g=f.d,y=(n=new m(n)).d;if(!f.s||!n.s)return new m(0);for(n.s*=f.s,t=f.e+n.e,u=g.length,d=y.length,u<d&&(a=g,g=y,y=a,s=u,u=d,d=s),a=[],s=u+d,r=s;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)l=a[i]+y[r]*g[i-r-1]+e,a[i--]=l%Ln|0,e=l/Ln|0;a[i]=(a[i]+e)%Ln|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,Kt?Dt(n,m.precision):n};je.toDecimalPlaces=je.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(la(n,0,gu),e===void 0?e=r.rounding:la(e,0,8),Dt(t,n+Sn(t)+1,e))};je.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=tl(r,!0):(la(n,0,gu),e===void 0?e=i.rounding:la(e,0,8),r=Dt(new i(r),n+1,e),t=tl(r,!0,n+1)),t};je.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?tl(i):(la(n,0,gu),e===void 0?e=a.rounding:la(e,0,8),r=Dt(new a(i),n+Sn(i)+1,e),t=tl(r.abs(),!1,n+Sn(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};je.toInteger=je.toint=function(){var n=this,e=n.constructor;return Dt(new e(n),Sn(n)+1,e.rounding)};je.toNumber=function(){return+this};je.toPower=je.pow=function(n){var e,t,r,i,a,s,l=this,u=l.constructor,d=12,f=+(n=new u(n));if(!n.s)return new u(Gr);if(l=new u(l),!l.s){if(n.s<1)throw Error(wi+"Infinity");return l}if(l.eq(Gr))return l;if(r=u.precision,n.eq(Gr))return Dt(l,r);if(e=n.e,t=n.d.length-1,s=e>=t,a=l.s,s){if((t=f<0?-f:f)<=PB){for(i=new u(Gr),e=Math.ceil(r/Vt+4),Kt=!1;t%2&&(i=i.times(l),ck(i.d,e)),t=vu(t/2),t!==0;)l=l.times(l),ck(l.d,e);return Kt=!0,n.s<0?new u(Gr).div(i):Dt(i,r)}}else if(a<0)throw Error(wi+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,l.s=1,Kt=!1,i=n.times(gh(l,r+d)),Kt=!0,i=kB(i),i.s=a,i};je.toPrecision=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?(t=Sn(i),r=tl(i,t<=a.toExpNeg||t>=a.toExpPos)):(la(n,1,gu),e===void 0?e=a.rounding:la(e,0,8),i=Dt(new a(i),n,e),t=Sn(i),r=tl(i,n<=t||t<=a.toExpNeg,n)),r};je.toSignificantDigits=je.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(la(n,1,gu),e===void 0?e=r.rounding:la(e,0,8)),Dt(new r(t),n,e)};je.toString=je.valueOf=je.val=je.toJSON=je[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=Sn(n),t=n.constructor;return tl(n,e<=t.toExpNeg||e>=t.toExpPos)};function RB(n,e){var t,r,i,a,s,l,u,d,f=n.constructor,m=f.precision;if(!n.s||!e.s)return e.s||(e=new f(n)),Kt?Dt(e,m):e;if(u=n.d,d=e.d,s=n.e,i=e.e,u=u.slice(),a=s-i,a){for(a<0?(r=u,a=-a,l=d.length):(r=d,i=s,l=u.length),s=Math.ceil(m/Vt),l=s>l?s+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=u.length,a=d.length,l-a<0&&(a=l,r=d,d=u,u=r),t=0;a;)t=(u[--a]=u[a]+d[a]+t)/Ln|0,u[a]%=Ln;for(t&&(u.unshift(t),++i),l=u.length;u[--l]==0;)u.pop();return e.d=u,e.e=i,Kt?Dt(e,m):e}function la(n,e,t){if(n!==~~n||n<e||n>t)throw Error(Wo+n)}function aa(n){var e,t,r,i=n.length-1,a="",s=n[0];if(i>0){for(a+=s,e=1;e<i;e++)r=n[e]+"",t=Vt-r.length,t&&(a+=ks(t)),a+=r;s=n[e],r=s+"",t=Vt-r.length,t&&(a+=ks(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var za=(function(){function n(r,i){var a,s=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+s,r[l]=a%Ln|0,s=a/Ln|0;return s&&r.unshift(s),r}function e(r,i,a,s){var l,u;if(a!=s)u=a>s?1:-1;else for(l=u=0;l<a;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function t(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Ln+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var l,u,d,f,m,g,y,x,b,w,S,O,T,M,N,j,C,R,k=r.constructor,F=r.s==i.s?1:-1,D=r.d,L=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(wi+"Division by zero");for(u=r.e-i.e,C=L.length,N=D.length,y=new k(F),x=y.d=[],d=0;L[d]==(D[d]||0);)++d;if(L[d]>(D[d]||0)&&--u,a==null?O=a=k.precision:s?O=a+(Sn(r)-Sn(i))+1:O=a,O<0)return new k(0);if(O=O/Vt+2|0,d=0,C==1)for(f=0,L=L[0],O++;(d<N||f)&&O--;d++)T=f*Ln+(D[d]||0),x[d]=T/L|0,f=T%L|0;else{for(f=Ln/(L[0]+1)|0,f>1&&(L=n(L,f),D=n(D,f),C=L.length,N=D.length),M=C,b=D.slice(0,C),w=b.length;w<C;)b[w++]=0;R=L.slice(),R.unshift(0),j=L[0],L[1]>=Ln/2&&++j;do f=0,l=e(L,b,C,w),l<0?(S=b[0],C!=w&&(S=S*Ln+(b[1]||0)),f=S/j|0,f>1?(f>=Ln&&(f=Ln-1),m=n(L,f),g=m.length,w=b.length,l=e(m,b,g,w),l==1&&(f--,t(m,C<g?R:L,g))):(f==0&&(l=f=1),m=L.slice()),g=m.length,g<w&&m.unshift(0),t(b,m,w),l==-1&&(w=b.length,l=e(L,b,C,w),l<1&&(f++,t(b,C<w?R:L,w))),w=b.length):l===0&&(f++,b=[0]),x[d++]=f,l&&b[0]?b[w++]=D[M]||0:(b=[D[M]],w=1);while((M++<N||b[0]!==void 0)&&O--)}return x[0]||x.shift(),y.e=u,Dt(y,s?a+Sn(y)+1:a)}})();function kB(n,e){var t,r,i,a,s,l,u=0,d=0,f=n.constructor,m=f.precision;if(Sn(n)>16)throw Error(jE+Sn(n));if(!n.s)return new f(Gr);for(Kt=!1,l=m,s=new f(.03125);n.abs().gte(.1);)n=n.times(s),d+=5;for(r=Math.log(No(2,d))/Math.LN10*2+5|0,l+=r,t=i=a=new f(Gr),f.precision=l;;){if(i=Dt(i.times(n),l),t=t.times(++u),s=a.plus(za(i,t,l)),aa(s.d).slice(0,l)===aa(a.d).slice(0,l)){for(;d--;)a=Dt(a.times(a),l);return f.precision=m,e==null?(Kt=!0,Dt(a,m)):a}a=s}}function Sn(n){for(var e=n.e*Vt,t=n.d[0];t>=10;t/=10)e++;return e}function x1(n,e,t){if(e>n.LN10.sd())throw Kt=!0,t&&(n.precision=t),Error(wi+"LN10 precision limit exceeded");return Dt(new n(n.LN10),e)}function ks(n){for(var e="";n--;)e+="0";return e}function gh(n,e){var t,r,i,a,s,l,u,d,f,m=1,g=10,y=n,x=y.d,b=y.constructor,w=b.precision;if(y.s<1)throw Error(wi+(y.s?"NaN":"-Infinity"));if(y.eq(Gr))return new b(0);if(e==null?(Kt=!1,d=w):d=e,y.eq(10))return e==null&&(Kt=!0),x1(b,d);if(d+=g,b.precision=d,t=aa(x),r=t.charAt(0),a=Sn(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)y=y.times(n),t=aa(y.d),r=t.charAt(0),m++;a=Sn(y),r>1?(y=new b("0."+t),a++):y=new b(r+"."+t.slice(1))}else return u=x1(b,d+2,w).times(a+""),y=gh(new b(r+"."+t.slice(1)),d-g).plus(u),b.precision=w,e==null?(Kt=!0,Dt(y,w)):y;for(l=s=y=za(y.minus(Gr),y.plus(Gr),d),f=Dt(y.times(y),d),i=3;;){if(s=Dt(s.times(f),d),u=l.plus(za(s,new b(i),d)),aa(u.d).slice(0,d)===aa(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(x1(b,d+2,w).times(a+""))),l=za(l,new b(m),d),b.precision=w,e==null?(Kt=!0,Dt(l,w)):l;l=u,i+=2}}function lk(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=vu(t/Vt),n.d=[],r=(t+1)%Vt,t<0&&(r+=Vt),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Vt;r<i;)n.d.push(+e.slice(r,r+=Vt));e=e.slice(r),r=Vt-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),Kt&&(n.e>Wp||n.e<-Wp))throw Error(jE+t)}else n.s=0,n.e=0,n.d=[0];return n}function Dt(n,e,t){var r,i,a,s,l,u,d,f,m=n.d;for(s=1,a=m[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Vt,i=e,d=m[f=0];else{if(f=Math.ceil((r+1)/Vt),a=m.length,f>=a)return n;for(d=a=m[f],s=1;a>=10;a/=10)s++;r%=Vt,i=r-Vt+s}if(t!==void 0&&(a=No(10,s-i-1),l=d/a%10|0,u=e<0||m[f+1]!==void 0||d%a,u=t<4?(l||u)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||u||t==6&&(r>0?i>0?d/No(10,s-i):0:m[f-1])%10&1||t==(n.s<0?8:7))),e<1||!m[0])return u?(a=Sn(n),m.length=1,e=e-a-1,m[0]=No(10,(Vt-e%Vt)%Vt),n.e=vu(-e/Vt)||0):(m.length=1,m[0]=n.e=n.s=0),n;if(r==0?(m.length=f,a=1,f--):(m.length=f+1,a=No(10,Vt-r),m[f]=i>0?(d/No(10,s-i)%No(10,i)|0)*a:0),u)for(;;)if(f==0){(m[0]+=a)==Ln&&(m[0]=1,++n.e);break}else{if(m[f]+=a,m[f]!=Ln)break;m[f--]=0,a=1}for(r=m.length;m[--r]===0;)m.pop();if(Kt&&(n.e>Wp||n.e<-Wp))throw Error(jE+Sn(n));return n}function DB(n,e){var t,r,i,a,s,l,u,d,f,m,g=n.constructor,y=g.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new g(n),Kt?Dt(e,y):e;if(u=n.d,m=e.d,r=e.e,d=n.e,u=u.slice(),s=d-r,s){for(f=s<0,f?(t=u,s=-s,l=m.length):(t=m,r=d,l=u.length),i=Math.max(Math.ceil(y/Vt),l)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=u.length,l=m.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(u[i]!=m[i]){f=u[i]<m[i];break}s=0}for(f&&(t=u,u=m,m=t,e.s=-e.s),l=u.length,i=m.length-l;i>0;--i)u[l++]=0;for(i=m.length;i>s;){if(u[--i]<m[i]){for(a=i;a&&u[--a]===0;)u[a]=Ln-1;--u[a],u[i]+=Ln}u[i]-=m[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,Kt?Dt(e,y):e):new g(0)}function tl(n,e,t){var r,i=Sn(n),a=aa(n.d),s=a.length;return e?(t&&(r=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+ks(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+ks(-i-1)+a,t&&(r=t-s)>0&&(a+=ks(r))):i>=s?(a+=ks(i+1-s),t&&(r=t-i-1)>0&&(a=a+"."+ks(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-s)>0&&(i+1===s&&(a+="."),a+=ks(r))),n.s<0?"-"+a:a}function ck(n,e){if(n.length>e)return n.length=e,!0}function LB(n){var e,t,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Wo+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return lk(s,a.toString())}else if(typeof a!="string")throw Error(Wo+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,vre.test(a))lk(s,a);else throw Error(Wo+a)}if(i.prototype=je,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=LB,i.config=i.set=yre,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function yre(n){if(!n||typeof n!="object")throw Error(wi+"Object expected");var e,t,r,i=["precision",1,gu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(vu(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(Wo+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(Wo+t+": "+r);return this}var NE=LB(gre);Gr=new NE(1);const Pt=NE;function bre(n){return Sre(n)||_re(n)||xre(n)||wre()}function wre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xre(n,e){if(n){if(typeof n=="string")return sS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sS(n,e)}}function _re(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function Sre(n){if(Array.isArray(n))return sS(n)}function sS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Are=function(e){return e},IB={},BB=function(e){return e===IB},uk=function(e){return function t(){return arguments.length===0||arguments.length===1&&BB(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Ere=function n(e,t){return e===1?t:uk(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(l){return l!==IB}).length;return s>=e?t.apply(void 0,i):n(e-s,uk(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=i.map(function(m){return BB(m)?u.shift():m});return t.apply(void 0,bre(f).concat(u))}))})},iv=function(e){return Ere(e.length,e)},oS=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},Tre=iv(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),Ore=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return Are;var i=t.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(l,u){return u(l)},a.apply(void 0,arguments))}},lS=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},$B=function(e){var t=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t&&a.every(function(l,u){return l===t[u]})||(t=a,r=e.apply(void 0,a)),r}};function Cre(n){var e;return n===0?e=1:e=Math.floor(new Pt(n).abs().log(10).toNumber())+1,e}function jre(n,e,t){for(var r=new Pt(n),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(t),i++;return a}var Nre=iv(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),Mre=iv(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),Pre=iv(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const av={rangeStep:jre,getDigitCount:Cre,interpolateNumber:Nre,uninterpolateNumber:Mre,uninterpolateTruncation:Pre};function cS(n){return Dre(n)||kre(n)||FB(n)||Rre()}function Rre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kre(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function Dre(n){if(Array.isArray(n))return uS(n)}function vh(n,e){return Bre(n)||Ire(n,e)||FB(n,e)||Lre()}function Lre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FB(n,e){if(n){if(typeof n=="string")return uS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uS(n,e)}}function uS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ire(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,a=void 0;try{for(var s=n[Symbol.iterator](),l;!(r=(l=s.next()).done)&&(t.push(l.value),!(e&&t.length===e));r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return t}}function Bre(n){if(Array.isArray(n))return n}function UB(n){var e=vh(n,2),t=e[0],r=e[1],i=t,a=r;return t>r&&(i=r,a=t),[i,a]}function qB(n,e,t){if(n.lte(0))return new Pt(0);var r=av.getDigitCount(n.toNumber()),i=new Pt(10).pow(r),a=n.div(i),s=r!==1?.05:.1,l=new Pt(Math.ceil(a.div(s).toNumber())).add(t).mul(s),u=l.mul(i);return e?u:new Pt(Math.ceil(u))}function $re(n,e,t){var r=1,i=new Pt(n);if(!i.isint()&&t){var a=Math.abs(n);a<1?(r=new Pt(10).pow(av.getDigitCount(n)-1),i=new Pt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Pt(Math.floor(n)))}else n===0?i=new Pt(Math.floor((e-1)/2)):t||(i=new Pt(Math.floor(n)));var s=Math.floor((e-1)/2),l=Ore(Tre(function(u){return i.add(new Pt(u-s).mul(r)).toNumber()}),oS);return l(0,e)}function zB(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new Pt(0),tickMin:new Pt(0),tickMax:new Pt(0)};var a=qB(new Pt(e).sub(n).div(t-1),r,i),s;n<=0&&e>=0?s=new Pt(0):(s=new Pt(n).add(e).div(2),s=s.sub(new Pt(s).mod(a)));var l=Math.ceil(s.sub(n).div(a).toNumber()),u=Math.ceil(new Pt(e).sub(s).div(a).toNumber()),d=l+u+1;return d>t?zB(n,e,t,r,i+1):(d<t&&(u=e>0?u+(t-d):u,l=e>0?l:l+(t-d)),{step:a,tickMin:s.sub(new Pt(l).mul(a)),tickMax:s.add(new Pt(u).mul(a))})}function Fre(n){var e=vh(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),l=UB([t,r]),u=vh(l,2),d=u[0],f=u[1];if(d===-1/0||f===1/0){var m=f===1/0?[d].concat(cS(oS(0,i-1).map(function(){return 1/0}))):[].concat(cS(oS(0,i-1).map(function(){return-1/0})),[f]);return t>r?lS(m):m}if(d===f)return $re(d,i,a);var g=zB(d,f,s,a),y=g.step,x=g.tickMin,b=g.tickMax,w=av.rangeStep(x,b.add(new Pt(.1).mul(y)),y);return t>r?lS(w):w}function Ure(n,e){var t=vh(n,2),r=t[0],i=t[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=UB([r,i]),l=vh(s,2),u=l[0],d=l[1];if(u===-1/0||d===1/0)return[r,i];if(u===d)return[u];var f=Math.max(e,2),m=qB(new Pt(d).sub(u).div(f-1),a,0),g=[].concat(cS(av.rangeStep(new Pt(u),new Pt(d).sub(new Pt(.99).mul(m)),m)),[d]);return r>i?lS(g):g}var qre=$B(Fre),zre=$B(Ure),Hre=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Hc(n){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(n)}function Yp(){return Yp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yp.apply(this,arguments)}function Vre(n,e){return Xre(n)||Yre(n,e)||Wre(n,e)||Gre()}function Gre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wre(n,e){if(n){if(typeof n=="string")return dk(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dk(n,e)}}function dk(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Yre(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function Xre(n){if(Array.isArray(n))return n}function Kre(n,e){if(n==null)return{};var t=Zre(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Zre(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Jre(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Qre(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,GB(r.key),r)}}function eie(n,e,t){return e&&Qre(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function tie(n,e,t){return e=Xp(e),nie(n,HB()?Reflect.construct(e,t||[],Xp(n).constructor):e.apply(n,t))}function nie(n,e){if(e&&(Hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rie(n)}function rie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function HB(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HB=function(){return!!n})()}function Xp(n){return Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xp(n)}function iie(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&dS(n,e)}function dS(n,e){return dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dS(n,e)}function VB(n,e,t){return e=GB(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GB(n){var e=aie(n,"string");return Hc(e)=="symbol"?e:e+""}function aie(n,e){if(Hc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var of=(function(n){function e(){return Jre(this,e),tie(this,e,arguments)}return iie(e,n),eie(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,l=r.dataKey,u=r.data,d=r.dataPointFormatter,f=r.xAxis,m=r.yAxis,g=Kre(r,Hre),y=ft(g,!1);this.props.direction==="x"&&f.type!=="number"&&pt(!1);var x=u.map(function(b){var w=d(b,l),S=w.x,O=w.y,T=w.value,M=w.errorVal;if(!M)return null;var N=[],j,C;if(Array.isArray(M)){var R=Vre(M,2);j=R[0],C=R[1]}else j=C=M;if(a==="vertical"){var k=f.scale,F=O+i,D=F+s,L=F-s,B=k(T-j),V=k(T+C);N.push({x1:V,y1:D,x2:V,y2:L}),N.push({x1:B,y1:F,x2:V,y2:F}),N.push({x1:B,y1:D,x2:B,y2:L})}else if(a==="horizontal"){var H=m.scale,I=S+i,z=I-s,q=I+s,J=H(T-j),K=H(T+C);N.push({x1:z,y1:K,x2:q,y2:K}),N.push({x1:I,y1:J,x2:I,y2:K}),N.push({x1:z,y1:J,x2:q,y2:J})}return Z.createElement(dn,Yp({className:"recharts-errorBar",key:"bar-".concat(N.map(function(U){return"".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))},y),N.map(function(U){return Z.createElement("line",Yp({},U,{key:"line-".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))}))});return Z.createElement(dn,{className:"recharts-errorBars"},x)}}])})(Z.Component);VB(of,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});VB(of,"displayName","ErrorBar");function yh(n){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(n)}function hk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function To(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(t),!0).forEach(function(r){sie(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sie(n,e,t){return e=oie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oie(n){var e=lie(n,"string");return yh(e)=="symbol"?e:e+""}function lie(n,e){if(yh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(yh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var WB=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=Ur(t,qa);if(!s)return null;var l=qa.defaultProps,u=l!==void 0?To(To({},l),s.props):{},d;return s.props&&s.props.payload?d=s.props&&s.props.payload:a==="children"?d=(r||[]).reduce(function(f,m){var g=m.item,y=m.props,x=y.sectors||y.data||[];return f.concat(x.map(function(b){return{type:s.props.iconType||g.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):d=(r||[]).map(function(f){var m=f.item,g=m.type.defaultProps,y=g!==void 0?To(To({},g),m.props):{},x=y.dataKey,b=y.name,w=y.legendType,S=y.hide;return{inactive:S,dataKey:x,type:u.iconType||w||"square",color:ME(m),value:b||x,payload:y}}),To(To(To({},u),qa.getWithHeight(s,i)),{},{payload:d,item:s})};function bh(n){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(n)}function fk(n){return hie(n)||die(n)||uie(n)||cie()}function cie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uie(n,e){if(n){if(typeof n=="string")return hS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return hS(n,e)}}function die(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function hie(n){if(Array.isArray(n))return hS(n)}function hS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function mk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function sn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mk(Object(t),!0).forEach(function(r){Oc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Oc(n,e,t){return e=fie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fie(n){var e=mie(n,"string");return bh(e)=="symbol"?e:e+""}function mie(n,e){if(bh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Xr(n,e,t){return st(n)||st(e)?t:Nn(e)?yi(n,e,t):et(e)?e(n):t}function Ud(n,e,t,r){var i=fre(n,function(l){return Xr(l,e)});if(t==="number"){var a=i.filter(function(l){return be(l)||parseFloat(l)});return a.length?[nv(a),tv(a)]:[1/0,-1/0]}var s=r?i.filter(function(l){return!st(l)}):i;return s.map(function(l){return Nn(l)||l instanceof Date?l:""})}var pie=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,l=(t=r?.length)!==null&&t!==void 0?t:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var u=a.range,d=0;d<l;d++){var f=d>0?i[d-1].coordinate:i[l-1].coordinate,m=i[d].coordinate,g=d>=l-1?i[0].coordinate:i[d+1].coordinate,y=void 0;if($i(m-f)!==$i(g-m)){var x=[];if($i(g-m)===$i(u[1]-u[0])){y=g;var b=m+u[1]-u[0];x[0]=Math.min(b,(b+f)/2),x[1]=Math.max(b,(b+f)/2)}else{y=f;var w=g+u[1]-u[0];x[0]=Math.min(m,(w+m)/2),x[1]=Math.max(m,(w+m)/2)}var S=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){s=i[d].index;break}}else{var O=Math.min(f,g),T=Math.max(f,g);if(e>(O+m)/2&&e<=(T+m)/2){s=i[d].index;break}}}else for(var M=0;M<l;M++)if(M===0&&e<=(r[M].coordinate+r[M+1].coordinate)/2||M>0&&M<l-1&&e>(r[M].coordinate+r[M-1].coordinate)/2&&e<=(r[M].coordinate+r[M+1].coordinate)/2||M===l-1&&e>(r[M].coordinate+r[M-1].coordinate)/2){s=r[M].index;break}return s},ME=function(e){var t,r=e,i=r.type.displayName,a=(t=e.type)!==null&&t!==void 0&&t.defaultProps?sn(sn({},e.type.defaultProps),e.props):e.props,s=a.stroke,l=a.fill,u;switch(i){case"Line":u=s;break;case"Area":case"Radar":u=s&&s!=="none"?s:l;break;default:u=l;break}return u},gie=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},l=Object.keys(a),u=0,d=l.length;u<d;u++)for(var f=a[l[u]].stackGroups,m=Object.keys(f),g=0,y=m.length;g<y;g++){var x=f[m[g]],b=x.items,w=x.cateAxisId,S=b.filter(function(C){return Fa(C.type).indexOf("Bar")>=0});if(S&&S.length){var O=S[0].type.defaultProps,T=O!==void 0?sn(sn({},O),S[0].props):S[0].props,M=T.barSize,N=T[w];s[N]||(s[N]=[]);var j=st(M)?t:M;s[N].push({item:S[0],stackList:S.slice(1),barSize:st(j)?void 0:el(j,r,0)})}}return s},vie=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,l=e.maxBarSize,u=s.length;if(u<1)return null;var d=el(t,i,0,!0),f,m=[];if(s[0].barSize===+s[0].barSize){var g=!1,y=i/u,x=s.reduce(function(M,N){return M+N.barSize||0},0);x+=(u-1)*d,x>=i&&(x-=(u-1)*d,d=0),x>=i&&y>0&&(g=!0,y*=.9,x=u*y);var b=(i-x)/2>>0,w={offset:b-d,size:0};f=s.reduce(function(M,N){var j={item:N.item,position:{offset:w.offset+w.size+d,size:g?y:N.barSize}},C=[].concat(fk(M),[j]);return w=C[C.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(R){C.push({item:R,position:w})}),C},m)}else{var S=el(r,i,0,!0);i-2*S-(u-1)*d<=0&&(d=0);var O=(i-2*S-(u-1)*d)/u;O>1&&(O>>=0);var T=l===+l?Math.min(O,l):O;f=s.reduce(function(M,N,j){var C=[].concat(fk(M),[{item:N.item,position:{offset:S+(O+d)*j+(O-T)/2,size:T}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(R){C.push({item:R,position:C[C.length-1].position})}),C},m)}return f},yie=function(e,t,r,i){var a=r.children,s=r.width,l=r.margin,u=s-(l.left||0)-(l.right||0),d=WB({children:a,legendWidth:u});if(d){var f=i||{},m=f.width,g=f.height,y=d.align,x=d.verticalAlign,b=d.layout;if((b==="vertical"||b==="horizontal"&&x==="middle")&&y!=="center"&&be(e[y]))return sn(sn({},e),{},Oc({},y,e[y]+(m||0)));if((b==="horizontal"||b==="vertical"&&y==="center")&&x!=="middle"&&be(e[x]))return sn(sn({},e),{},Oc({},x,e[x]+(g||0)))}return e},bie=function(e,t,r){return st(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},YB=function(e,t,r,i,a){var s=t.props.children,l=bi(s,of).filter(function(d){return bie(i,a,d.props.direction)});if(l&&l.length){var u=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,f){var m=Xr(f,r);if(st(m))return d;var g=Array.isArray(m)?[nv(m),tv(m)]:[m,m],y=u.reduce(function(x,b){var w=Xr(f,b,0),S=g[0]-Math.abs(Array.isArray(w)?w[0]:w),O=g[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(S,x[0]),Math.max(O,x[1])]},[1/0,-1/0]);return[Math.min(y[0],d[0]),Math.max(y[1],d[1])]},[1/0,-1/0])}return null},wie=function(e,t,r,i,a){var s=t.map(function(l){return YB(e,l,r,a,i)}).filter(function(l){return!st(l)});return s&&s.length?s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]):null},XB=function(e,t,r,i,a){var s=t.map(function(u){var d=u.props.dataKey;return r==="number"&&d&&YB(e,u,d,i)||Ud(e,d,r,a)});if(r==="number")return s.reduce(function(u,d){return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);var l={};return s.reduce(function(u,d){for(var f=0,m=d.length;f<m;f++)l[d[f]]||(l[d[f]]=!0,u.push(d[f]));return u},[])},KB=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},ZB=function(e,t,r,i){if(i)return e.map(function(u){return u.coordinate});var a,s,l=e.map(function(u){return u.coordinate===t&&(a=!0),u.coordinate===r&&(s=!0),u.coordinate});return a||l.push(t),s||l.push(r),l},Ba=function(e,t,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,l=e.range,u=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(t||r)&&s==="category"&&i.bandwidth?i.bandwidth()/u:0;if(d=e.axisType==="angleAxis"&&l?.length>=2?$i(l[0]-l[1])*2*d:d,t&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(m){var g=a?a.indexOf(m):m;return{coordinate:i(g)+d,value:m,offset:d}});return f.filter(function(m){return!Qh(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,g){return{coordinate:i(m)+d,value:m,index:g,offset:d}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(m){return{coordinate:i(m)+d,value:m,offset:d}}):i.domain().map(function(m,g){return{coordinate:i(m)+d,value:a?a[m]:m,index:g,offset:d}})},_1=new WeakMap,Xm=function(e,t){if(typeof t!="function")return e;_1.has(e)||_1.set(e,new WeakMap);var r=_1.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},xie=function(e,t,r){var i=e.scale,a=e.type,s=e.layout,l=e.axisType;if(i==="auto")return s==="radial"&&l==="radiusAxis"?{scale:dh(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:zp(),realScaleType:"linear"}:a==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:Fd(),realScaleType:"point"}:a==="category"?{scale:dh(),realScaleType:"band"}:{scale:zp(),realScaleType:"linear"};if(Qo(i)){var u="scale".concat(qg(i));return{scale:(QR[u]||Fd)(),realScaleType:QR[u]?u:"point"}}return et(i)?{scale:i}:{scale:Fd(),realScaleType:"point"}},pk=1e-4,_ie=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),a=Math.min(i[0],i[1])-pk,s=Math.max(i[0],i[1])+pk,l=e(t[0]),u=e(t[r-1]);(l<a||l>s||u<a||u>s)&&e.domain([t[0],t[r-1]])}},Sie=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},Aie=function(e,t){if(!t||t.length!==2||!be(t[0])||!be(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!be(e[0])||e[0]<r)&&(a[0]=r),(!be(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Eie=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,l=0;l<t;++l){var u=Qh(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=a,e[l][r][1]=a+u,a=e[l][r][1]):(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1])}},Tie=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<t;++s){var l=Qh(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Oie={sign:Eie,expand:dZ,none:Lc,silhouette:hZ,wiggle:fZ,positive:Tie},Cie=function(e,t,r){var i=t.map(function(l){return l.props.dataKey}),a=Oie[r],s=uZ().keys(i).value(function(l,u){return+Xr(l,u,0)}).order(U_).offset(a);return s(e)},jie=function(e,t,r,i,a,s){if(!e)return null;var l=s?t.reverse():t,u={},d=l.reduce(function(m,g){var y,x=(y=g.type)!==null&&y!==void 0&&y.defaultProps?sn(sn({},g.type.defaultProps),g.props):g.props,b=x.stackId,w=x.hide;if(w)return m;var S=x[r],O=m[S]||{hasStack:!1,stackGroups:{}};if(Nn(b)){var T=O.stackGroups[b]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(g),O.hasStack=!0,O.stackGroups[b]=T}else O.stackGroups[ef("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[g]};return sn(sn({},m),{},Oc({},S,O))},u),f={};return Object.keys(d).reduce(function(m,g){var y=d[g];if(y.hasStack){var x={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(b,w){var S=y.stackGroups[w];return sn(sn({},b),{},Oc({},w,{numericAxisId:r,cateAxisId:i,items:S.items,stackedData:Cie(e,S.items,a)}))},x)}return sn(sn({},m),{},Oc({},g,y))},f)},Nie=function(e,t){var r=t.realScaleType,i=t.type,a=t.tickCount,s=t.originalDomain,l=t.allowDecimals,u=r||t.scale;if(u!=="auto"&&u!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var d=e.domain();if(!d.length)return null;var f=qre(d,a,l);return e.domain([nv(f),tv(f)]),{niceTicks:f}}if(a&&i==="number"){var m=e.domain(),g=zre(m,a,l);return{niceTicks:g}}return null};function gk(n){var e=n.axis,t=n.ticks,r=n.bandSize,i=n.entry,a=n.index,s=n.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!st(i[e.dataKey])){var l=Sp(t,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return t[a]?t[a].coordinate+r/2:null}var u=Xr(i,st(s)?e.dataKey:s);return st(u)?null:e.scale(u)}var vk=function(e){var t=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,l=e.index;if(t.type==="category")return r[l]?r[l].coordinate+i:null;var u=Xr(s,t.dataKey,t.domain[l]);return st(u)?null:t.scale(u)-a/2+i},Mie=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Pie=function(e,t){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?sn(sn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Nn(a)){var s=t[a];if(s){var l=s.items.indexOf(e);return l>=0?s.stackedData[l]:null}}return null},Rie=function(e){return e.reduce(function(t,r){return[nv(r.concat([t[0]]).filter(be)),tv(r.concat([t[1]]).filter(be))]},[1/0,-1/0])},JB=function(e,t,r){return Object.keys(e).reduce(function(i,a){var s=e[a],l=s.stackedData,u=l.reduce(function(d,f){var m=Rie(f.slice(t,r+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(u[0],i[0]),Math.max(u[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},yk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fS=function(e,t,r){if(et(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(be(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(yk.test(e[0])){var a=+yk.exec(e[0])[1];i[0]=t[0]-a}else et(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(be(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(bk.test(e[1])){var s=+bk.exec(e[1])[1];i[1]=t[1]+s}else et(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},Kp=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var a=aE(t,function(m){return m.coordinate}),s=1/0,l=1,u=a.length;l<u;l++){var d=a[l],f=a[l-1];s=Math.min((d.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},wk=function(e,t,r){return!e||!e.length||rv(e,yi(r,"type.defaultProps.domain"))?t:e},QB=function(e,t){var r=e.type.defaultProps?sn(sn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,l=r.formatter,u=r.tooltipType,d=r.chartType,f=r.hide;return sn(sn({},ft(e,!1)),{},{dataKey:i,unit:s,formatter:l,name:a||i,color:ME(e),value:Xr(t,i),type:u,payload:t,chartType:d,hide:f})};function wh(n){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(n)}function xk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _k(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(t),!0).forEach(function(r){kie(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function kie(n,e,t){return e=Die(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Die(n){var e=Lie(n,"string");return wh(e)=="symbol"?e:e+""}function Lie(n,e){if(wh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Zp=Math.PI/180,Iie=function(e){return e*180/Math.PI},Xn=function(e,t,r,i){return{x:e+Math.cos(-Zp*i)*r,y:t+Math.sin(-Zp*i)*r}},Bie=function(e,t){var r=e.x,i=e.y,a=t.x,s=t.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},$ie=function(e,t){var r=e.x,i=e.y,a=t.cx,s=t.cy,l=Bie({x:r,y:i},{x:a,y:s});if(l<=0)return{radius:l};var u=(r-a)/l,d=Math.acos(u);return i>s&&(d=2*Math.PI-d),{radius:l,angle:Iie(d),angleInRadian:d}},Fie=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:t-s*360,endAngle:r-s*360}},Uie=function(e,t){var r=t.startAngle,i=t.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),l=Math.min(a,s);return e+l*360},Sk=function(e,t){var r=e.x,i=e.y,a=$ie({x:r,y:i},t),s=a.radius,l=a.angle,u=t.innerRadius,d=t.outerRadius;if(s<u||s>d)return!1;if(s===0)return!0;var f=Fie(t),m=f.startAngle,g=f.endAngle,y=l,x;if(m<=g){for(;y>g;)y-=360;for(;y<m;)y+=360;x=y>=m&&y<=g}else{for(;y>m;)y-=360;for(;y<g;)y+=360;x=y>=g&&y<=m}return x?_k(_k({},t),{},{radius:s,angle:Uie(y,t)}):null};function xh(n){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(n)}var qie=["offset"];function zie(n){return Wie(n)||Gie(n)||Vie(n)||Hie()}function Hie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vie(n,e){if(n){if(typeof n=="string")return mS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mS(n,e)}}function Gie(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Wie(n){if(Array.isArray(n))return mS(n)}function mS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Yie(n,e){if(n==null)return{};var t=Xie(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Xie(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Ak(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Cn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ak(Object(t),!0).forEach(function(r){Kie(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ak(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Kie(n,e,t){return e=Zie(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Zie(n){var e=Jie(n,"string");return xh(e)=="symbol"?e:e+""}function Jie(n,e){if(xh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _h(){return _h=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_h.apply(this,arguments)}var Qie=function(e){var t=e.value,r=e.formatter,i=st(e.children)?t:e.children;return et(r)?r(i):i},eae=function(e,t){var r=$i(t-e),i=Math.min(Math.abs(t-e),360);return r*i},tae=function(e,t,r){var i=e.position,a=e.viewBox,s=e.offset,l=e.className,u=a,d=u.cx,f=u.cy,m=u.innerRadius,g=u.outerRadius,y=u.startAngle,x=u.endAngle,b=u.clockWise,w=(m+g)/2,S=eae(y,x),O=S>=0?1:-1,T,M;i==="insideStart"?(T=y+O*s,M=b):i==="insideEnd"?(T=x-O*s,M=!b):i==="end"&&(T=x+O*s,M=b),M=S<=0?M:!M;var N=Xn(d,f,w,T),j=Xn(d,f,w,T+(M?1:-1)*359),C="M".concat(N.x,",").concat(N.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(M?0:1,`,
    `).concat(j.x,",").concat(j.y),R=st(e.id)?ef("recharts-radial-line-"):e.id;return Z.createElement("text",_h({},r,{dominantBaseline:"central",className:at("recharts-radial-bar-label",l)}),Z.createElement("defs",null,Z.createElement("path",{id:R,d:C})),Z.createElement("textPath",{xlinkHref:"#".concat(R)},t))},nae=function(e){var t=e.viewBox,r=e.offset,i=e.position,a=t,s=a.cx,l=a.cy,u=a.innerRadius,d=a.outerRadius,f=a.startAngle,m=a.endAngle,g=(f+m)/2;if(i==="outside"){var y=Xn(s,l,d+r,g),x=y.x,b=y.y;return{x,y:b,textAnchor:x>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var w=(u+d)/2,S=Xn(s,l,w,g),O=S.x,T=S.y;return{x:O,y:T,textAnchor:"middle",verticalAnchor:"middle"}},rae=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=t,l=s.x,u=s.y,d=s.width,f=s.height,m=f>=0?1:-1,g=m*i,y=m>0?"end":"start",x=m>0?"start":"end",b=d>=0?1:-1,w=b*i,S=b>0?"end":"start",O=b>0?"start":"end";if(a==="top"){var T={x:l+d/2,y:u-m*i,textAnchor:"middle",verticalAnchor:y};return Cn(Cn({},T),r?{height:Math.max(u-r.y,0),width:d}:{})}if(a==="bottom"){var M={x:l+d/2,y:u+f+g,textAnchor:"middle",verticalAnchor:x};return Cn(Cn({},M),r?{height:Math.max(r.y+r.height-(u+f),0),width:d}:{})}if(a==="left"){var N={x:l-w,y:u+f/2,textAnchor:S,verticalAnchor:"middle"};return Cn(Cn({},N),r?{width:Math.max(N.x-r.x,0),height:f}:{})}if(a==="right"){var j={x:l+d+w,y:u+f/2,textAnchor:O,verticalAnchor:"middle"};return Cn(Cn({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:f}:{})}var C=r?{width:d,height:f}:{};return a==="insideLeft"?Cn({x:l+w,y:u+f/2,textAnchor:O,verticalAnchor:"middle"},C):a==="insideRight"?Cn({x:l+d-w,y:u+f/2,textAnchor:S,verticalAnchor:"middle"},C):a==="insideTop"?Cn({x:l+d/2,y:u+g,textAnchor:"middle",verticalAnchor:x},C):a==="insideBottom"?Cn({x:l+d/2,y:u+f-g,textAnchor:"middle",verticalAnchor:y},C):a==="insideTopLeft"?Cn({x:l+w,y:u+g,textAnchor:O,verticalAnchor:x},C):a==="insideTopRight"?Cn({x:l+d-w,y:u+g,textAnchor:S,verticalAnchor:x},C):a==="insideBottomLeft"?Cn({x:l+w,y:u+f-g,textAnchor:O,verticalAnchor:y},C):a==="insideBottomRight"?Cn({x:l+d-w,y:u+f-g,textAnchor:S,verticalAnchor:y},C):hu(a)&&(be(a.x)||$o(a.x))&&(be(a.y)||$o(a.y))?Cn({x:l+el(a.x,d),y:u+el(a.y,f),textAnchor:"end",verticalAnchor:"end"},C):Cn({x:l+d/2,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},C)},iae=function(e){return"cx"in e&&be(e.cx)};function nr(n){var e=n.offset,t=e===void 0?5:e,r=Yie(n,qie),i=Cn({offset:t},r),a=i.viewBox,s=i.position,l=i.value,u=i.children,d=i.content,f=i.className,m=f===void 0?"":f,g=i.textBreakAll;if(!a||st(l)&&st(u)&&!E.isValidElement(d)&&!et(d))return null;if(E.isValidElement(d))return E.cloneElement(d,i);var y;if(et(d)){if(y=E.createElement(d,i),E.isValidElement(y))return y}else y=Qie(i);var x=iae(a),b=ft(i,!0);if(x&&(s==="insideStart"||s==="insideEnd"||s==="end"))return tae(i,y,b);var w=x?nae(i):rae(i);return Z.createElement(Lp,_h({className:at("recharts-label",m)},b,w,{breakAll:g}),y)}nr.displayName="Label";var e6=function(e){var t=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,l=e.r,u=e.radius,d=e.innerRadius,f=e.outerRadius,m=e.x,g=e.y,y=e.top,x=e.left,b=e.width,w=e.height,S=e.clockWise,O=e.labelViewBox;if(O)return O;if(be(b)&&be(w)){if(be(m)&&be(g))return{x:m,y:g,width:b,height:w};if(be(y)&&be(x))return{x:y,y:x,width:b,height:w}}return be(m)&&be(g)?{x:m,y:g,width:0,height:0}:be(t)&&be(r)?{cx:t,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:d||0,outerRadius:f||u||l||0,clockWise:S}:e.viewBox?e.viewBox:{}},aae=function(e,t){return e?e===!0?Z.createElement(nr,{key:"label-implicit",viewBox:t}):Nn(e)?Z.createElement(nr,{key:"label-implicit",viewBox:t,value:e}):E.isValidElement(e)?e.type===nr?E.cloneElement(e,{key:"label-implicit",viewBox:t}):Z.createElement(nr,{key:"label-implicit",content:e,viewBox:t}):et(e)?Z.createElement(nr,{key:"label-implicit",content:e,viewBox:t}):hu(e)?Z.createElement(nr,_h({viewBox:t},e,{key:"label-implicit"})):null:null},sae=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=e6(e),s=bi(i,nr).map(function(u,d){return E.cloneElement(u,{viewBox:t||a,key:"label-".concat(d)})});if(!r)return s;var l=aae(e.label,t||a);return[l].concat(zie(s))};nr.parseViewBox=e6;nr.renderCallByParent=sae;var S1,Ek;function oae(){if(Ek)return S1;Ek=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return S1=n,S1}var lae=oae();const cae=_t(lae);function Sh(n){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(n)}var uae=["valueAccessor"],dae=["data","dataKey","clockWise","id","textBreakAll"];function hae(n){return gae(n)||pae(n)||mae(n)||fae()}function fae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mae(n,e){if(n){if(typeof n=="string")return pS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pS(n,e)}}function pae(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function gae(n){if(Array.isArray(n))return pS(n)}function pS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Jp(){return Jp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jp.apply(this,arguments)}function Tk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ok(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tk(Object(t),!0).forEach(function(r){vae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function vae(n,e,t){return e=yae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yae(n){var e=bae(n,"string");return Sh(e)=="symbol"?e:e+""}function bae(n,e){if(Sh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ck(n,e){if(n==null)return{};var t=wae(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function wae(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var xae=function(e){return Array.isArray(e.value)?cae(e.value):e.value};function zs(n){var e=n.valueAccessor,t=e===void 0?xae:e,r=Ck(n,uae),i=r.data,a=r.dataKey,s=r.clockWise,l=r.id,u=r.textBreakAll,d=Ck(r,dae);return!i||!i.length?null:Z.createElement(dn,{className:"recharts-label-list"},i.map(function(f,m){var g=st(a)?t(f,m):Xr(f&&f.payload,a),y=st(l)?{}:{id:"".concat(l,"-").concat(m)};return Z.createElement(nr,Jp({},ft(f,!0),d,y,{parentViewBox:f.parentViewBox,value:g,textBreakAll:u,viewBox:nr.parseViewBox(st(s)?f:Ok(Ok({},f),{},{clockWise:s})),key:"label-".concat(m),index:m}))}))}zs.displayName="LabelList";function _ae(n,e){return n?n===!0?Z.createElement(zs,{key:"labelList-implicit",data:e}):Z.isValidElement(n)||et(n)?Z.createElement(zs,{key:"labelList-implicit",data:e,content:n}):hu(n)?Z.createElement(zs,Jp({data:e},n,{key:"labelList-implicit"})):null:null}function Sae(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=bi(r,zs).map(function(s,l){return E.cloneElement(s,{data:e,key:"labelList-".concat(l)})});if(!t)return i;var a=_ae(n.label,e);return[a].concat(hae(i))}zs.renderCallByParent=Sae;function Ah(n){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(n)}function gS(){return gS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gS.apply(this,arguments)}function jk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Nk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jk(Object(t),!0).forEach(function(r){Aae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Aae(n,e,t){return e=Eae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Eae(n){var e=Tae(n,"string");return Ah(e)=="symbol"?e:e+""}function Tae(n,e){if(Ah(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Oae=function(e,t){var r=$i(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},Km=function(e){var t=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,l=e.isExternal,u=e.cornerRadius,d=e.cornerIsExternal,f=u*(l?1:-1)+i,m=Math.asin(u/f)/Zp,g=d?a:a+s*m,y=Xn(t,r,f,g),x=Xn(t,r,i,g),b=d?a-s*m:a,w=Xn(t,r,f*Math.cos(m*Zp),b);return{center:y,circleTangency:x,lineTangency:w,theta:m}},t6=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,l=e.endAngle,u=Oae(s,l),d=s+u,f=Xn(t,r,a,s),m=Xn(t,r,a,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(s>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(i>0){var y=Xn(t,r,i,s),x=Xn(t,r,i,d);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(s<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else g+="L ".concat(t,",").concat(r," Z");return g},Cae=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,l=e.forceCornerRadius,u=e.cornerIsExternal,d=e.startAngle,f=e.endAngle,m=$i(f-d),g=Km({cx:t,cy:r,radius:a,angle:d,sign:m,cornerRadius:s,cornerIsExternal:u}),y=g.circleTangency,x=g.lineTangency,b=g.theta,w=Km({cx:t,cy:r,radius:a,angle:f,sign:-m,cornerRadius:s,cornerIsExternal:u}),S=w.circleTangency,O=w.lineTangency,T=w.theta,M=u?Math.abs(d-f):Math.abs(d-f)-b-T;if(M<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):t6({cx:t,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:f});var N="M ".concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(m<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,`
  `);if(i>0){var j=Km({cx:t,cy:r,radius:i,angle:d,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),C=j.circleTangency,R=j.lineTangency,k=j.theta,F=Km({cx:t,cy:r,radius:i,angle:f,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),D=F.circleTangency,L=F.lineTangency,B=F.theta,V=u?Math.abs(d-f):Math.abs(d-f)-k-B;if(V<0&&s===0)return"".concat(N,"L").concat(t,",").concat(r,"Z");N+="L".concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(V>180),",").concat(+(m>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,"Z")}else N+="L".concat(t,",").concat(r,"Z");return N},jae={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},n6=function(e){var t=Nk(Nk({},jae),e),r=t.cx,i=t.cy,a=t.innerRadius,s=t.outerRadius,l=t.cornerRadius,u=t.forceCornerRadius,d=t.cornerIsExternal,f=t.startAngle,m=t.endAngle,g=t.className;if(s<a||f===m)return null;var y=at("recharts-sector",g),x=s-a,b=el(l,x,0,!0),w;return b>0&&Math.abs(f-m)<360?w=Cae({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(b,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:f,endAngle:m}):w=t6({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:f,endAngle:m}),Z.createElement("path",gS({},ft(t,!0),{className:y,d:w,role:"img"}))};function Eh(n){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(n)}function vS(){return vS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vS.apply(this,arguments)}function Mk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Pk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(t),!0).forEach(function(r){Nae(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Nae(n,e,t){return e=Mae(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mae(n){var e=Pae(n,"string");return Eh(e)=="symbol"?e:e+""}function Pae(n,e){if(Eh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Rk={curveBasisClosed:QK,curveBasisOpen:eZ,curveBasis:JK,curveBumpX:BK,curveBumpY:$K,curveLinearClosed:tZ,curveLinear:Hg,curveMonotoneX:nZ,curveMonotoneY:rZ,curveNatural:iZ,curveStep:aZ,curveStepAfter:oZ,curveStepBefore:sZ},Zm=function(e){return e.x===+e.x&&e.y===+e.y},_d=function(e){return e.x},Sd=function(e){return e.y},Rae=function(e,t){if(et(e))return e;var r="curve".concat(qg(e));return(r==="curveMonotone"||r==="curveBump")&&t?Rk["".concat(r).concat(t==="vertical"?"Y":"X")]:Rk[r]||Hg},kae=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,a=i===void 0?[]:i,s=e.baseLine,l=e.layout,u=e.connectNulls,d=u===void 0?!1:u,f=Rae(r,l),m=d?a.filter(function(b){return Zm(b)}):a,g;if(Array.isArray(s)){var y=d?s.filter(function(b){return Zm(b)}):s,x=m.map(function(b,w){return Pk(Pk({},b),{},{base:y[w]})});return l==="vertical"?g=qm().y(Sd).x1(_d).x0(function(b){return b.base.x}):g=qm().x(_d).y1(Sd).y0(function(b){return b.base.y}),g.defined(Zm).curve(f),g(x)}return l==="vertical"&&be(s)?g=qm().y(Sd).x1(_d).x0(s):be(s)?g=qm().x(_d).y1(Sd).y0(s):g=s4().x(_d).y(Sd),g.defined(Zm).curve(f),g(m)},yS=function(e){var t=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?kae(e):i;return E.createElement("path",vS({},ft(e,!1),Ap(e),{className:at("recharts-curve",t),d:s,ref:a}))},A1={exports:{}},E1,kk;function Dae(){if(kk)return E1;kk=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return E1=n,E1}var T1,Dk;function Lae(){if(Dk)return T1;Dk=1;var n=Dae();function e(){}function t(){}return t.resetWarningCache=e,T1=function(){function r(s,l,u,d,f,m){if(m!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},T1}var Lk;function Iae(){return Lk||(Lk=1,A1.exports=Lae()()),A1.exports}var Bae=Iae();const xt=_t(Bae);var $ae=Object.getOwnPropertyNames,Fae=Object.getOwnPropertySymbols,Uae=Object.prototype.hasOwnProperty;function Ik(n,e){return function(r,i,a){return n(r,i,a)&&e(r,i,a)}}function Jm(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var a=i.cache,s=a.get(t),l=a.get(r);if(s&&l)return s===r&&l===t;a.set(t,r),a.set(r,t);var u=n(t,r,i);return a.delete(t),a.delete(r),u}}function qae(n){return n?.[Symbol.toStringTag]}function Bk(n){return $ae(n).concat(Fae(n))}var zae=Object.hasOwn||(function(n,e){return Uae.call(n,e)});function hl(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var Hae="__v",Vae="__o",Gae="_owner",$k=Object.getOwnPropertyDescriptor,Fk=Object.keys;function Wae(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function Yae(n,e){return hl(n.getTime(),e.getTime())}function Xae(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function Kae(n,e){return n===e}function Uk(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.entries(),s,l,u=0;(s=a.next())&&!s.done;){for(var d=e.entries(),f=!1,m=0;(l=d.next())&&!l.done;){if(i[m]){m++;continue}var g=s.value,y=l.value;if(t.equals(g[0],y[0],u,m,n,e,t)&&t.equals(g[1],y[1],g[0],y[0],n,e,t)){f=i[m]=!0;break}m++}if(!f)return!1;u++}return!0}var Zae=hl;function Jae(n,e,t){var r=Fk(n),i=r.length;if(Fk(e).length!==i)return!1;for(;i-- >0;)if(!r6(n,e,t,r[i]))return!1;return!0}function Ad(n,e,t){var r=Bk(n),i=r.length;if(Bk(e).length!==i)return!1;for(var a,s,l;i-- >0;)if(a=r[i],!r6(n,e,t,a)||(s=$k(n,a),l=$k(e,a),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function Qae(n,e){return hl(n.valueOf(),e.valueOf())}function ese(n,e){return n.source===e.source&&n.flags===e.flags}function qk(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.values(),s,l;(s=a.next())&&!s.done;){for(var u=e.values(),d=!1,f=0;(l=u.next())&&!l.done;){if(!i[f]&&t.equals(s.value,l.value,s.value,l.value,n,e,t)){d=i[f]=!0;break}f++}if(!d)return!1}return!0}function tse(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function nse(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function r6(n,e,t,r){return(r===Gae||r===Vae||r===Hae)&&(n.$$typeof||e.$$typeof)?!0:zae(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}var rse="[object Arguments]",ise="[object Boolean]",ase="[object Date]",sse="[object Error]",ose="[object Map]",lse="[object Number]",cse="[object Object]",use="[object RegExp]",dse="[object Set]",hse="[object String]",fse="[object URL]",mse=Array.isArray,zk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Hk=Object.assign,pse=Object.prototype.toString.call.bind(Object.prototype.toString);function gse(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,a=n.areMapsEqual,s=n.areNumbersEqual,l=n.areObjectsEqual,u=n.arePrimitiveWrappersEqual,d=n.areRegExpsEqual,f=n.areSetsEqual,m=n.areTypedArraysEqual,g=n.areUrlsEqual,y=n.unknownTagComparators;return function(b,w,S){if(b===w)return!0;if(b==null||w==null)return!1;var O=typeof b;if(O!==typeof w)return!1;if(O!=="object")return O==="number"?s(b,w,S):O==="function"?i(b,w,S):!1;var T=b.constructor;if(T!==w.constructor)return!1;if(T===Object)return l(b,w,S);if(mse(b))return e(b,w,S);if(zk!=null&&zk(b))return m(b,w,S);if(T===Date)return t(b,w,S);if(T===RegExp)return d(b,w,S);if(T===Map)return a(b,w,S);if(T===Set)return f(b,w,S);var M=pse(b);if(M===ase)return t(b,w,S);if(M===use)return d(b,w,S);if(M===ose)return a(b,w,S);if(M===dse)return f(b,w,S);if(M===cse)return typeof b.then!="function"&&typeof w.then!="function"&&l(b,w,S);if(M===fse)return g(b,w,S);if(M===sse)return r(b,w,S);if(M===rse)return l(b,w,S);if(M===ise||M===lse||M===hse)return u(b,w,S);if(y){var N=y[M];if(!N){var j=qae(b);j&&(N=y[j])}if(N)return N(b,w,S)}return!1}}function vse(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?Ad:Wae,areDatesEqual:Yae,areErrorsEqual:Xae,areFunctionsEqual:Kae,areMapsEqual:r?Ik(Uk,Ad):Uk,areNumbersEqual:Zae,areObjectsEqual:r?Ad:Jae,arePrimitiveWrappersEqual:Qae,areRegExpsEqual:ese,areSetsEqual:r?Ik(qk,Ad):qk,areTypedArraysEqual:r?Ad:tse,areUrlsEqual:nse,unknownTagComparators:void 0};if(t&&(i=Hk({},i,t(i))),e){var a=Jm(i.areArraysEqual),s=Jm(i.areMapsEqual),l=Jm(i.areObjectsEqual),u=Jm(i.areSetsEqual);i=Hk({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:l,areSetsEqual:u})}return i}function yse(n){return function(e,t,r,i,a,s,l){return n(e,t,l)}}function bse(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,a=n.strict;if(r)return function(u,d){var f=r(),m=f.cache,g=m===void 0?e?new WeakMap:void 0:m,y=f.meta;return t(u,d,{cache:g,equals:i,meta:y,strict:a})};if(e)return function(u,d){return t(u,d,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(u,d){return t(u,d,s)}}var wse=Js();Js({strict:!0});Js({circular:!0});Js({circular:!0,strict:!0});Js({createInternalComparator:function(){return hl}});Js({strict:!0,createInternalComparator:function(){return hl}});Js({circular:!0,createInternalComparator:function(){return hl}});Js({circular:!0,createInternalComparator:function(){return hl},strict:!0});function Js(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,a=n.strict,s=a===void 0?!1:a,l=vse(n),u=gse(l),d=r?r(u):yse(u);return bse({circular:t,comparator:u,createState:i,equals:d,strict:s})}function xse(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function Vk(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(a){t<0&&(t=a),a-t>e?(n(a),t=-1):xse(i)};requestAnimationFrame(r)}function bS(n){"@babel/helpers - typeof";return bS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bS(n)}function _se(n){return Tse(n)||Ese(n)||Ase(n)||Sse()}function Sse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ase(n,e){if(n){if(typeof n=="string")return Gk(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gk(n,e)}}function Gk(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ese(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Tse(n){if(Array.isArray(n))return n}function Ose(){var n={},e=function(){return null},t=!1,r=function i(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var s=a,l=_se(s),u=l[0],d=l.slice(1);if(typeof u=="number"){Vk(i.bind(null,d),u);return}i(u),Vk(i.bind(null,d));return}bS(a)==="object"&&(n=a,e(n)),typeof a=="function"&&a()}};return{stop:function(){t=!0},start:function(a){t=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Th(n){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(n)}function Wk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wk(Object(t),!0).forEach(function(r){i6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function i6(n,e,t){return e=Cse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cse(n){var e=jse(n,"string");return Th(e)==="symbol"?e:String(e)}function jse(n,e){if(Th(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Th(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Nse=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Mse=function(e){return e},Pse=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},qd=function(e,t){return Object.keys(t).reduce(function(r,i){return Yk(Yk({},r),{},i6({},i,e(i,t[i])))},{})},Xk=function(e,t,r){return e.map(function(i){return"".concat(Pse(i)," ").concat(t,"ms ").concat(r)}).join(",")};function Rse(n,e){return Lse(n)||Dse(n,e)||a6(n,e)||kse()}function kse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dse(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function Lse(n){if(Array.isArray(n))return n}function Ise(n){return Fse(n)||$se(n)||a6(n)||Bse()}function Bse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a6(n,e){if(n){if(typeof n=="string")return wS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wS(n,e)}}function $se(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Fse(n){if(Array.isArray(n))return wS(n)}function wS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var Qp=1e-4,s6=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},o6=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},Kk=function(e,t){return function(r){var i=s6(e,t);return o6(i,r)}},Use=function(e,t){return function(r){var i=s6(e,t),a=[].concat(Ise(i.map(function(s,l){return s*l}).slice(1)),[0]);return o6(a,r)}},Zk=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],s=t[2],l=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,a=0,s=1,l=1;break;case"ease":i=.25,a=.1,s=.25,l=1;break;case"ease-in":i=.42,a=0,s=1,l=1;break;case"ease-out":i=.42,a=0,s=.58,l=1;break;case"ease-in-out":i=0,a=0,s=.58,l=1;break;default:{var u=t[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var d=u[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=Rse(d,4);i=f[0],a=f[1],s=f[2],l=f[3]}}}var m=Kk(i,s),g=Kk(a,l),y=Use(i,s),x=function(S){return S>1?1:S<0?0:S},b=function(S){for(var O=S>1?1:S,T=O,M=0;M<8;++M){var N=m(T)-O,j=y(T);if(Math.abs(N-O)<Qp||j<Qp)return g(T);T=x(T-N/j)}return g(T)};return b.isStepper=!1,b},qse=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,a=i===void 0?8:i,s=e.dt,l=s===void 0?17:s,u=function(f,m,g){var y=-(f-m)*r,x=g*a,b=g+(y-x)*l/1e3,w=g*l/1e3+f;return Math.abs(w-m)<Qp&&Math.abs(b)<Qp?[m,0]:[w,b]};return u.isStepper=!0,u.dt=l,u},zse=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Zk(i);case"spring":return qse();default:if(i.split("(")[0]==="cubic-bezier")return Zk(i)}return typeof i=="function"?i:null};function Oh(n){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(n)}function Jk(n){return Gse(n)||Vse(n)||l6(n)||Hse()}function Hse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vse(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Gse(n){if(Array.isArray(n))return _S(n)}function Qk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qk(Object(t),!0).forEach(function(r){xS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xS(n,e,t){return e=Wse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wse(n){var e=Yse(n,"string");return Oh(e)==="symbol"?e:String(e)}function Yse(n,e){if(Oh(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Oh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Xse(n,e){return Jse(n)||Zse(n,e)||l6(n,e)||Kse()}function Kse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l6(n,e){if(n){if(typeof n=="string")return _S(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _S(n,e)}}function _S(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Zse(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function Jse(n){if(Array.isArray(n))return n}var eg=function(e,t,r){return e+(t-e)*r},SS=function(e){var t=e.from,r=e.to;return t!==r},Qse=function n(e,t,r){var i=qd(function(a,s){if(SS(s)){var l=e(s.from,s.to,s.velocity),u=Xse(l,2),d=u[0],f=u[1];return Wn(Wn({},s),{},{from:d,velocity:f})}return s},t);return r<1?qd(function(a,s){return SS(s)?Wn(Wn({},s),{},{velocity:eg(s.velocity,i[a].velocity,r),from:eg(s.from,i[a].from,r)}):s},t):n(e,i,r-1)};const eoe=(function(n,e,t,r,i){var a=Nse(n,e),s=a.reduce(function(w,S){return Wn(Wn({},w),{},xS({},S,[n[S],e[S]]))},{}),l=a.reduce(function(w,S){return Wn(Wn({},w),{},xS({},S,{from:n[S],velocity:0,to:e[S]}))},{}),u=-1,d,f,m=function(){return null},g=function(){return qd(function(S,O){return O.from},l)},y=function(){return!Object.values(l).filter(SS).length},x=function(S){d||(d=S);var O=S-d,T=O/t.dt;l=Qse(t,l,T),i(Wn(Wn(Wn({},n),e),g())),d=S,y()||(u=requestAnimationFrame(m))},b=function(S){f||(f=S);var O=(S-f)/r,T=qd(function(N,j){return eg.apply(void 0,Jk(j).concat([t(O)]))},s);if(i(Wn(Wn(Wn({},n),e),T)),O<1)u=requestAnimationFrame(m);else{var M=qd(function(N,j){return eg.apply(void 0,Jk(j).concat([t(1)]))},s);i(Wn(Wn(Wn({},n),e),M))}};return m=t.isStepper?x:b,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(u)}}});function Vc(n){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(n)}var toe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function noe(n,e){if(n==null)return{};var t=roe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function roe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function O1(n){return ooe(n)||soe(n)||aoe(n)||ioe()}function ioe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aoe(n,e){if(n){if(typeof n=="string")return AS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return AS(n,e)}}function soe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ooe(n){if(Array.isArray(n))return AS(n)}function AS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function eD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ci(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eD(Object(t),!0).forEach(function(r){Rd(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Rd(n,e,t){return e=c6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function loe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function coe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,c6(r.key),r)}}function uoe(n,e,t){return e&&coe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function c6(n){var e=doe(n,"string");return Vc(e)==="symbol"?e:String(e)}function doe(n,e){if(Vc(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Vc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function hoe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&ES(n,e)}function ES(n,e){return ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ES(n,e)}function foe(n){var e=moe();return function(){var r=tg(n),i;if(e){var a=tg(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return TS(this,i)}}function TS(n,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OS(n)}function OS(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function moe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tg(n){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tg(n)}var Za=(function(n){hoe(t,n);var e=foe(t);function t(r,i){var a;loe(this,t),a=e.call(this,r,i);var s=a.props,l=s.isActive,u=s.attributeName,d=s.from,f=s.to,m=s.steps,g=s.children,y=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(OS(a)),a.changeStyle=a.changeStyle.bind(OS(a)),!l||y<=0)return a.state={style:{}},typeof g=="function"&&(a.state={style:f}),TS(a);if(m&&m.length)a.state={style:m[0].style};else if(d){if(typeof g=="function")return a.state={style:d},TS(a);a.state={style:u?Rd({},u,d):d}}else a.state={style:{}};return a}return uoe(t,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,l=a.canBegin,u=a.attributeName,d=a.shouldReAnimate,f=a.to,m=a.from,g=this.state.style;if(l){if(!s){var y={style:u?Rd({},u,f):f};this.state&&g&&(u&&g[u]!==f||!u&&g!==f)&&this.setState(y);return}if(!(wse(i.to,f)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=x||d?m:i.to;if(this.state&&g){var w={style:u?Rd({},u,b):b};(u&&g[u]!==b||!u&&g!==b)&&this.setState(w)}this.runAnimation(Ci(Ci({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,l=i.to,u=i.duration,d=i.easing,f=i.begin,m=i.onAnimationEnd,g=i.onAnimationStart,y=eoe(s,l,zse(d),u,this.changeStyle),x=function(){a.stopJSAnimation=y()};this.manager.start([g,f,x,u,m])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,l=i.begin,u=i.onAnimationStart,d=s[0],f=d.style,m=d.duration,g=m===void 0?0:m,y=function(b,w,S){if(S===0)return b;var O=w.duration,T=w.easing,M=T===void 0?"ease":T,N=w.style,j=w.properties,C=w.onAnimationEnd,R=S>0?s[S-1]:w,k=j||Object.keys(N);if(typeof M=="function"||M==="spring")return[].concat(O1(b),[a.runJSAnimation.bind(a,{from:R.style,to:N,duration:O,easing:M}),O]);var F=Xk(k,O,M),D=Ci(Ci(Ci({},R.style),N),{},{transition:F});return[].concat(O1(b),[D,O,C]).filter(Mse)};return this.manager.start([u].concat(O1(s.reduce(y,[f,Math.max(g,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Ose());var a=i.begin,s=i.duration,l=i.attributeName,u=i.to,d=i.easing,f=i.onAnimationStart,m=i.onAnimationEnd,g=i.steps,y=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof y=="function"||d==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var b=l?Rd({},l,u):u,w=Xk(Object.keys(b),s,d);x.start([f,a,Ci(Ci({},b),{},{transition:w}),s,m])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var u=noe(i,toe),d=E.Children.count(a),f=this.state.style;if(typeof a=="function")return a(f);if(!l||d===0||s<=0)return a;var m=function(y){var x=y.props,b=x.style,w=b===void 0?{}:b,S=x.className,O=E.cloneElement(y,Ci(Ci({},u),{},{style:Ci(Ci({},w),f),className:S}));return O};return d===1?m(E.Children.only(a)):Z.createElement("div",null,E.Children.map(a,function(g){return m(g)}))}}]),t})(E.PureComponent);Za.displayName="Animate";Za.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Za.propTypes={from:xt.oneOfType([xt.object,xt.string]),to:xt.oneOfType([xt.object,xt.string]),attributeName:xt.string,duration:xt.number,begin:xt.number,easing:xt.oneOfType([xt.string,xt.func]),steps:xt.arrayOf(xt.shape({duration:xt.number.isRequired,style:xt.object.isRequired,easing:xt.oneOfType([xt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xt.func]),properties:xt.arrayOf("string"),onAnimationEnd:xt.func})),children:xt.oneOfType([xt.node,xt.func]),isActive:xt.bool,canBegin:xt.bool,onAnimationEnd:xt.func,shouldReAnimate:xt.bool,onAnimationStart:xt.func,onAnimationReStart:xt.func};function Ch(n){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(n)}function ng(){return ng=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ng.apply(this,arguments)}function poe(n,e){return boe(n)||yoe(n,e)||voe(n,e)||goe()}function goe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function voe(n,e){if(n){if(typeof n=="string")return tD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tD(n,e)}}function tD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function yoe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function boe(n){if(Array.isArray(n))return n}function nD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function rD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(t),!0).forEach(function(r){woe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function woe(n,e,t){return e=xoe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xoe(n){var e=_oe(n,"string");return Ch(e)=="symbol"?e:e+""}function _oe(n,e){if(Ch(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var iD=function(e,t,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,u=r>=0?1:-1,d=i>=0&&r>=0||i<0&&r<0?1:0,f;if(s>0&&a instanceof Array){for(var m=[0,0,0,0],g=0,y=4;g<y;g++)m[g]=a[g]>s?s:a[g];f="M".concat(e,",").concat(t+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(e+u*m[0],",").concat(t)),f+="L ".concat(e+r-u*m[1],",").concat(t),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*m[1])),f+="L ".concat(e+r,",").concat(t+i-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(e+r-u*m[2],",").concat(t+i)),f+="L ".concat(e+u*m[3],",").concat(t+i),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+i-l*m[3])),f+="Z"}else if(s>0&&a===+a&&a>0){var x=Math.min(s,a);f="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+i-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+i,`
            L `).concat(e+u*x,",").concat(t+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+i-l*x," Z")}else f="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},Soe=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,a=t.x,s=t.y,l=t.width,u=t.height;if(Math.abs(l)>0&&Math.abs(u)>0){var d=Math.min(a,a+l),f=Math.max(a,a+l),m=Math.min(s,s+u),g=Math.max(s,s+u);return r>=d&&r<=f&&i>=m&&i<=g}return!1},Aoe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},PE=function(e){var t=rD(rD({},Aoe),e),r=E.useRef(),i=E.useState(-1),a=poe(i,2),s=a[0],l=a[1];E.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var M=r.current.getTotalLength();M&&l(M)}catch{}},[]);var u=t.x,d=t.y,f=t.width,m=t.height,g=t.radius,y=t.className,x=t.animationEasing,b=t.animationDuration,w=t.animationBegin,S=t.isAnimationActive,O=t.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||m!==+m||f===0||m===0)return null;var T=at("recharts-rectangle",y);return O?Z.createElement(Za,{canBegin:s>0,from:{width:f,height:m,x:u,y:d},to:{width:f,height:m,x:u,y:d},duration:b,animationEasing:x,isActive:O},function(M){var N=M.width,j=M.height,C=M.x,R=M.y;return Z.createElement(Za,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:b,isActive:S,easing:x},Z.createElement("path",ng({},ft(t,!0),{className:T,d:iD(C,R,N,j,g),ref:r})))}):Z.createElement("path",ng({},ft(t,!0),{className:T,d:iD(u,d,f,m,g)}))};function CS(){return CS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CS.apply(this,arguments)}var RE=function(e){var t=e.cx,r=e.cy,i=e.r,a=e.className,s=at("recharts-dot",a);return t===+t&&r===+r&&i===+i?E.createElement("circle",CS({},ft(e,!1),Ap(e),{className:s,cx:t,cy:r,r:i})):null};function jh(n){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(n)}var Eoe=["x","y","top","left","width","height","className"];function jS(){return jS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jS.apply(this,arguments)}function aD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Toe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(t),!0).forEach(function(r){Ooe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ooe(n,e,t){return e=Coe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Coe(n){var e=joe(n,"string");return jh(e)=="symbol"?e:e+""}function joe(n,e){if(jh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Noe(n,e){if(n==null)return{};var t=Moe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Moe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Poe=function(e,t,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(t,"h").concat(r)},Roe=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.top,l=s===void 0?0:s,u=e.left,d=u===void 0?0:u,f=e.width,m=f===void 0?0:f,g=e.height,y=g===void 0?0:g,x=e.className,b=Noe(e,Eoe),w=Toe({x:r,y:a,top:l,left:d,width:m,height:y},b);return!be(r)||!be(a)||!be(m)||!be(y)||!be(l)||!be(d)?null:Z.createElement("path",jS({},ft(w,!0),{className:at("recharts-cross",x),d:Poe(r,a,m,y,l,d)}))},C1,sD;function koe(){if(sD)return C1;sD=1;var n=j4(),e=n(Object.getPrototypeOf,Object);return C1=e,C1}var j1,oD;function Doe(){if(oD)return j1;oD=1;var n=ts(),e=koe(),t=ns(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,l=a.hasOwnProperty,u=s.call(Object);function d(f){if(!t(f)||n(f)!=r)return!1;var m=e(f);if(m===null)return!0;var g=l.call(m,"constructor")&&m.constructor;return typeof g=="function"&&g instanceof g&&s.call(g)==u}return j1=d,j1}var Loe=Doe();const Ioe=_t(Loe);var N1,lD;function Boe(){if(lD)return N1;lD=1;var n=ts(),e=ns(),t="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&n(i)==t}return N1=r,N1}var $oe=Boe();const Foe=_t($oe);function Nh(n){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(n)}function rg(){return rg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rg.apply(this,arguments)}function Uoe(n,e){return Voe(n)||Hoe(n,e)||zoe(n,e)||qoe()}function qoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zoe(n,e){if(n){if(typeof n=="string")return cD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cD(n,e)}}function cD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Hoe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function Voe(n){if(Array.isArray(n))return n}function uD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(t),!0).forEach(function(r){Goe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Goe(n,e,t){return e=Woe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Woe(n){var e=Yoe(n,"string");return Nh(e)=="symbol"?e:e+""}function Yoe(n,e){if(Nh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var hD=function(e,t,r,i,a){var s=r-i,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-s/2,",").concat(t+a),l+="L ".concat(e+r-s/2-i,",").concat(t+a),l+="L ".concat(e,",").concat(t," Z"),l},Xoe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Koe=function(e){var t=dD(dD({},Xoe),e),r=E.useRef(),i=E.useState(-1),a=Uoe(i,2),s=a[0],l=a[1];E.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&l(T)}catch{}},[]);var u=t.x,d=t.y,f=t.upperWidth,m=t.lowerWidth,g=t.height,y=t.className,x=t.animationEasing,b=t.animationDuration,w=t.animationBegin,S=t.isUpdateAnimationActive;if(u!==+u||d!==+d||f!==+f||m!==+m||g!==+g||f===0&&m===0||g===0)return null;var O=at("recharts-trapezoid",y);return S?Z.createElement(Za,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:g,x:u,y:d},to:{upperWidth:f,lowerWidth:m,height:g,x:u,y:d},duration:b,animationEasing:x,isActive:S},function(T){var M=T.upperWidth,N=T.lowerWidth,j=T.height,C=T.x,R=T.y;return Z.createElement(Za,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:b,easing:x},Z.createElement("path",rg({},ft(t,!0),{className:O,d:hD(C,R,M,N,j),ref:r})))}):Z.createElement("g",null,Z.createElement("path",rg({},ft(t,!0),{className:O,d:hD(u,d,f,m,g)})))},Zoe=["option","shapeType","propTransformer","activeClassName","isActive"];function Mh(n){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(n)}function Joe(n,e){if(n==null)return{};var t=Qoe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Qoe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function fD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ig(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(t),!0).forEach(function(r){ele(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ele(n,e,t){return e=tle(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tle(n){var e=nle(n,"string");return Mh(e)=="symbol"?e:e+""}function nle(n,e){if(Mh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rle(n,e){return ig(ig({},e),n)}function ile(n,e){return n==="symbols"}function mD(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return Z.createElement(PE,t);case"trapezoid":return Z.createElement(Koe,t);case"sector":return Z.createElement(n6,t);case"symbols":if(ile(e))return Z.createElement(ZA,t);break;default:return null}}function ale(n){return E.isValidElement(n)?n.props:n}function sle(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?rle:r,a=n.activeClassName,s=a===void 0?"recharts-active-shape":a,l=n.isActive,u=Joe(n,Zoe),d;if(E.isValidElement(e))d=E.cloneElement(e,ig(ig({},u),ale(e)));else if(et(e))d=e(u);else if(Ioe(e)&&!Foe(e)){var f=i(e,u);d=Z.createElement(mD,{shapeType:t,elementProps:f})}else{var m=u;d=Z.createElement(mD,{shapeType:t,elementProps:m})}return l?Z.createElement(dn,{className:s},d):d}function sv(n,e){return e!=null&&"trapezoids"in n.props}function ov(n,e){return e!=null&&"sectors"in n.props}function Ph(n,e){return e!=null&&"points"in n.props}function ole(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,a=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&a}function lle(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function cle(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function ule(n,e){var t;return sv(n,e)?t=ole:ov(n,e)?t=lle:Ph(n,e)&&(t=cle),t}function dle(n,e){var t;return sv(n,e)?t="trapezoids":ov(n,e)?t="sectors":Ph(n,e)&&(t="points"),t}function hle(n,e){if(sv(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(ov(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Ph(n,e)?e.payload:{}}function fle(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=dle(t,e),a=hle(t,e),s=r.filter(function(u,d){var f=rv(a,u),m=t.props[i].filter(function(x){var b=ule(t,e);return b(x,e)}),g=t.props[i].indexOf(m[m.length-1]),y=d===g;return f&&y}),l=r.indexOf(s[s.length-1]);return l}var M1,pD;function mle(){if(pD)return M1;pD=1;var n=Math.ceil,e=Math.max;function t(r,i,a,s){for(var l=-1,u=e(n((i-r)/(a||1)),0),d=Array(u);u--;)d[s?u:++l]=r,r+=a;return d}return M1=t,M1}var P1,gD;function u6(){if(gD)return P1;gD=1;var n=V4(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return P1=r,P1}var R1,vD;function ple(){if(vD)return R1;vD=1;var n=mle(),e=Yg(),t=u6();function r(i){return function(a,s,l){return l&&typeof l!="number"&&e(a,s,l)&&(s=l=void 0),a=t(a),s===void 0?(s=a,a=0):s=t(s),l=l===void 0?a<s?1:-1:t(l),n(a,s,l,i)}}return R1=r,R1}var k1,yD;function gle(){if(yD)return k1;yD=1;var n=ple(),e=n();return k1=e,k1}var vle=gle();const ag=_t(vle);function Rh(n){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(n)}function bD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(t),!0).forEach(function(r){d6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function d6(n,e,t){return e=yle(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yle(n){var e=ble(n,"string");return Rh(e)=="symbol"?e:e+""}function ble(n,e){if(Rh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var wle=["Webkit","Moz","O","ms"],xle=function(e,t){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=wle.reduce(function(a,s){return wD(wD({},a),{},d6({},s+r,t))},{});return i[e]=t,i};function Gc(n){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(n)}function sg(){return sg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sg.apply(this,arguments)}function xD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function D1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(t),!0).forEach(function(r){Br(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _le(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _D(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,f6(r.key),r)}}function Sle(n,e,t){return e&&_D(n.prototype,e),t&&_D(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ale(n,e,t){return e=og(e),Ele(n,h6()?Reflect.construct(e,t||[],og(n).constructor):e.apply(n,t))}function Ele(n,e){if(e&&(Gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tle(n)}function Tle(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function h6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h6=function(){return!!n})()}function og(n){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},og(n)}function Ole(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&NS(n,e)}function NS(n,e){return NS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NS(n,e)}function Br(n,e,t){return e=f6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f6(n){var e=Cle(n,"string");return Gc(e)=="symbol"?e:e+""}function Cle(n,e){if(Gc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Gc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var jle=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,l=e.travellerWidth;if(!t||!t.length)return{};var u=t.length,d=Fd().domain(ag(0,u)).range([a,a+s-l]),f=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(r),endX:d(i),scale:d,scaleValues:f}},SD=function(e){return e.changedTouches&&!!e.changedTouches.length},Wc=(function(n){function e(t){var r;return _le(this,e),r=Ale(this,e,[t]),Br(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Br(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Br(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,l=i.startIndex;s?.({endIndex:a,startIndex:l})}),r.detachDragEndListener()}),Br(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Br(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Br(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Br(r,"handleSlideDragStart",function(i){var a=SD(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Ole(e,n),Sle(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,l=this.props,u=l.gap,d=l.data,f=d.length-1,m=Math.min(i,a),g=Math.max(i,a),y=e.getIndexInRange(s,m),x=e.getIndexInRange(s,g);return{startIndex:y-y%u,endIndex:x===f?f:x-x%u}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,l=i.dataKey,u=Xr(a[r],l,r);return et(s)?s(u,r):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,l=i.endX,u=this.props,d=u.x,f=u.width,m=u.travellerWidth,g=u.startIndex,y=u.endIndex,x=u.onChange,b=r.pageX-a;b>0?b=Math.min(b,d+f-m-l,d+f-m-s):b<0&&(b=Math.max(b,d-s,d-l));var w=this.getIndex({startX:s+b,endX:l+b});(w.startIndex!==g||w.endIndex!==y)&&x&&x(w),this.setState({startX:s+b,endX:l+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=SD(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,l=i.endX,u=i.startX,d=this.state[s],f=this.props,m=f.x,g=f.width,y=f.travellerWidth,x=f.onChange,b=f.gap,w=f.data,S={startX:this.state.startX,endX:this.state.endX},O=r.pageX-a;O>0?O=Math.min(O,m+g-y-d):O<0&&(O=Math.max(O,m-d)),S[s]=d+O;var T=this.getIndex(S),M=T.startIndex,N=T.endIndex,j=function(){var R=w.length-1;return s==="startX"&&(l>u?M%b===0:N%b===0)||l<u&&N===R||s==="endX"&&(l>u?N%b===0:M%b===0)||l>u&&N===R};this.setState(Br(Br({},s,d+O),"brushMoveStartX",r.pageX),function(){x&&j()&&x(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,l=s.scaleValues,u=s.startX,d=s.endX,f=this.state[i],m=l.indexOf(f);if(m!==-1){var g=m+r;if(!(g===-1||g>=l.length)){var y=l[g];i==="startX"&&y>=d||i==="endX"&&y<=u||this.setState(Br({},i,y),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,l=r.height,u=r.fill,d=r.stroke;return Z.createElement("rect",{stroke:d,fill:u,x:i,y:a,width:s,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,l=r.height,u=r.data,d=r.children,f=r.padding,m=E.Children.only(d);return m?Z.cloneElement(m,{x:i,y:a,width:s,height:l,margin:f,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,l=this,u=this.props,d=u.y,f=u.travellerWidth,m=u.height,g=u.traveller,y=u.ariaLabel,x=u.data,b=u.startIndex,w=u.endIndex,S=Math.max(r,this.props.x),O=D1(D1({},ft(this.props,!1)),{},{x:S,y:d,width:f,height:m}),T=y||"Min value: ".concat((a=x[b])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=x[w])===null||s===void 0?void 0:s.name);return Z.createElement(dn,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(g,O))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,l=a.height,u=a.stroke,d=a.travellerWidth,f=Math.min(r,i)+d,m=Math.max(Math.abs(i-r)-d,0);return Z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:f,y:s,width:m,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,l=r.height,u=r.travellerWidth,d=r.stroke,f=this.state,m=f.startX,g=f.endX,y=5,x={pointerEvents:"none",fill:d};return Z.createElement(dn,{className:"recharts-brush-texts"},Z.createElement(Lp,sg({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,g)-y,y:s+l/2},x),this.getTextOfTick(i)),Z.createElement(Lp,sg({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,g)+u+y,y:s+l/2},x),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,l=r.x,u=r.y,d=r.width,f=r.height,m=r.alwaysShowText,g=this.state,y=g.startX,x=g.endX,b=g.isTextActive,w=g.isSlideMoving,S=g.isTravellerMoving,O=g.isTravellerFocused;if(!i||!i.length||!be(l)||!be(u)||!be(d)||!be(f)||d<=0||f<=0)return null;var T=at("recharts-brush",a),M=Z.Children.count(s)===1,N=xle("userSelect","none");return Z.createElement(dn,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),M&&this.renderPanorama(),this.renderSlide(y,x),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(x,"endX"),(b||w||S||O||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,l=r.height,u=r.stroke,d=Math.floor(a+l/2)-1;return Z.createElement(Z.Fragment,null,Z.createElement("rect",{x:i,y:a,width:s,height:l,fill:u,stroke:"none"}),Z.createElement("line",{x1:i+1,y1:d,x2:i+s-1,y2:d,fill:"none",stroke:"#fff"}),Z.createElement("line",{x1:i+1,y1:d+2,x2:i+s-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return Z.isValidElement(r)?a=Z.cloneElement(r,i):et(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,l=r.x,u=r.travellerWidth,d=r.updateId,f=r.startIndex,m=r.endIndex;if(a!==i.prevData||d!==i.prevUpdateId)return D1({prevData:a,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:s},a&&a.length?jle({data:a,width:s,x:l,travellerWidth:u,startIndex:f,endIndex:m}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||l!==i.prevX||u!==i.prevTravellerWidth)){i.scale.range([l,l+s-u]);var g=i.scale.domain().map(function(y){return i.scale(y)});return{prevData:a,prevTravellerWidth:u,prevUpdateId:d,prevX:l,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,l=a-1;l-s>1;){var u=Math.floor((s+l)/2);r[u]>i?l=u:s=u}return i>=r[l]?l:s}}])})(E.PureComponent);Br(Wc,"displayName","Brush");Br(Wc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var L1,AD;function Nle(){if(AD)return L1;AD=1;var n=iE();function e(t,r){var i;return n(t,function(a,s,l){return i=r(a,s,l),!i}),!!i}return L1=e,L1}var I1,ED;function Mle(){if(ED)return I1;ED=1;var n=_4(),e=Xs(),t=Nle(),r=Or(),i=Yg();function a(s,l,u){var d=r(s)?n:t;return u&&i(s,l,u)&&(l=void 0),d(s,e(l,3))}return I1=a,I1}var Ple=Mle();const Rle=_t(Ple);var oa=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},B1,TD;function kle(){if(TD)return B1;TD=1;var n=F4();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return B1=e,B1}var $1,OD;function Dle(){if(OD)return $1;OD=1;var n=kle(),e=B4(),t=Xs();function r(i,a){var s={};return a=t(a,3),e(i,function(l,u,d){n(s,u,a(l,u,d))}),s}return $1=r,$1}var Lle=Dle();const Ile=_t(Lle);var F1,CD;function Ble(){if(CD)return F1;CD=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}return F1=n,F1}var U1,jD;function $le(){if(jD)return U1;jD=1;var n=iE();function e(t,r){var i=!0;return n(t,function(a,s,l){return i=!!r(a,s,l),i}),i}return U1=e,U1}var q1,ND;function Fle(){if(ND)return q1;ND=1;var n=Ble(),e=$le(),t=Xs(),r=Or(),i=Yg();function a(s,l,u){var d=r(s)?n:e;return u&&i(s,l,u)&&(l=void 0),d(s,t(l,3))}return q1=a,q1}var Ule=Fle();const m6=_t(Ule);var qle=["x","y"];function kh(n){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(n)}function MS(){return MS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},MS.apply(this,arguments)}function MD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ed(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(t),!0).forEach(function(r){zle(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zle(n,e,t){return e=Hle(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hle(n){var e=Vle(n,"string");return kh(e)=="symbol"?e:e+""}function Vle(n,e){if(kh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Gle(n,e){if(n==null)return{};var t=Wle(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Wle(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Yle(n,e){var t=n.x,r=n.y,i=Gle(n,qle),a="".concat(t),s=parseInt(a,10),l="".concat(r),u=parseInt(l,10),d="".concat(e.height||i.height),f=parseInt(d,10),m="".concat(e.width||i.width),g=parseInt(m,10);return Ed(Ed(Ed(Ed(Ed({},e),i),s?{x:s}:{}),u?{y:u}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function PD(n){return Z.createElement(sle,MS({shapeType:"rectangle",propTransformer:Yle,activeClassName:"recharts-active-bar"},n))}var Xle=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=be(r)||aK(r);return a?e(r,i):(a||pt(!1),t)}},Kle=["value","background"],p6;function Yc(n){"@babel/helpers - typeof";return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(n)}function Zle(n,e){if(n==null)return{};var t=Jle(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Jle(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function lg(){return lg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lg.apply(this,arguments)}function RD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(t),!0).forEach(function(r){$s(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):RD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qle(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,v6(r.key),r)}}function ece(n,e,t){return e&&kD(n.prototype,e),t&&kD(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function tce(n,e,t){return e=cg(e),nce(n,g6()?Reflect.construct(e,t||[],cg(n).constructor):e.apply(n,t))}function nce(n,e){if(e&&(Yc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rce(n)}function rce(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function g6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g6=function(){return!!n})()}function cg(n){return cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cg(n)}function ice(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&PS(n,e)}function PS(n,e){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PS(n,e)}function $s(n,e,t){return e=v6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v6(n){var e=ace(n,"string");return Yc(e)=="symbol"?e:e+""}function ace(n,e){if(Yc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Yc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var fl=(function(n){function e(){var t;Qle(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=tce(this,e,[].concat(i)),$s(t,"state",{isAnimationFinished:!1}),$s(t,"id",ef("recharts-bar-")),$s(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),s&&s()}),$s(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),s&&s()}),t}return ice(e,n),ece(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,l=a.dataKey,u=a.activeIndex,d=a.activeBar,f=ft(this.props,!1);return r&&r.map(function(m,g){var y=g===u,x=y?d:s,b=wn(wn(wn({},f),m),{},{isActive:y,option:x,index:g,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Z.createElement(dn,lg({className:"recharts-bar-rectangle"},Ep(i.props,m,g),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(g)}),Z.createElement(PD,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,l=i.isAnimationActive,u=i.animationBegin,d=i.animationDuration,f=i.animationEasing,m=i.animationId,g=this.state.prevData;return Z.createElement(Za,{begin:u,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t,b=a.map(function(w,S){var O=g&&g[S];if(O){var T=Ii(O.x,w.x),M=Ii(O.y,w.y),N=Ii(O.width,w.width),j=Ii(O.height,w.height);return wn(wn({},w),{},{x:T(x),y:M(x),width:N(x),height:j(x)})}if(s==="horizontal"){var C=Ii(0,w.height),R=C(x);return wn(wn({},w),{},{y:w.y+w.height-R,height:R})}var k=Ii(0,w.width),F=k(x);return wn(wn({},w),{},{width:F})});return Z.createElement(dn,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!rv(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,l=i.activeIndex,u=ft(this.props.background,!1);return a.map(function(d,f){d.value;var m=d.background,g=Zle(d,Kle);if(!m)return null;var y=wn(wn(wn(wn(wn({},g),{},{fill:"#eee"},m),u),Ep(r.props,d,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:f,className:"recharts-bar-background-rectangle"});return Z.createElement(PD,lg({key:"background-bar-".concat(f),option:r.props.background,isActive:f===l},y))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,l=a.xAxis,u=a.yAxis,d=a.layout,f=a.children,m=bi(f,of);if(!m)return null;var g=d==="vertical"?s[0].height/2:s[0].width/2,y=function(w,S){var O=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:O,errorVal:Xr(w,S)}},x={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Z.createElement(dn,x,m.map(function(b){return Z.cloneElement(b,{key:"error-bar-".concat(i,"-").concat(b.props.dataKey),data:s,xAxis:l,yAxis:u,layout:d,offset:g,dataPointFormatter:y})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,l=r.xAxis,u=r.yAxis,d=r.left,f=r.top,m=r.width,g=r.height,y=r.isAnimationActive,x=r.background,b=r.id;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,S=at("recharts-bar",s),O=l&&l.allowDataOverflow,T=u&&u.allowDataOverflow,M=O||T,N=st(b)?this.id:b;return Z.createElement(dn,{className:S},O||T?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(N)},Z.createElement("rect",{x:O?d:d-m/2,y:T?f:f-g/2,width:O?m:m*2,height:T?g:g*2}))):null,Z.createElement(dn,{className:"recharts-bar-rectangles",clipPath:M?"url(#clipPath-".concat(N,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(M,N),(!y||w)&&zs.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(E.PureComponent);p6=fl;$s(fl,"displayName","Bar");$s(fl,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!mu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});$s(fl,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,a=n.xAxis,s=n.yAxis,l=n.xAxisTicks,u=n.yAxisTicks,d=n.stackedData,f=n.dataStartIndex,m=n.displayedData,g=n.offset,y=Sie(r,t);if(!y)return null;var x=e.layout,b=t.type.defaultProps,w=b!==void 0?wn(wn({},b),t.props):t.props,S=w.dataKey,O=w.children,T=w.minPointSize,M=x==="horizontal"?s:a,N=d?M.scale.domain():null,j=Mie({numericAxis:M}),C=bi(O,W4),R=m.map(function(k,F){var D,L,B,V,H,I;d?D=Aie(d[f+F],N):(D=Xr(k,S),Array.isArray(D)||(D=[j,D]));var z=Xle(T,p6.defaultProps.minPointSize)(D[1],F);if(x==="horizontal"){var q,J=[s.scale(D[0]),s.scale(D[1])],K=J[0],U=J[1];L=vk({axis:a,ticks:l,bandSize:i,offset:y.offset,entry:k,index:F}),B=(q=U??K)!==null&&q!==void 0?q:void 0,V=y.size;var G=K-U;if(H=Number.isNaN(G)?0:G,I={x:L,y:s.y,width:V,height:s.height},Math.abs(z)>0&&Math.abs(H)<Math.abs(z)){var ee=$i(H||z)*(Math.abs(z)-Math.abs(H));B-=ee,H+=ee}}else{var le=[a.scale(D[0]),a.scale(D[1])],ge=le[0],ye=le[1];if(L=ge,B=vk({axis:s,ticks:u,bandSize:i,offset:y.offset,entry:k,index:F}),V=ye-ge,H=y.size,I={x:a.x,y:B,width:a.width,height:H},Math.abs(z)>0&&Math.abs(V)<Math.abs(z)){var ve=$i(V||z)*(Math.abs(z)-Math.abs(V));V+=ve}}return wn(wn(wn({},k),{},{x:L,y:B,width:V,height:H,value:d?D:D[1],payload:k,background:I},C&&C[F]&&C[F].props),{},{tooltipPayload:[QB(t,k)],tooltipPosition:{x:L+V/2,y:B+H/2}})});return wn({data:R,layout:x},g)});function Dh(n){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(n)}function sce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function DD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,y6(r.key),r)}}function oce(n,e,t){return e&&DD(n.prototype,e),t&&DD(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function LD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Di(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LD(Object(t),!0).forEach(function(r){lv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):LD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lv(n,e,t){return e=y6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function y6(n){var e=lce(n,"string");return Dh(e)=="symbol"?e:e+""}function lce(n,e){if(Dh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var b6=function(e,t,r,i,a){var s=e.width,l=e.height,u=e.layout,d=e.children,f=Object.keys(t),m={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},g=!!Ur(d,fl);return f.reduce(function(y,x){var b=t[x],w=b.orientation,S=b.domain,O=b.padding,T=O===void 0?{}:O,M=b.mirror,N=b.reversed,j="".concat(w).concat(M?"Mirror":""),C,R,k,F,D;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var L=S[1]-S[0],B=1/0,V=b.categoricalDomain.sort(lK);if(V.forEach(function(le,ge){ge>0&&(B=Math.min((le||0)-(V[ge-1]||0),B))}),Number.isFinite(B)){var H=B/L,I=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(C=H*I/2),b.padding==="no-gap"){var z=el(e.barCategoryGap,H*I),q=H*I/2;C=q-z-(q-z)/I*z}}}i==="xAxis"?R=[r.left+(T.left||0)+(C||0),r.left+r.width-(T.right||0)-(C||0)]:i==="yAxis"?R=u==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(C||0),r.top+r.height-(T.bottom||0)-(C||0)]:R=b.range,N&&(R=[R[1],R[0]]);var J=xie(b,a,g),K=J.scale,U=J.realScaleType;K.domain(S).range(R),_ie(K);var G=Nie(K,Di(Di({},b),{},{realScaleType:U}));i==="xAxis"?(D=w==="top"&&!M||w==="bottom"&&M,k=r.left,F=m[j]-D*b.height):i==="yAxis"&&(D=w==="left"&&!M||w==="right"&&M,k=m[j]-D*b.width,F=r.top);var ee=Di(Di(Di({},b),G),{},{realScaleType:U,x:k,y:F,scale:K,width:i==="xAxis"?r.width:b.width,height:i==="yAxis"?r.height:b.height});return ee.bandSize=Kp(ee,G),!b.hide&&i==="xAxis"?m[j]+=(D?-1:1)*ee.height:b.hide||(m[j]+=(D?-1:1)*ee.width),Di(Di({},y),{},lv({},x,ee))},{})},w6=function(e,t){var r=e.x,i=e.y,a=t.x,s=t.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},cce=function(e){var t=e.x1,r=e.y1,i=e.x2,a=e.y2;return w6({x:t,y:r},{x:i,y:a})},x6=(function(){function n(e){sce(this,n),this.scale=e}return oce(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(t)+l}default:return this.scale(t)}if(i){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+u}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?t>=i&&t<=a:t>=a&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])})();lv(x6,"EPS",1e-4);var kE=function(e){var t=Object.keys(e).reduce(function(r,i){return Di(Di({},r),{},lv({},i,x6.create(e[i])))},{});return Di(Di({},t),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,l=a.position;return Ile(i,function(u,d){return t[d].apply(u,{bandAware:s,position:l})})},isInRange:function(i){return m6(i,function(a,s){return t[s].isInRange(a)})}})};function uce(n){return(n%180+180)%180}var dce=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=uce(i),s=a*Math.PI/180,l=Math.atan(r/t),u=s>l&&s<Math.PI-l?r/Math.sin(s):t/Math.cos(s);return Math.abs(u)},z1,ID;function hce(){if(ID)return z1;ID=1;var n=Xs(),e=tf(),t=Gg();function r(i){return function(a,s,l){var u=Object(a);if(!e(a)){var d=n(s,3);a=t(a),s=function(m){return d(u[m],m,u)}}var f=i(a,s,l);return f>-1?u[d?a[f]:f]:void 0}}return z1=r,z1}var H1,BD;function fce(){if(BD)return H1;BD=1;var n=u6();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return H1=e,H1}var V1,$D;function mce(){if($D)return V1;$D=1;var n=R4(),e=Xs(),t=fce(),r=Math.max;function i(a,s,l){var u=a==null?0:a.length;if(!u)return-1;var d=l==null?0:t(l);return d<0&&(d=r(u+d,0)),n(a,e(s,3),d)}return V1=i,V1}var G1,FD;function pce(){if(FD)return G1;FD=1;var n=hce(),e=mce(),t=n(e);return G1=t,G1}var gce=pce();const vce=_t(gce);var yce=XI();const bce=_t(yce);var wce=bce(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),DE=E.createContext(void 0),LE=E.createContext(void 0),_6=E.createContext(void 0),S6=E.createContext({}),A6=E.createContext(void 0),E6=E.createContext(0),T6=E.createContext(0),UD=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,a=t.offset,s=e.clipPathId,l=e.children,u=e.width,d=e.height,f=wce(a);return Z.createElement(DE.Provider,{value:r},Z.createElement(LE.Provider,{value:i},Z.createElement(S6.Provider,{value:a},Z.createElement(_6.Provider,{value:f},Z.createElement(A6.Provider,{value:s},Z.createElement(E6.Provider,{value:d},Z.createElement(T6.Provider,{value:u},l)))))))},xce=function(){return E.useContext(A6)},O6=function(e){var t=E.useContext(DE);t==null&&pt(!1);var r=t[e];return r==null&&pt(!1),r},_ce=function(){var e=E.useContext(DE);return Ls(e)},Sce=function(){var e=E.useContext(LE),t=vce(e,function(r){return m6(r.domain,Number.isFinite)});return t||Ls(e)},C6=function(e){var t=E.useContext(LE);t==null&&pt(!1);var r=t[e];return r==null&&pt(!1),r},Ace=function(){var e=E.useContext(_6);return e},Ece=function(){return E.useContext(S6)},IE=function(){return E.useContext(T6)},BE=function(){return E.useContext(E6)};function Xc(n){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(n)}function Tce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Oce(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,N6(r.key),r)}}function Cce(n,e,t){return e&&Oce(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function jce(n,e,t){return e=ug(e),Nce(n,j6()?Reflect.construct(e,t||[],ug(n).constructor):e.apply(n,t))}function Nce(n,e){if(e&&(Xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mce(n)}function Mce(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function j6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j6=function(){return!!n})()}function ug(n){return ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ug(n)}function Pce(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&RS(n,e)}function RS(n,e){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RS(n,e)}function qD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(t),!0).forEach(function(r){$E(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $E(n,e,t){return e=N6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function N6(n){var e=Rce(n,"string");return Xc(e)=="symbol"?e:e+""}function Rce(n,e){if(Xc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function kce(n,e){return Bce(n)||Ice(n,e)||Lce(n,e)||Dce()}function Dce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lce(n,e){if(n){if(typeof n=="string")return HD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return HD(n,e)}}function HD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ice(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function Bce(n){if(Array.isArray(n))return n}function kS(){return kS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kS.apply(this,arguments)}var $ce=function(e,t){var r;return Z.isValidElement(e)?r=Z.cloneElement(e,t):et(e)?r=e(t):r=Z.createElement("line",kS({},t,{className:"recharts-reference-line-line"})),r},Fce=function(e,t,r,i,a,s,l,u,d){var f=a.x,m=a.y,g=a.width,y=a.height;if(r){var x=d.y,b=e.y.apply(x,{position:s});if(oa(d,"discard")&&!e.y.isInRange(b))return null;var w=[{x:f+g,y:b},{x:f,y:b}];return u==="left"?w.reverse():w}if(t){var S=d.x,O=e.x.apply(S,{position:s});if(oa(d,"discard")&&!e.x.isInRange(O))return null;var T=[{x:O,y:m+y},{x:O,y:m}];return l==="top"?T.reverse():T}if(i){var M=d.segment,N=M.map(function(j){return e.apply(j,{position:s})});return oa(d,"discard")&&Rle(N,function(j){return!e.isInRange(j)})?null:N}return null};function Uce(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,a=n.yAxisId,s=n.shape,l=n.className,u=n.alwaysShow,d=xce(),f=O6(i),m=C6(a),g=Ace();if(!d||!g)return null;Ua(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=kE({x:f.scale,y:m.scale}),x=Nn(e),b=Nn(t),w=r&&r.length===2,S=Fce(y,x,b,w,g,n.position,f.orientation,m.orientation,n);if(!S)return null;var O=kce(S,2),T=O[0],M=T.x,N=T.y,j=O[1],C=j.x,R=j.y,k=oa(n,"hidden")?"url(#".concat(d,")"):void 0,F=zD(zD({clipPath:k},ft(n,!0)),{},{x1:M,y1:N,x2:C,y2:R});return Z.createElement(dn,{className:at("recharts-reference-line",l)},$ce(s,F),nr.renderCallByParent(n,cce({x1:M,y1:N,x2:C,y2:R})))}var FE=(function(n){function e(){return Tce(this,e),jce(this,e,arguments)}return Pce(e,n),Cce(e,[{key:"render",value:function(){return Z.createElement(Uce,this.props)}}])})(Z.Component);$E(FE,"displayName","ReferenceLine");$E(FE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function DS(){return DS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},DS.apply(this,arguments)}function Kc(n){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(n)}function VD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function GD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(t),!0).forEach(function(r){cv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zce(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,P6(r.key),r)}}function Hce(n,e,t){return e&&zce(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Vce(n,e,t){return e=dg(e),Gce(n,M6()?Reflect.construct(e,t||[],dg(n).constructor):e.apply(n,t))}function Gce(n,e){if(e&&(Kc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wce(n)}function Wce(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M6=function(){return!!n})()}function dg(n){return dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dg(n)}function Yce(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&LS(n,e)}function LS(n,e){return LS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LS(n,e)}function cv(n,e,t){return e=P6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P6(n){var e=Xce(n,"string");return Kc(e)=="symbol"?e:e+""}function Xce(n,e){if(Kc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Kc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Kce=function(e){var t=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=kE({x:i.scale,y:a.scale}),l=s.apply({x:t,y:r},{bandAware:!0});return oa(e,"discard")&&!s.isInRange(l)?null:l},uv=(function(n){function e(){return qce(this,e),Vce(this,e,arguments)}return Yce(e,n),Hce(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,l=r.alwaysShow,u=r.clipPathId,d=Nn(i),f=Nn(a);if(Ua(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var m=Kce(this.props);if(!m)return null;var g=m.x,y=m.y,x=this.props,b=x.shape,w=x.className,S=oa(this.props,"hidden")?"url(#".concat(u,")"):void 0,O=GD(GD({clipPath:S},ft(this.props,!0)),{},{cx:g,cy:y});return Z.createElement(dn,{className:at("recharts-reference-dot",w)},e.renderDot(b,O),nr.renderCallByParent(this.props,{x:g-s,y:y-s,width:2*s,height:2*s}))}}])})(Z.Component);cv(uv,"displayName","ReferenceDot");cv(uv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});cv(uv,"renderDot",function(n,e){var t;return Z.isValidElement(n)?t=Z.cloneElement(n,e):et(n)?t=n(e):t=Z.createElement(RE,DS({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function IS(){return IS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},IS.apply(this,arguments)}function Zc(n){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(n)}function WD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function YD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(t),!0).forEach(function(r){dv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):WD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Zce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Jce(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,k6(r.key),r)}}function Qce(n,e,t){return e&&Jce(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function eue(n,e,t){return e=hg(e),tue(n,R6()?Reflect.construct(e,t||[],hg(n).constructor):e.apply(n,t))}function tue(n,e){if(e&&(Zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nue(n)}function nue(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function R6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R6=function(){return!!n})()}function hg(n){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hg(n)}function rue(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&BS(n,e)}function BS(n,e){return BS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BS(n,e)}function dv(n,e,t){return e=k6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function k6(n){var e=iue(n,"string");return Zc(e)=="symbol"?e:e+""}function iue(n,e){if(Zc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var aue=function(e,t,r,i,a){var s=a.x1,l=a.x2,u=a.y1,d=a.y2,f=a.xAxis,m=a.yAxis;if(!f||!m)return null;var g=kE({x:f.scale,y:m.scale}),y={x:e?g.x.apply(s,{position:"start"}):g.x.rangeMin,y:r?g.y.apply(u,{position:"start"}):g.y.rangeMin},x={x:t?g.x.apply(l,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(d,{position:"end"}):g.y.rangeMax};return oa(a,"discard")&&(!g.isInRange(y)||!g.isInRange(x))?null:w6(y,x)},hv=(function(n){function e(){return Zce(this,e),eue(this,e,arguments)}return rue(e,n),Qce(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,l=r.y2,u=r.className,d=r.alwaysShow,f=r.clipPathId;Ua(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Nn(i),g=Nn(a),y=Nn(s),x=Nn(l),b=this.props.shape;if(!m&&!g&&!y&&!x&&!b)return null;var w=aue(m,g,y,x,this.props);if(!w&&!b)return null;var S=oa(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Z.createElement(dn,{className:at("recharts-reference-area",u)},e.renderRect(b,YD(YD({clipPath:S},ft(this.props,!0)),w)),nr.renderCallByParent(this.props,w))}}])})(Z.Component);dv(hv,"displayName","ReferenceArea");dv(hv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});dv(hv,"renderRect",function(n,e){var t;return Z.isValidElement(n)?t=Z.cloneElement(n,e):et(n)?t=n(e):t=Z.createElement(PE,IS({},e,{className:"recharts-reference-area-rect"})),t});function D6(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function sue(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return dce(r,t)}function oue(n,e,t){var r=t==="width",i=n.x,a=n.y,s=n.width,l=n.height;return e===1?{start:r?i:a,end:r?i+s:a+l}:{start:r?i+s:a+l,end:r?i:a}}function fg(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var a=t();return n*(e-n*a/2-r)>=0&&n*(e+n*a/2-i)<=0}function lue(n,e){return D6(n,e+1)}function cue(n,e,t,r,i){for(var a=(r||[]).slice(),s=e.start,l=e.end,u=0,d=1,f=s,m=function(){var x=r?.[u];if(x===void 0)return{v:D6(r,d)};var b=u,w,S=function(){return w===void 0&&(w=t(x,b)),w},O=x.coordinate,T=u===0||fg(n,O,S,f,l);T||(u=0,f=s,d+=1),T&&(f=O+n*(S()/2+i),u+=d)},g;d<=a.length;)if(g=m(),g)return g.v;return[]}function Lh(n){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(n)}function XD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(t),!0).forEach(function(r){uue(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function uue(n,e,t){return e=due(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function due(n){var e=hue(n,"string");return Lh(e)=="symbol"?e:e+""}function hue(n,e){if(Lh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fue(n,e,t,r,i){for(var a=(r||[]).slice(),s=a.length,l=e.start,u=e.end,d=function(g){var y=a[g],x,b=function(){return x===void 0&&(x=t(y,g)),x};if(g===s-1){var w=n*(y.coordinate+n*b()/2-u);a[g]=y=tr(tr({},y),{},{tickCoord:w>0?y.coordinate-w*n:y.coordinate})}else a[g]=y=tr(tr({},y),{},{tickCoord:y.coordinate});var S=fg(n,y.tickCoord,b,l,u);S&&(u=y.tickCoord-n*(b()/2+i),a[g]=tr(tr({},y),{},{isShow:!0}))},f=s-1;f>=0;f--)d(f);return a}function mue(n,e,t,r,i,a){var s=(r||[]).slice(),l=s.length,u=e.start,d=e.end;if(a){var f=r[l-1],m=t(f,l-1),g=n*(f.coordinate+n*m/2-d);s[l-1]=f=tr(tr({},f),{},{tickCoord:g>0?f.coordinate-g*n:f.coordinate});var y=fg(n,f.tickCoord,function(){return m},u,d);y&&(d=f.tickCoord-n*(m/2+i),s[l-1]=tr(tr({},f),{},{isShow:!0}))}for(var x=a?l-1:l,b=function(O){var T=s[O],M,N=function(){return M===void 0&&(M=t(T,O)),M};if(O===0){var j=n*(T.coordinate-n*N()/2-u);s[O]=T=tr(tr({},T),{},{tickCoord:j<0?T.coordinate-j*n:T.coordinate})}else s[O]=T=tr(tr({},T),{},{tickCoord:T.coordinate});var C=fg(n,T.tickCoord,N,u,d);C&&(u=T.tickCoord+n*(N()/2+i),s[O]=tr(tr({},T),{},{isShow:!0}))},w=0;w<x;w++)b(w);return s}function UE(n,e,t){var r=n.tick,i=n.ticks,a=n.viewBox,s=n.minTickGap,l=n.orientation,u=n.interval,d=n.tickFormatter,f=n.unit,m=n.angle;if(!i||!i.length||!r)return[];if(be(u)||mu.isSsr)return lue(i,typeof u=="number"&&be(u)?u:0);var g=[],y=l==="top"||l==="bottom"?"width":"height",x=f&&y==="width"?$d(f,{fontSize:e,letterSpacing:t}):{width:0,height:0},b=function(T,M){var N=et(d)?d(T.value,M):T.value;return y==="width"?sue($d(N,{fontSize:e,letterSpacing:t}),x,m):$d(N,{fontSize:e,letterSpacing:t})[y]},w=i.length>=2?$i(i[1].coordinate-i[0].coordinate):1,S=oue(a,w,y);return u==="equidistantPreserveStart"?cue(w,S,b,i,s):(u==="preserveStart"||u==="preserveStartEnd"?g=mue(w,S,b,i,s,u==="preserveStartEnd"):g=fue(w,S,b,i,s),g.filter(function(O){return O.isShow}))}var pue=["viewBox"],gue=["viewBox"],vue=["ticks"];function Jc(n){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(n)}function pc(){return pc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pc.apply(this,arguments)}function KD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function On(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KD(Object(t),!0).forEach(function(r){qE(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function W1(n,e){if(n==null)return{};var t=yue(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function yue(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function bue(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ZD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,I6(r.key),r)}}function wue(n,e,t){return e&&ZD(n.prototype,e),t&&ZD(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function xue(n,e,t){return e=mg(e),_ue(n,L6()?Reflect.construct(e,t||[],mg(n).constructor):e.apply(n,t))}function _ue(n,e){if(e&&(Jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sue(n)}function Sue(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function L6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L6=function(){return!!n})()}function mg(n){return mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mg(n)}function Aue(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&$S(n,e)}function $S(n,e){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$S(n,e)}function qE(n,e,t){return e=I6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function I6(n){var e=Eue(n,"string");return Jc(e)=="symbol"?e:e+""}function Eue(n,e){if(Jc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var yu=(function(n){function e(t){var r;return bue(this,e),r=xue(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return Aue(e,n),wue(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=W1(r,pue),l=this.props,u=l.viewBox,d=W1(l,gue);return!Ec(a,u)||!Ec(s,d)||!Ec(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,l=i.width,u=i.height,d=i.orientation,f=i.tickSize,m=i.mirror,g=i.tickMargin,y,x,b,w,S,O,T=m?-1:1,M=r.tickSize||f,N=be(r.tickCoord)?r.tickCoord:r.coordinate;switch(d){case"top":y=x=r.coordinate,w=s+ +!m*u,b=w-T*M,O=b-T*g,S=N;break;case"left":b=w=r.coordinate,x=a+ +!m*l,y=x-T*M,S=y-T*g,O=N;break;case"right":b=w=r.coordinate,x=a+ +m*l,y=x+T*M,S=y+T*g,O=N;break;default:y=x=r.coordinate,w=s+ +m*u,b=w+T*M,O=b+T*g,S=N;break}return{line:{x1:y,y1:b,x2:x,y2:w},tick:{x:S,y:O}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,l=r.height,u=r.orientation,d=r.mirror,f=r.axisLine,m=On(On(On({},ft(this.props,!1)),ft(f,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var g=+(u==="top"&&!d||u==="bottom"&&d);m=On(On({},m),{},{x1:i,y1:a+g*l,x2:i+s,y2:a+g*l})}else{var y=+(u==="left"&&!d||u==="right"&&d);m=On(On({},m),{},{x1:i+y*s,y1:a,x2:i+y*s,y2:a+l})}return Z.createElement("line",pc({},m,{className:at("recharts-cartesian-axis-line",yi(f,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,l=this.props,u=l.tickLine,d=l.stroke,f=l.tick,m=l.tickFormatter,g=l.unit,y=UE(On(On({},this.props),{},{ticks:r}),i,a),x=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),w=ft(this.props,!1),S=ft(f,!1),O=On(On({},w),{},{fill:"none"},ft(u,!1)),T=y.map(function(M,N){var j=s.getTickLineCoord(M),C=j.line,R=j.tick,k=On(On(On(On({textAnchor:x,verticalAnchor:b},w),{},{stroke:"none",fill:d},S),R),{},{index:N,payload:M,visibleTicksCount:y.length,tickFormatter:m});return Z.createElement(dn,pc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(M.value,"-").concat(M.coordinate,"-").concat(M.tickCoord)},Ep(s.props,M,N)),u&&Z.createElement("line",pc({},O,C,{className:at("recharts-cartesian-axis-tick-line",yi(u,"className"))})),f&&e.renderTickItem(f,k,"".concat(et(m)?m(M.value,N):M.value).concat(g||"")))});return Z.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,l=i.height,u=i.ticksGenerator,d=i.className,f=i.hide;if(f)return null;var m=this.props,g=m.ticks,y=W1(m,vue),x=g;return et(u)&&(x=g&&g.length>0?u(this.props):u(y)),s<=0||l<=0||!x||!x.length?null:Z.createElement(dn,{className:at("recharts-cartesian-axis",d),ref:function(w){r.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),nr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,l=at(i.className,"recharts-cartesian-axis-tick-value");return Z.isValidElement(r)?s=Z.cloneElement(r,On(On({},i),{},{className:l})):et(r)?s=r(On(On({},i),{},{className:l})):s=Z.createElement(Lp,pc({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(E.Component);qE(yu,"displayName","CartesianAxis");qE(yu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Tue=["x1","y1","x2","y2","key"],Oue=["offset"];function nl(n){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nl(n)}function JD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function rr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JD(Object(t),!0).forEach(function(r){Cue(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):JD(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Cue(n,e,t){return e=jue(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jue(n){var e=Nue(n,"string");return nl(e)=="symbol"?e:e+""}function Nue(n,e){if(nl(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qo(){return qo=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qo.apply(this,arguments)}function QD(n,e){if(n==null)return{};var t=Mue(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Mue(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Pue=function(e){var t=e.fill;if(!t||t==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,l=e.height,u=e.ry;return Z.createElement("rect",{x:i,y:a,ry:u,width:s,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function B6(n,e){var t;if(Z.isValidElement(n))t=Z.cloneElement(n,e);else if(et(n))t=n(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,l=e.key,u=QD(e,Tue),d=ft(u,!1);d.offset;var f=QD(d,Oue);t=Z.createElement("line",qo({},f,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:l}))}return t}function Rue(n){var e=n.x,t=n.width,r=n.horizontal,i=r===void 0?!0:r,a=n.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(l,u){var d=rr(rr({},n),{},{x1:e,y1:l,x2:e+t,y2:l,key:"line-".concat(u),index:u});return B6(i,d)});return Z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function kue(n){var e=n.y,t=n.height,r=n.vertical,i=r===void 0?!0:r,a=n.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(l,u){var d=rr(rr({},n),{},{x1:l,y1:e,x2:l,y2:e+t,key:"line-".concat(u),index:u});return B6(i,d)});return Z.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Due(n){var e=n.horizontalFill,t=n.fillOpacity,r=n.x,i=n.y,a=n.width,s=n.height,l=n.horizontalPoints,u=n.horizontal,d=u===void 0?!0:u;if(!d||!e||!e.length)return null;var f=l.map(function(g){return Math.round(g+i-i)}).sort(function(g,y){return g-y});i!==f[0]&&f.unshift(0);var m=f.map(function(g,y){var x=!f[y+1],b=x?i+s-g:f[y+1]-g;if(b<=0)return null;var w=y%e.length;return Z.createElement("rect",{key:"react-".concat(y),y:g,x:r,height:b,width:a,stroke:"none",fill:e[w],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Lue(n){var e=n.vertical,t=e===void 0?!0:e,r=n.verticalFill,i=n.fillOpacity,a=n.x,s=n.y,l=n.width,u=n.height,d=n.verticalPoints;if(!t||!r||!r.length)return null;var f=d.map(function(g){return Math.round(g+a-a)}).sort(function(g,y){return g-y});a!==f[0]&&f.unshift(0);var m=f.map(function(g,y){var x=!f[y+1],b=x?a+l-g:f[y+1]-g;if(b<=0)return null;var w=y%r.length;return Z.createElement("rect",{key:"react-".concat(y),x:g,y:s,width:b,height:u,stroke:"none",fill:r[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Iue=function(e,t){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return ZB(UE(rr(rr(rr({},yu.defaultProps),r),{},{ticks:Ba(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,t)},Bue=function(e,t){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return ZB(UE(rr(rr(rr({},yu.defaultProps),r),{},{ticks:Ba(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,t)},ac={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pg(n){var e,t,r,i,a,s,l=IE(),u=BE(),d=Ece(),f=rr(rr({},n),{},{stroke:(e=n.stroke)!==null&&e!==void 0?e:ac.stroke,fill:(t=n.fill)!==null&&t!==void 0?t:ac.fill,horizontal:(r=n.horizontal)!==null&&r!==void 0?r:ac.horizontal,horizontalFill:(i=n.horizontalFill)!==null&&i!==void 0?i:ac.horizontalFill,vertical:(a=n.vertical)!==null&&a!==void 0?a:ac.vertical,verticalFill:(s=n.verticalFill)!==null&&s!==void 0?s:ac.verticalFill,x:be(n.x)?n.x:d.left,y:be(n.y)?n.y:d.top,width:be(n.width)?n.width:d.width,height:be(n.height)?n.height:d.height}),m=f.x,g=f.y,y=f.width,x=f.height,b=f.syncWithTicks,w=f.horizontalValues,S=f.verticalValues,O=_ce(),T=Sce();if(!be(y)||y<=0||!be(x)||x<=0||!be(m)||m!==+m||!be(g)||g!==+g)return null;var M=f.verticalCoordinatesGenerator||Iue,N=f.horizontalCoordinatesGenerator||Bue,j=f.horizontalPoints,C=f.verticalPoints;if((!j||!j.length)&&et(N)){var R=w&&w.length,k=N({yAxis:T?rr(rr({},T),{},{ticks:R?w:T.ticks}):void 0,width:l,height:u,offset:d},R?!0:b);Ua(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(nl(k),"]")),Array.isArray(k)&&(j=k)}if((!C||!C.length)&&et(M)){var F=S&&S.length,D=M({xAxis:O?rr(rr({},O),{},{ticks:F?S:O.ticks}):void 0,width:l,height:u,offset:d},F?!0:b);Ua(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(nl(D),"]")),Array.isArray(D)&&(C=D)}return Z.createElement("g",{className:"recharts-cartesian-grid"},Z.createElement(Pue,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Z.createElement(Rue,qo({},f,{offset:d,horizontalPoints:j,xAxis:O,yAxis:T})),Z.createElement(kue,qo({},f,{offset:d,verticalPoints:C,xAxis:O,yAxis:T})),Z.createElement(Due,qo({},f,{horizontalPoints:j})),Z.createElement(Lue,qo({},f,{verticalPoints:C})))}pg.displayName="CartesianGrid";var $ue=["type","layout","connectNulls","ref"],Fue=["key"];function Qc(n){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qc(n)}function e3(n,e){if(n==null)return{};var t=Uue(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Uue(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function zd(){return zd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zd.apply(this,arguments)}function t3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ir(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?t3(Object(t),!0).forEach(function(r){Li(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):t3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sc(n){return Vue(n)||Hue(n)||zue(n)||que()}function que(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zue(n,e){if(n){if(typeof n=="string")return FS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return FS(n,e)}}function Hue(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Vue(n){if(Array.isArray(n))return FS(n)}function FS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Gue(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function n3(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,F6(r.key),r)}}function Wue(n,e,t){return e&&n3(n.prototype,e),t&&n3(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Yue(n,e,t){return e=gg(e),Xue(n,$6()?Reflect.construct(e,t||[],gg(n).constructor):e.apply(n,t))}function Xue(n,e){if(e&&(Qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kue(n)}function Kue(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($6=function(){return!!n})()}function gg(n){return gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gg(n)}function Zue(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&US(n,e)}function US(n,e){return US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},US(n,e)}function Li(n,e,t){return e=F6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function F6(n){var e=Jue(n,"string");return Qc(e)=="symbol"?e:e+""}function Jue(n,e){if(Qc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var bu=(function(n){function e(){var t;Gue(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=Yue(this,e,[].concat(i)),Li(t,"state",{isAnimationFinished:!0,totalLength:0}),Li(t,"generateSimpleStrokeDasharray",function(s,l){return"".concat(l,"px ").concat(s-l,"px")}),Li(t,"getStrokeDasharray",function(s,l,u){var d=u.reduce(function(S,O){return S+O});if(!d)return t.generateSimpleStrokeDasharray(l,s);for(var f=Math.floor(s/d),m=s%d,g=l-s,y=[],x=0,b=0;x<u.length;b+=u[x],++x)if(b+u[x]>m){y=[].concat(sc(u.slice(0,x)),[m-b]);break}var w=y.length%2===0?[0,g]:[g];return[].concat(sc(e.repeat(u,f)),sc(y),w).map(function(S){return"".concat(S,"px")}).join(", ")}),Li(t,"id",ef("recharts-line-")),Li(t,"pathRef",function(s){t.mainCurve=s}),Li(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),Li(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return Zue(e,n),Wue(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,l=a.xAxis,u=a.yAxis,d=a.layout,f=a.children,m=bi(f,of);if(!m)return null;var g=function(b,w){return{x:b.x,y:b.y,value:b.value,errorVal:Xr(b.payload,w)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Z.createElement(dn,y,m.map(function(x){return Z.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:s,xAxis:l,yAxis:u,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,m=ft(this.props,!1),g=ft(u,!0),y=d.map(function(b,w){var S=Ir(Ir(Ir({key:"dot-".concat(w),r:3},m),g),{},{index:w,cx:b.x,cy:b.y,value:b.value,dataKey:f,payload:b.payload,points:d});return e.renderDotItem(u,S)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Z.createElement(dn,zd({className:"recharts-line-dots",key:"dots"},x),y)}},{key:"renderCurveStatically",value:function(r,i,a,s){var l=this.props,u=l.type,d=l.layout,f=l.connectNulls;l.ref;var m=e3(l,$ue),g=Ir(Ir(Ir({},ft(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:u,layout:d,connectNulls:f});return Z.createElement(yS,zd({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,l=s.points,u=s.strokeDasharray,d=s.isAnimationActive,f=s.animationBegin,m=s.animationDuration,g=s.animationEasing,y=s.animationId,x=s.animateNewValues,b=s.width,w=s.height,S=this.state,O=S.prevPoints,T=S.totalLength;return Z.createElement(Za,{begin:f,duration:m,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(M){var N=M.t;if(O){var j=O.length/l.length,C=l.map(function(L,B){var V=Math.floor(B*j);if(O[V]){var H=O[V],I=Ii(H.x,L.x),z=Ii(H.y,L.y);return Ir(Ir({},L),{},{x:I(N),y:z(N)})}if(x){var q=Ii(b*2,L.x),J=Ii(w/2,L.y);return Ir(Ir({},L),{},{x:q(N),y:J(N)})}return Ir(Ir({},L),{},{x:L.x,y:L.y})});return a.renderCurveStatically(C,r,i)}var R=Ii(0,T),k=R(N),F;if(u){var D="".concat(u).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});F=a.getStrokeDasharray(k,T,D)}else F=a.generateSimpleStrokeDasharray(T,k);return a.renderCurveStatically(l,r,i,{strokeDasharray:F})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,l=a.isAnimationActive,u=this.state,d=u.prevPoints,f=u.totalLength;return l&&s&&s.length&&(!d&&f>0||!rv(d,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,l=i.points,u=i.className,d=i.xAxis,f=i.yAxis,m=i.top,g=i.left,y=i.width,x=i.height,b=i.isAnimationActive,w=i.id;if(a||!l||!l.length)return null;var S=this.state.isAnimationFinished,O=l.length===1,T=at("recharts-line",u),M=d&&d.allowDataOverflow,N=f&&f.allowDataOverflow,j=M||N,C=st(w)?this.id:w,R=(r=ft(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=R.r,F=k===void 0?3:k,D=R.strokeWidth,L=D===void 0?2:D,B=vK(s)?s:{},V=B.clipDot,H=V===void 0?!0:V,I=F*2+L;return Z.createElement(dn,{className:T},M||N?Z.createElement("defs",null,Z.createElement("clipPath",{id:"clipPath-".concat(C)},Z.createElement("rect",{x:M?g:g-y/2,y:N?m:m-x/2,width:M?y:y*2,height:N?x:x*2})),!H&&Z.createElement("clipPath",{id:"clipPath-dots-".concat(C)},Z.createElement("rect",{x:g-I/2,y:m-I/2,width:y+I,height:x+I}))):null,!O&&this.renderCurve(j,C),this.renderErrorBar(j,C),(O||s)&&this.renderDots(j,H,C),(!b||S)&&zs.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(sc(r),[0]):r,s=[],l=0;l<i;++l)s=[].concat(sc(s),sc(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(Z.isValidElement(r))a=Z.cloneElement(r,i);else if(et(r))a=r(i);else{var s=i.key,l=e3(i,Fue),u=at("recharts-line-dot",typeof r!="boolean"?r.className:"");a=Z.createElement(RE,zd({key:s},l,{className:u}))}return a}}])})(E.PureComponent);Li(bu,"displayName","Line");Li(bu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!mu.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Li(bu,"getComposedData",function(n){var e=n.props,t=n.xAxis,r=n.yAxis,i=n.xAxisTicks,a=n.yAxisTicks,s=n.dataKey,l=n.bandSize,u=n.displayedData,d=n.offset,f=e.layout,m=u.map(function(g,y){var x=Xr(g,s);return f==="horizontal"?{x:gk({axis:t,ticks:i,bandSize:l,entry:g,index:y}),y:st(x)?null:r.scale(x),value:x,payload:g}:{x:st(x)?null:t.scale(x),y:gk({axis:r,ticks:a,bandSize:l,entry:g,index:y}),value:x,payload:g}});return Ir({points:m,layout:f},d)});function eu(n){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(n)}function Que(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ede(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,z6(r.key),r)}}function tde(n,e,t){return e&&ede(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function nde(n,e,t){return e=vg(e),rde(n,U6()?Reflect.construct(e,t||[],vg(n).constructor):e.apply(n,t))}function rde(n,e){if(e&&(eu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ide(n)}function ide(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function U6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U6=function(){return!!n})()}function vg(n){return vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vg(n)}function ade(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&qS(n,e)}function qS(n,e){return qS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qS(n,e)}function q6(n,e,t){return e=z6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z6(n){var e=sde(n,"string");return eu(e)=="symbol"?e:e+""}function sde(n,e){if(eu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function zS(){return zS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zS.apply(this,arguments)}function ode(n){var e=n.xAxisId,t=IE(),r=BE(),i=O6(e);return i==null?null:E.createElement(yu,zS({},i,{className:at("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(s){return Ba(s,!0)}}))}var rl=(function(n){function e(){return Que(this,e),nde(this,e,arguments)}return ade(e,n),tde(e,[{key:"render",value:function(){return E.createElement(ode,this.props)}}])})(E.Component);q6(rl,"displayName","XAxis");q6(rl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function tu(n){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tu(n)}function lde(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function cde(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,G6(r.key),r)}}function ude(n,e,t){return e&&cde(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function dde(n,e,t){return e=yg(e),hde(n,H6()?Reflect.construct(e,t||[],yg(n).constructor):e.apply(n,t))}function hde(n,e){if(e&&(tu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fde(n)}function fde(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function H6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H6=function(){return!!n})()}function yg(n){return yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yg(n)}function mde(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&HS(n,e)}function HS(n,e){return HS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HS(n,e)}function V6(n,e,t){return e=G6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G6(n){var e=pde(n,"string");return tu(e)=="symbol"?e:e+""}function pde(n,e){if(tu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function VS(){return VS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},VS.apply(this,arguments)}var gde=function(e){var t=e.yAxisId,r=IE(),i=BE(),a=C6(t);return a==null?null:E.createElement(yu,VS({},a,{className:at("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return Ba(l,!0)}}))},il=(function(n){function e(){return lde(this,e),dde(this,e,arguments)}return mde(e,n),ude(e,[{key:"render",value:function(){return E.createElement(gde,this.props)}}])})(E.Component);V6(il,"displayName","YAxis");V6(il,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function r3(n){return wde(n)||bde(n)||yde(n)||vde()}function vde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yde(n,e){if(n){if(typeof n=="string")return GS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return GS(n,e)}}function bde(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function wde(n){if(Array.isArray(n))return GS(n)}function GS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var WS=function(e,t,r,i,a){var s=bi(e,FE),l=bi(e,uv),u=[].concat(r3(s),r3(l)),d=bi(e,hv),f="".concat(i,"Id"),m=i[0],g=t;if(u.length&&(g=u.reduce(function(b,w){if(w.props[f]===r&&oa(w.props,"extendDomain")&&be(w.props[m])){var S=w.props[m];return[Math.min(b[0],S),Math.max(b[1],S)]}return b},g)),d.length){var y="".concat(m,"1"),x="".concat(m,"2");g=d.reduce(function(b,w){if(w.props[f]===r&&oa(w.props,"extendDomain")&&be(w.props[y])&&be(w.props[x])){var S=w.props[y],O=w.props[x];return[Math.min(b[0],S,O),Math.max(b[1],S,O)]}return b},g)}return a&&a.length&&(g=a.reduce(function(b,w){return be(w)?[Math.min(b[0],w),Math.max(b[1],w)]:b},g)),g},Y1={exports:{}},i3;function xde(){return i3||(i3=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(u,d,f){this.fn=u,this.context=d,this.once=f||!1}function a(u,d,f,m,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new i(f,m||u,g),x=t?t+d:d;return u._events[x]?u._events[x].fn?u._events[x]=[u._events[x],y]:u._events[x].push(y):(u._events[x]=y,u._eventsCount++),u}function s(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,m;if(this._eventsCount===0)return d;for(m in f=this._events)e.call(f,m)&&d.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=t?t+d:d,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,y=m.length,x=new Array(y);g<y;g++)x[g]=m[g].fn;return x},l.prototype.listenerCount=function(d){var f=t?t+d:d,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(d,f,m,g,y,x){var b=t?t+d:d;if(!this._events[b])return!1;var w=this._events[b],S=arguments.length,O,T;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,m),!0;case 4:return w.fn.call(w.context,f,m,g),!0;case 5:return w.fn.call(w.context,f,m,g,y),!0;case 6:return w.fn.call(w.context,f,m,g,y,x),!0}for(T=1,O=new Array(S-1);T<S;T++)O[T-1]=arguments[T];w.fn.apply(w.context,O)}else{var M=w.length,N;for(T=0;T<M;T++)switch(w[T].once&&this.removeListener(d,w[T].fn,void 0,!0),S){case 1:w[T].fn.call(w[T].context);break;case 2:w[T].fn.call(w[T].context,f);break;case 3:w[T].fn.call(w[T].context,f,m);break;case 4:w[T].fn.call(w[T].context,f,m,g);break;default:if(!O)for(N=1,O=new Array(S-1);N<S;N++)O[N-1]=arguments[N];w[T].fn.apply(w[T].context,O)}}return!0},l.prototype.on=function(d,f,m){return a(this,d,f,m,!1)},l.prototype.once=function(d,f,m){return a(this,d,f,m,!0)},l.prototype.removeListener=function(d,f,m,g){var y=t?t+d:d;if(!this._events[y])return this;if(!f)return s(this,y),this;var x=this._events[y];if(x.fn)x.fn===f&&(!g||x.once)&&(!m||x.context===m)&&s(this,y);else{for(var b=0,w=[],S=x.length;b<S;b++)(x[b].fn!==f||g&&!x[b].once||m&&x[b].context!==m)&&w.push(x[b]);w.length?this._events[y]=w.length===1?w[0]:w:s(this,y)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=t?t+d:d,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,n.exports=l})(Y1)),Y1.exports}var _de=xde();const Sde=_t(_de);var X1=new Sde,K1="recharts.syncMouseEvents";function Ih(n){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(n)}function Ade(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ede(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,W6(r.key),r)}}function Tde(n,e,t){return e&&Ede(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Z1(n,e,t){return e=W6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function W6(n){var e=Ode(n,"string");return Ih(e)=="symbol"?e:e+""}function Ode(n,e){if(Ih(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Cde=(function(){function n(){Ade(this,n),Z1(this,"activeIndex",0),Z1(this,"coordinateList",[]),Z1(this,"layout","horizontal")}return Tde(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,a=i===void 0?null:i,s=t.container,l=s===void 0?null:s,u=t.layout,d=u===void 0?null:u,f=t.offset,m=f===void 0?null:f,g=t.mouseHandlerCallback,y=g===void 0?null:g;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,l=i.height,u=this.coordinateList[this.activeIndex].coordinate,d=((t=window)===null||t===void 0?void 0:t.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,m=a+u+d,g=s+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:m,pageY:g})}}}])})();function jde(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n?.[0],i=n?.[1];if(r&&i&&be(r)&&be(i))return!0}return!1}function Nde(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function Y6(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,a=n.endAngle,s=Xn(e,t,r,i),l=Xn(e,t,r,a);return{points:[s,l],cx:e,cy:t,radius:r,startAngle:i,endAngle:a}}function Mde(n,e,t){var r,i,a,s;if(n==="horizontal")r=e.x,a=r,i=t.top,s=t.top+t.height;else if(n==="vertical")i=e.y,s=i,r=t.left,a=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var l=e.cx,u=e.cy,d=e.innerRadius,f=e.outerRadius,m=e.angle,g=Xn(l,u,d,m),y=Xn(l,u,f,m);r=g.x,i=g.y,a=y.x,s=y.y}else return Y6(e);return[{x:r,y:i},{x:a,y:s}]}function Bh(n){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(n)}function a3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?a3(Object(t),!0).forEach(function(r){Pde(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Pde(n,e,t){return e=Rde(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rde(n){var e=kde(n,"string");return Bh(e)=="symbol"?e:e+""}function kde(n,e){if(Bh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Dde(n){var e,t,r=n.element,i=n.tooltipEventType,a=n.isActive,s=n.activeCoordinate,l=n.activePayload,u=n.offset,d=n.activeTooltipIndex,f=n.tooltipAxisBandSize,m=n.layout,g=n.chartName,y=(e=r.props.cursor)!==null&&e!==void 0?e:(t=r.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!r||!y||!a||!s||g!=="ScatterChart"&&i!=="axis")return null;var x,b=yS;if(g==="ScatterChart")x=s,b=Roe;else if(g==="BarChart")x=Nde(m,s,u,f),b=PE;else if(m==="radial"){var w=Y6(s),S=w.cx,O=w.cy,T=w.radius,M=w.startAngle,N=w.endAngle;x={cx:S,cy:O,startAngle:M,endAngle:N,innerRadius:T,outerRadius:T},b=n6}else x={points:Mde(m,s,u)},b=yS;var j=Qm(Qm(Qm(Qm({stroke:"#ccc",pointerEvents:"none"},u),x),ft(y,!1)),{},{payload:l,payloadIndex:d,className:at("recharts-tooltip-cursor",y.className)});return E.isValidElement(y)?E.cloneElement(y,j):E.createElement(b,j)}var Lde=["item"],Ide=["children","className","width","height","style","compact","title","desc"];function nu(n){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(n)}function gc(){return gc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gc.apply(this,arguments)}function s3(n,e){return Fde(n)||$de(n,e)||K6(n,e)||Bde()}function Bde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $de(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,s,l=[],u=!0,d=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(u=(r=a.call(t)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(f){d=!0,i=f}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw i}}return l}}function Fde(n){if(Array.isArray(n))return n}function o3(n,e){if(n==null)return{};var t=Ude(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Ude(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function qde(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zde(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Z6(r.key),r)}}function Hde(n,e,t){return e&&zde(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Vde(n,e,t){return e=bg(e),Gde(n,X6()?Reflect.construct(e,t||[],bg(n).constructor):e.apply(n,t))}function Gde(n,e){if(e&&(nu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wde(n)}function Wde(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function X6(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X6=function(){return!!n})()}function bg(n){return bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bg(n)}function Yde(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&YS(n,e)}function YS(n,e){return YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YS(n,e)}function ru(n){return Zde(n)||Kde(n)||K6(n)||Xde()}function Xde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K6(n,e){if(n){if(typeof n=="string")return XS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return XS(n,e)}}function Kde(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Zde(n){if(Array.isArray(n))return XS(n)}function XS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function l3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function de(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l3(Object(t),!0).forEach(function(r){ze(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ze(n,e,t){return e=Z6(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z6(n){var e=Jde(n,"string");return nu(e)=="symbol"?e:e+""}function Jde(n,e){if(nu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Qde={xAxis:["bottom","top"],yAxis:["left","right"]},ehe={width:"100%",height:"100%"},J6={x:0,y:0};function ep(n){return n}var the=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},nhe=function(e,t,r,i){var a=t.find(function(f){return f&&f.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,l=i.radius;return de(de(de({},i),Xn(i.cx,i.cy,l,s)),{},{angle:s,radius:l})}var u=a.coordinate,d=i.angle;return de(de(de({},i),Xn(i.cx,i.cy,u,d)),{},{angle:d,radius:u})}return J6},fv=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,a=t.dataEndIndex,s=(r??[]).reduce(function(l,u){var d=u.props.data;return d&&d.length?[].concat(ru(l),ru(d)):l},[]);return s.length>0?s:e&&e.length&&be(i)&&be(a)?e.slice(i,a+1):[]};function Q6(n){return n==="number"?[0,"auto"]:void 0}var KS=function(e,t,r,i){var a=e.graphicalItems,s=e.tooltipAxis,l=fv(t,e);return r<0||!a||!a.length||r>=l.length?null:a.reduce(function(u,d){var f,m=(f=d.props.data)!==null&&f!==void 0?f:t;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(s.dataKey&&!s.allowDuplicatedCategory){var y=m===void 0?l:m;g=Sp(y,s.dataKey,i)}else g=m&&m[r]||l[r];return g?[].concat(ru(u),[QB(d,g)]):u},[])},c3=function(e,t,r,i){var a=i||{x:e.chartX,y:e.chartY},s=the(a,r),l=e.orderedTooltipTicks,u=e.tooltipAxis,d=e.tooltipTicks,f=pie(s,l,d,u);if(f>=0&&d){var m=d[f]&&d[f].value,g=KS(e,t,f,m),y=nhe(r,l,f,a);return{activeTooltipIndex:f,activeLabel:m,activePayload:g,activeCoordinate:y}}return null},rhe=function(e,t){var r=t.axes,i=t.graphicalItems,a=t.axisType,s=t.axisIdKey,l=t.stackGroups,u=t.dataStartIndex,d=t.dataEndIndex,f=e.layout,m=e.children,g=e.stackOffset,y=KB(f,a);return r.reduce(function(x,b){var w,S=b.type.defaultProps!==void 0?de(de({},b.type.defaultProps),b.props):b.props,O=S.type,T=S.dataKey,M=S.allowDataOverflow,N=S.allowDuplicatedCategory,j=S.scale,C=S.ticks,R=S.includeHidden,k=S[s];if(x[k])return x;var F=fv(e.data,{graphicalItems:i.filter(function(G){var ee,le=s in G.props?G.props[s]:(ee=G.type.defaultProps)===null||ee===void 0?void 0:ee[s];return le===k}),dataStartIndex:u,dataEndIndex:d}),D=F.length,L,B,V;jde(S.domain,M,O)&&(L=fS(S.domain,null,M),y&&(O==="number"||j!=="auto")&&(V=Ud(F,T,"category")));var H=Q6(O);if(!L||L.length===0){var I,z=(I=S.domain)!==null&&I!==void 0?I:H;if(T){if(L=Ud(F,T,O),O==="category"&&y){var q=oK(L);N&&q?(B=L,L=ag(0,D)):N||(L=wk(z,L,b).reduce(function(G,ee){return G.indexOf(ee)>=0?G:[].concat(ru(G),[ee])},[]))}else if(O==="category")N?L=L.filter(function(G){return G!==""&&!st(G)}):L=wk(z,L,b).reduce(function(G,ee){return G.indexOf(ee)>=0||ee===""||st(ee)?G:[].concat(ru(G),[ee])},[]);else if(O==="number"){var J=wie(F,i.filter(function(G){var ee,le,ge=s in G.props?G.props[s]:(ee=G.type.defaultProps)===null||ee===void 0?void 0:ee[s],ye="hide"in G.props?G.props.hide:(le=G.type.defaultProps)===null||le===void 0?void 0:le.hide;return ge===k&&(R||!ye)}),T,a,f);J&&(L=J)}y&&(O==="number"||j!=="auto")&&(V=Ud(F,T,"category"))}else y?L=ag(0,D):l&&l[k]&&l[k].hasStack&&O==="number"?L=g==="expand"?[0,1]:JB(l[k].stackGroups,u,d):L=XB(F,i.filter(function(G){var ee=s in G.props?G.props[s]:G.type.defaultProps[s],le="hide"in G.props?G.props.hide:G.type.defaultProps.hide;return ee===k&&(R||!le)}),O,f,!0);if(O==="number")L=WS(m,L,k,a,C),z&&(L=fS(z,L,M));else if(O==="category"&&z){var K=z,U=L.every(function(G){return K.indexOf(G)>=0});U&&(L=K)}}return de(de({},x),{},ze({},k,de(de({},S),{},{axisType:a,domain:L,categoricalDomain:V,duplicateDomain:B,originalDomain:(w=S.domain)!==null&&w!==void 0?w:H,isCategorical:y,layout:f})))},{})},ihe=function(e,t){var r=t.graphicalItems,i=t.Axis,a=t.axisType,s=t.axisIdKey,l=t.stackGroups,u=t.dataStartIndex,d=t.dataEndIndex,f=e.layout,m=e.children,g=fv(e.data,{graphicalItems:r,dataStartIndex:u,dataEndIndex:d}),y=g.length,x=KB(f,a),b=-1;return r.reduce(function(w,S){var O=S.type.defaultProps!==void 0?de(de({},S.type.defaultProps),S.props):S.props,T=O[s],M=Q6("number");if(!w[T]){b++;var N;return x?N=ag(0,y):l&&l[T]&&l[T].hasStack?(N=JB(l[T].stackGroups,u,d),N=WS(m,N,T,a)):(N=fS(M,XB(g,r.filter(function(j){var C,R,k=s in j.props?j.props[s]:(C=j.type.defaultProps)===null||C===void 0?void 0:C[s],F="hide"in j.props?j.props.hide:(R=j.type.defaultProps)===null||R===void 0?void 0:R.hide;return k===T&&!F}),"number",f),i.defaultProps.allowDataOverflow),N=WS(m,N,T,a)),de(de({},w),{},ze({},T,de(de({axisType:a},i.defaultProps),{},{hide:!0,orientation:yi(Qde,"".concat(a,".").concat(b%2),null),domain:N,originalDomain:M,isCategorical:x,layout:f})))}return w},{})},ahe=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,a=t.AxisComp,s=t.graphicalItems,l=t.stackGroups,u=t.dataStartIndex,d=t.dataEndIndex,f=e.children,m="".concat(i,"Id"),g=bi(f,a),y={};return g&&g.length?y=rhe(e,{axes:g,graphicalItems:s,axisType:i,axisIdKey:m,stackGroups:l,dataStartIndex:u,dataEndIndex:d}):s&&s.length&&(y=ihe(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:m,stackGroups:l,dataStartIndex:u,dataEndIndex:d})),y},she=function(e){var t=Ls(e),r=Ba(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:aE(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:Kp(t,r)}},u3=function(e){var t=e.children,r=e.defaultShowTooltip,i=Ur(t,Wc),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},ohe=function(e){return!e||!e.length?!1:e.some(function(t){var r=Fa(t&&t.type);return r&&r.indexOf("Bar")>=0})},d3=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},lhe=function(e,t){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,l=e.yAxisMap,u=l===void 0?{}:l,d=r.width,f=r.height,m=r.children,g=r.margin||{},y=Ur(m,Wc),x=Ur(m,qa),b=Object.keys(u).reduce(function(N,j){var C=u[j],R=C.orientation;return!C.mirror&&!C.hide?de(de({},N),{},ze({},R,N[R]+C.width)):N},{left:g.left||0,right:g.right||0}),w=Object.keys(s).reduce(function(N,j){var C=s[j],R=C.orientation;return!C.mirror&&!C.hide?de(de({},N),{},ze({},R,yi(N,"".concat(R))+C.height)):N},{top:g.top||0,bottom:g.bottom||0}),S=de(de({},w),b),O=S.bottom;y&&(S.bottom+=y.props.height||Wc.defaultProps.height),x&&t&&(S=yie(S,i,r,t));var T=d-S.left-S.right,M=f-S.top-S.bottom;return de(de({brushBottom:O},S),{},{width:Math.max(T,0),height:Math.max(M,0)})},che=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},e7=function(e){var t=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,l=s===void 0?["axis"]:s,u=e.axisComponents,d=e.legendContent,f=e.formatAxisMap,m=e.defaultProps,g=function(S,O){var T=O.graphicalItems,M=O.stackGroups,N=O.offset,j=O.updateId,C=O.dataStartIndex,R=O.dataEndIndex,k=S.barSize,F=S.layout,D=S.barGap,L=S.barCategoryGap,B=S.maxBarSize,V=d3(F),H=V.numericAxisName,I=V.cateAxisName,z=ohe(T),q=[];return T.forEach(function(J,K){var U=fv(S.data,{graphicalItems:[J],dataStartIndex:C,dataEndIndex:R}),G=J.type.defaultProps!==void 0?de(de({},J.type.defaultProps),J.props):J.props,ee=G.dataKey,le=G.maxBarSize,ge=G["".concat(H,"Id")],ye=G["".concat(I,"Id")],ve={},Ae=u.reduce(function(Pn,Cr){var da=O["".concat(Cr.axisType,"Map")],Lt=G["".concat(Cr.axisType,"Id")];da&&da[Lt]||Cr.axisType==="zAxis"||pt(!1);var Zr=da[Lt];return de(de({},Pn),{},ze(ze({},Cr.axisType,Zr),"".concat(Cr.axisType,"Ticks"),Ba(Zr)))},ve),me=Ae[I],Se=Ae["".concat(I,"Ticks")],De=M&&M[ge]&&M[ge].hasStack&&Pie(J,M[ge].stackGroups),ce=Fa(J.type).indexOf("Bar")>=0,Me=Kp(me,Se),Te=[],Ge=z&&gie({barSize:k,stackGroups:M,totalSize:che(Ae,I)});if(ce){var Ue,Ft,An=st(le)?B:le,Fn=(Ue=(Ft=Kp(me,Se,!0))!==null&&Ft!==void 0?Ft:An)!==null&&Ue!==void 0?Ue:0;Te=vie({barGap:D,barCategoryGap:L,bandSize:Fn!==Me?Fn:Me,sizeList:Ge[ye],maxBarSize:An}),Fn!==Me&&(Te=Te.map(function(Pn){return de(de({},Pn),{},{position:de(de({},Pn.position),{},{offset:Pn.position.offset-Fn/2})})}))}var Kr=J&&J.type&&J.type.getComposedData;Kr&&q.push({props:de(de({},Kr(de(de({},Ae),{},{displayedData:U,props:S,dataKey:ee,item:J,bandSize:Me,barPosition:Te,offset:N,stackedData:De,layout:F,dataStartIndex:C,dataEndIndex:R}))),{},ze(ze(ze({key:J.key||"item-".concat(K)},H,Ae[H]),I,Ae[I]),"animationId",j)),childIndex:wK(J,S.children),item:J})}),q},y=function(S,O){var T=S.props,M=S.dataStartIndex,N=S.dataEndIndex,j=S.updateId;if(!kM({props:T}))return null;var C=T.children,R=T.layout,k=T.stackOffset,F=T.data,D=T.reverseStackOrder,L=d3(R),B=L.numericAxisName,V=L.cateAxisName,H=bi(C,r),I=jie(F,H,"".concat(B,"Id"),"".concat(V,"Id"),k,D),z=u.reduce(function(G,ee){var le="".concat(ee.axisType,"Map");return de(de({},G),{},ze({},le,ahe(T,de(de({},ee),{},{graphicalItems:H,stackGroups:ee.axisType===B&&I,dataStartIndex:M,dataEndIndex:N}))))},{}),q=lhe(de(de({},z),{},{props:T,graphicalItems:H}),O?.legendBBox);Object.keys(z).forEach(function(G){z[G]=f(T,z[G],q,G.replace("Map",""),t)});var J=z["".concat(V,"Map")],K=she(J),U=g(T,de(de({},z),{},{dataStartIndex:M,dataEndIndex:N,updateId:j,graphicalItems:H,stackGroups:I,offset:q}));return de(de({formattedGraphicalItems:U,graphicalItems:H,offset:q,stackGroups:I},K),z)},x=(function(w){function S(O){var T,M,N;return qde(this,S),N=Vde(this,S,[O]),ze(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ze(N,"accessibilityManager",new Cde),ze(N,"handleLegendBBoxUpdate",function(j){if(j){var C=N.state,R=C.dataStartIndex,k=C.dataEndIndex,F=C.updateId;N.setState(de({legendBBox:j},y({props:N.props,dataStartIndex:R,dataEndIndex:k,updateId:F},de(de({},N.state),{},{legendBBox:j}))))}}),ze(N,"handleReceiveSyncEvent",function(j,C,R){if(N.props.syncId===j){if(R===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(C)}}),ze(N,"handleBrushChange",function(j){var C=j.startIndex,R=j.endIndex;if(C!==N.state.dataStartIndex||R!==N.state.dataEndIndex){var k=N.state.updateId;N.setState(function(){return de({dataStartIndex:C,dataEndIndex:R},y({props:N.props,dataStartIndex:C,dataEndIndex:R,updateId:k},N.state))}),N.triggerSyncEvent({dataStartIndex:C,dataEndIndex:R})}}),ze(N,"handleMouseEnter",function(j){var C=N.getMouseInfo(j);if(C){var R=de(de({},C),{},{isTooltipActive:!0});N.setState(R),N.triggerSyncEvent(R);var k=N.props.onMouseEnter;et(k)&&k(R,j)}}),ze(N,"triggeredAfterMouseMove",function(j){var C=N.getMouseInfo(j),R=C?de(de({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(R),N.triggerSyncEvent(R);var k=N.props.onMouseMove;et(k)&&k(R,j)}),ze(N,"handleItemMouseEnter",function(j){N.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),ze(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),ze(N,"handleMouseMove",function(j){j.persist(),N.throttleTriggeredAfterMouseMove(j)}),ze(N,"handleMouseLeave",function(j){N.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};N.setState(C),N.triggerSyncEvent(C);var R=N.props.onMouseLeave;et(R)&&R(C,j)}),ze(N,"handleOuterEvent",function(j){var C=bK(j),R=yi(N.props,"".concat(C));if(C&&et(R)){var k,F;/.*touch.*/i.test(C)?F=N.getMouseInfo(j.changedTouches[0]):F=N.getMouseInfo(j),R((k=F)!==null&&k!==void 0?k:{},j)}}),ze(N,"handleClick",function(j){var C=N.getMouseInfo(j);if(C){var R=de(de({},C),{},{isTooltipActive:!0});N.setState(R),N.triggerSyncEvent(R);var k=N.props.onClick;et(k)&&k(R,j)}}),ze(N,"handleMouseDown",function(j){var C=N.props.onMouseDown;if(et(C)){var R=N.getMouseInfo(j);C(R,j)}}),ze(N,"handleMouseUp",function(j){var C=N.props.onMouseUp;if(et(C)){var R=N.getMouseInfo(j);C(R,j)}}),ze(N,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),ze(N,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&N.handleMouseDown(j.changedTouches[0])}),ze(N,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&N.handleMouseUp(j.changedTouches[0])}),ze(N,"handleDoubleClick",function(j){var C=N.props.onDoubleClick;if(et(C)){var R=N.getMouseInfo(j);C(R,j)}}),ze(N,"handleContextMenu",function(j){var C=N.props.onContextMenu;if(et(C)){var R=N.getMouseInfo(j);C(R,j)}}),ze(N,"triggerSyncEvent",function(j){N.props.syncId!==void 0&&X1.emit(K1,N.props.syncId,j,N.eventEmitterSymbol)}),ze(N,"applySyncEvent",function(j){var C=N.props,R=C.layout,k=C.syncMethod,F=N.state.updateId,D=j.dataStartIndex,L=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)N.setState(de({dataStartIndex:D,dataEndIndex:L},y({props:N.props,dataStartIndex:D,dataEndIndex:L,updateId:F},N.state)));else if(j.activeTooltipIndex!==void 0){var B=j.chartX,V=j.chartY,H=j.activeTooltipIndex,I=N.state,z=I.offset,q=I.tooltipTicks;if(!z)return;if(typeof k=="function")H=k(q,j);else if(k==="value"){H=-1;for(var J=0;J<q.length;J++)if(q[J].value===j.activeLabel){H=J;break}}var K=de(de({},z),{},{x:z.left,y:z.top}),U=Math.min(B,K.x+K.width),G=Math.min(V,K.y+K.height),ee=q[H]&&q[H].value,le=KS(N.state,N.props.data,H),ge=q[H]?{x:R==="horizontal"?q[H].coordinate:U,y:R==="horizontal"?G:q[H].coordinate}:J6;N.setState(de(de({},j),{},{activeLabel:ee,activeCoordinate:ge,activePayload:le,activeTooltipIndex:H}))}else N.setState(j)}),ze(N,"renderCursor",function(j){var C,R=N.state,k=R.isTooltipActive,F=R.activeCoordinate,D=R.activePayload,L=R.offset,B=R.activeTooltipIndex,V=R.tooltipAxisBandSize,H=N.getTooltipEventType(),I=(C=j.props.active)!==null&&C!==void 0?C:k,z=N.props.layout,q=j.key||"_recharts-cursor";return Z.createElement(Dde,{key:q,activeCoordinate:F,activePayload:D,activeTooltipIndex:B,chartName:t,element:j,isActive:I,layout:z,offset:L,tooltipAxisBandSize:V,tooltipEventType:H})}),ze(N,"renderPolarAxis",function(j,C,R){var k=yi(j,"type.axisType"),F=yi(N.state,"".concat(k,"Map")),D=j.type.defaultProps,L=D!==void 0?de(de({},D),j.props):j.props,B=F&&F[L["".concat(k,"Id")]];return E.cloneElement(j,de(de({},B),{},{className:at(k,B.className),key:j.key||"".concat(C,"-").concat(R),ticks:Ba(B,!0)}))}),ze(N,"renderPolarGrid",function(j){var C=j.props,R=C.radialLines,k=C.polarAngles,F=C.polarRadius,D=N.state,L=D.radiusAxisMap,B=D.angleAxisMap,V=Ls(L),H=Ls(B),I=H.cx,z=H.cy,q=H.innerRadius,J=H.outerRadius;return E.cloneElement(j,{polarAngles:Array.isArray(k)?k:Ba(H,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(F)?F:Ba(V,!0).map(function(K){return K.coordinate}),cx:I,cy:z,innerRadius:q,outerRadius:J,key:j.key||"polar-grid",radialLines:R})}),ze(N,"renderLegend",function(){var j=N.state.formattedGraphicalItems,C=N.props,R=C.children,k=C.width,F=C.height,D=N.props.margin||{},L=k-(D.left||0)-(D.right||0),B=WB({children:R,formattedGraphicalItems:j,legendWidth:L,legendContent:d});if(!B)return null;var V=B.item,H=o3(B,Lde);return E.cloneElement(V,de(de({},H),{},{chartWidth:k,chartHeight:F,margin:D,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),ze(N,"renderTooltip",function(){var j,C=N.props,R=C.children,k=C.accessibilityLayer,F=Ur(R,gi);if(!F)return null;var D=N.state,L=D.isTooltipActive,B=D.activeCoordinate,V=D.activePayload,H=D.activeLabel,I=D.offset,z=(j=F.props.active)!==null&&j!==void 0?j:L;return E.cloneElement(F,{viewBox:de(de({},I),{},{x:I.left,y:I.top}),active:z,label:H,payload:z?V:[],coordinate:B,accessibilityLayer:k})}),ze(N,"renderBrush",function(j){var C=N.props,R=C.margin,k=C.data,F=N.state,D=F.offset,L=F.dataStartIndex,B=F.dataEndIndex,V=F.updateId;return E.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Xm(N.handleBrushChange,j.props.onChange),data:k,x:be(j.props.x)?j.props.x:D.left,y:be(j.props.y)?j.props.y:D.top+D.height+D.brushBottom-(R.bottom||0),width:be(j.props.width)?j.props.width:D.width,startIndex:L,endIndex:B,updateId:"brush-".concat(V)})}),ze(N,"renderReferenceElement",function(j,C,R){if(!j)return null;var k=N,F=k.clipPathId,D=N.state,L=D.xAxisMap,B=D.yAxisMap,V=D.offset,H=j.type.defaultProps||{},I=j.props,z=I.xAxisId,q=z===void 0?H.xAxisId:z,J=I.yAxisId,K=J===void 0?H.yAxisId:J;return E.cloneElement(j,{key:j.key||"".concat(C,"-").concat(R),xAxis:L[q],yAxis:B[K],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:F})}),ze(N,"renderActivePoints",function(j){var C=j.item,R=j.activePoint,k=j.basePoint,F=j.childIndex,D=j.isRange,L=[],B=C.props.key,V=C.item.type.defaultProps!==void 0?de(de({},C.item.type.defaultProps),C.item.props):C.item.props,H=V.activeDot,I=V.dataKey,z=de(de({index:F,dataKey:I,cx:R.x,cy:R.y,r:4,fill:ME(C.item),strokeWidth:2,stroke:"#fff",payload:R.payload,value:R.value},ft(H,!1)),Ap(H));return L.push(S.renderActiveDot(H,z,"".concat(B,"-activePoint-").concat(F))),k?L.push(S.renderActiveDot(H,de(de({},z),{},{cx:k.x,cy:k.y}),"".concat(B,"-basePoint-").concat(F))):D&&L.push(null),L}),ze(N,"renderGraphicChild",function(j,C,R){var k=N.filterFormatItem(j,C,R);if(!k)return null;var F=N.getTooltipEventType(),D=N.state,L=D.isTooltipActive,B=D.tooltipAxis,V=D.activeTooltipIndex,H=D.activeLabel,I=N.props.children,z=Ur(I,gi),q=k.props,J=q.points,K=q.isRange,U=q.baseLine,G=k.item.type.defaultProps!==void 0?de(de({},k.item.type.defaultProps),k.item.props):k.item.props,ee=G.activeDot,le=G.hide,ge=G.activeBar,ye=G.activeShape,ve=!!(!le&&L&&z&&(ee||ge||ye)),Ae={};F!=="axis"&&z&&z.props.trigger==="click"?Ae={onClick:Xm(N.handleItemMouseEnter,j.props.onClick)}:F!=="axis"&&(Ae={onMouseLeave:Xm(N.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Xm(N.handleItemMouseEnter,j.props.onMouseEnter)});var me=E.cloneElement(j,de(de({},k.props),Ae));function Se(Cr){return typeof B.dataKey=="function"?B.dataKey(Cr.payload):null}if(ve)if(V>=0){var De,ce;if(B.dataKey&&!B.allowDuplicatedCategory){var Me=typeof B.dataKey=="function"?Se:"payload.".concat(B.dataKey.toString());De=Sp(J,Me,H),ce=K&&U&&Sp(U,Me,H)}else De=J?.[V],ce=K&&U&&U[V];if(ye||ge){var Te=j.props.activeIndex!==void 0?j.props.activeIndex:V;return[E.cloneElement(j,de(de(de({},k.props),Ae),{},{activeIndex:Te})),null,null]}if(!st(De))return[me].concat(ru(N.renderActivePoints({item:k,activePoint:De,basePoint:ce,childIndex:V,isRange:K})))}else{var Ge,Ue=(Ge=N.getItemByXY(N.state.activeCoordinate))!==null&&Ge!==void 0?Ge:{graphicalItem:me},Ft=Ue.graphicalItem,An=Ft.item,Fn=An===void 0?j:An,Kr=Ft.childIndex,Pn=de(de(de({},k.props),Ae),{},{activeIndex:Kr});return[E.cloneElement(Fn,Pn),null,null]}return K?[me,null,null]:[me,null]}),ze(N,"renderCustomized",function(j,C,R){return E.cloneElement(j,de(de({key:"recharts-customized-".concat(R)},N.props),N.state))}),ze(N,"renderMap",{CartesianGrid:{handler:ep,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:ep},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:ep},YAxis:{handler:ep},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((T=O.id)!==null&&T!==void 0?T:ef("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=G4(N.triggeredAfterMouseMove,(M=O.throttleDelay)!==null&&M!==void 0?M:1e3/60),N.state={},N}return Yde(S,w),Hde(S,[{key:"componentDidMount",value:function(){var T,M;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(M=this.props.margin.top)!==null&&M!==void 0?M:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,M=T.children,N=T.data,j=T.height,C=T.layout,R=Ur(M,gi);if(R){var k=R.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,D=KS(this.state,N,k,F),L=this.state.tooltipTicks[k].coordinate,B=(this.state.offset.top+j)/2,V=C==="horizontal",H=V?{x:L,y:B}:{y:L,x:B},I=this.state.formattedGraphicalItems.find(function(q){var J=q.item;return J.type.name==="Scatter"});I&&(H=de(de({},H),I.props.points[k].tooltipPosition),D=I.props.points[k].tooltipPayload);var z={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:F,activePayload:D,activeCoordinate:H};this.setState(z),this.renderCursor(R),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,M){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==M.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var N,j;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(T){k_([Ur(T.children,gi)],[Ur(this.props.children,gi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=Ur(this.props.children,gi);if(T&&typeof T.props.shared=="boolean"){var M=T.props.shared?"axis":"item";return l.indexOf(M)>=0?M:a}return a}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var M=this.container,N=M.getBoundingClientRect(),j=see(N),C={chartX:Math.round(T.pageX-j.left),chartY:Math.round(T.pageY-j.top)},R=N.width/M.offsetWidth||1,k=this.inRange(C.chartX,C.chartY,R);if(!k)return null;var F=this.state,D=F.xAxisMap,L=F.yAxisMap,B=this.getTooltipEventType(),V=c3(this.state,this.props.data,this.props.layout,k);if(B!=="axis"&&D&&L){var H=Ls(D).scale,I=Ls(L).scale,z=H&&H.invert?H.invert(C.chartX):null,q=I&&I.invert?I.invert(C.chartY):null;return de(de({},C),{},{xValue:z,yValue:q},V)}return V?de(de({},C),V):null}},{key:"inRange",value:function(T,M){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,C=T/N,R=M/N;if(j==="horizontal"||j==="vertical"){var k=this.state.offset,F=C>=k.left&&C<=k.left+k.width&&R>=k.top&&R<=k.top+k.height;return F?{x:C,y:R}:null}var D=this.state,L=D.angleAxisMap,B=D.radiusAxisMap;if(L&&B){var V=Ls(L);return Sk({x:C,y:R},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,M=this.getTooltipEventType(),N=Ur(T,gi),j={};N&&M==="axis"&&(N.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Ap(this.props,this.handleOuterEvent);return de(de({},C),j)}},{key:"addListener",value:function(){X1.on(K1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){X1.removeListener(K1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,M,N){for(var j=this.state.formattedGraphicalItems,C=0,R=j.length;C<R;C++){var k=j[C];if(k.item===T||k.props.key===T.key||M===Fa(k.item.type)&&N===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,M=this.state.offset,N=M.left,j=M.top,C=M.height,R=M.width;return Z.createElement("defs",null,Z.createElement("clipPath",{id:T},Z.createElement("rect",{x:N,y:j,height:C,width:R})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(M,N){var j=s3(N,2),C=j[0],R=j[1];return de(de({},M),{},ze({},C,R.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(M,N){var j=s3(N,2),C=j[0],R=j[1];return de(de({},M),{},ze({},C,R.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var M;return(M=this.state.xAxisMap)===null||M===void 0||(M=M[T])===null||M===void 0?void 0:M.scale}},{key:"getYScaleByAxisId",value:function(T){var M;return(M=this.state.yAxisMap)===null||M===void 0||(M=M[T])===null||M===void 0?void 0:M.scale}},{key:"getItemByXY",value:function(T){var M=this.state,N=M.formattedGraphicalItems,j=M.activeItem;if(N&&N.length)for(var C=0,R=N.length;C<R;C++){var k=N[C],F=k.props,D=k.item,L=D.type.defaultProps!==void 0?de(de({},D.type.defaultProps),D.props):D.props,B=Fa(D.type);if(B==="Bar"){var V=(F.data||[]).find(function(q){return Soe(T,q)});if(V)return{graphicalItem:k,payload:V}}else if(B==="RadialBar"){var H=(F.data||[]).find(function(q){return Sk(T,q)});if(H)return{graphicalItem:k,payload:H}}else if(sv(k,j)||ov(k,j)||Ph(k,j)){var I=fle({graphicalItem:k,activeTooltipItem:j,itemData:L.data}),z=L.activeIndex===void 0?I:L.activeIndex;return{graphicalItem:de(de({},k),{},{childIndex:z}),payload:Ph(k,j)?L.data[I]:k.props.data[I]}}}return null}},{key:"render",value:function(){var T=this;if(!kM(this))return null;var M=this.props,N=M.children,j=M.className,C=M.width,R=M.height,k=M.style,F=M.compact,D=M.title,L=M.desc,B=o3(M,Ide),V=ft(B,!1);if(F)return Z.createElement(UD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement(L_,gc({},V,{width:C,height:R,title:D,desc:L}),this.renderClipPath(),LM(N,this.renderMap)));if(this.props.accessibilityLayer){var H,I;V.tabIndex=(H=this.props.tabIndex)!==null&&H!==void 0?H:0,V.role=(I=this.props.role)!==null&&I!==void 0?I:"application",V.onKeyDown=function(q){T.accessibilityManager.keyboardEvent(q)},V.onFocus=function(){T.accessibilityManager.focus()}}var z=this.parseEventsOfWrapper();return Z.createElement(UD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Z.createElement("div",gc({className:at("recharts-wrapper",j),style:de({position:"relative",cursor:"default",width:C,height:R},k)},z,{ref:function(J){T.container=J}}),Z.createElement(L_,gc({},V,{width:C,height:R,title:D,desc:L,style:ehe}),this.renderClipPath(),LM(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(E.Component);ze(x,"displayName",t),ze(x,"defaultProps",de({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),ze(x,"getDerivedStateFromProps",function(w,S){var O=w.dataKey,T=w.data,M=w.children,N=w.width,j=w.height,C=w.layout,R=w.stackOffset,k=w.margin,F=S.dataStartIndex,D=S.dataEndIndex;if(S.updateId===void 0){var L=u3(w);return de(de(de({},L),{},{updateId:0},y(de(de({props:w},L),{},{updateId:0}),S)),{},{prevDataKey:O,prevData:T,prevWidth:N,prevHeight:j,prevLayout:C,prevStackOffset:R,prevMargin:k,prevChildren:M})}if(O!==S.prevDataKey||T!==S.prevData||N!==S.prevWidth||j!==S.prevHeight||C!==S.prevLayout||R!==S.prevStackOffset||!Ec(k,S.prevMargin)){var B=u3(w),V={chartX:S.chartX,chartY:S.chartY,isTooltipActive:S.isTooltipActive},H=de(de({},c3(S,T,C)),{},{updateId:S.updateId+1}),I=de(de(de({},B),V),H);return de(de(de({},I),y(de({props:w},I),S)),{},{prevDataKey:O,prevData:T,prevWidth:N,prevHeight:j,prevLayout:C,prevStackOffset:R,prevMargin:k,prevChildren:M})}if(!k_(M,S.prevChildren)){var z,q,J,K,U=Ur(M,Wc),G=U&&(z=(q=U.props)===null||q===void 0?void 0:q.startIndex)!==null&&z!==void 0?z:F,ee=U&&(J=(K=U.props)===null||K===void 0?void 0:K.endIndex)!==null&&J!==void 0?J:D,le=G!==F||ee!==D,ge=!st(T),ye=ge&&!le?S.updateId:S.updateId+1;return de(de({updateId:ye},y(de(de({props:w},S),{},{updateId:ye,dataStartIndex:G,dataEndIndex:ee}),S)),{},{prevChildren:M,dataStartIndex:G,dataEndIndex:ee})}return null}),ze(x,"renderActiveDot",function(w,S,O){var T;return E.isValidElement(w)?T=E.cloneElement(w,S):et(w)?T=w(S):T=Z.createElement(RE,S),Z.createElement(dn,{className:"recharts-active-dot",key:O},T)});var b=E.forwardRef(function(S,O){return Z.createElement(x,gc({},S,{ref:O}))});return b.displayName=x.displayName,b},t7=e7({chartName:"LineChart",GraphicalChild:bu,axisComponents:[{axisType:"xAxis",AxisComp:rl},{axisType:"yAxis",AxisComp:il}],formatAxisMap:b6}),uhe=e7({chartName:"BarChart",GraphicalChild:fl,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:rl},{axisType:"yAxis",AxisComp:il}],formatAxisMap:b6});function tp({icon:n,title:e,value:t,color:r}){const i={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600"};return v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex items-center space-x-4",children:[v.jsx("div",{className:`p-3 rounded-full ${i[r]}`,children:v.jsx(n,{className:"w-6 h-6"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),v.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t})]})]})}function dhe({stats:n}){return v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[v.jsx(tp,{icon:E9,title:"Utilisateurs",value:n.totalUsers,color:"blue"}),v.jsx(tp,{icon:Kd,title:"Sujets",value:n.totalSubjects,color:"green"}),v.jsx(tp,{icon:Tg,title:"Livres",value:n.totalBooks,color:"yellow"}),v.jsx(tp,{icon:pA,title:"Drives",value:n.totalDrives,color:"red"})]})}function hhe(){const[n,e]=E.useState({totalUsers:0,totalSubjects:0,totalBooks:0,totalDrives:0}),[t,r]=E.useState([]),[i,a]=E.useState([]),[s,l]=E.useState(!0),[u,d]=E.useState(null);return E.useEffect(()=>{(async()=>{l(!0),d(null);try{const[{count:m,error:g},{count:y,error:x},{count:b,error:w},{count:S,error:O}]=await Promise.all([oe.from("profiles").select("*",{count:"exact",head:!0}),oe.from("sujets").select("*",{count:"exact",head:!0}),oe.from("livres").select("*",{count:"exact",head:!0}),oe.from("drives").select("*",{count:"exact",head:!0})]);if(g||x||w||O)throw g||x||w||O;e({totalUsers:m??0,totalSubjects:y??0,totalBooks:b??0,totalDrives:S??0});const{data:T,error:M}=await oe.from("profiles").select("created_at").gte("created_at",new Date(Date.now()-4320*60*60*1e3).toISOString());if(M)throw M;const N=(T||[]).reduce((k,F)=>{const D=new Date(F.created_at),L=new Intl.DateTimeFormat("fr",{month:"long"}).format(D);return k[L]=(k[L]||0)+1,k},{});r(Object.entries(N).map(([k,F])=>({name:k,utilisateurs:F})).sort((k,F)=>{const D=["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"];return D.indexOf(k.name.toLowerCase())-D.indexOf(F.name.toLowerCase())}));const{data:j,error:C}=await oe.from("sujets").select(`
                        module_id,
                        modules:modules (nom)
                    `);if(C)throw C;const R=(j||[]).reduce((k,F)=>{const D=F.modules?.nom||"Non catgoris";return k[D]=(k[D]||0)+1,k},{});a(Object.entries(R).map(([k,F])=>({name:k,sujets:F})))}catch(m){d(m.message||"Une erreur est survenue lors du chargement des donnes.")}finally{l(!1)}})()},[]),s?v.jsx("div",{className:"text-center p-8",children:"Chargement du tableau de bord..."}):u?v.jsxs("div",{className:"text-center p-8 text-red-500",children:["Erreur: ",u]}):v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Tableau de bord"}),v.jsx(dhe,{stats:n}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Nouveaux utilisateurs (6 derniers mois)"}),v.jsx(K_,{width:"100%",height:300,children:v.jsxs(t7,{data:t,children:[v.jsx(pg,{strokeDasharray:"3 3"}),v.jsx(rl,{dataKey:"name"}),v.jsx(il,{}),v.jsx(gi,{}),v.jsx(qa,{}),v.jsx(bu,{type:"monotone",dataKey:"utilisateurs",stroke:"#3b82f6",strokeWidth:2,activeDot:{r:8}})]})})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Rpartition des sujets par module"}),v.jsx(K_,{width:"100%",height:300,children:v.jsxs(uhe,{data:i,children:[v.jsx(pg,{strokeDasharray:"3 3"}),v.jsx(rl,{dataKey:"name"}),v.jsx(il,{}),v.jsx(gi,{}),v.jsx(qa,{}),v.jsx(fl,{dataKey:"sujets",fill:"#8884d8"})]})})]})]})]})}const fhe=["admin","writer","reader"];function mhe(){const[n,e]=E.useState(""),[t,r]=E.useState([]),[i,a]=E.useState(!0),[s,l]=E.useState(null),[u,d]=E.useState(null),[f,m]=E.useState(!1),[g,y]=E.useState(""),[x,b]=E.useState(1),[w,S]=E.useState(null),O=10,{user:T}=Ui();E.useEffect(()=>{(async()=>{a(!0),l(null);try{const{data:I,error:z}=await oe.from("profiles").select(`
                        id, nom, prenom, role, created_at, code, is_premium, active_code,
                        faculte:facultes (nom),
                        niveau:niveaux (nom)
                    `);if(z)throw z;const{data:{session:q},error:J}=await oe.auth.getSession();if(J)throw J;const K=(I||[]).map(U=>({id:U.id,nom:U.nom,prenom:U.prenom,email:q?.user?.id===U.id?q?.user?.email??"":"",role:U.role,created_at:U.created_at,code:U.code,is_premium:U.is_premium,active_code:U.active_code,faculte_nom:U.faculte?.nom,niveau_nom:U.niveau?.nom}));r(K)}catch(I){l(I.message||"Une erreur est survenue.")}finally{a(!1)}})()},[]);const M=E.useMemo(()=>{const H=n.toLowerCase();return t.filter(I=>I.nom.toLowerCase().includes(H)||I.prenom.toLowerCase().includes(H)||I.email.toLowerCase().includes(H)||I.code.toLowerCase().includes(H))},[n,t]),N=E.useMemo(()=>{let H=[...M];if(w!==null){const{key:I,direction:z}=w;H.sort((q,J)=>{const K=q[I],U=J[I];if(K===U)return 0;if(K==null)return-1;if(U==null)return 1;if(typeof K=="string"&&typeof U=="string"){if(I==="created_at"){const ye=Date.parse(K),ve=Date.parse(U);if(!isNaN(ye)&&!isNaN(ve))return z==="ascending"?ye-ve:ve-ye}const ge=K.localeCompare(U);return z==="ascending"?ge:-ge}if(typeof K=="number"&&typeof U=="number")return z==="ascending"?K-U:U-K;const G=String(K),ee=String(U),le=G.localeCompare(ee);return z==="ascending"?le:-le})}return H},[M,w]),j=async H=>{const I=Math.random().toString(36).substring(2,10).toUpperCase();try{const{error:z}=await oe.from("profiles").update({is_premium:!0,active_code:I,subscription_start_date:new Date().toISOString()}).eq("id",H).select().single();if(z)throw z;r(q=>q.map(J=>J.id===H?{...J,is_premium:!0,active_code:I}:J)),d(I),m(!0)}catch(z){alert(`Erreur lors de l'activation : ${z.message}`)}},C=async(H,I)=>{try{const{error:z}=await oe.from("profiles").update({role:I}).eq("id",H);if(z)throw z;r(q=>q.map(J=>J.id===H?{...J,role:I}:J))}catch(z){alert(`Erreur lors de la mise  jour du rle : ${z.message}`)}},R=()=>{u&&navigator.clipboard.writeText(u).then(()=>{y("Copi !"),setTimeout(()=>y(""),2e3)},()=>{y("chec de la copie")})},k=H=>{let I="ascending";w&&w.key===H&&w.direction==="ascending"&&(I="descending"),S({key:H,direction:I})},F=x*O,D=F-O,L=N.slice(D,F),B=Math.ceil(N.length/O),V=H=>b(H);return i?v.jsx("div",{className:"text-center p-8",children:"Chargement des utilisateurs..."}):s?v.jsxs("div",{className:"text-center p-8 text-red-500",children:["Erreur: ",s]}):v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Grer les utilisateurs"}),v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("div",{className:"relative w-full max-w-md",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(Uh,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{type:"text",placeholder:"Rechercher par nom, email ou code...",value:n,onChange:H=>e(H.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),v.jsxs("button",{className:"flex items-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ml-4 flex-shrink-0",children:[v.jsx(_9,{className:"h-5 w-5 mr-2"}),"Ajouter un utilisateur"]})]}),v.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"border-b-2 border-gray-200",children:[v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Utilisateur"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Code tudiant"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:v.jsxs("button",{onClick:()=>k("role"),className:"flex items-center space-x-1 hover:text-gray-900 transition-colors",children:[v.jsx("span",{children:"Rle"}),w?.key==="role"?w.direction==="ascending"?v.jsx(Er,{className:"h-4 w-4 rotate-90"}):v.jsx(Fs,{className:"h-4 w-4 -rotate-90"}):v.jsx(Xd,{className:"h-4 w-4 text-gray-400"})]})}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Statut"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:v.jsxs("button",{onClick:()=>k("created_at"),className:"flex items-center space-x-1 hover:text-gray-900 transition-colors",children:[v.jsx("span",{children:"Date d'inscription"}),w?.key==="created_at"?w.direction==="ascending"?v.jsx(Er,{className:"h-4 w-4 rotate-90"}):v.jsx(Fs,{className:"h-4 w-4 -rotate-90"}):v.jsx(Xd,{className:"h-4 w-4 text-gray-400"})]})}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Actions"})]})}),v.jsx("tbody",{children:L.map(H=>v.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[v.jsxs("td",{className:"py-3 px-4 flex items-center min-w-[250px]",children:[v.jsx(gA,{className:"h-10 w-10 text-gray-300 mr-4 flex-shrink-0"}),v.jsxs("div",{children:[v.jsxs("div",{className:"font-bold text-gray-800",children:[H.prenom," ",H.nom]}),v.jsx("div",{className:"text-sm text-gray-500",children:H.email}),v.jsx("div",{className:"text-xs text-gray-500 mt-1",children:H.faculte_nom||"N/A"}),v.jsx("div",{className:"text-xs text-gray-400",children:H.niveau_nom||"N/A"})]})]}),v.jsx("td",{className:"py-3 px-4 text-gray-600 font-mono",children:v.jsxs("div",{children:[v.jsx("span",{children:H.code}),H.active_code&&v.jsxs("div",{className:`flex items-center text-xs mt-1 ${H.is_premium?"text-green-600":"text-gray-500"}`,children:[v.jsx("span",{className:"font-sans font-semibold mr-1",children:"Activation:"}),v.jsx("span",{children:H.active_code}),v.jsx("button",{onClick:()=>navigator.clipboard.writeText(H.active_code),className:"ml-2 text-gray-400 hover:text-blue-600",title:"Copier le code d'activation",children:v.jsx(y_,{className:"h-4 w-4"})})]})]})}),v.jsx("td",{className:"py-3 px-4",children:v.jsx("select",{value:H.role,onChange:I=>C(H.id,I.target.value),disabled:H.id===T?.id,className:`px-2 py-1 text-xs font-semibold rounded-full border-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 disabled:opacity-70 disabled:cursor-not-allowed ${H.role==="admin"?"bg-red-100 text-red-800":H.role==="writer"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:fhe.map(I=>v.jsx("option",{value:I,children:I.charAt(0).toUpperCase()+I.slice(1)},I))})}),v.jsx("td",{className:"py-3 px-4",children:H.is_premium?v.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[v.jsx($L,{className:"w-4 h-4 mr-1.5"}),"Premium"]}):v.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Standard"})}),v.jsx("td",{className:"py-3 px-4 text-gray-600",children:fc(new Date(H.created_at),"dd/MM/yyyy",{locale:Ac})}),v.jsxs("td",{className:"py-3 px-4",children:[!H.is_premium&&H.role!=="admin"&&v.jsx("button",{onClick:()=>j(H.id),className:"text-gray-500 hover:text-green-500 p-2",title:"Activer le compte Premium",children:v.jsx(FL,{className:"h-5 w-5"})}),v.jsx("button",{className:"text-gray-500 hover:text-blue-500 p-2",children:v.jsx(es,{className:"h-5 w-5"})}),v.jsx("button",{className:"text-gray-500 hover:text-red-500 p-2",children:v.jsx(Ws,{className:"h-5 w-5"})})]})]},H.id))})]})}),B>1&&v.jsxs("div",{className:"flex justify-between items-center mt-4",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",x," sur ",B]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>V(x-1),disabled:x===1,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Er,{className:"h-5 w-5 text-gray-600"})}),v.jsx("button",{onClick:()=>V(x+1),disabled:x===B,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Fs,{className:"h-5 w-5 text-gray-600"})})]})]}),v.jsxs(Wr,{isOpen:f,onClose:()=>m(!1),title:"Code d'activation gnr",children:[v.jsx("p",{className:"text-gray-600 mb-4",children:"Le compte a t activ. Veuillez copier le code ci-dessous et l'envoyer  l'tudiant."}),v.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg flex items-center justify-between",children:[v.jsx("span",{className:"text-xl font-mono font-bold text-gray-800 tracking-widest",children:u}),v.jsxs("button",{onClick:R,className:"flex items-center text-sm bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md transition-all duration-200",children:[v.jsx(y_,{className:"h-5 w-5 mr-2"}),g||"Copier"]})]})]})]})}const Tr=({options:n,value:e,onChange:t,placeholder:r,disabled:i})=>{const[a,s]=E.useState(!1),[l,u]=E.useState(""),d=E.useRef(null),f=E.useMemo(()=>l?n.filter(y=>y.name.toLowerCase().includes(l.toLowerCase())):n,[n,l]);E.useEffect(()=>{const y=x=>{d.current&&!d.current.contains(x.target)&&s(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{t(y),u(""),s(!1)},g=y=>{y.stopPropagation(),t(null)};return v.jsxs("div",{className:"relative",ref:d,children:[v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"text",value:a?l:e,onChange:y=>u(y.target.value),onFocus:()=>s(!0),placeholder:r,disabled:i,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed"}),v.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:[e&&!i&&v.jsx("button",{type:"button",onClick:g,className:"p-1 text-gray-400 hover:text-gray-600",children:v.jsx(vA,{className:"h-4 w-4"})}),v.jsx(Xd,{className:"h-5 w-5 text-gray-400"})]})]}),a&&!i&&v.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:f.length>0?f.map(y=>v.jsx("li",{onClick:()=>m(y),className:"px-4 py-2 cursor-pointer hover:bg-blue-50",children:y.name},y.id)):v.jsx("li",{className:"px-4 py-2 text-gray-500",children:"Aucun rsultat"})})]})},h3={id:null,title:"",moduleId:"",moduleName:"",universityId:"",universityName:"",file:null};function phe(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[i,a]=E.useState(""),[s,l]=E.useState([]),[u,d]=E.useState([]),[f,m]=E.useState([]);E.useEffect(()=>{let q=!1;return(async()=>{try{const[K,U,G]=await Promise.all([oe.from("modules").select("id, nom"),oe.from("universites").select("id, nom"),oe.from("sujets").select("id, titre, fichier_url, module_id, universite_id")]);if(q)return;if(K.error)throw K.error;if(U.error)throw U.error;if(G.error)throw G.error;const ee=(K.data||[]).map(Ae=>({id:Ae.id,name:Ae.nom})),le=(U.data||[]).map(Ae=>({id:Ae.id,name:Ae.nom})),ge=Object.fromEntries(ee.map(Ae=>[Ae.id,Ae])),ye=Object.fromEntries(le.map(Ae=>[Ae.id,Ae])),ve=(G.data||[]).map(Ae=>{const me=ge[Ae.module_id],Se=ye[Ae.universite_id];return{id:Ae.id,title:Ae.titre||"Sans titre",fileSize:"N/A",pdfUrl:Ae.fichier_url||"#",moduleId:Ae.module_id,moduleName:me?.name||"",universityId:Ae.universite_id,universityName:Se?.name||""}});d(ee),m(le),l(ve)}catch{}})(),()=>{q=!0}},[]);const[g,y]=E.useState(1),x=10,[b,w]=E.useState(!1),[S,O]=E.useState(h3),[T,M]=E.useState(null),N=E.useMemo(()=>{const q={};return u.forEach(J=>{q[J.id]=f}),q},[u,f]),j=E.useMemo(()=>{const q=n.toLowerCase();return s.filter(J=>{const K=!q||J.title.toLowerCase().includes(q),U=!t||J.moduleId===u.find(ee=>ee.id===t)?.id,G=!i||J.universityId===i;return K&&U&&G})},[n,t,i,s]),C=q=>{r(q.target.value),a("")},R=g*x,k=R-x,F=j.slice(k,R),D=Math.ceil(j.length/x),L=q=>y(q),B=q=>{const J=q.target.files?.[0];J&&O(K=>({...K,file:J}))},V=q=>{if(q.preventDefault(),S.id)l(J=>J.map(K=>K.id===S.id?{...K,title:S.title,moduleName:S.moduleName,universityName:S.universityName,fileSize:S.file?`${(S.file.size/1024).toFixed(2)} KB`:K.fileSize}:K));else{const J={id:`new-subject-${Date.now()}`,title:S.title,fileSize:S.file?`${(S.file.size/1024).toFixed(2)} KB`:"N/A",pdfUrl:"#",moduleId:S.moduleId,moduleName:S.moduleName,universityId:S.universityId,universityName:S.universityName,creatorId:99,creatorName:"Admin Actuel"};l(K=>[J,...K])}w(!1)},H=()=>{T&&(l(q=>q.filter(J=>J.id!==T.id)),M(null))},I=q=>{const J=u.find(U=>U.id===q.moduleId),K=f.find(U=>U.id===q.universityId);O({id:q.id,title:q.title,moduleId:J?.id||"",moduleName:J?.name||q.moduleName,universityId:K?.id||"",universityName:K?.name||q.universityName,file:null}),w(!0)},z=()=>{O(h3),w(!0)};return v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Grer les sujets"}),v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[v.jsxs("div",{className:"w-full md:w-auto flex-grow grid grid-cols-1 sm:grid-cols-3 gap-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(Uh,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{type:"text",placeholder:"Rechercher un titre...",value:n,onChange:q=>e(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),v.jsxs("select",{onChange:C,value:t,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"",children:"Tous les modules"}),u.map(q=>v.jsx("option",{value:q.id,children:q.name},q.id))]}),v.jsxs("select",{onChange:q=>a(q.target.value),value:i,disabled:!t,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed",children:[v.jsx("option",{value:"",children:"Toutes les universits"}),(N[t]||[]).map(q=>v.jsx("option",{value:q.id,children:q.name},q.id))]})]}),v.jsxs("button",{onClick:z,className:"flex items-center bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 ml-4 flex-shrink-0",children:[v.jsx(GH,{className:"h-5 w-5 mr-2"}),"Ajouter un sujet"]})]}),v.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"border-b-2 border-gray-200",children:[v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Titre du sujet"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Module"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Universit"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Taille"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Actions"})]})}),v.jsx("tbody",{children:F.map(q=>v.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[v.jsx("td",{className:"py-3 px-4",children:v.jsxs("div",{children:[v.jsx("span",{className:"font-medium text-gray-800",children:q.title}),v.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Cr par : ",v.jsx("span",{className:"font-medium",children:q.creatorName})," (ID: ",q.creatorId,")"]})]})}),v.jsx("td",{className:"py-3 px-4 text-gray-600",children:q.moduleName}),v.jsx("td",{className:"py-3 px-4 text-gray-600",children:q.universityName}),v.jsx("td",{className:"py-3 px-4 text-gray-500 font-mono",children:q.fileSize}),v.jsxs("td",{className:"py-3 px-4 whitespace-nowrap",children:[v.jsx(en,{to:`/sujets/${q.id}`,className:"text-gray-500 hover:text-green-500 p-2",title:"Voir le sujet",children:v.jsx(pp,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>I(q),className:"text-gray-500 hover:text-blue-500 p-2",title:"Modifier",children:v.jsx(es,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>M(q),className:"text-gray-500 hover:text-red-500 p-2",title:"Supprimer",children:v.jsx(Ws,{className:"h-5 w-5"})})]})]},q.id))})]})}),D>1&&v.jsxs("div",{className:"flex justify-between items-center mt-4",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",g," sur ",D]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>L(g-1),disabled:g===1,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Er,{className:"h-5 w-5 text-gray-600"})}),v.jsx("button",{onClick:()=>L(g+1),disabled:g===D,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Fs,{className:"h-5 w-5 text-gray-600"})})]})]}),v.jsx(Wr,{isOpen:b,onClose:()=>w(!1),title:S.id?"Modifier le sujet":"Ajouter un nouveau sujet",children:v.jsxs("form",{onSubmit:V,children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre du sujet"}),v.jsx("input",{type:"text",name:"title",id:"title",required:!0,value:S.title,onChange:q=>O(J=>({...J,title:q.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"moduleId",className:"block text-sm font-medium text-gray-700",children:"Module"}),v.jsx(Tr,{options:u,value:S.moduleName,onChange:q=>O(J=>({...J,moduleId:q?.id||"",moduleName:q?.name||"",universityId:"",universityName:""})),placeholder:"Rechercher un module..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"universityId",className:"block text-sm font-medium text-gray-700",children:"Universit"}),v.jsx(Tr,{options:N[S.moduleId]||[],value:S.universityName,onChange:q=>O(J=>({...J,universityId:q?.id||"",universityName:q?.name||""})),disabled:!S.moduleId,placeholder:S.moduleId?"Rechercher une universit...":"Slectionnez d'abord un module"})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700",children:["Fichier PDF ",S.id&&v.jsx("span",{className:"text-xs text-gray-500",children:"(Optionnel: laisser vide pour ne pas changer)"})]}),v.jsx("input",{type:"file",name:"file",id:"file",required:!S.id,accept:"application/pdf",onChange:B,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:()=>w(!1),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Annuler"}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:S.id?"Enregistrer":"Ajouter"})]})]})}),v.jsx(Wr,{isOpen:!!T,onClose:()=>M(null),title:"Confirmer la suppression",children:v.jsxs("div",{children:[v.jsx("p",{className:"text-gray-600 mb-4",children:"tes-vous sr de vouloir supprimer le sujet suivant ? Cette action est irrversible."}),v.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[v.jsx("p",{className:"font-bold text-gray-800",children:T?.title}),v.jsxs("p",{className:"text-sm text-gray-500",children:[T?.moduleName," - ",T?.universityName]})]}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:()=>M(null),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Annuler"}),v.jsx("button",{onClick:H,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition-colors",children:"Supprimer"})]})]})})]})}function ghe(){const[n,e]=E.useState([]),[t,r]=E.useState([]),[i,a]=E.useState(!0),[s,l]=E.useState(null),[u,d]=E.useState(""),[f,m]=E.useState(1),g=10,[y,x]=E.useState(!1),[b,w]=E.useState(null),[S,O]=E.useState(null),[T,M]=E.useState(null),[N,j]=E.useState(!1),[C,R]=E.useState(null);E.useEffect(()=>{(async()=>{a(!0);try{const[{data:U,error:G},{data:ee,error:le}]=await Promise.all([oe.from("livres").select("*, modules(nom)").order("titre"),oe.from("modules").select("id, nom").order("nom")]);if(G)throw G;if(le)throw le;e(U||[]),r(ee||[])}catch(U){l(U.message)}finally{a(!1)}})()},[]);const k=(K=null)=>{w(K),O(null),M(null),x(!0)},F=()=>{x(!1),w(null)},D=async K=>{K.preventDefault();const U=new FormData(K.currentTarget);let G=b?.couverture_url||null,ee=b?.fichier_url||"",le=b?.taille_fichier||null;try{if(S){const ve=`public/covers/${Date.now()}_${S.name.replace(/\s/g,"_")}`,{error:Ae}=await oe.storage.from("livres").upload(ve,S);if(Ae)throw Ae;G=oe.storage.from("livres").getPublicUrl(ve).data.publicUrl}if(T){const ve=`public/pdfs/${Date.now()}_${T.name.replace(/\s/g,"_")}`,{error:Ae}=await oe.storage.from("livres").upload(ve,T);if(Ae)throw Ae;ee=oe.storage.from("livres").getPublicUrl(ve).data.publicUrl,le=T.size}const ge={titre:U.get("titre"),auteur:U.get("auteur"),module_id:U.get("module_id"),nombre_pages:Number(U.get("nombre_pages"))||null,couverture_url:G,fichier_url:ee,taille_fichier:le};if(b?.id){const{error:ve}=await oe.from("livres").update(ge).eq("id",b.id);if(ve)throw ve}else{const{error:ve}=await oe.from("livres").insert(ge);if(ve)throw ve}const{data:ye}=await oe.from("livres").select("*, modules(nom)").order("titre");e(ye||[]),F()}catch(ge){l(ge.message)}},L=async K=>{R(K),j(!0)},B=async()=>{if(C){try{const{error:K}=await oe.from("livres").delete().eq("id",C);if(K)throw K;e(n.filter(U=>U.id!==C))}catch(K){l(K.message)}R(null)}},V=E.useMemo(()=>{const K=u.toLowerCase();return K?n.filter(U=>U.titre.toLowerCase().includes(K)||(U.modules?.nom.toLowerCase()||"").includes(K)):n},[u,n]),H=f*g,I=H-g,z=V.slice(I,H),q=Math.ceil(V.length/g),J=K=>m(K);return i?v.jsx("div",{className:"p-4",children:"Chargement..."}):s?v.jsxs("div",{className:"p-4 text-red-500",children:["Erreur: ",s]}):v.jsxs("div",{className:"p-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Grer les livres"}),v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("div",{className:"relative w-full max-w-md",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(Uh,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{type:"text",placeholder:"Rechercher un livre, module...",value:u,onChange:K=>d(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),v.jsxs("button",{onClick:()=>k(),className:"bg-blue-500 text-white p-2 rounded-lg flex items-center",children:[v.jsx(lu,{className:"h-5 w-5 mr-2"}),"Ajouter un livre"]})]}),v.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"border-b-2 border-gray-200",children:[v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Titre du livre"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Module"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600 text-center",children:"Pages"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600 text-right",children:"Actions"})]})}),v.jsx("tbody",{children:z.map(K=>v.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[v.jsxs("td",{className:"py-3 px-4 flex items-center",children:[K.couverture_url?v.jsx("img",{src:K.couverture_url,alt:K.titre,className:"h-12 w-9 object-cover rounded-sm mr-4"}):v.jsx(Tg,{className:"h-10 w-10 text-gray-300 mr-4"}),v.jsxs("div",{children:[v.jsx("span",{className:"font-medium text-gray-800",children:K.titre}),v.jsx("p",{className:"text-xs text-gray-500",children:K.auteur})]})]}),v.jsx("td",{className:"py-3 px-4 text-gray-600",children:K.modules?.nom||"N/A"}),v.jsx("td",{className:"py-3 px-4 text-gray-500 text-center",children:K.nombre_pages||"-"}),v.jsxs("td",{className:"py-3 px-4 whitespace-nowrap text-right",children:[v.jsx("button",{onClick:()=>k(K),className:"text-gray-500 hover:text-blue-500 p-2",title:"Modifier",children:v.jsx(es,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>L(K.id),className:"text-gray-500 hover:text-red-500 p-2",title:"Supprimer",children:v.jsx(Ws,{className:"h-5 w-5"})})]})]},K.id))})]})}),q>1&&v.jsxs("div",{className:"flex justify-between items-center mt-4",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",f," sur ",q]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>J(f-1),disabled:f===1,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Er,{className:"h-5 w-5 text-gray-600"})}),v.jsx("button",{onClick:()=>J(f+1),disabled:f===q,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Fs,{className:"h-5 w-5 text-gray-600"})})]})]}),v.jsx(Wr,{isOpen:y,onClose:F,title:b?.id?"Modifier le Livre":"Ajouter un Livre",children:v.jsxs("form",{onSubmit:D,children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"titre",className:"block text-sm font-medium text-gray-700",children:"Titre"}),v.jsx("input",{type:"text",name:"titre",id:"titre",defaultValue:b?.titre||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"auteur",className:"block text-sm font-medium text-gray-700",children:"Auteur"}),v.jsx("input",{type:"text",name:"auteur",id:"auteur",defaultValue:b?.auteur||"",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"module_id",className:"block text-sm font-medium text-gray-700",children:"Module"}),v.jsxs("select",{name:"module_id",id:"module_id",defaultValue:b?.module_id||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm",children:[v.jsx("option",{value:"",children:"Slectionner un module"}),t.map(K=>v.jsx("option",{value:K.id,children:K.nom},K.id))]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"nombre_pages",className:"block text-sm font-medium text-gray-700",children:"Nombre de pages"}),v.jsx("input",{type:"number",name:"nombre_pages",id:"nombre_pages",defaultValue:b?.nombre_pages||"",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"coverFile",className:"block text-sm font-medium text-gray-700",children:"Image de couverture"}),v.jsx("input",{type:"file",name:"coverFile",id:"coverFile",accept:"image/*",onChange:K=>O(K.target.files?K.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"pdfFile",className:"block text-sm font-medium text-gray-700",children:"Fichier PDF"}),v.jsx("input",{type:"file",name:"pdfFile",id:"pdfFile",accept:"application/pdf",required:!b?.id,onChange:K=>M(K.target.files?K.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0"})]})]}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:F,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300",children:"Annuler"}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:b?.id?"Enregistrer":"Crer"})]})]})}),v.jsx(qi,{isOpen:N,onClose:()=>j(!1),onConfirm:B,title:"Confirmer la suppression",message:"tes-vous sr de vouloir supprimer ce livre ? Cette action est irrversible.",isDestructive:!0})]})}function vhe(){const[n,e]=E.useState([]),[t,r]=E.useState([]),[i,a]=E.useState([]),[s,l]=E.useState(!0),[u,d]=E.useState(null),[f,m]=E.useState(!1),[g,y]=E.useState(null);E.useEffect(()=>{(async()=>{l(!0);try{const{data:T,error:M}=await oe.from("drives").select("*, facultes(nom), niveaux(nom)");if(M)throw M;e(T||[]);const{data:N,error:j}=await oe.from("facultes").select("*");if(j)throw j;r(N||[]);const{data:C,error:R}=await oe.from("niveaux").select("*");if(R)throw R;a(C||[])}catch(T){d(T.message)}finally{l(!1)}})()},[]);const x=(O=null)=>{y(O),m(!0)},b=()=>{m(!1),y(null)},w=async O=>{O.preventDefault();const T=new FormData(O.currentTarget),M={titre:T.get("titre"),description:T.get("description"),url:T.get("url"),faculte_id:T.get("faculte_id"),niveau_id:T.get("niveau_id")};try{let N;if(g?.id){const{error:C}=await oe.from("drives").update(M).eq("id",g.id);N=C}else{const{error:C}=await oe.from("drives").insert(M);N=C}if(N)throw N;const{data:j}=await oe.from("drives").select("*, facultes(nom), niveaux(nom)");e(j||[]),b()}catch(N){d(N.message)}},S=async O=>{if(window.confirm("tes-vous sr de vouloir supprimer ce drive ?"))try{const{error:T}=await oe.from("drives").delete().eq("id",O);if(T)throw T;e(n.filter(M=>M.id!==O))}catch(T){d(T.message)}};return s?v.jsx("div",{className:"p-4",children:"Chargement..."}):u?v.jsxs("div",{className:"p-4 text-red-500",children:["Erreur: ",u]}):v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h1",{className:"text-2xl font-bold",children:"Grer les Drives"}),v.jsxs("button",{onClick:()=>x(),className:"bg-blue-500 text-white p-2 rounded-lg flex items-center",children:[v.jsx(lu,{className:"h-5 w-5 mr-2"}),"Ajouter un Drive"]})]}),v.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Titre"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facult"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Niveau"}),v.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(O=>v.jsxs("tr",{children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.titre}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.facultes?.nom||"N/A"}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.niveaux?.nom||"N/A"}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[v.jsx("button",{onClick:()=>x(O),className:"text-indigo-600 hover:text-indigo-900",children:v.jsx(es,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>S(O.id),className:"text-red-600 hover:text-red-900 ml-4",children:v.jsx(Ws,{className:"h-5 w-5"})})]})]},O.id))})]})}),f&&v.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:v.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[v.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:g?.id?"Modifier le Drive":"Ajouter un Drive"}),v.jsxs("form",{onSubmit:w,children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"titre",className:"block text-sm font-medium text-gray-700",children:"Titre"}),v.jsx("input",{type:"text",name:"titre",id:"titre",defaultValue:g?.titre||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),v.jsx("textarea",{name:"description",id:"description",defaultValue:g?.description||"",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700",children:"URL"}),v.jsx("input",{type:"url",name:"url",id:"url",defaultValue:g?.url||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"faculte_id",className:"block text-sm font-medium text-gray-700",children:"Facult"}),v.jsxs("select",{name:"faculte_id",id:"faculte_id",defaultValue:g?.faculte_id||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[v.jsx("option",{value:"",children:"Slectionner une facult"}),t.map(O=>v.jsx("option",{value:O.id,children:O.nom},O.id))]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"niveau_id",className:"block text-sm font-medium text-gray-700",children:"Niveau"}),v.jsxs("select",{name:"niveau_id",id:"niveau_id",defaultValue:g?.niveau_id||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[v.jsx("option",{value:"",children:"Slectionner un niveau"}),i.map(O=>v.jsx("option",{value:O.id,children:O.nom},O.id))]})]})]}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:b,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300",children:"Annuler"}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:g?.id?"Enregistrer":"Crer"})]})]})]})})]})}function yhe(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[s,l]=E.useState(!1),[u,d]=E.useState(null);E.useEffect(()=>{(async()=>{r(!0);try{const{data:b,error:w}=await oe.from("modules").select("*").order("nom");if(w)throw w;e(b||[])}catch(b){a(b.message)}finally{r(!1)}})()},[]);const f=(x=null)=>{d(x),l(!0)},m=()=>{l(!1),d(null)},g=async x=>{x.preventDefault();const b=new FormData(x.currentTarget),w={nom:b.get("nom"),description:b.get("description"),icone_url:b.get("icone_url")};try{if(u?.id){const{error:O}=await oe.from("modules").update(w).eq("id",u.id);if(O)throw O}else{const{error:O}=await oe.from("modules").insert(w);if(O)throw O}const{data:S}=await oe.from("modules").select("*").order("nom");e(S||[]),m()}catch(S){a(S.message)}},y=async x=>{if(window.confirm("tes-vous sr de vouloir supprimer ce module ?"))try{const{error:b}=await oe.from("modules").delete().eq("id",x);if(b)throw b;e(n.filter(w=>w.id!==x))}catch(b){a(b.message)}};return t?v.jsx("div",{className:"p-4",children:"Chargement..."}):i?v.jsxs("div",{className:"p-4 text-red-500",children:["Erreur: ",i]}):v.jsxs("div",{className:"p-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Grer les Modules"}),v.jsx("div",{className:"flex justify-end mb-4",children:v.jsxs("button",{onClick:()=>f(),className:"bg-blue-500 text-white p-2 rounded-lg flex items-center",children:[v.jsx(lu,{className:"h-5 w-5 mr-2"}),"Ajouter un Module"]})}),v.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Icne"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),v.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(x=>v.jsxs("tr",{children:[v.jsx("td",{className:"px-6 py-4",children:v.jsx("img",{src:x.icone_url||void 0,alt:x.nom,className:"h-10 w-10 object-contain"})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:x.nom}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.description}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[v.jsx("button",{onClick:()=>f(x),className:"text-indigo-600 hover:text-indigo-900",children:v.jsx(es,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>y(x.id),className:"text-red-600 hover:text-red-900 ml-4",children:v.jsx(Ws,{className:"h-5 w-5"})})]})]},x.id))})]})}),v.jsx(Wr,{isOpen:s,onClose:m,title:u?.id?"Modifier le Module":"Ajouter un Module",children:v.jsxs("form",{onSubmit:g,children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom du module"}),v.jsx("input",{type:"text",name:"nom",id:"nom",defaultValue:u?.nom||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),v.jsx("textarea",{name:"description",id:"description",defaultValue:u?.description||"",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"icone_url",className:"block text-sm font-medium text-gray-700",children:"URL de l'icne"}),v.jsx("input",{type:"url",name:"icone_url",id:"icone_url",defaultValue:u?.icone_url||"",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:m,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300",children:"Annuler"}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:u?.id?"Enregistrer":"Crer"})]})]})})]})}const bhe={en_attente:"bg-yellow-100 text-yellow-800",en_cours:"bg-blue-100 text-blue-800",resolu:"bg-green-100 text-green-800",rejete:"bg-red-100 text-red-800"},whe=["en_attente","en_cours","resolu","rejete"],J1=10;function xhe(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[s,l]=E.useState({key:"created_at",direction:"descending"}),[u,d]=E.useState(null),[f,m]=E.useState(1),[g,y]=E.useState(""),[x,b]=E.useState(!1);E.useEffect(()=>{(async()=>{r(!0),a(null);try{const{data:B,error:V}=await oe.from("signalements").select(`
                    id, created_at, description, item_id, statut, type, admin_comment,
                    user:user_id(id, email, profile:profiles(nom, prenom)),
                    sujet:sujets(titre),
                    livre:livres(titre),
                    drive:drives(titre)
                `);if(V)throw V;const H=B.map(I=>({...I,item_title:I.sujet?.titre||I.livre?.titre||I.drive?.titre||"lment inconnu"}));e(H)}catch(B){a(B.message||"Une erreur est survenue.")}finally{r(!1)}})()},[]);const w=E.useMemo(()=>{let L=[...n];if(s!==null){const{key:B,direction:V}=s;L.sort((H,I)=>{const z=H[B],q=I[B];if(z===q)return 0;if(z==null)return-1;if(q==null)return 1;if(typeof z=="string"&&typeof q=="string"){if(B==="created_at"){const ee=Date.parse(z),le=Date.parse(q);if(!isNaN(ee)&&!isNaN(le))return V==="ascending"?ee-le:le-ee}const G=z.localeCompare(q);return V==="ascending"?G:-G}if(typeof z=="number"&&typeof q=="number")return V==="ascending"?z-q:q-z;const J=String(z),K=String(q),U=J.localeCompare(K);return V==="ascending"?U:-U})}return L},[n,s]),S=L=>{let B="ascending";s&&s.key===L&&s.direction==="ascending"&&(B="descending"),l({key:L,direction:B})},O=async(L,B)=>{try{const{error:V}=await oe.from("signalements").update({statut:B,updated_at:new Date().toISOString()}).eq("id",L);if(V)throw V;e(H=>H.map(I=>I.id===L?{...I,statut:B}:I))}catch(V){alert(`Erreur lors de la mise  jour du statut : ${V.message}`)}},T=L=>{const B=window.location.origin;return L.type==="sujet"?`${B}/sujets/${L.item_id}`:L.type==="livre"?`${B}/livres/${L.item_id}`:null},M=L=>{d(L),y(L.admin_comment||"")},N=()=>{d(null),y(""),b(!1)},j=async()=>{if(u){b(!0);try{const{data:L,error:B}=await oe.from("signalements").update({admin_comment:g,updated_at:new Date().toISOString()}).eq("id",u.id).select().single();if(B)throw B;e(V=>V.map(H=>H.id===u.id?{...H,admin_comment:L.admin_comment}:H)),N()}catch(L){alert(`Erreur lors de la sauvegarde du commentaire : ${L.message}`)}finally{b(!1)}}},C=Math.ceil(w.length/J1),R=f*J1,k=R-J1,F=w.slice(k,R),D=L=>m(L);return t?v.jsx("div",{className:"text-center p-8",children:"Chargement des signalements..."}):i?v.jsxs("div",{className:"text-center p-8 text-red-500",children:["Erreur: ",i]}):v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Grer les Signalements"}),v.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"border-b-2 border-gray-200",children:[v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Utilisateur"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"lment signal"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Description"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:v.jsxs("button",{onClick:()=>S("created_at"),className:"flex items-center space-x-1",children:[v.jsx("span",{children:"Date"}),v.jsx(Xd,{className:"h-4 w-4"})]})}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:v.jsxs("button",{onClick:()=>S("statut"),className:"flex items-center space-x-1",children:[v.jsx("span",{children:"Statut"}),v.jsx(Xd,{className:"h-4 w-4"})]})}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Commentaire"})]})}),v.jsx("tbody",{children:F.map(L=>v.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[v.jsx("td",{className:"py-3 px-4",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx(gA,{className:"h-8 w-8 text-gray-400 mr-3"}),v.jsxs("div",{children:[v.jsxs("p",{className:"font-medium text-gray-800",children:[L.user?.profile?.prenom||"Utilisateur"," ",L.user?.profile?.nom||""]}),v.jsx("p",{className:"text-xs text-gray-500",children:L.user?.email})]})]})}),v.jsx("td",{className:"py-3 px-4",children:v.jsxs("div",{className:"flex items-center",children:[v.jsxs("div",{className:"flex-grow",children:[v.jsx("p",{className:"font-medium text-gray-800",children:L.item_title}),v.jsxs("span",{className:"text-xs capitalize inline-flex items-center px-2 py-0.5 rounded-full bg-gray-100 text-gray-600",children:[v.jsx(p9,{className:"w-3 h-3 mr-1"}),L.type]})]}),T(L)&&v.jsx("a",{href:T(L),target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-gray-400 hover:text-blue-600 rounded-full hover:bg-blue-50",title:"Voir l'lment",children:v.jsx(JH,{className:"w-4 h-4"})})]})}),v.jsx("td",{className:"py-3 px-4 text-gray-600 max-w-sm",children:v.jsx("p",{className:"truncate",title:L.description,children:L.description})}),v.jsx("td",{className:"py-3 px-4 text-gray-500 text-sm",children:fc(new Date(L.created_at),"dd/MM/yyyy HH:mm",{locale:Ac})}),v.jsx("td",{className:"py-3 px-4",children:v.jsx("select",{value:L.statut,onChange:B=>O(L.id,B.target.value),className:`px-2 py-1 text-xs font-semibold rounded-full border-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500 ${bhe[L.statut]}`,children:whe.map(B=>v.jsx("option",{value:B,children:B.replace("_"," ")},B))})}),v.jsx("td",{className:"py-3 px-4",children:v.jsxs("div",{className:"flex items-center",children:[L.admin_comment&&v.jsx(RH,{className:"h-5 w-5 text-gray-400",title:L.admin_comment}),v.jsx("button",{onClick:()=>M(L),className:"text-gray-400 hover:text-blue-500 p-2 ml-1",title:"Ajouter/Modifier un commentaire",children:v.jsx(es,{className:"h-4 w-4"})})]})})]},L.id))})]})}),C>1&&v.jsxs("div",{className:"flex justify-between items-center mt-4",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",f," sur ",C]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>D(f-1),disabled:f===1,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Er,{className:"h-5 w-5 text-gray-600"})}),v.jsx("button",{onClick:()=>D(f+1),disabled:f===C,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Fs,{className:"h-5 w-5 text-gray-600"})})]})]}),v.jsx(Wr,{isOpen:!!u,onClose:N,title:"Commentaire pour le signalement",children:v.jsxs("div",{children:[v.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Signalement de: ",v.jsxs("span",{className:"font-semibold",children:[u?.user?.profile?.prenom," ",u?.user?.profile?.nom]})]}),v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["lment: ",v.jsx("span",{className:"font-semibold",children:u?.item_title})]}),v.jsx("textarea",{value:g,onChange:L=>y(L.target.value),className:"w-full h-40 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ajouter un commentaire interne..."}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:N,className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none",children:"Annuler"}),v.jsx("button",{onClick:j,disabled:x,className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:x?"Sauvegarde...":"Sauvegarder"})]})]})})]})}function _he(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[s,l]=E.useState(!1),[u,d]=E.useState(null),[f,m]=E.useState("");E.useEffect(()=>{(async()=>{r(!0);try{const{data:S,error:O}=await oe.from("facultes").select("*").order("nom");if(O)throw O;e(S||[])}catch(S){a(S.message)}finally{r(!1)}})()},[]);const g=(w=null)=>{d(w),m(w?.nom||""),l(!0)},y=()=>{l(!1),d(null),m("")},x=async w=>{if(w.preventDefault(),!!f)try{let S;u?.id?S=await oe.from("facultes").update({nom:f}).eq("id",u.id).select().single():S=await oe.from("facultes").insert({nom:f}).select().single();const{error:O}=S;if(O)throw O;const{data:T}=await oe.from("facultes").select("*").order("nom");e(T||[]),y()}catch(S){a(S.message)}},b=async w=>{if(window.confirm("tes-vous sr de vouloir supprimer cette facult ?"))try{const{error:S}=await oe.from("facultes").delete().eq("id",w);if(S)throw S;e(n.filter(O=>O.id!==w))}catch(S){a(S.message)}};return t?v.jsx("div",{className:"p-4",children:"Chargement..."}):i?v.jsxs("div",{className:"p-4 text-red-500",children:["Erreur: ",i]}):v.jsxs("div",{className:"p-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Grer les Facults"}),v.jsx("div",{className:"flex justify-end mb-4",children:v.jsxs("button",{onClick:()=>g(),className:"bg-blue-500 text-white p-2 rounded-lg flex items-center",children:[v.jsx(lu,{className:"h-5 w-5 mr-2"}),"Ajouter une Facult"]})}),v.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),v.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(w=>v.jsxs("tr",{children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.nom}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[v.jsx("button",{onClick:()=>g(w),className:"text-indigo-600 hover:text-indigo-900",children:v.jsx(es,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>b(w.id),className:"text-red-600 hover:text-red-900 ml-4",children:v.jsx(Ws,{className:"h-5 w-5"})})]})]},w.id))})]})}),v.jsx(Wr,{isOpen:s,onClose:y,title:u?.id?"Modifier la Facult":"Ajouter une Facult",children:v.jsxs("form",{onSubmit:x,children:[v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{children:[v.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom de la facult"}),v.jsx("input",{type:"text",name:"nom",id:"nom",value:f,onChange:w=>m(w.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:y,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300",children:"Annuler"}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:u?.id?"Enregistrer":"Crer"})]})]})})]})}const Q1=({icon:n,title:e,value:t,formatAsCurrency:r=!1})=>v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md flex items-center space-x-4",children:[v.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:v.jsx(n,{className:"w-8 h-8 text-blue-600"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-gray-500 text-sm font-medium",children:e}),v.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r?`${t.toLocaleString("fr-FR")} FCFA`:t})]})]});function She(){const[n,e]=E.useState({premiumUsers:0,totalRevenue:0,monthlyRevenue:0}),[t,r]=E.useState([]),[i,a]=E.useState(!0),[s,l]=E.useState(null),[u,d]=E.useState(5e3),[f,m]=E.useState("current_month"),[g,y]=E.useState(""),[x,b]=E.useState("");E.useEffect(()=>{(async()=>{a(!0),l(null);try{const{data:M,error:N}=await oe.from("profiles").select("id, prenom, nom, subscription_start_date, active_code").eq("is_premium",!0).order("subscription_start_date",{ascending:!1});if(N)throw N;r(M||[])}catch(M){l(M.message||"Une erreur est survenue.")}finally{a(!1)}})()},[]);const w=E.useMemo(()=>{const T=new Date;let M=null,N=new Date;f==="current_month"?(M=new Date(T.getFullYear(),T.getMonth(),1),N=new Date(T.getFullYear(),T.getMonth()+1,0)):f==="last_month"?(M=new Date(T.getFullYear(),T.getMonth()-1,1),N=new Date(T.getFullYear(),T.getMonth(),0)):f==="current_year"?(M=new Date(T.getFullYear(),0,1),N=new Date(T.getFullYear(),11,31)):f==="custom"&&g&&x&&(M=new Date(g),N=new Date(x));const j=t.filter(k=>{if(!k.subscription_start_date)return!1;const F=new Date(k.subscription_start_date);return!(M&&F<M||N&&F>N)}),C=t.length*u,R=j.length*u;return e({premiumUsers:t.length,totalRevenue:C,monthlyRevenue:R}),j.map(k=>({id:k.id,prenom:k.prenom,nom:k.nom,activated_at:k.subscription_start_date,active_code:k.active_code}))},[t,u,f,g,x]),S=E.useMemo(()=>{const T={};return t.forEach(M=>{if(M.subscription_start_date){const N=new Date(M.subscription_start_date),j=fc(N,"yyyy-MM");T[j]=(T[j]||0)+u}}),Object.keys(T).sort().map(M=>{const[N,j]=M.split("-");return{name:fc(new Date(Number(N),Number(j)-1),"MMM yy",{locale:Ac}),revenus:T[M]}})},[t,u]),O=()=>{if(w.length===0)return;const T=["Prnom","Nom","Code Activ","Date d'activation"],M=w.map(k=>[`"${k.prenom.replace(/"/g,'""')}"`,`"${k.nom.replace(/"/g,'""')}"`,`"${k.active_code}"`,`"${fc(new Date(k.activated_at),"dd/MM/yyyy HH:mm",{locale:Ac})}"`].join(",")),N=[T.join(","),...M].join(`
`),j=new Blob([`\uFEFF${N}`],{type:"text/csv;charset=utf-8;"}),C=document.createElement("a"),R=URL.createObjectURL(j);C.setAttribute("href",R),C.setAttribute("download",`transactions_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(C),C.click(),document.body.removeChild(C)};return i?v.jsx("div",{className:"text-center p-8",children:"Chargement des donnes de revenus..."}):s?v.jsxs("div",{className:"text-center p-8 text-red-500",children:["Erreur: ",s]}):v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Revenus et Abonnements"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[v.jsx("label",{htmlFor:"subscriptionPrice",className:"block text-sm font-medium text-gray-700",children:"Prix de l'abonnement (FCFA)"}),v.jsx("input",{type:"number",id:"subscriptionPrice",value:u,onChange:T=>d(Number(T.target.value)),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[v.jsx("label",{htmlFor:"filterPeriod",className:"block text-sm font-medium text-gray-700",children:"Filtrer par priode"}),v.jsxs("select",{id:"filterPeriod",value:f,onChange:T=>m(T.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"current_month",children:"Ce mois-ci"}),v.jsx("option",{value:"last_month",children:"Le mois dernier"}),v.jsx("option",{value:"current_year",children:"Cette anne"}),v.jsx("option",{value:"all",children:"Toutes les priodes"}),v.jsx("option",{value:"custom",children:"Personnalis"})]}),f==="custom"&&v.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[v.jsx("input",{type:"date",value:g,onChange:T=>y(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),v.jsx("input",{type:"date",value:x,onChange:T=>b(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[v.jsx(Q1,{icon:UL,title:"Utilisateurs Premium",value:n.premiumUsers}),v.jsx(Q1,{icon:MH,title:"Revenus sur la priode",value:n.monthlyRevenue,formatAsCurrency:!0}),v.jsx(Q1,{icon:HH,title:"Revenus totaux",value:n.totalRevenue,formatAsCurrency:!0})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md mb-8",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"volution des revenus"}),v.jsx(K_,{width:"100%",height:300,children:v.jsxs(t7,{data:S,margin:{top:5,right:20,left:-10,bottom:5},children:[v.jsx(pg,{strokeDasharray:"3 3"}),v.jsx(rl,{dataKey:"name"}),v.jsx(il,{}),v.jsx(gi,{formatter:T=>[`${T.toLocaleString("fr-FR")} FCFA`,"Revenus"]}),v.jsx(qa,{}),v.jsx(bu,{type:"monotone",dataKey:"revenus",stroke:"#3b82f6",strokeWidth:2,activeDot:{r:8}})]})})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Transactions (",w.length,")"]}),v.jsxs("button",{onClick:O,disabled:w.length===0,className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors text-sm disabled:opacity-50",children:[v.jsx(pH,{className:"w-5 h-5 mr-2"}),"Exporter en CSV"]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"border-b-2 border-gray-200",children:[v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Utilisateur"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Code Activ"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Date d'activation"})]})}),v.jsx("tbody",{children:w.map(T=>v.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[v.jsxs("td",{className:"py-3 px-4 font-medium text-gray-800",children:[T.prenom," ",T.nom]}),v.jsx("td",{className:"py-3 px-4 text-gray-600 font-mono",children:T.active_code}),v.jsx("td",{className:"py-3 px-4 text-gray-500",children:fc(new Date(T.activated_at),"dd MMMM yyyy, HH:mm",{locale:Ac})})]},T.id))})]})})]})]})}function Ahe(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[s,l]=E.useState(""),[u,d]=E.useState(1),f=10,[m,g]=E.useState(!1),[y,x]=E.useState(null),[b,w]=E.useState(null);E.useEffect(()=>{(async()=>{r(!0);try{const{data:L,error:B}=await oe.from("universites").select("id, nom, logo_url, sujets(count)").order("nom");if(B)throw B;const V=(L||[]).map(H=>({id:H.id,nom:H.nom,logo_url:H.logo_url,subjectCount:H.sujets[0]?.count||0}));e(V)}catch(L){a(L.message)}finally{r(!1)}})()},[]);const S=(D=null)=>{x(D),w(null),g(!0)},O=()=>{g(!1),x(null)},T=async D=>{D.preventDefault();const B=new FormData(D.currentTarget).get("nom");let V=y?.logo_url||null;try{if(b){const q=b.name.split(".").pop(),K=`public/${`${Date.now()}.${q}`}`,{error:U}=await oe.storage.from("universites").upload(K,b);if(U)throw U;const{data:G}=oe.storage.from("universites").getPublicUrl(K);V=G.publicUrl}const H={nom:B,logo_url:V};if(y?.id){const{error:q}=await oe.from("universites").update(H).eq("id",y.id);if(q)throw q}else{const{error:q}=await oe.from("universites").insert(H);if(q)throw q}const{data:I}=await oe.from("universites").select("id, nom, logo_url, sujets(count)").order("nom"),z=(I||[]).map(q=>({id:q.id,nom:q.nom,logo_url:q.logo_url,subjectCount:q.sujets[0]?.count||0}));e(z),O()}catch(H){a(H.message)}},M=async D=>{if(window.confirm("tes-vous sr de vouloir supprimer cette universit ?"))try{const{error:L}=await oe.from("universites").delete().eq("id",D);if(L)throw L;e(n.filter(B=>B.id!==D))}catch(L){a(L.message)}},N=E.useMemo(()=>{const D=s.toLowerCase();return D?n.filter(L=>L.nom.toLowerCase().includes(D)):n},[s,n]),j=u*f,C=j-f,R=N.slice(C,j),k=Math.ceil(N.length/f),F=D=>d(D);return t?v.jsx("div",{className:"p-4",children:"Chargement..."}):i?v.jsxs("div",{className:"p-4 text-red-500",children:["Erreur: ",i]}):v.jsxs("div",{className:"p-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Grer les Universits"}),v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("div",{className:"relative w-full max-w-md",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(Uh,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{type:"text",placeholder:"Rechercher une universit...",value:s,onChange:D=>l(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),v.jsxs("button",{onClick:()=>S(),className:"bg-blue-500 text-white p-2 rounded-lg flex items-center",children:[v.jsx(lu,{className:"h-5 w-5 mr-2"}),"Ajouter une universit"]})]}),v.jsx("div",{className:"bg-white p-6 rounded-xl shadow-md overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"border-b-2 border-gray-200",children:[v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600",children:"Universit"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600 text-center",children:"Sujets"}),v.jsx("th",{className:"py-3 px-4 font-semibold text-gray-600 text-right",children:"Actions"})]})}),v.jsx("tbody",{children:R.map(D=>v.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[v.jsxs("td",{className:"py-3 px-4 flex items-center",children:[D.logo_url?v.jsx("img",{src:D.logo_url,alt:`Logo de ${D.nom}`,className:"h-10 w-10 object-contain rounded-md mr-4"}):v.jsx(jH,{className:"h-10 w-10 text-gray-300 mr-4"}),v.jsx("span",{className:"font-medium text-gray-800",children:D.nom})]}),v.jsx("td",{className:"py-3 px-4 text-gray-600 text-center",children:D.subjectCount}),v.jsxs("td",{className:"py-3 px-4 whitespace-nowrap text-right",children:[v.jsx("button",{onClick:()=>S(D),className:"text-gray-500 hover:text-blue-500 p-2",title:"Modifier",children:v.jsx(es,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>M(D.id),className:"text-gray-500 hover:text-red-500 p-2",title:"Supprimer",children:v.jsx(Ws,{className:"h-5 w-5"})})]})]},D.id))})]})}),k>1&&v.jsxs("div",{className:"flex justify-between items-center mt-4",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",u," sur ",k]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("button",{onClick:()=>F(u-1),disabled:u===1,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Er,{className:"h-5 w-5 text-gray-600"})}),v.jsx("button",{onClick:()=>F(u+1),disabled:u===k,className:"p-2 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:v.jsx(Fs,{className:"h-5 w-5 text-gray-600"})})]})]}),v.jsx(Wr,{isOpen:m,onClose:O,title:y?.id?"Modifier l'Universit":"Ajouter une Universit",children:v.jsxs("form",{onSubmit:T,children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700",children:"Nom de l'universit"}),v.jsx("input",{type:"text",name:"nom",id:"nom",defaultValue:y?.nom||"",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700",children:["Logo ",y?.id&&v.jsx("span",{className:"text-xs text-gray-500",children:"(Optionnel: laisser vide pour ne pas changer)"})]}),v.jsx("input",{type:"file",name:"logo",id:"logo",accept:"image/*",onChange:D=>w(D.target.files?D.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]}),v.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:O,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300",children:"Annuler"}),v.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:y?.id?"Enregistrer":"Crer"})]})]})})]})}function Ehe(){const n=hn(),[e,t]=E.useState(!0),[r,i]=E.useState(!1);return E.useEffect(()=>{(async()=>{const{data:s}=await oe.auth.getSession();s.session?n("/home",{replace:!0}):t(!1)})()},[n]),e?v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:v.jsx("div",{className:"text-gray-600",children:"Chargement..."})}):v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("span",{className:"text-6xl",role:"img","aria-label":"logo",children:""}),v.jsx("h1",{className:"text-4xl font-bold text-blue-600 mt-4",children:"Ma Facult"}),v.jsx("p",{className:"text-lg text-gray-600 mt-2",children:"Votre compagnon acadmique au Burkina Faso."})]}),v.jsx("div",{className:"w-full max-w-sm mb-6 px-4",children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("input",{id:"terms-checkbox",type:"checkbox",checked:r,onChange:a=>i(a.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-1"}),v.jsxs("label",{htmlFor:"terms-checkbox",className:"ml-2 text-sm text-gray-600",children:["J'ai lu et j'accepte les ",v.jsx(en,{to:"/terms",className:"underline font-medium text-blue-600 hover:text-blue-800",children:"Termes & Conditions"})," et la ",v.jsx(en,{to:"/privacy",className:"underline font-medium text-blue-600 hover:text-blue-800",children:"Politique de Confidentialit"}),"."]})]})}),v.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[v.jsx(en,{to:"/login",className:`w-full flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-full text-white transition-colors ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-300 cursor-not-allowed"}`,onClick:a=>!r&&a.preventDefault(),children:"Se connecter"}),v.jsx(en,{to:"/register",className:`w-full flex items-center justify-center px-4 py-3 border text-base font-medium rounded-full transition-colors ${r?"border-blue-600 text-blue-600 bg-white hover:bg-gray-50":"border-gray-300 text-gray-400 bg-gray-100 cursor-not-allowed"}`,onClick:a=>!r&&a.preventDefault(),children:"Crer un compte"})]})]})}function f3(){const n=Qa(),[e,t]=E.useState(!0),[r,i]=E.useState(!1);return E.useEffect(()=>{(async()=>{const{data:s}=await oe.auth.getSession();i(!!s.session),t(!1)})()},[]),e?v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:v.jsx("div",{className:"text-gray-600",children:"Chargement..."})}):r?v.jsx(fA,{}):v.jsx(NL,{to:"/login",state:{from:n},replace:!0})}function The(){const n=hn(),e=Qa(),[t,r]=E.useState(""),[i,a]=E.useState(""),[s,l]=E.useState(!1),[u,d]=E.useState(null),[f,m]=E.useState(null),[g,y]=E.useState(!1);E.useEffect(()=>{e.state&&e.state.message&&m(e.state.message)},[e]);const x=async b=>{b.preventDefault(),l(!0),d(null);const{error:w}=await oe.auth.signInWithPassword({email:t,password:i});if(l(!1),w)d(w.message);else{const S=e.state?.from?.pathname??"/home";n(S,{replace:!0})}};return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-2xl shadow-lg",children:[v.jsxs("div",{className:"text-center",children:[v.jsx(en,{to:"/",className:"inline-block",children:v.jsx(IL,{className:"h-12 w-12 mx-auto text-blue-600"})}),v.jsx("h2",{className:"mt-4 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Bienvenue"}),v.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Heureux de vous revoir ! Ou ",v.jsx(en,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"crez un nouveau compte"})]})]}),f&&v.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:f}),u&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:u}),v.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx(BL,{className:"pointer-events-none w-5 h-5 text-gray-400 absolute top-1/2 transform -translate-y-1/2 left-3"}),v.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Adresse email"}),v.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:b=>r(b.target.value),className:"block w-full rounded-md border-gray-300 pl-10 pr-3 py-2.5 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm",placeholder:"Adresse email"})]}),v.jsxs("div",{className:"relative",children:[v.jsx(gp,{className:"pointer-events-none w-5 h-5 text-gray-400 absolute top-1/2 transform -translate-y-1/2 left-3"}),v.jsx("label",{htmlFor:"password",className:"sr-only",children:"Mot de passe"}),v.jsx("input",{id:"password",name:"password",type:g?"text":"password",autoComplete:"current-password",required:!0,value:i,onChange:b=>a(b.target.value),className:"block w-full rounded-md border-gray-300 pl-10 pr-10 py-2.5 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm",placeholder:"Mot de passe"}),v.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700","aria-label":g?"Masquer le mot de passe":"Afficher le mot de passe",children:g?v.jsx(b_,{className:"h-5 w-5"}):v.jsx(pp,{className:"h-5 w-5"})})]})]}),v.jsx("div",{className:"flex items-center justify-end",children:v.jsx("div",{className:"text-sm",children:v.jsx(en,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oubli ?"})})}),v.jsx("div",{children:v.jsx("button",{type:"submit",disabled:s,className:"w-full py-3 px-4 rounded-md font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-sm hover:shadow-md transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed",children:s?"Connexion en cours...":"Se connecter"})})]})]})})}const Ohe={Sujet:Kd,Livre:Tg,Drive:pA},Che=["Tout","Sujet","Livre","Drive"];function jhe(){const n=()=>v.jsxs("li",{className:"p-4 flex items-center justify-between animate-pulse",children:[v.jsxs("div",{className:"flex items-center min-w-0",children:[v.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full mr-4 flex-shrink-0"}),v.jsxs("div",{className:"min-w-0",children:[v.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-2"}),v.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),v.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}),e=hn(),t=Qa(),{user:r}=Ui(),[i,a]=E.useState([]),[s,l]=E.useState([]),[u,d]=E.useState(!1),[f,m]=E.useState(!0),[g,y]=E.useState("Tout"),[x,b]=E.useState({isOpen:!1,title:"",message:""}),[w,S]=E.useState("");E.useEffect(()=>{if(!r)return;(async()=>{m(!0);try{const[C,R,k]=await Promise.all([oe.from("sujets").select("id, titre, created_at").eq("created_by",r.id),oe.from("livres").select("id, titre, created_at").eq("created_by",r.id),oe.from("drives").select("id, titre, created_at").eq("created_by",r.id)]);if(C.error)throw C.error;if(R.error)throw R.error;if(k.error)throw k.error;const F=[...(C.data||[]).map(D=>({...D,type:"Sujet"})),...(R.data||[]).map(D=>({...D,type:"Livre"})),...(k.data||[]).map(D=>({...D,type:"Drive"}))];F.sort((D,L)=>new Date(L.created_at).getTime()-new Date(D.created_at).getTime()),a(F)}catch(C){console.error("Erreur lors du chargement des crations:",C)}finally{m(!1)}})()},[r,t.key]),E.useEffect(()=>{let j=i;g!=="Tout"&&(j=j.filter(C=>C.type===g)),w&&(j=j.filter(C=>C.titre.toLowerCase().includes(w.toLowerCase()))),l(j)},[w,g,i]);const O=E.useMemo(()=>({Tout:i.length,Sujet:i.filter(j=>j.type==="Sujet").length,Livre:i.filter(j=>j.type==="Livre").length,Drive:i.filter(j=>j.type==="Drive").length}),[i]),T=j=>{b({isOpen:!0,title:`Supprimer "${j.titre}"`,message:`tes-vous sr de vouloir supprimer ce ${j.type.toLowerCase()} ? Cette action est irrversible.`,onConfirm:async()=>{try{const C=`${j.type.toLowerCase()}s`,{error:R}=await oe.from(C).delete().eq("id",j.id);if(R)throw R;a(k=>k.filter(F=>F.id!==j.id))}catch(C){b({isOpen:!0,title:"Erreur de suppression",message:C.message||"Une erreur est survenue."})}}})},M=j=>{const C=j.type.toLowerCase();return C==="sujet"?`/writer/edit-subject/${j.id}`:C==="livre"?`/writer/edit-book/${j.id}`:C==="drive"?`/writer/edit-drive/${j.id}`:"#"},N=j=>new Date(j).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"});return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>e(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Er,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Mon tableau de bord"})]}),v.jsxs("main",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx(Uh,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),v.jsx("input",{type:"text",placeholder:"Rechercher par titre...",value:w,onChange:j=>S(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),v.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:Che.map(j=>v.jsxs("button",{onClick:()=>y(j),className:`px-4 py-2 text-sm font-semibold rounded-full whitespace-nowrap transition-colors ${g===j?"bg-blue-600 text-white shadow":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" ",`${j} (${O[j]})`]},j))})]}),f?v.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:v.jsx("ul",{className:"divide-y divide-gray-200",children:[...Array(5)].map((j,C)=>v.jsx(n,{},C))})}):s.length>0?v.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:v.jsx("ul",{className:"divide-y divide-gray-200",children:s.map(j=>{const C=Ohe[j.type];return v.jsxs("li",{className:"p-4 flex items-center justify-between hover:bg-gray-50",children:[v.jsxs("div",{className:"flex items-center min-w-0",children:[v.jsx(C,{className:"w-6 h-6 text-blue-500 mr-4 flex-shrink-0"}),v.jsxs("div",{className:"min-w-0",children:[v.jsx("p",{className:"font-medium text-gray-800 truncate",children:j.titre}),v.jsx("p",{className:"text-sm text-gray-500",children:j.type})]})]}),v.jsxs("div",{className:"flex items-center flex-shrink-0 ml-4 space-x-2",children:[v.jsxs("p",{className:"text-sm text-gray-400 hidden sm:flex items-center",children:[v.jsx(FH,{className:"w-4 h-4 mr-1.5"}),N(j.created_at)]}),v.jsx(en,{to:M(j),className:"text-gray-400 hover:text-blue-600 p-2 rounded-full",children:v.jsx(es,{className:"w-5 h-5"})}),v.jsx("button",{onClick:()=>T(j),className:"text-gray-400 hover:text-red-600 p-2 rounded-full",children:v.jsx(Ws,{className:"w-5 h-5"})})]})]},`${j.type}-${j.id}`)})})}):v.jsx("p",{className:"text-gray-500 text-center py-8",children:"Aucun contenu ne correspond  votre recherche."})]}),v.jsxs("div",{className:"fixed bottom-6 right-6 z-30 flex flex-col items-end space-y-3",children:[u&&v.jsxs("div",{className:"flex flex-col items-end space-y-3",children:[v.jsxs(en,{to:"/writer/add-drive",className:"flex items-center bg-white pl-4 pr-3 py-2 rounded-full shadow-lg hover:bg-gray-100 transition-all text-sm font-medium text-gray-700",children:["Ajouter un drive ",v.jsx("div",{className:"ml-3 bg-blue-100 p-2 rounded-full",children:v.jsx(pA,{className:"w-5 h-5 text-blue-600"})})]}),v.jsxs(en,{to:"/writer/add-book",className:"flex items-center bg-white pl-4 pr-3 py-2 rounded-full shadow-lg hover:bg-gray-100 transition-all text-sm font-medium text-gray-700",children:["Ajouter un livre",v.jsx("div",{className:"ml-3 bg-blue-100 p-2 rounded-full",children:v.jsx(Tg,{className:"w-5 h-5 text-blue-600"})})]}),v.jsxs(en,{to:"/writer/add-subject",className:"flex items-center bg-white pl-4 pr-3 py-2 rounded-full shadow-lg hover:bg-gray-100 transition-all text-sm font-medium text-gray-700",children:["Ajouter un sujet",v.jsx("div",{className:"ml-3 bg-blue-100 p-2 rounded-full",children:v.jsx(Kd,{className:"w-5 h-5 text-blue-600"})})]})]}),v.jsx("button",{onClick:()=>d(!u),className:"bg-blue-600 text-white p-4 rounded-full shadow-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform duration-300 ease-in-out",style:{transform:u?"rotate(45deg)":"rotate(0)"},children:u?v.jsx(vA,{className:"w-6 h-6"}):v.jsx(lu,{className:"w-6 h-6"})})]}),v.jsx(qi,{isOpen:x.isOpen,onClose:()=>b({...x,isOpen:!1}),onConfirm:x.onConfirm,title:x.title,message:x.message})]})}function Nhe(){const n=hn(),{user:e}=Ui(),[t,r]=E.useState(""),[i,a]=E.useState(""),[s,l]=E.useState(""),[u,d]=E.useState(""),[f,m]=E.useState(""),[g,y]=E.useState(null),[x,b]=E.useState([]),[w,S]=E.useState([]),[O,T]=E.useState(!0),[M,N]=E.useState(!1),[j,C]=E.useState(null),[R,k]=E.useState({isOpen:!1,title:"",message:""});E.useEffect(()=>{(async()=>{try{const[L,B]=await Promise.all([oe.from("modules").select("id, nom"),oe.from("universites").select("id, nom")]);if(L.error)throw L.error;if(B.error)throw B.error;b(L.data.map(V=>({id:V.id,name:V.nom}))),S(B.data.map(V=>({id:V.id,name:V.nom})))}catch(L){C(L.message)}finally{T(!1)}})()},[]);const F=async D=>{if(D.preventDefault(),!e){C("Vous devez tre connect pour ajouter un sujet.");return}if(!t||!i||!u||!g){C("Veuillez remplir tous les champs et slectionner un fichier.");return}N(!0),C(null);try{const L=`public/sujets/${Date.now()}_${g.name.replace(/\s/g,"_")}`,{error:B}=await oe.storage.from("sujets").upload(L,g);if(B)throw B;const V=oe.storage.from("sujets").getPublicUrl(L).data.publicUrl,{data:H,error:I}=await oe.from("profiles").select("faculte_id, niveau_id").eq("id",e.id).single();if(I)throw I;if(!H)throw new Error("Profil utilisateur introuvable.");const{error:z}=await oe.from("sujets").insert({titre:t,module_id:i,universite_id:u,faculte_id:H.faculte_id,niveau_id:H.niveau_id,fichier_url:V,taille_fichier:g.size,created_by:e.id});if(z)throw z;k({isOpen:!0,title:"Succs",message:"Le sujet a t ajout avec succs !",onConfirm:()=>n("/writer/dashboard")}),r(""),a(""),l(""),d(""),m(""),y(null)}catch(L){C(L.message||"Une erreur est survenue lors de l'ajout du sujet.")}finally{N(!1)}};return O?v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:v.jsx("div",{className:"text-gray-600",children:"Chargement des donnes..."})}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>n(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Er,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Ajouter un Sujet"})]}),v.jsxs("main",{className:"p-4",children:[j&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:j}),v.jsxs("form",{onSubmit:F,className:"space-y-6 bg-white p-6 rounded-xl shadow-md",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre du sujet"}),v.jsx("input",{type:"text",name:"title",id:"title",value:t,onChange:D=>r(D.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"moduleId",className:"block text-sm font-medium text-gray-700",children:"Module"}),v.jsx(Tr,{options:x.map(D=>({id:D.id,name:D.name})),value:s,onChange:D=>{a(D?.id||""),l(D?.name||"")},placeholder:"Slectionner un module..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"universityId",className:"block text-sm font-medium text-gray-700",children:"Universit"}),v.jsx(Tr,{options:w.map(D=>({id:D.id,name:D.name})),value:f,onChange:D=>{d(D?.id||""),m(D?.name||"")},placeholder:"Slectionner une universit..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700",children:"Fichier PDF"}),v.jsx("input",{type:"file",name:"file",id:"file",accept:"application/pdf",onChange:D=>y(D.target.files?D.target.files[0]:null),required:!0,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),v.jsx("div",{className:"pt-4",children:v.jsx("button",{type:"submit",disabled:M||!t||!i||!u||!g,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",children:M?"Ajout en cours...":"Ajouter le Sujet"})})]})]}),v.jsx(qi,{isOpen:R.isOpen,onClose:()=>k({...R,isOpen:!1}),onConfirm:R.onConfirm,title:R.title,message:R.message})]})}function Mhe(){const n=hn(),{user:e}=Ui(),[t,r]=E.useState(""),[i,a]=E.useState(""),[s,l]=E.useState(""),[u,d]=E.useState(""),[f,m]=E.useState(null),[g,y]=E.useState(null),[x,b]=E.useState(null),[w,S]=E.useState([]),[O,T]=E.useState(!0),[M,N]=E.useState(!1),[j,C]=E.useState(null),[R,k]=E.useState({isOpen:!1,title:"",message:""});E.useEffect(()=>{(async()=>{try{const{data:L,error:B}=await oe.from("modules").select("id, nom").order("nom");if(B)throw B;S(L.map(V=>({id:V.id,name:V.nom})))}catch(L){C(L.message)}finally{T(!1)}})()},[]);const F=async D=>{if(D.preventDefault(),!e){C("Vous devez tre connect pour ajouter un livre.");return}if(!t||!s||!g){C("Veuillez remplir le titre, slectionner un module et un fichier PDF.");return}N(!0),C(null);try{let L=null;if(f){const z=`public/covers/${Date.now()}_${f.name.replace(/\s/g,"_")}`,{error:q}=await oe.storage.from("livres").upload(z,f);if(q)throw q;L=oe.storage.from("livres").getPublicUrl(z).data.publicUrl}const B=`public/pdfs/${Date.now()}_${g.name.replace(/\s/g,"_")}`,{error:V}=await oe.storage.from("livres").upload(B,g);if(V)throw V;const H=oe.storage.from("livres").getPublicUrl(B).data.publicUrl,{error:I}=await oe.from("livres").insert({titre:t,auteur:i||null,module_id:s,couverture_url:L,fichier_url:H,taille_fichier:g.size,created_by:e.id,nombre_pages:x});if(I)throw I;k({isOpen:!0,title:"Succs",message:"Le livre a t ajout avec succs !",onConfirm:()=>n("/writer/dashboard")}),r(""),a(""),l(""),d(""),m(null),y(null),b(null)}catch(L){C(L.message||"Une erreur est survenue lors de l'ajout du livre.")}finally{N(!1)}};return O?v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:v.jsx("div",{className:"text-gray-600",children:"Chargement des donnes..."})}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>n(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Er,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Ajouter un Livre"})]}),v.jsxs("main",{className:"p-4",children:[j&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:j}),v.jsxs("form",{onSubmit:F,className:"space-y-6 bg-white p-6 rounded-xl shadow-md",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre du livre"}),v.jsx("input",{type:"text",name:"title",id:"title",value:t,onChange:D=>r(D.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-700",children:"Auteur"}),v.jsx("input",{type:"text",name:"author",id:"author",value:i,onChange:D=>a(D.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"moduleId",className:"block text-sm font-medium text-gray-700",children:"Module"}),v.jsx(Tr,{options:w.map(D=>({id:D.id,name:D.name})),value:u,onChange:D=>{l(D?.id||""),d(D?.name||"")},placeholder:"Slectionner un module..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"coverFile",className:"block text-sm font-medium text-gray-700",children:"Image de couverture (optionnel)"}),v.jsx("input",{type:"file",name:"coverFile",id:"coverFile",accept:"image/*",onChange:D=>m(D.target.files?D.target.files[0]:null),className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"pdfFile",className:"block text-sm font-medium text-gray-700",children:"Fichier PDF"}),v.jsx("input",{type:"file",name:"pdfFile",id:"pdfFile",accept:"application/pdf",onChange:D=>y(D.target.files?D.target.files[0]:null),required:!0,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),v.jsx("div",{className:"pt-4",children:v.jsx("button",{type:"submit",disabled:M||!t||!s||!g,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",children:M?"Ajout en cours...":"Ajouter le Livre"})})]})]}),v.jsx(qi,{isOpen:R.isOpen,onClose:()=>k({...R,isOpen:!1}),onConfirm:R.onConfirm,title:R.title,message:R.message})]})}function Phe(){const n=hn(),{user:e}=Ui(),[t,r]=E.useState(""),[i,a]=E.useState(""),[s,l]=E.useState(""),[u,d]=E.useState(""),[f,m]=E.useState(""),[g,y]=E.useState(""),[x,b]=E.useState(""),[w,S]=E.useState([]),[O,T]=E.useState([]),[M,N]=E.useState(!0),[j,C]=E.useState(!1),[R,k]=E.useState(null),[F,D]=E.useState({isOpen:!1,title:"",message:""});E.useEffect(()=>{(async()=>{try{const[V,H]=await Promise.all([oe.from("facultes").select("id, nom").order("nom"),oe.from("niveaux").select("id, nom").order("nom")]);if(V.error)throw V.error;if(H.error)throw H.error;S(V.data.map(I=>({id:I.id,name:I.nom}))),T(H.data.map(I=>({id:I.id,name:I.nom})))}catch(V){k(V.message)}finally{N(!1)}})()},[]);const L=async B=>{if(B.preventDefault(),!e){k("Vous devez tre connect pour ajouter un drive.");return}if(!t||!s||!u||!g){k("Veuillez remplir tous les champs obligatoires.");return}C(!0),k(null);try{const{error:V}=await oe.from("drives").insert({titre:t,description:i||null,url:s,faculte_id:u,niveau_id:g,created_by:e.id});if(V)throw V;D({isOpen:!0,title:"Succs",message:"Le drive a t ajout avec succs !",onConfirm:()=>n("/writer/dashboard")}),r(""),a(""),l(""),d(""),m(""),y(""),b("")}catch(V){k(V.message||"Une erreur est survenue lors de l'ajout du drive.")}finally{C(!1)}};return M?v.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:v.jsx("div",{className:"text-gray-600",children:"Chargement des donnes..."})}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>n(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Er,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Ajouter un Drive"})]}),v.jsxs("main",{className:"p-4",children:[R&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:R}),v.jsxs("form",{onSubmit:L,className:"space-y-6 bg-white p-6 rounded-xl shadow-md",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre du drive"}),v.jsx("input",{type:"text",name:"title",id:"title",value:t,onChange:B=>r(B.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description (optionnel)"}),v.jsx("textarea",{name:"description",id:"description",value:i,onChange:B=>a(B.target.value),rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700",children:"URL du drive"}),v.jsx("input",{type:"url",name:"url",id:"url",value:s,onChange:B=>l(B.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"facultyId",className:"block text-sm font-medium text-gray-700",children:"Facult"}),v.jsx(Tr,{options:w.map(B=>({id:B.id,name:B.name})),value:f,onChange:B=>{d(B?.id||""),m(B?.name||"")},placeholder:"Slectionner une facult..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"niveauId",className:"block text-sm font-medium text-gray-700",children:"Niveau"}),v.jsx(Tr,{options:O.map(B=>({id:B.id,name:B.name})),value:x,onChange:B=>{y(B?.id||""),b(B?.name||"")},placeholder:"Slectionner un niveau..."})]}),v.jsx("div",{className:"pt-4",children:v.jsx("button",{type:"submit",disabled:j||!t||!s||!u||!g,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",children:j?"Ajout en cours...":"Ajouter le Drive"})})]})]}),v.jsx(qi,{isOpen:F.isOpen,onClose:()=>D({...F,isOpen:!1}),onConfirm:F.onConfirm,title:F.title,message:F.message})]})}function Rhe(){const{subjectId:n}=ou(),e=hn(),[t,r]=E.useState(""),[i,a]=E.useState(""),[s,l]=E.useState(""),[u,d]=E.useState(""),[f,m]=E.useState(""),[g,y]=E.useState(null),[x,b]=E.useState([]),[w,S]=E.useState([]),[O,T]=E.useState(!0),[M,N]=E.useState(!1),[j,C]=E.useState(null),[R,k]=E.useState({isOpen:!1,title:"",message:""});E.useEffect(()=>{(async()=>{if(!n){C("ID de sujet manquant."),T(!1);return}try{const[L,B,V]=await Promise.all([oe.from("sujets").select("*, modules(nom), universites(nom)").eq("id",n).single(),oe.from("modules").select("id, nom"),oe.from("universites").select("id, nom")]);if(L.error)throw L.error;if(B.error)throw B.error;if(V.error)throw V.error;const H=L.data;r(H.titre),a(H.module_id),l(H.modules?.nom||""),d(H.universite_id),m(H.universites?.nom||""),b(B.data.map(I=>({id:I.id,name:I.nom}))),S(V.data.map(I=>({id:I.id,name:I.nom})))}catch(L){C(L.message)}finally{T(!1)}})()},[n]);const F=async D=>{if(D.preventDefault(),!t||!i||!u){C("Veuillez remplir tous les champs obligatoires.");return}N(!0),C(null);try{const L={titre:t,module_id:i,universite_id:u};if(g){const V=`public/sujets/${Date.now()}_${g.name.replace(/\s/g,"_")}`,{error:H}=await oe.storage.from("sujets").upload(V,g);if(H)throw H;L.fichier_url=oe.storage.from("sujets").getPublicUrl(V).data.publicUrl,L.taille_fichier=g.size}const{error:B}=await oe.from("sujets").update(L).eq("id",n);if(B)throw B;k({isOpen:!0,title:"Succs",message:"Le sujet a t mis  jour avec succs !",onConfirm:()=>e("/writer/dashboard")})}catch(L){C(L.message||"Une erreur est survenue lors de la mise  jour.")}finally{N(!1)}};return O?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Chargement..."}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>e(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Er,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Modifier le Sujet"})]}),v.jsxs("main",{className:"p-4",children:[j&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:j}),v.jsxs("form",{onSubmit:F,className:"space-y-6 bg-white p-6 rounded-xl shadow-md",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre du sujet"}),v.jsx("input",{type:"text",id:"title",value:t,onChange:D=>r(D.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Module"}),v.jsx(Tr,{options:x,value:s,onChange:D=>{a(D?.id||""),l(D?.name||"")}})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Universit"}),v.jsx(Tr,{options:w,value:f,onChange:D=>{d(D?.id||""),m(D?.name||"")}})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"file",className:"block text-sm font-medium text-gray-700",children:"Remplacer le fichier PDF (optionnel)"}),v.jsx("input",{type:"file",id:"file",accept:"application/pdf",onChange:D=>y(D.target.files?D.target.files[0]:null),className:"mt-1 block w-full text-sm"})]}),v.jsx("div",{className:"pt-4",children:v.jsx("button",{type:"submit",disabled:M,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:M?"Mise  jour...":"Enregistrer les modifications"})})]})]}),v.jsx(qi,{isOpen:R.isOpen,onClose:()=>k({...R,isOpen:!1}),onConfirm:R.onConfirm,title:R.title,message:R.message})]})}function khe(){const{bookId:n}=ou(),e=hn(),[t,r]=E.useState(""),[i,a]=E.useState(""),[s,l]=E.useState(""),[u,d]=E.useState(""),[f,m]=E.useState(null),[g,y]=E.useState(null),[x,b]=E.useState([]),[w,S]=E.useState(!0),[O,T]=E.useState(!1),[M,N]=E.useState(null),[j,C]=E.useState({isOpen:!1,title:"",message:""});E.useEffect(()=>{(async()=>{if(!n){N("ID de livre manquant."),S(!1);return}try{const[F,D]=await Promise.all([oe.from("livres").select("*, modules(nom)").eq("id",n).single(),oe.from("modules").select("id, nom")]);if(F.error)throw F.error;if(D.error)throw D.error;const L=F.data;r(L.titre),a(L.auteur||""),l(L.module_id),d(L.modules?.nom||""),b(D.data.map(B=>({id:B.id,name:B.nom})))}catch(F){N(F.message)}finally{S(!1)}})()},[n]);const R=async k=>{k.preventDefault(),T(!0),N(null);try{const F={titre:t,auteur:i,module_id:s};if(f){const L=`public/covers/${Date.now()}_${f.name.replace(/\s/g,"_")}`,{error:B}=await oe.storage.from("livres").upload(L,f);if(B)throw B;F.couverture_url=oe.storage.from("livres").getPublicUrl(L).data.publicUrl}if(g){const L=`public/pdfs/${Date.now()}_${g.name.replace(/\s/g,"_")}`,{error:B}=await oe.storage.from("livres").upload(L,g);if(B)throw B;F.fichier_url=oe.storage.from("livres").getPublicUrl(L).data.publicUrl,F.taille_fichier=g.size}const{error:D}=await oe.from("livres").update(F).eq("id",n);if(D)throw D;C({isOpen:!0,title:"Succs",message:"Le livre a t mis  jour avec succs !",onConfirm:()=>e("/writer/dashboard")})}catch(F){N(F.message||"Une erreur est survenue.")}finally{T(!1)}};return w?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Chargement..."}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>e(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Er,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Modifier le Livre"})]}),v.jsxs("main",{className:"p-4",children:[M&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:M}),v.jsxs("form",{onSubmit:R,className:"space-y-6 bg-white p-6 rounded-xl shadow-md",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre"}),v.jsx("input",{type:"text",id:"title",value:t,onChange:k=>r(k.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-700",children:"Auteur"}),v.jsx("input",{type:"text",id:"author",value:i,onChange:k=>a(k.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Module"}),v.jsx(Tr,{options:x,value:u,onChange:k=>{l(k?.id||""),d(k?.name||"")}})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"coverFile",className:"block text-sm font-medium text-gray-700",children:"Remplacer la couverture (optionnel)"}),v.jsx("input",{type:"file",id:"coverFile",accept:"image/*",onChange:k=>m(k.target.files?k.target.files[0]:null),className:"mt-1 block w-full text-sm"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"pdfFile",className:"block text-sm font-medium text-gray-700",children:"Remplacer le PDF (optionnel)"}),v.jsx("input",{type:"file",id:"pdfFile",accept:"application/pdf",onChange:k=>y(k.target.files?k.target.files[0]:null),className:"mt-1 block w-full text-sm"})]}),v.jsx("div",{className:"pt-4",children:v.jsx("button",{type:"submit",disabled:O,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:O?"Mise  jour...":"Enregistrer les modifications"})})]})]}),v.jsx(qi,{isOpen:j.isOpen,onClose:()=>C({...j,isOpen:!1}),onConfirm:j.onConfirm,title:j.title,message:j.message})]})}function Dhe(){const{driveId:n}=ou(),e=hn(),[t,r]=E.useState(""),[i,a]=E.useState(""),[s,l]=E.useState(""),[u,d]=E.useState(""),[f,m]=E.useState(""),[g,y]=E.useState(""),[x,b]=E.useState(""),[w,S]=E.useState([]),[O,T]=E.useState([]),[M,N]=E.useState(!0),[j,C]=E.useState(!1),[R,k]=E.useState(null),[F,D]=E.useState({isOpen:!1,title:"",message:""});E.useEffect(()=>{(async()=>{if(!n){k("ID de drive manquant."),N(!1);return}try{const[V,H,I]=await Promise.all([oe.from("drives").select("*, facultes(nom), niveaux(nom)").eq("id",n).single(),oe.from("facultes").select("id, nom"),oe.from("niveaux").select("id, nom")]);if(V.error)throw V.error;if(H.error)throw H.error;if(I.error)throw I.error;const z=V.data;r(z.titre),a(z.description||""),l(z.url),d(z.faculte_id),m(z.facultes?.nom||""),y(z.niveau_id),b(z.niveaux?.nom||""),S(H.data.map(q=>({id:q.id,name:q.nom}))),T(I.data.map(q=>({id:q.id,name:q.nom})))}catch(V){k(V.message)}finally{N(!1)}})()},[n]);const L=async B=>{B.preventDefault(),C(!0),k(null);try{const{error:V}=await oe.from("drives").update({titre:t,description:i,url:s,faculte_id:u,niveau_id:g}).eq("id",n);if(V)throw V;D({isOpen:!0,title:"Succs",message:"Le drive a t mis  jour avec succs !",onConfirm:()=>e("/writer/dashboard")})}catch(V){k(V.message||"Une erreur est survenue.")}finally{C(!1)}};return M?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Chargement..."}):v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsxs("header",{className:"bg-white p-4 shadow-sm sticky top-0 z-10 flex items-center",children:[v.jsx("button",{onClick:()=>e(-1),className:"p-2 mr-2 rounded-full hover:bg-gray-100",children:v.jsx(Er,{className:"w-6 h-6 text-gray-700"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Modifier le Drive"})]}),v.jsxs("main",{className:"p-4",children:[R&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:R}),v.jsxs("form",{onSubmit:L,className:"space-y-6 bg-white p-6 rounded-xl shadow-md",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre"}),v.jsx("input",{type:"text",id:"title",value:t,onChange:B=>r(B.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),v.jsx("textarea",{id:"description",value:i,onChange:B=>a(B.target.value),rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700",children:"URL"}),v.jsx("input",{type:"url",id:"url",value:s,onChange:B=>l(B.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Facult"}),v.jsx(Tr,{options:w,value:f,onChange:B=>{d(B?.id||""),m(B?.name||"")}})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Niveau"}),v.jsx(Tr,{options:O,value:x,onChange:B=>{y(B?.id||""),b(B?.name||"")}})]}),v.jsx("div",{className:"pt-4",children:v.jsx("button",{type:"submit",disabled:j,className:"w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:j?"Mise  jour...":"Enregistrer les modifications"})})]})]}),v.jsx(qi,{isOpen:F.isOpen,onClose:()=>D({...F,isOpen:!1}),onConfirm:F.onConfirm,title:F.title,message:F.message})]})}function Lhe(){const n=hn(),[e,t]=E.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",universityId:"",universityNom:"",faculteId:"",faculteNom:"",niveauId:"",niveauNom:""}),[r,i]=E.useState(!1),[a,s]=E.useState(null),[l,u]=E.useState([]),[d,f]=E.useState([]),[m,g]=E.useState(!1),[y,x]=E.useState(!1),[b,w]=E.useState([]);E.useEffect(()=>{(async()=>{const{data:M,error:N}=await oe.from("universites").select("id, nom").order("nom",{ascending:!0}),{data:j,error:C}=await oe.from("facultes").select("id, nom").order("nom",{ascending:!0});N&&console.error("Erreur chargement universits:",N),C&&console.error("Erreur chargement facults:",C),u((M||[]).map(R=>({id:R.id,name:R.nom}))),f((j||[]).map(R=>({id:R.id,name:R.nom})))})()},[]),E.useEffect(()=>{(async()=>{if(!e.faculteId){w([]),t(j=>({...j,niveauId:"",niveauNom:""}));return}const{data:M,error:N}=await oe.from("niveaux").select("id, nom, ordre").eq("faculte_id",e.faculteId).order("ordre",{ascending:!0});N&&console.error("Erreur chargement niveaux:",N),w((M||[]).map(j=>({id:j.id,name:j.nom})))})()},[e.faculteId]);const S=T=>{const{name:M,value:N}=T.target;t(j=>({...j,[M]:N}))},O=async T=>{if(T.preventDefault(),e.password!==e.confirmPassword){s("Les mots de passe ne correspondent pas");return}if(!e.universityId||!e.faculteId||!e.niveauId){s("Veuillez remplir tous les champs obligatoires");return}i(!0),s(null);try{const{data:M,error:N}=await oe.auth.signUp({email:e.email,password:e.password,options:{data:{first_name:e.firstName,last_name:e.lastName,university_id:e.universityId,faculte_id:e.faculteId,niveau_id:e.niveauId}}});if(N)throw N;if(M.user&&!M.user.email_confirmed_at){console.log("Email confirmation requise, tentative de mise  jour du profil..."),await new Promise(C=>setTimeout(C,1e3));const{error:j}=await oe.rpc("update_profile_after_signup",{p_user_id:M.user.id,p_nom:e.lastName,p_prenom:e.firstName,p_universite_id:e.universityId,p_faculte_id:e.faculteId,p_niveau_id:e.niveauId});j&&console.error("Erreur lors de la mise  jour du profil:",j)}n("/login",{state:{message:"Inscription russie ! Veuillez vrifier votre email pour confirmer votre compte."}})}catch(M){s(M.message||"Une erreur s'est produite lors de l'inscription")}finally{i(!1)}};return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 sm:p-10 rounded-2xl shadow-lg",children:[v.jsxs("div",{className:"text-center",children:[v.jsx(en,{to:"/",className:"inline-block",children:v.jsx(IL,{className:"h-12 w-12 mx-auto text-blue-600"})}),v.jsx("h2",{className:"mt-4 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Crez votre compte"}),v.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Vous avez dj un compte ? ",v.jsx(en,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Connectez-vous"})]})]}),a&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative",role:"alert",children:a}),v.jsxs("form",{className:"mt-8 space-y-6",onSubmit:O,noValidate:!0,children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx(Dj,{className:"pointer-events-none w-5 h-5 text-gray-400 absolute top-1/2 transform -translate-y-1/2 left-3"}),v.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,onChange:S,className:"block w-full rounded-md border-gray-300 pl-10 pr-3 py-2.5 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm",placeholder:"Prnom"})]}),v.jsxs("div",{className:"relative",children:[v.jsx(Dj,{className:"pointer-events-none w-5 h-5 text-gray-400 absolute top-1/2 transform -translate-y-1/2 left-3"}),v.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,onChange:S,className:"block w-full rounded-md border-gray-300 pl-10 pr-3 py-2.5 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm",placeholder:"Nom"})]}),v.jsxs("div",{className:"relative",children:[v.jsx(BL,{className:"pointer-events-none w-5 h-5 text-gray-400 absolute top-1/2 transform -translate-y-1/2 left-3"}),v.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,onChange:S,className:"block w-full rounded-md border-gray-300 pl-10 pr-3 py-2.5 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm",placeholder:"Adresse email"})]}),v.jsxs("div",{className:"relative",children:[v.jsx(gp,{className:"pointer-events-none w-5 h-5 text-gray-400 absolute top-1/2 transform -translate-y-1/2 left-3"}),v.jsx("input",{id:"password",name:"password",type:m?"text":"password",autoComplete:"new-password",required:!0,onChange:S,className:"block w-full rounded-md border-gray-300 pl-10 pr-10 py-2.5 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm",placeholder:"Mot de passe"}),v.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",children:m?v.jsx(b_,{className:"h-5 w-5"}):v.jsx(pp,{className:"h-5 w-5"})})]}),v.jsxs("div",{className:"relative",children:[v.jsx(gp,{className:"pointer-events-none w-5 h-5 text-gray-400 absolute top-1/2 transform -translate-y-1/2 left-3"}),v.jsx("input",{id:"confirm-password",name:"confirmPassword",type:y?"text":"password",autoComplete:"new-password",required:!0,onChange:S,className:"block w-full rounded-md border-gray-300 pl-10 pr-10 py-2.5 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm",placeholder:"Confirmer le mot de passe"}),v.jsx("button",{type:"button",onClick:()=>x(!y),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",children:y?v.jsx(b_,{className:"h-5 w-5"}):v.jsx(pp,{className:"h-5 w-5"})})]}),v.jsxs("div",{className:"border-t border-gray-200 pt-6 space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"university",className:"block text-sm font-medium text-gray-700 mb-1",children:"Universit"}),v.jsx(Tr,{options:l,value:e.universityNom,onChange:T=>{t(M=>({...M,universityId:T?.id||"",universityNom:T?.name||"",faculteId:"",faculteNom:"",niveauId:"",niveauNom:""})),w([])},placeholder:"Rechercher une universit..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"faculte",className:"block text-sm font-medium text-gray-700 mb-1",children:"Facult"}),v.jsx(Tr,{options:d,value:e.faculteNom,onChange:T=>t(M=>({...M,faculteId:T?.id||"",faculteNom:T?.name||""})),placeholder:e.universityId?"Rechercher une facult...":"Slectionnez d'abord une universit",disabled:!e.universityId})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau d'tude"}),v.jsxs("select",{id:"level",name:"level",value:e.niveauId,onChange:T=>{const M=T.target.value,N=b.find(j=>j.id===M);t(j=>({...j,niveauId:M,niveauNom:N?.name||""}))},required:!0,className:"block w-full rounded-md border-gray-300 py-2.5 text-gray-900 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm",children:[v.jsx("option",{value:"",children:"Slectionner un niveau"}),b.map(T=>v.jsx("option",{value:T.id,children:T.name},T.id))]})]})]})]}),v.jsx("div",{children:v.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 px-4 rounded-md font-semibold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-sm hover:shadow-md transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed",children:r?"Inscription en cours...":"S'inscrire"})})]})]})})}function Ihe(){const[n,e]=E.useState(""),[t,r]=E.useState(!1),[i,a]=E.useState(null),[s,l]=E.useState(null),u=async d=>{d.preventDefault(),r(!0),a(null),l(null);try{const{error:f}=await oe.auth.resetPasswordForEmail(n,{redirectTo:`${window.location.origin}/reset-password`});f?a(f.message):l("Un email de rinitialisation a t envoy  votre adresse email.")}catch{a("Une erreur est survenue lors de la demande de rinitialisation.")}finally{r(!1)}};return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Rcupration de mot de passe"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Entrez votre adresse email pour recevoir un lien de rinitialisation"})]}),s&&v.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:s}),i&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:i}),v.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[v.jsx("div",{className:"rounded-md shadow-sm",children:v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Adresse email"}),v.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:d=>e(d.target.value),className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Adresse email"})]})}),v.jsx("div",{className:"flex items-center justify-between",children:v.jsx("div",{className:"text-sm",children:v.jsx(en,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Retour  la connexion"})})}),v.jsx("div",{children:v.jsx("button",{type:"submit",disabled:t,className:"w-full py-2.5 px-4 rounded-md font-medium text-white bg-blue-600 hover:bg-blue-700 focus:ring focus:ring-blue-300 focus:ring-opacity-50 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:t?"Envoi en cours...":"Envoyer le lien de rinitialisation"})})]})]})})}const Bhe=vz([{path:"/welcome",element:v.jsx(Ehe,{})},{path:"/login",element:v.jsx(The,{})},{path:"/register",element:v.jsx(Lhe,{})},{path:"/forgot-password",element:v.jsx(Ihe,{})},{path:"/",element:v.jsx(hH,{}),children:[{index:!0,element:v.jsx(NL,{to:"/welcome",replace:!0})},{element:v.jsx(f3,{}),children:[{path:"home",element:v.jsx(P9,{})},{path:"drives",element:v.jsx(k9,{})},{path:"livres",element:v.jsx(L9,{})},{path:"profil",element:v.jsx(I9,{})},{path:"modules/:moduleId/universites",element:v.jsx(B9,{})}]}]},{path:"/modules/:moduleId/universites/:universityId/sujets",element:v.jsx(F9,{})},{path:"/sujets/:sujetId",element:v.jsx(wW,{})},{path:"/profil/modifier",element:v.jsx(xW,{})},{path:"/profil/abonnement",element:v.jsx(AW,{})},{path:"/profil/equipe",element:v.jsx(TW,{})},{path:"/notifications",element:v.jsx(gX,{})},{path:"/writer",element:v.jsx(f3,{}),children:[{path:"dashboard",element:v.jsx(jhe,{})},{path:"add-subject",element:v.jsx(Nhe,{})},{path:"add-book",element:v.jsx(Mhe,{})},{path:"add-drive",element:v.jsx(Phe,{})},{path:"edit-subject/:subjectId",element:v.jsx(Rhe,{})},{path:"edit-book/:bookId",element:v.jsx(khe,{})},{path:"edit-drive/:driveId",element:v.jsx(Dhe,{})}]},{path:"/admin",element:v.jsx(yX,{}),children:[{index:!0,element:v.jsx(hhe,{})},{path:"users",element:v.jsx(mhe,{})},{path:"subjects",element:v.jsx(phe,{})},{path:"books",element:v.jsx(ghe,{})},{path:"drives",element:v.jsx(vhe,{})},{path:"modules",element:v.jsx(yhe,{})},{path:"reports",element:v.jsx(xhe,{})},{path:"faculties",element:v.jsx(_he,{})},{path:"revenues",element:v.jsx(She,{})},{path:"universities",element:v.jsx(Ahe,{})}]}]);function $he(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:s}=n;let l,u;const d=async(m=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(l=await al(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:m}},[]).then(({Workbox:m})=>new m("/ma-faculte/sw.js",{scope:"/ma-faculte/",type:"classic"})).catch(m=>{s?.(m)}),!l)return;l.addEventListener("activated",m=>{(m.isUpdate||m.isExternal)&&window.location.reload()}),l.addEventListener("installed",m=>{m.isUpdate||r?.()}),l.register({immediate:e}).then(m=>{a?a("/ma-faculte/sw.js",m):i?.(m)}).catch(m=>{s?.(m)})}}return u=f(),d}function Fhe(){const[n,e]=E.useState(!1),t=E.useMemo(()=>$he({immediate:!0,onNeedRefresh(){e(!0)}}),[]),r=()=>e(!1),i=()=>{t()};return v.jsxs(v.Fragment,{children:[v.jsx(Ez,{router:Bhe}),v.jsxs(Wr,{isOpen:n,onClose:r,title:"Mise  jour disponible",children:[v.jsx("p",{className:"text-sm text-gray-700",children:"Une nouvelle version de lapplication est prte. Voulez-vous lappliquer maintenant ?"}),v.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[v.jsx("button",{onClick:r,className:"px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100",children:"Plus tard"}),v.jsx("button",{onClick:i,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Mettre  jour"})]})]})]})}y8.createRoot(document.getElementById("root")).render(v.jsx(E.StrictMode,{children:v.jsx(YU,{children:v.jsx(WU,{children:v.jsx(Fhe,{})})})}));
